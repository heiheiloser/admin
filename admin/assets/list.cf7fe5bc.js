import{_ as L}from"./ListHeader.3c627458.js";import{_ as j}from"./FormDrawer.bf3acaa6.js";import{a as m}from"./index.73635d93.js";import{u as E,a as F}from"./useCommon.39802c06.js";import{ai as r,as as P,o as f,S as g,T as o,Z as t,u as e,U as X,X as b,a as Z}from"./@vue.81e65c16.js";import"./element-plus.aff2968d.js";import"./lodash-es.759d0354.js";import"./@vueuse.d6949a36.js";import"./universal-cookie.9008d64e.js";import"./cookie.ccf51230.js";import"./@element-plus.0ddfaa13.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./dayjs.8ff0c08c.js";import"./axios.23bc5756.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.4bc9703a.js";import"./vue-router.fe3267df.js";import"./vuex.5f15401c.js";import"./nprogress.18e92d20.js";function A(n){return m.get(`/admin/notice/${n}`)}function G(n){return m.post("/admin/notice",n)}function H(n,s){return m.post("/admin/notice/"+n,s)}function J(n){return m.post(`/admin/notice/${n}/delete`)}const K={class:"flex items-center justify-center mt-5"},we={__name:"list",setup(n){const{tableData:s,loading:h,currentPage:w,total:C,limit:x,getData:p,handleDelete:v}=E({getList:A,delete:J}),{formDrawerRef:y,formRef:V,form:a,rules:k,drawerTitle:D,handleSubmit:N,handleCreate:R,handleEdit:T}=F({form:{title:"",content:""},rules:{title:[{required:!0,message:"\u516C\u544A\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u516C\u544A\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},getData:p,update:H,create:G});return(M,i)=>{const c=r("el-table-column"),u=r("el-button"),$=r("el-popconfirm"),B=r("el-table"),z=r("el-pagination"),d=r("el-input"),_=r("el-form-item"),S=r("el-form"),U=r("el-card"),q=P("loading");return f(),g(U,{shadow:"never",class:"border-0"},{default:o(()=>[t(L,{onCreate:e(R),onRefresh:e(p)},null,8,["onCreate","onRefresh"]),X((f(),g(B,{data:e(s),stripe:"",style:{width:"100%"}},{default:o(()=>[t(c,{prop:"title",label:"\u516C\u544A\u6807\u9898"}),t(c,{prop:"create_time",label:"\u53D1\u5E03\u65F6\u95F4",width:"380"}),t(c,{label:"\u64CD\u4F5C",width:"180",align:"center"},{default:o(l=>[t(u,{type:"primary",size:"small",text:"",onClick:I=>e(T)(l.row)},{default:o(()=>[b("\u4FEE\u6539")]),_:2},1032,["onClick"]),t($,{title:"\u662F\u5426\u8981\u5220\u9664\u8BE5\u516C\u544A\uFF1F",confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",onConfirm:I=>e(v)(l.row.id)},{reference:o(()=>[t(u,{text:"",type:"primary",size:"small"},{default:o(()=>[b("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[q,e(h)]]),Z("div",K,[t(z,{background:"",layout:"prev, pager ,next",total:e(C),"current-page":e(w),"page-size":e(x),onCurrentChange:e(p)},null,8,["total","current-page","page-size","onCurrentChange"])]),t(j,{ref_key:"formDrawerRef",ref:y,title:e(D),onSubmit:e(N)},{default:o(()=>[t(S,{model:e(a),ref_key:"formRef",ref:V,rules:e(k),"label-width":"80px",inline:!1},{default:o(()=>[t(_,{label:"\u516C\u544A\u6807\u9898",prop:"title"},{default:o(()=>[t(d,{modelValue:e(a).title,"onUpdate:modelValue":i[0]||(i[0]=l=>e(a).title=l),placeholder:"\u516C\u544A\u6807\u9898"},null,8,["modelValue"])]),_:1}),t(_,{label:"\u516C\u544A\u5185\u5BB9",prop:"content"},{default:o(()=>[t(d,{modelValue:e(a).content,"onUpdate:modelValue":i[1]||(i[1]=l=>e(a).content=l),placeholder:"\u516C\u544A\u5185\u5BB9",type:"textarea",rows:5},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","onSubmit"])]),_:1})}}};export{we as default};
