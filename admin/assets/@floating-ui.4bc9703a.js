function $(t){return t.split("-")[1]}function Z(t){return t==="y"?"height":"width"}function j(t){return t.split("-")[0]}function I(t){return["top","bottom"].includes(j(t))?"x":"y"}function K(t,e,o){let{reference:n,floating:i}=t;const c=n.x+n.width/2-i.width/2,r=n.y+n.height/2-i.height/2,s=I(e),l=Z(s),f=n[l]/2-i[l]/2,d=j(e),a=s==="x";let u;switch(d){case"top":u={x:c,y:n.y-i.height};break;case"bottom":u={x:c,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:r};break;case"left":u={x:n.x-i.width,y:r};break;default:u={x:n.x,y:n.y}}switch($(e)){case"start":u[s]-=f*(o&&a?-1:1);break;case"end":u[s]+=f*(o&&a?-1:1);break}return u}const at=async(t,e,o)=>{const{placement:n="bottom",strategy:i="absolute",middleware:c=[],platform:r}=o,s=c.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(e));let f=await r.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:a}=K(f,n,l),u=n,h={},g=0;for(let x=0;x<s.length;x++){const{name:L,fn:m}=s[x],{x:w,y:v,data:O,reset:y}=await m({x:d,y:a,initialPlacement:n,placement:u,strategy:i,middlewareData:h,rects:f,platform:r,elements:{reference:t,floating:e}});if(d=w!=null?w:d,a=v!=null?v:a,h={...h,[L]:{...h[L],...O}},y&&g<=50){g++,typeof y=="object"&&(y.placement&&(u=y.placement),y.rects&&(f=y.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:i}):y.rects),{x:d,y:a}=K(f,u,l)),x=-1;continue}}return{x:d,y:a,placement:u,strategy:i,middlewareData:h}};function dt(t){return{top:0,right:0,bottom:0,left:0,...t}}function ht(t){return typeof t!="number"?dt(t):{top:t,right:t,bottom:t,left:t}}function tt(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const gt=Math.min,mt=Math.max;function pt(t,e,o){return mt(t,gt(e,o))}const Ft=t=>({name:"arrow",options:t,async fn(e){const{element:o,padding:n=0}=t||{},{x:i,y:c,placement:r,rects:s,platform:l,elements:f}=e;if(o==null)return{};const d=ht(n),a={x:i,y:c},u=I(r),h=Z(u),g=await l.getDimensions(o),x=u==="y",L=x?"top":"left",m=x?"bottom":"right",w=x?"clientHeight":"clientWidth",v=s.reference[h]+s.reference[u]-a[u]-s.floating[h],O=a[u]-s.reference[u],y=await(l.getOffsetParent==null?void 0:l.getOffsetParent(o));let V=y?y[w]:0;(!V||!await(l.isElement==null?void 0:l.isElement(y)))&&(V=f.floating[w]||s.floating[h]);const ft=v/2-O/2,k=d[L],z=V-g[h]-d[m],E=V/2-g[h]/2+ft,P=pt(k,E,z),ut=$(r)!=null&&E!=P&&s.reference[h]/2-(E<k?d[L]:d[m])-g[h]/2<0?E<k?k-E:z-E:0;return{[u]:a[u]-ut,data:{[u]:P,centerOffset:E-P}}}});async function wt(t,e){const{placement:o,platform:n,elements:i}=t,c=await(n.isRTL==null?void 0:n.isRTL(i.floating)),r=j(o),s=$(o),l=I(o)==="x",f=["left","top"].includes(r)?-1:1,d=c&&l?-1:1,a=typeof e=="function"?e(t):e;let{mainAxis:u,crossAxis:h,alignmentAxis:g}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...a};return s&&typeof g=="number"&&(h=s==="end"?g*-1:g),l?{x:h*d,y:u*f}:{x:u*f,y:h*d}}const Nt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,i=await wt(e,t);return{x:o+i.x,y:n+i.y,data:i}}}};function p(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function C(t){return p(t).getComputedStyle(t)}const U=Math.min,F=Math.max,W=Math.round;function et(t){const e=C(t);let o=parseFloat(e.width),n=parseFloat(e.height);const i=t.offsetWidth,c=t.offsetHeight,r=W(o)!==i||W(n)!==c;return r&&(o=i,n=c),{width:o,height:n,fallback:r}}function A(t){return ot(t)?(t.nodeName||"").toLowerCase():""}let S;function nt(){if(S)return S;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(S=t.brands.map(e=>e.brand+"/"+e.version).join(" "),S):navigator.userAgent}function b(t){return t instanceof p(t).HTMLElement}function R(t){return t instanceof p(t).Element}function ot(t){return t instanceof p(t).Node}function q(t){if(typeof ShadowRoot>"u")return!1;const e=p(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function M(t){const{overflow:e,overflowX:o,overflowY:n,display:i}=C(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(i)}function xt(t){return["table","td","th"].includes(A(t))}function X(t){const e=/firefox/i.test(nt()),o=C(t),n=o.backdropFilter||o.WebkitBackdropFilter;return o.transform!=="none"||o.perspective!=="none"||(n?n!=="none":!1)||e&&o.willChange==="filter"||e&&(o.filter?o.filter!=="none":!1)||["transform","perspective"].some(i=>o.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const c=o.contain;return c!=null?c.includes(i):!1})}function Y(){return/^((?!chrome|android).)*safari/i.test(nt())}function _(t){return["html","body","#document"].includes(A(t))}function it(t){return R(t)?t:t.contextElement}const st={x:1,y:1};function D(t){const e=it(t);if(!b(e))return st;const o=e.getBoundingClientRect(),{width:n,height:i,fallback:c}=et(e);let r=(c?W(o.width):o.width)/n,s=(c?W(o.height):o.height)/i;return(!r||!Number.isFinite(r))&&(r=1),(!s||!Number.isFinite(s))&&(s=1),{x:r,y:s}}function N(t,e,o,n){var i,c;e===void 0&&(e=!1),o===void 0&&(o=!1);const r=t.getBoundingClientRect(),s=it(t);let l=st;e&&(n?R(n)&&(l=D(n)):l=D(t));const f=s?p(s):window,d=Y()&&o;let a=(r.left+(d&&((i=f.visualViewport)==null?void 0:i.offsetLeft)||0))/l.x,u=(r.top+(d&&((c=f.visualViewport)==null?void 0:c.offsetTop)||0))/l.y,h=r.width/l.x,g=r.height/l.y;if(s){const x=p(s),L=n&&R(n)?p(n):n;let m=x.frameElement;for(;m&&n&&L!==x;){const w=D(m),v=m.getBoundingClientRect(),O=getComputedStyle(m);v.x+=(m.clientLeft+parseFloat(O.paddingLeft))*w.x,v.y+=(m.clientTop+parseFloat(O.paddingTop))*w.y,a*=w.x,u*=w.y,h*=w.x,g*=w.y,a+=v.x,u+=v.y,m=p(m).frameElement}}return tt({width:h,height:g,x:a,y:u})}function T(t){return((ot(t)?t.ownerDocument:t.document)||window.document).documentElement}function H(t){return R(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function yt(t){let{rect:e,offsetParent:o,strategy:n}=t;const i=b(o),c=T(o);if(o===c)return e;let r={scrollLeft:0,scrollTop:0},s={x:1,y:1};const l={x:0,y:0};if((i||!i&&n!=="fixed")&&((A(o)!=="body"||M(c))&&(r=H(o)),b(o))){const f=N(o);s=D(o),l.x=f.x+o.clientLeft,l.y=f.y+o.clientTop}return{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-r.scrollLeft*s.x+l.x,y:e.y*s.y-r.scrollTop*s.y+l.y}}function rt(t){return N(T(t)).left+H(t).scrollLeft}function bt(t){const e=T(t),o=H(t),n=t.ownerDocument.body,i=F(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),c=F(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let r=-o.scrollLeft+rt(t);const s=-o.scrollTop;return C(n).direction==="rtl"&&(r+=F(e.clientWidth,n.clientWidth)-i),{width:i,height:c,x:r,y:s}}function B(t){if(A(t)==="html")return t;const e=t.assignedSlot||t.parentNode||q(t)&&t.host||T(t);return q(e)?e.host:e}function ct(t){const e=B(t);return _(e)?e.ownerDocument.body:b(e)&&M(e)?e:ct(e)}function lt(t,e){var o;e===void 0&&(e=[]);const n=ct(t),i=n===((o=t.ownerDocument)==null?void 0:o.body),c=p(n);return i?e.concat(c,c.visualViewport||[],M(n)?n:[]):e.concat(n,lt(n))}function Ct(t,e){const o=p(t),n=T(t),i=o.visualViewport;let c=n.clientWidth,r=n.clientHeight,s=0,l=0;if(i){c=i.width,r=i.height;const f=Y();(!f||f&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:c,height:r,x:s,y:l}}function vt(t,e){const o=N(t,!0,e==="fixed"),n=o.top+t.clientTop,i=o.left+t.clientLeft,c=b(t)?D(t):{x:1,y:1},r=t.clientWidth*c.x,s=t.clientHeight*c.y,l=i*c.x,f=n*c.y;return{width:r,height:s,x:l,y:f}}function G(t,e,o){let n;if(e==="viewport")n=Ct(t,o);else if(e==="document")n=bt(T(t));else if(R(e))n=vt(e,o);else{const r={...e};if(Y()){var i,c;const s=p(t);r.x-=((i=s.visualViewport)==null?void 0:i.offsetLeft)||0,r.y-=((c=s.visualViewport)==null?void 0:c.offsetTop)||0}n=r}return tt(n)}function At(t,e){const o=e.get(t);if(o)return o;let n=lt(t).filter(s=>R(s)&&A(s)!=="body"),i=null;const c=C(t).position==="fixed";let r=c?B(t):t;for(;R(r)&&!_(r);){const s=C(r),l=X(r);s.position==="fixed"?i=null:(c?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position))?n=n.filter(a=>a!==r):i=s,r=B(r)}return e.set(t,n),n}function Rt(t){let{element:e,boundary:o,rootBoundary:n,strategy:i}=t;const r=[...o==="clippingAncestors"?At(e,this._c):[].concat(o),n],s=r[0],l=r.reduce((f,d)=>{const a=G(e,d,i);return f.top=F(a.top,f.top),f.right=U(a.right,f.right),f.bottom=U(a.bottom,f.bottom),f.left=F(a.left,f.left),f},G(e,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Tt(t){return b(t)?et(t):t.getBoundingClientRect()}function J(t,e){return!b(t)||C(t).position==="fixed"?null:e?e(t):t.offsetParent}function Lt(t){let e=B(t);for(;b(e)&&!_(e);){if(X(e))return e;e=B(e)}return null}function Q(t,e){const o=p(t);if(!b(t))return o;let n=J(t,e);for(;n&&xt(n)&&C(n).position==="static";)n=J(n,e);return n&&(A(n)==="html"||A(n)==="body"&&C(n).position==="static"&&!X(n))?o:n||Lt(t)||o}function Et(t,e,o){const n=b(e),i=T(e),c=N(t,!0,o==="fixed",e);let r={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(n||!n&&o!=="fixed")if((A(e)!=="body"||M(i))&&(r=H(e)),b(e)){const l=N(e,!0);s.x=l.x+e.clientLeft,s.y=l.y+e.clientTop}else i&&(s.x=rt(i));return{x:c.left+r.scrollLeft-s.x,y:c.top+r.scrollTop-s.y,width:c.width,height:c.height}}const Ot={getClippingRect:Rt,convertOffsetParentRelativeRectToViewportRelativeRect:yt,isElement:R,getDimensions:Tt,getOffsetParent:Q,getDocumentElement:T,getScale:D,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const i=this.getOffsetParent||Q,c=this.getDimensions;return{reference:Et(e,await i(o),n),floating:{x:0,y:0,...await c(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>C(t).direction==="rtl"},Bt=(t,e,o)=>{const n=new Map,i={platform:Ot,...o},c={...i.platform,_c:n};return at(t,e,{...i,platform:c})};export{Ft as a,Bt as c,Nt as o};
