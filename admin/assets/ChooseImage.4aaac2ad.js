import{_ as S,a as T}from"./ImageMain.fdfef588.js";import{t as D}from"./index.73635d93.js";import{r as p,ai as s,o as i,c as r,S as E,F as w,aa as L,Z as l,T as a,W as b,a as W,X as f}from"./@vue.81e65c16.js";const X={key:0},Z={key:1,class:"flex flex-wrap"},J={__name:"ChooseImage",props:{modelValue:[String,Array],limit:{type:Number,default:1},preview:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(o,{expose:I,emit:h}){const t=o,c=p(!1),_=p(null),g=(e=null)=>{_.value=e,c.value=!0},C=()=>c.value=!1,y=p(null),B=()=>y.value.handleCreate(),v=p(null),N=e=>v.value.loadData(e),z=()=>v.value.openUploadFile();let u=[];const A=e=>{u=e.map(n=>n.url)},F=()=>{let e=[];if(t.limit==1)e=u[0];else if(e=t.preview?[...t.modelValue,...u]:[...u],e.length>t.limit){let n=t.preview?t.limit-t.modelValue.length:t.limit;return D("\u6700\u591A\u8FD8\u80FD\u9009\u62E9"+n+"\u5F20")}e&&t.preview&&h("update:modelValue",e),!t.preview&&typeof _.value=="function"&&_.value(e),C()},R=e=>h("update:modelValue",t.modelValue.filter(n=>n!=e));return I({open:g}),(e,n)=>{const V=s("el-image"),U=s("CircleClose"),k=s("el-icon"),$=s("Plus"),d=s("el-button"),M=s("el-header"),x=s("el-container"),O=s("el-dialog");return i(),r(w,null,[o.modelValue&&o.preview?(i(),r("div",X,[typeof o.modelValue=="string"?(i(),E(V,{key:0,src:o.modelValue,fit:"cover",class:"w-[100px] h-[100px] rounded border mr-2"},null,8,["src"])):(i(),r("div",Z,[(i(!0),r(w,null,L(o.modelValue,(m,P)=>(i(),r("div",{class:"relative mx-1 mb-2 w-[100px] h-[100px]",key:P},[l(k,{class:"absolute right-[5px] top-[5px] cursor-pointer bg-white rounded-full",style:{"z-index":"10"},onClick:j=>R(m)},{default:a(()=>[l(U)]),_:2},1032,["onClick"]),l(V,{src:m,fit:"cover",class:"w-[100px] h-[100px] rounded border mr-2"},null,8,["src"])]))),128))]))])):b("",!0),o.preview?(i(),r("div",{key:1,class:"choose-image-btn",onClick:g},[l(k,{size:25,class:"text-gray-500"},{default:a(()=>[l($)]),_:1})])):b("",!0),l(O,{title:"\u9009\u62E9\u56FE\u7247",modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=m=>c.value=m),width:"80%",top:"5vh"},{footer:a(()=>[W("span",null,[l(d,{onClick:C},{default:a(()=>[f("\u53D6\u6D88")]),_:1}),l(d,{type:"primary",onClick:F},{default:a(()=>[f("\u786E\u5B9A")]),_:1})])]),default:a(()=>[l(x,{class:"bg-white rounded",style:{height:"70vh"}},{default:a(()=>[l(M,{class:"image-header"},{default:a(()=>[l(d,{type:"primary",size:"small",onClick:B},{default:a(()=>[f("\u65B0\u589E\u56FE\u7247\u5206\u7C7B")]),_:1}),l(d,{type:"warning",size:"small",onClick:z},{default:a(()=>[f("\u4E0A\u4F20\u56FE\u7247")]),_:1})]),_:1}),l(x,null,{default:a(()=>[l(S,{ref_key:"ImageAsideRef",ref:y,onChange:N},null,512),l(T,{limit:o.limit,openChoose:"",ref_key:"ImageMainRef",ref:v,onChoose:A},null,8,["limit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{J as _};
