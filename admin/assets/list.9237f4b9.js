import{_ as F}from"./ListHeader.3c627458.js";import{_ as P}from"./FormDrawer.bf3acaa6.js";import{a as c}from"./index.73635d93.js";import{u as X,a as Z}from"./useCommon.39802c06.js";import{ai as s,as as A,o as x,S as h,T as a,Z as t,u as e,U as G,X as _,a as i}from"./@vue.81e65c16.js";import"./element-plus.aff2968d.js";import"./lodash-es.759d0354.js";import"./@vueuse.d6949a36.js";import"./universal-cookie.9008d64e.js";import"./cookie.ccf51230.js";import"./@element-plus.0ddfaa13.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./dayjs.8ff0c08c.js";import"./axios.23bc5756.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.4bc9703a.js";import"./vue-router.fe3267df.js";import"./vuex.5f15401c.js";import"./nprogress.18e92d20.js";function H(r){return c.get(`/admin/user_level/${r}`)}function J(r){return c.post("/admin/user_level",r)}function K(r,m){return c.post("/admin/user_level/"+r,m)}function M(r){return c.post(`/admin/user_level/${r}/delete`)}function O(r,m){return c.post(`/admin/user_level/${r}/update_status`,{status:m})}const Q={class:"flex items-center justify-center mt-5"},W=i("small",{class:"text-xs mr-2"},"\u7D2F\u8BA1\u6D88\u8D39\u6EE1",-1),Y=i("small",{class:"text-gray-400 flex"}," \u8BBE\u7F6E\u4F1A\u5458\u7B49\u7EA7\u6240\u9700\u8981\u7684\u7D2F\u8BA1\u6D88\u8D39\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E0,\u5355\u4F4D\uFF1A\u5143 ",-1),ee=i("small",{class:"text-xs mr-2"},"\u7D2F\u8BA1\u6B21\u6570\u6EE1",-1),te=i("small",{class:"text-gray-400 flex"}," \u8BBE\u7F6E\u4F1A\u5458\u7B49\u7EA7\u6240\u9700\u8981\u7684\u8D2D\u4E70\u91CF\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E0,\u5355\u4F4D\uFF1A\u7B14 ",-1),le=i("small",{class:"text-gray-400 flex"}," \u6298\u6263\u7387\u5355\u4F4D\u4E3A\u767E\u5206\u6BD4\uFF0C\u5982\u8F93\u516590\uFF0C\u8868\u793A\u8BE5\u4F1A\u5458\u7B49\u7EA7\u7684\u7528\u6237\u53EF\u4EE5\u4EE5\u5546\u54C1\u539F\u4EF7\u768490%\u8D2D\u4E70 ",-1),ke={__name:"list",setup(r){const{tableData:m,loading:V,currentPage:y,total:C,limit:w,getData:f,handleDelete:U,handleStatusChange:L}=X({getList:H,delete:M,updateStatus:O}),{formDrawerRef:k,formRef:D,form:o,rules:S,drawerTitle:$,handleSubmit:R,handleCreate:T,handleEdit:B}=Z({form:{name:"",level:100,status:1,discount:0,max_price:0,max_times:0},rules:{name:[{required:!0,message:"\u4F1A\u5458\u7B49\u7EA7\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},getData:f,update:K,create:J});return(ae,n)=>{const u=s("el-table-column"),g=s("el-switch"),b=s("el-button"),z=s("el-popconfirm"),N=s("el-table"),I=s("el-pagination"),d=s("el-input"),p=s("el-form-item"),j=s("el-form"),q=s("el-card"),E=A("loading");return x(),h(q,{shadow:"never",class:"border-0"},{default:a(()=>[t(F,{onCreate:e(T),onRefresh:e(f)},null,8,["onCreate","onRefresh"]),G((x(),h(N,{data:e(m),stripe:"",style:{width:"100%"}},{default:a(()=>[t(u,{prop:"name",label:"\u4F1A\u5458\u7B49\u7EA7"}),t(u,{prop:"discount",label:"\u6298\u6263\u7387",align:"center"}),t(u,{prop:"level",label:"\u7B49\u7EA7\u5E8F\u53F7",align:"center"}),t(u,{label:"\u72B6\u6001",width:"120"},{default:a(({row:l})=>[t(g,{modelValue:l.status,"active-value":1,"inactive-value":0,loading:l.statusLoading,disabled:l.super==1,onChange:v=>e(L)(v,l)},null,8,["modelValue","loading","disabled","onChange"])]),_:1}),t(u,{label:"\u64CD\u4F5C",width:"250",align:"center"},{default:a(l=>[t(b,{type:"primary",size:"small",text:"",onClick:v=>e(B)(l.row)},{default:a(()=>[_("\u4FEE\u6539")]),_:2},1032,["onClick"]),t(z,{title:"\u662F\u5426\u8981\u5220\u9664\u8BE5\u8BB0\u5F55\uFF1F",confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",onConfirm:v=>e(U)(l.row.id)},{reference:a(()=>[t(b,{text:"",type:"primary",size:"small"},{default:a(()=>[_("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[E,e(V)]]),i("div",Q,[t(I,{background:"",layout:"prev, pager ,next",total:e(C),"current-page":e(y),"page-size":e(w),onCurrentChange:e(f)},null,8,["total","current-page","page-size","onCurrentChange"])]),t(P,{ref_key:"formDrawerRef",ref:k,title:e($),onSubmit:e(R)},{default:a(()=>[t(j,{model:e(o),ref_key:"formRef",ref:D,rules:e(S),"label-width":"80px",inline:!1},{default:a(()=>[t(p,{label:"\u7B49\u7EA7\u540D\u79F0",prop:"name"},{default:a(()=>[t(d,{modelValue:e(o).name,"onUpdate:modelValue":n[0]||(n[0]=l=>e(o).name=l),placeholder:"\u7B49\u7EA7\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u7B49\u7EA7\u6743\u91CD",prop:"level"},{default:a(()=>[t(d,{type:"number",modelValue:e(o).level,"onUpdate:modelValue":n[1]||(n[1]=l=>e(o).level=l),placeholder:"\u7B49\u7EA7\u6743\u91CD"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[t(g,{modelValue:e(o).status,"onUpdate:modelValue":n[2]||(n[2]=l=>e(o).status=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),t(p,{label:"\u5347\u7EA7\u6761\u4EF6"},{default:a(()=>[i("div",null,[W,t(d,{type:"number",modelValue:e(o).max_price,"onUpdate:modelValue":n[3]||(n[3]=l=>e(o).max_price=l),placeholder:"\u7D2F\u8BA1\u6D88\u8D39",style:{width:"50%"}},{append:a(()=>[_("\u5143")]),_:1},8,["modelValue"]),Y]),i("div",null,[ee,t(d,{type:"number",modelValue:e(o).max_times,"onUpdate:modelValue":n[4]||(n[4]=l=>e(o).max_times=l),placeholder:"\u7D2F\u8BA1\u6B21\u6570",style:{width:"50%"}},{append:a(()=>[_("%")]),_:1},8,["modelValue"]),te])]),_:1}),t(p,{label:"\u6298\u6263\u7387(%)",prop:"discount"},{default:a(()=>[t(d,{type:"number",modelValue:e(o).discount,"onUpdate:modelValue":n[5]||(n[5]=l=>e(o).discount=l),placeholder:"\u6298\u6263\u7387(%)",style:{width:"50%"}},{append:a(()=>[_("%")]),_:1},8,["modelValue"]),le]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","onSubmit"])]),_:1})}}};export{ke as default};
