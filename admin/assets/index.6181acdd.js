import{g as q,a as O,b as H}from"./distribution.03eee042.js";import{r as F,ai as a,o as _,S as h,T as t,c as C,F as B,aa as I,Z as e,a as p,W as U,O as J,Y as b,p as K,as as E,u as l,X as u,U as W}from"./@vue.81e65c16.js";import{u as X}from"./useCommon.39802c06.js";import{_ as Q,a as R}from"./SearchItem.584b0c12.js";import"./index.73635d93.js";import"./element-plus.aff2968d.js";import"./lodash-es.759d0354.js";import"./@vueuse.d6949a36.js";import"./universal-cookie.9008d64e.js";import"./cookie.ccf51230.js";import"./@element-plus.0ddfaa13.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./dayjs.8ff0c08c.js";import"./axios.23bc5756.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.4bc9703a.js";import"./vue-router.fe3267df.js";import"./vuex.5f15401c.js";import"./nprogress.18e92d20.js";const ee={class:"flex justify-between"},te={class:"flex items-center"},le={class:"ml-2"},ae={class:"text-lg font-bold"},oe={class:"text-xs text-gray-400"},ne={__name:"panel",setup(M){const c=F([]),v=F(!1);return v.value=!0,q().then(k=>{c.value=k.panels,console.log(k.panels)}).finally(()=>{v.value=!1}),(k,Y)=>{const o=a("el-skeleton-item"),V=a("el-card"),z=a("el-skeleton"),D=a("el-col"),x=a("User"),$=a("ShoppingCart"),w=a("PriceTag"),y=a("Timer"),m=a("el-icon"),f=a("el-row");return _(),h(f,{gutter:20,class:"mb-5"},{default:t(()=>[v.value?(_(),C(B,{key:0},I(4,r=>e(D,{span:6,key:r},{default:t(()=>[e(z,{style:{width:"100%"},animated:"",loading:""},{template:t(()=>[e(V,{shadow:"hover",class:"border-0"},{header:t(()=>[p("div",ee,[e(o,{variant:"text",style:{width:"50%"}}),e(o,{variant:"text",style:{width:"10%"}})])]),default:t(()=>[e(o,{variant:"h3",style:{width:"80%"}})]),_:1})]),_:1})]),_:2},1024)),64)):U("",!0),(_(!0),C(B,null,I(c.value,(r,i)=>(_(),h(D,{span:6,offset:0,key:i},{default:t(()=>[e(V,{shadow:"never"},{default:t(()=>[p("div",te,[e(m,{size:20,class:J([r.color,"text-white w-[40px] h-[40px] rounded-full"])},{default:t(()=>[i==0?(_(),h(x,{key:0})):U("",!0),i==1?(_(),h($,{key:1})):U("",!0),i==2?(_(),h(w,{key:2})):U("",!0),i==3?(_(),h(y,{key:3})):U("",!0)]),_:2},1032,["class"]),p("div",le,[p("h2",ae,b(r.value),1),p("small",oe,b(r.label),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1})}}},re=p("img",{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"},null,-1),se={key:0},de={key:1},ie={class:"flex items-center justify-center mt-5"},G={__name:"dataDrawer",props:{type:{type:String,default:"user"}},setup(M,{expose:c}){const v=M,k=K(()=>v.type==="user"?"\u63A8\u5E7F\u4EBA\u5217\u8868":"\u63A8\u5E7F\u8BA2\u5355\u5217\u8868"),Y=F(!1),{searchForm:o,tableData:V,loading:z,currentPage:D,total:x,limit:$,getData:w}=X({searchForm:{type:"all",starttime:null,endtime:null,level:0,user_id:0},getList:(()=>v.type==="user"?O:H)(),onGetListSuccess:f=>{V.value=f.list,x.value=f.totalCount}}),y=()=>{o.type="all",o.starttime=null,o.endtime=null,o.level=0};return c({open:f=>{Y.value=!0,o.user_id=f,w()}}),(f,r)=>{const i=a("el-radio-button"),T=a("el-radio-group"),d=a("el-form-item"),L=a("el-date-picker"),S=a("el-button"),N=a("el-form"),g=a("el-table-column"),P=a("el-avatar"),j=a("el-table"),n=a("el-pagination"),A=a("el-drawer"),Z=E("loading");return _(),h(A,{title:l(k),modelValue:Y.value,"onUpdate:modelValue":r[4]||(r[4]=s=>Y.value=s),size:"70%"},{default:t(()=>[e(N,{model:l(o),size:"small"},{default:t(()=>[e(d,{label:"\u65F6\u95F4\u9009\u62E9"},{default:t(()=>[e(T,{modelValue:l(o).type,"onUpdate:modelValue":r[0]||(r[0]=s=>l(o).type=s)},{default:t(()=>[e(i,{label:"all"},{default:t(()=>[u("\u5168\u90E8")]),_:1}),e(i,{label:"today"},{default:t(()=>[u("\u4ECA\u5929")]),_:1}),e(i,{label:"yesterday"},{default:t(()=>[u("\u6628\u5929")]),_:1}),e(i,{label:"last7days"},{default:t(()=>[u("\u6700\u8FD17\u5929")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"\u5F00\u59CB\u65F6\u95F4"},{default:t(()=>[e(L,{modelValue:l(o).starttime,"onUpdate:modelValue":r[1]||(r[1]=s=>l(o).starttime=s),type:"date",placeholder:"\u5F00\u59CB\u65E5\u671F",style:{width:"90%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u7ED3\u675F\u65F6\u95F4"},{default:t(()=>[e(L,{modelValue:l(o).endtime,"onUpdate:modelValue":r[2]||(r[2]=s=>l(o).endtime=s),type:"date",placeholder:"\u7ED3\u675F\u65E5\u671F",style:{width:"90%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u7528\u6237\u7C7B\u578B"},{default:t(()=>[e(T,{modelValue:l(o).level,"onUpdate:modelValue":r[3]||(r[3]=s=>l(o).level=s)},{default:t(()=>[e(i,{label:0},{default:t(()=>[u("\u5168\u90E8")]),_:1}),e(i,{label:1},{default:t(()=>[u("\u4E00\u7EA7\u63A8\u5E7F")]),_:1}),e(i,{label:2},{default:t(()=>[u("\u4E8C\u7EA7\u63A8\u5E7F")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(S,{type:"primary",onClick:l(w)},{default:t(()=>[u("\u641C\u7D22")]),_:1},8,["onClick"]),e(S,{onClick:y},{default:t(()=>[u("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),W((_(),h(j,{data:l(V),stripe:"",style:{width:"100%"}},{default:t(()=>[M.type==="user"?(_(),C(B,{key:0},[e(g,{label:"ID",prop:"id",align:"center"}),e(g,{label:"\u5934\u50CF",width:"65"},{default:t(({row:s})=>[e(P,{size:40,src:s.avatar},{default:t(()=>[re]),_:2},1032,["src"])]),_:1}),e(g,{label:"\u7528\u6237\u4FE1\u606F",prop:"username"}),e(g,{label:"\u63A8\u5E7F\u6570",prop:"share_num",align:"center"}),e(g,{label:"\u63A8\u5E7F\u8BA2\u5355\u6570",prop:"share_order_num",align:"center"}),e(g,{label:"\u7ED1\u5B9A\u65F6\u95F4",prop:"create_time",align:"center"})],64)):(_(),C(B,{key:1},[e(g,{label:"\u8BA2\u5355\u53F7"},{default:t(({row:s})=>[u(b(s.order.no),1)]),_:1}),e(g,{label:"\u7528\u6237\u540D|\u6635\u79F0|\u624B\u673A"},{default:t(({row:s})=>[s.order.user?(_(),C("div",de,b(s.order.user.username)+"|"+b(s.order.user.nickname)+"|"+b(s.order.user.phone),1)):(_(),C("div",se," \u8BE5\u7528\u6237\u5DF2\u88AB\u5220\u9664 "))]),_:1}),e(g,{label:"\u65F6\u95F4",prop:"create_time"}),e(g,{label:"\u8FD4\u4F63\u91D1\u989D",prop:"commission"})],64))]),_:1},8,["data"])),[[Z,l(z)]]),p("div",ie,[e(n,{background:"",layout:"prev, pager ,next",total:l(x),"current-page":l(D),"page-size":l($),onCurrentChange:l(w)},null,8,["total","current-page","page-size","onCurrentChange"])])]),_:1},8,["title","modelValue"])}}},ue=p("img",{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"},null,-1),_e={class:"text-xs"},ce={class:"flex items-center justify-center mt-5"},Re={__name:"index",setup(M){const{searchForm:c,resetSearchForm:v,tableData:k,loading:Y,currentPage:o,total:V,limit:z,getData:D}=X({searchForm:{keyword:"",type:"all",starttime:null,endtime:null},getList:O,onGetListSuccess:y=>{k.value=y.list,V.value=y.totalCount}}),x=F(null),$=F(null),w=(y,m)=>{(m=="user"?x:$).value.open(y)};return(y,m)=>{const f=a("el-radio-button"),r=a("el-radio-group"),i=a("el-date-picker"),T=a("el-input"),d=a("el-table-column"),L=a("el-avatar"),S=a("el-button"),N=a("el-table"),g=a("el-pagination"),P=a("el-card"),j=E("loading");return _(),C("div",null,[e(ne),e(P,{shadow:"never",class:"border-0"},{default:t(()=>[e(Q,{model:l(c),onSearch:l(D),onReset:l(v)},{show:t(()=>[e(R,{label:"\u5F00\u59CB\u65F6\u95F4"},{default:t(()=>[e(i,{modelValue:l(c).starttime,"onUpdate:modelValue":m[1]||(m[1]=n=>l(c).starttime=n),type:"date",placeholder:"\u5F00\u59CB\u65E5\u671F",style:{width:"90%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(R,{label:"\u7ED3\u675F\u65F6\u95F4"},{default:t(()=>[e(i,{modelValue:l(c).endtime,"onUpdate:modelValue":m[2]||(m[2]=n=>l(c).endtime=n),type:"date",placeholder:"\u7ED3\u675F\u65E5\u671F",style:{width:"90%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(R,{label:"\u5173\u952E\u8BCD"},{default:t(()=>[e(T,{modelValue:l(c).keyword,"onUpdate:modelValue":m[3]||(m[3]=n=>l(c).keyword=n),placeholder:"\u5173\u952E\u8BCD",clearable:""},null,8,["modelValue"])]),_:1})]),default:t(()=>[e(R,{label:"\u65F6\u95F4\u9009\u62E9"},{default:t(()=>[e(r,{modelValue:l(c).type,"onUpdate:modelValue":m[0]||(m[0]=n=>l(c).type=n)},{default:t(()=>[e(f,{label:"all"},{default:t(()=>[u("\u5168\u90E8")]),_:1}),e(f,{label:"today"},{default:t(()=>[u("\u4ECA\u5929")]),_:1}),e(f,{label:"yesterday"},{default:t(()=>[u("\u6628\u5929")]),_:1}),e(f,{label:"last7days"},{default:t(()=>[u("\u6700\u8FD17\u5929")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","onSearch","onReset"]),W((_(),h(N,{data:l(k),stripe:"",style:{width:"100%"}},{default:t(()=>[e(d,{label:"ID",prop:"id",align:"center"}),e(d,{label:"\u5934\u50CF",width:"65"},{default:t(({row:n})=>[e(L,{size:40,src:n.avatar},{default:t(()=>[ue]),_:2},1032,["src"])]),_:1}),e(d,{label:"\u7528\u6237\u4FE1\u606F",width:"200"},{default:t(({row:n})=>[p("div",_e,[p("p",null,"\u7528\u6237\uFF1A"+b(n.username),1),p("p",null,"\u6635\u79F0\uFF1A"+b(n.nickname),1),p("p",null,"\u59D3\u540D\uFF1A"+b(n.user_info.name),1),p("p",null,"\u7535\u8BDD\uFF1A"+b(n.phone),1)])]),_:1}),e(d,{label:"\u63A8\u5E7F\u7528\u6237\u6570\u91CF",prop:"share_num",align:"center"}),e(d,{label:"\u8BA2\u5355\u6570\u91CF",prop:"share_order_num",align:"center"}),e(d,{label:"\u8BA2\u5355\u91D1\u989D",prop:"order_price",align:"center"}),e(d,{label:"\u8D26\u6237\u4F63\u91D1",prop:"commission",align:"center"}),e(d,{label:"\u5DF2\u63D0\u73B0\u91D1\u989D",prop:"cash_out_price",align:"center"}),e(d,{label:"\u63D0\u73B0\u6B21\u6570",prop:"cash_out_time",align:"center"}),e(d,{label:"\u672A\u63D0\u73B0\u91D1\u989D",prop:"no_cash_out_price",align:"center"}),e(d,{fixed:"right",label:"\u64CD\u4F5C",width:"180",align:"center"},{default:t(({row:n})=>[e(S,{type:"primary",size:"small",text:"",onClick:A=>w(n.id,"user")},{default:t(()=>[u("\u63A8\u5E7F\u4EBA")]),_:2},1032,["onClick"]),e(S,{type:"primary",size:"small",text:"",onClick:A=>w(n.id,"order")},{default:t(()=>[u("\u63A8\u5E7F\u8BA2\u5355")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,l(Y)]]),p("div",ce,[e(g,{background:"",layout:"prev, pager ,next",total:l(V),"current-page":l(o),"page-size":l(z),onCurrentChange:l(D)},null,8,["total","current-page","page-size","onCurrentChange"])])]),_:1}),e(G,{ref_key:"dataDrawerRef",ref:x},null,512),e(G,{ref_key:"orderDataDrawerRef",ref:$,type:"order"},null,512)])}}};export{Re as default};
