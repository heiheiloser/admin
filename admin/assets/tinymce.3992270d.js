var SW={exports:{}};(function(Fo){(function(){var ko=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},mo=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Jn=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},An=function(e,n){return so(function(o,r){return e.eq(n(o),n(r))})},so=function(e){return{eq:e}},Qn=so(function(e,n){return e===n}),qt=Qn,Kt=function(e){return so(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Ct=function(e,n){return An(Kt(e),function(o){return Jn(o,n)})},Tn=function(e){return so(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Ct(qt).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},ao=so(function(e,n){if(e===n)return!0;var o=ko(e),r=ko(n);return o!==r?!1:mo(o)?e===n:o==="array"?Kt(ao).eq(e,n):o==="object"?Tn(ao).eq(e,n):!1});const Zt=Object.getPrototypeOf,yt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Rt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&yt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},an=e=>n=>Rt(n)===e,qe=e=>n=>typeof n===e,rt=e=>n=>e===n,Oe=(e,n)=>bt(e)&&yt(e,n,(o,r)=>Zt(o)===r),oe=an("string"),bt=an("object"),Ft=e=>Oe(e,Object),wt=an("array"),Y=rt(null),At=qe("boolean"),On=rt(void 0),Nt=e=>e==null,we=e=>!Nt(e),Q=qe("function"),ct=qe("number"),Pe=(e,n)=>{if(wt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Ne=()=>{},Ot=(e,n)=>(...o)=>e(n.apply(null,o)),_=(e,n)=>o=>e(n(o)),ge=e=>()=>e,Ue=e=>e,Ie=(e,n)=>e===n;function _e(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const jt=e=>n=>!e(n),nn=e=>()=>{throw new Error(e)},ze=e=>e(),It=e=>{e()},Et=ge(!1),Ve=ge(!0);class R{constructor(n,o){this.tag=n,this.value=o}static some(n){return new R(!0,n)}static none(){return R.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?R.some(n(this.value)):R.none()}bind(n){return this.tag?n(this.value):R.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:R.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n!=null?n:"Called getOrDie on None")}static from(n){return we(n)?R.some(n):R.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}R.singletonNone=new R(!1);const zn=Array.prototype.slice,Ee=Array.prototype.indexOf,xe=Array.prototype.push,We=(e,n)=>Ee.call(e,n),ke=(e,n)=>{const o=We(e,n);return o===-1?R.none():R.some(o)},ae=(e,n)=>We(e,n)>-1,se=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},re=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},z=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},K=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},H=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},Z=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},$e=(e,n,o)=>(K(e,(r,c)=>{o=n(o,r,c)}),o),Be=(e,n,o)=>(z(e,(r,c)=>{o=n(o,r,c)}),o),zt=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return R.some(u);if(o(u,r))break}return R.none()},Jt=(e,n)=>zt(e,n,Et),eo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return R.some(o)}return R.none()},co=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!wt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);xe.apply(n,e[o])}return n},jn=(e,n)=>co(re(e,n)),pn=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},to=e=>{const n=zn.call(e,0);return n.reverse(),n},De=(e,n)=>Z(e,o=>!ae(n,o)),Ye=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Dt=(e,n)=>{const o=zn.call(e,0);return o.sort(n),o},on=(e,n)=>n>=0&&n<e.length?R.some(e[n]):R.none(),wn=e=>on(e,0),bn=e=>on(e,e.length-1),Oo=Q(Array.from)?Array.from:e=>zn.call(e),xs=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return R.none()},Ge=(e,n)=>{const o=[],r=Q(n)?c=>se(o,u=>n(u,c)):c=>ae(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},Le=Object.keys,tn=Object.hasOwnProperty,en=(e,n)=>{const o=Le(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},Ut=(e,n)=>Vn(e,(o,r)=>({k:r,v:n(o,r)})),Vn=(e,n)=>{const o={};return en(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},ks=e=>(n,o)=>{e[o]=n},kr=(e,n,o,r)=>{en(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},da=(e,n)=>{const o={},r={};return kr(e,n,ks(o),ks(r)),{t:o,f:r}},ps=(e,n)=>{const o={};return kr(e,n,ks(o),Ne),o},bc=(e,n)=>{const o=[];return en(e,(r,c)=>{o.push(n(r,c))}),o},vs=e=>bc(e,Ue),as=(e,n)=>uo(e,n)?R.from(e[n]):R.none(),uo=(e,n)=>tn.call(e,n),dr=(e,n)=>uo(e,n)&&e[n]!==void 0&&e[n]!==null,Wr=(e,n,o=ao)=>Tn(o).eq(e,n),Fs=e=>{const n={};return z(e,o=>{n[o]={}}),Le(n)},ma=e=>e.length!==void 0,Zr=Array.isArray,sc=e=>{if(Zr(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Ys=(e,n,o)=>{if(!e)return!1;if(o=o||e,ma(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(uo(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},ka=(e,n)=>{const o=[];return Ys(e,(r,c)=>{o.push(n(r,c,e))}),o},ve=(e,n)=>{const o=[];return Ys(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},q=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},st=(e,n,o,r)=>{let c=On(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},ht=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},In=e=>e[e.length-1],Gn=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Rn=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!y,N=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,P=!x&&!y&&!N;return{isiPad:ge(c),isiPhone:ge(u),isTablet:ge(y),isPhone:ge(x),isTouch:ge(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ge(N),isDesktop:ge(P)}},cs=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},es=(e,n)=>{const o=cs(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Bt(r(1),r(2))},Co=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?rr():es(e,o)},rr=()=>Bt(0,0),Bt=(e,n)=>({major:e,minor:n}),fe={nu:Bt,detect:Co,unknown:rr},pe=(e,n)=>xs(n.brands,o=>{const r=o.brand.toLowerCase();return Jt(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:fe.nu(parseInt(o.version,10),0)}))}),kt=(e,n)=>{const o=String(n).toLowerCase();return Jt(e,r=>r.search(o))},Qt=(e,n)=>kt(e,n).map(o=>{const r=fe.detect(o.versionRegexes,n);return{current:o.name,version:r}}),rn=(e,n)=>kt(e,n).map(o=>{const r=fe.detect(o.versionRegexes,n);return{current:o.name,version:r}}),_n=(e,n)=>e.substring(n),dn=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Mn=(e,n)=>vo(e,n)?_n(e,n.length):e,Kn=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?On(r)?!0:c+n.length<=r:!1},vo=(e,n)=>dn(e,n,0),As=(e,n)=>dn(e,n,e.length-n.length),mr=e=>n=>n.replace(e,""),Go=mr(/^\s+|\s+$/g),qc=mr(/^\s+/g),is=mr(/\s+$/g),ws=e=>e.length>0,Ss=e=>!ws(e),Pr=(e,n)=>n<=0?"":new Array(n+1).join(e),Rr=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?R.none():R.some(o)},$c=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pa=e=>n=>Kn(n,e),Kc=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Kn(e,"edge/")&&Kn(e,"chrome")&&Kn(e,"safari")&&Kn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$c],search:e=>Kn(e,"chrome")&&!Kn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Kn(e,"msie")||Kn(e,"trident")},{name:"Opera",versionRegexes:[$c,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pa("firefox")},{name:"Safari",versionRegexes:[$c,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Kn(e,"safari")||Kn(e,"mobile/"))&&Kn(e,"applewebkit")}],ki=[{name:"Windows",search:Pa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Kn(e,"iphone")||Kn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Pa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pa("linux"),versionRegexes:[]},{name:"Solaris",search:Pa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Yc={browsers:ge(Kc),oses:ge(ki)},Ii="Edge",Hs="Chromium",di="IE",fa="Opera",rc="Firefox",mi="Safari",Bc=()=>oa({current:void 0,version:fe.unknown()}),oa=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Ii),isChromium:r(Hs),isIE:r(di),isOpera:r(fa),isFirefox:r(rc),isSafari:r(mi)}},Ti={unknown:Bc,nu:oa,edge:ge(Ii),chromium:ge(Hs),ie:ge(di),opera:ge(fa),firefox:ge(rc),safari:ge(mi)},vc="Windows",Li="iOS",Xs="Android",ga="Linux",X="macOS",Ce="Solaris",Fe="FreeBSD",pt="ChromeOS",Vt=()=>io({current:void 0,version:fe.unknown()}),io=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(vc),isiOS:r(Li),isAndroid:r(Xs),isMacOS:r(X),isLinux:r(ga),isSolaris:r(Ce),isFreeBSD:r(Fe),isChromeOS:r(pt)}},qo={unknown:Vt,nu:io,windows:ge(vc),ios:ge(Li),android:ge(Xs),linux:ge(ga),macos:ge(X),solaris:ge(Ce),freebsd:ge(Fe),chromeos:ge(pt)},Is={detect:(e,n,o)=>{const r=Yc.browsers(),c=Yc.oses(),u=n.bind(y=>pe(r,y)).orThunk(()=>Qt(r,e)).fold(Ti.unknown,Ti.nu),f=rn(c,e).fold(qo.unknown,qo.nu),b=Rn(f,u,e,o);return{browser:u,os:f,deviceType:b}}},Nr=e=>window.matchMedia(e).matches;let Er=Gn(()=>Is.detect(navigator.userAgent,R.from(navigator.userAgentData),Nr));const Mr=()=>Er(),Fa=navigator.userAgent,jr=Mr(),Jr=jr.browser,Xc=jr.os,Jc=jr.deviceType,So=Fa.indexOf("Windows Phone")!==-1,ls={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Jr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Jr.isIE(),windowsPhone:So,browser:{current:Jr.current,version:Jr.version,isChromium:Jr.isChromium,isEdge:Jr.isEdge,isFirefox:Jr.isFirefox,isIE:Jr.isIE,isOpera:Jr.isOpera,isSafari:Jr.isSafari},os:{current:Xc.current,version:Xc.version,isAndroid:Xc.isAndroid,isChromeOS:Xc.isChromeOS,isFreeBSD:Xc.isFreeBSD,isiOS:Xc.isiOS,isLinux:Xc.isLinux,isMacOS:Xc.isMacOS,isSolaris:Xc.isSolaris,isWindows:Xc.isWindows},deviceType:{isDesktop:Jc.isDesktop,isiPad:Jc.isiPad,isiPhone:Jc.isiPhone,isPhone:Jc.isPhone,isTablet:Jc.isTablet,isTouch:Jc.isTouch,isWebView:Jc.isWebView}},or=/^\s*|\s*$/g,B=e=>Nt(e)?"":(""+e).replace(or,""),J=(e,n)=>n?n==="array"&&Zr(e)?!0:typeof e===n:e!==void 0,de=(e,n,o={})=>{const r=oe(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Xe=uo,kn=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(uo(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Do=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Ys(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Do(c,n,o,r),!0)))},_t={trim:B,isArray:Zr,is:J,toArray:sc,makeMap:de,each:Ys,map:ka,grep:ve,inArray:q,hasOwn:Xe,extend:kn,walk:Do,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>wt(e)?e:e===""?[]:ka(e.split(n||","),B),_addCacheSuffix:e=>{const n=ls.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},sa=(e,n,o=Ie)=>e.exists(r=>o(r,n)),Js=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Vr=(e,n,o)=>e.isSome()&&n.isSome()?R.some(o(e.getOrDie(),n.getOrDie())):R.none(),tl=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?R.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):R.none(),$o=(e,n)=>e?R.some(n):R.none();typeof window<"u"||Function("return this;")();const te=8,me=9,Qe=11,ut=1,Bn=3,Yn=e=>e.dom.nodeName.toLowerCase(),Gs=e=>e.dom.nodeType,Ko=e=>n=>Gs(n)===e,Hi=e=>Gs(e)===te||Yn(e)==="#comment",Jo=Ko(ut),Os=Ko(Bn),Ta=Ko(me),ac=Ko(Qe),zi=e=>n=>Jo(n)&&Yn(n)===e,gr=(e,n,o)=>{if(oe(o)||At(o)||ct(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},nr=(e,n,o)=>{gr(e.dom,n,o)},Ds=(e,n)=>{const o=e.dom;en(n,(r,c)=>{gr(o,c,r)})},Ir=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},yc=(e,n)=>R.from(Ir(e,n)),Tl=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Gr=(e,n)=>{e.dom.removeAttribute(n)},jl=e=>{const n=e.dom.attributes;return n==null||n.length===0},vu=e=>Be(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),cc=(e,n)=>{const o=Ir(e,n);return o===void 0||o===""?[]:o.split(" ")},yu=(e,n,o)=>{const c=cc(e,n).concat([o]);return nr(e,n,c.join(" ")),!0},Vg=(e,n,o)=>{const r=Z(cc(e,n),c=>c!==o);return r.length>0?nr(e,n,r.join(" ")):Gr(e,n),!1},Pc=e=>e.dom.classList!==void 0,El=e=>cc(e,"class"),od=(e,n)=>yu(e,"class",n),Ia=(e,n)=>Vg(e,"class",n),nl=(e,n)=>ae(El(e),n)?Ia(e,n):od(e,n),wu=(e,n)=>{Pc(e)?e.dom.classList.add(n):od(e,n)},Pd=e=>{(Pc(e)?e.dom.classList:El(e)).length===0&&Gr(e,"class")},Gl=(e,n)=>{Pc(e)?e.dom.classList.remove(n):Ia(e,n),Pd(e)},_m=(e,n)=>{const o=Pc(e)?e.dom.classList.toggle(n):nl(e,n);return Pd(e),o},Fd=(e,n)=>Pc(e)&&e.dom.classList.contains(n),Ei=e=>e.style!==void 0&&Q(e.style.getPropertyValue),Ug=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Id(r.childNodes[0])},Am=(e,n)=>{const r=(n||document).createElement(e);return Id(r)},Cu=(e,n)=>{const r=(n||document).createTextNode(e);return Id(r)},Id=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},be={fromHtml:Ug,fromTag:Am,fromText:Cu,fromDom:Id,fromPoint:(e,n,o)=>R.from(e.dom.elementFromPoint(n,o)).map(Id)},ql=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Ai=(e,n)=>{const o=e.dom;if(o.nodeType!==ut)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Om=e=>e.nodeType!==ut&&e.nodeType!==me&&e.nodeType!==Qe||e.childElementCount===0,Dm=(e,n)=>{const o=n===void 0?document:n.dom;return Om(o)?[]:re(o.querySelectorAll(e),be.fromDom)},Wg=(e,n)=>{const o=n===void 0?document:n.dom;return Om(o)?R.none():R.from(o.querySelector(e)).map(be.fromDom)},$s=(e,n)=>e.dom===n.dom,Ga=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Nf=e=>be.fromDom(e.dom.ownerDocument),Vi=e=>Ta(e)?e:Nf(e),Rm=e=>be.fromDom(Vi(e).dom.documentElement),Su=e=>be.fromDom(Vi(e).dom.defaultView),wc=e=>R.from(e.dom.parentNode).map(be.fromDom),Mf=e=>R.from(e.dom.parentElement).map(be.fromDom),sd=(e,n)=>{const o=Q(n)?n:Et;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=be.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Zg=e=>{const n=o=>Z(o,r=>!$s(e,r));return wc(e).map(ha).map(n).getOr([])},Fc=e=>R.from(e.dom.previousSibling).map(be.fromDom),Ld=e=>R.from(e.dom.nextSibling).map(be.fromDom),Nm=e=>to(ql(e,Fc)),rd=e=>ql(e,Ld),ha=e=>re(e.dom.childNodes,be.fromDom),Hd=(e,n)=>{const o=e.dom.childNodes;return R.from(o[n]).map(be.fromDom)},$f=e=>Hd(e,0),Mm=e=>Hd(e,e.dom.childNodes.length-1),xu=e=>e.dom.childNodes.length,jg=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return be.fromDom(n)},$m=e=>ac(e)&&we(e.dom.host),Cc=Q(Element.prototype.attachShadow)&&Q(Node.prototype.getRootNode),Gg=ge(Cc),ol=Cc?e=>be.fromDom(e.dom.getRootNode()):Vi,ad=e=>$m(e)?e:jg(Vi(e)),Kl=e=>$m(e)?e:be.fromDom(Vi(e).dom.body),Ui=e=>{const n=ol(e);return $m(n)?R.some(n):R.none()},qg=e=>be.fromDom(e.dom.host),Kg=e=>{if(Gg()&&we(e.target)){const n=be.fromDom(e.target);if(Jo(n)&&Bf(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return wn(o)}}return R.from(e.target)},Bf=e=>we(e.dom.shadowRoot),sl=e=>{const n=Os(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Ui(be.fromDom(n)).fold(()=>o.body.contains(n),_(sl,qg))},E=(e,n,o)=>{if(!oe(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Ei(e)&&e.style.setProperty(n,o)},$=(e,n)=>{Ei(e)&&e.style.removeProperty(n)},j=(e,n,o)=>{const r=e.dom;E(r,n,o)},Se=(e,n)=>{const o=e.dom;en(n,(r,c)=>{E(o,c,r)})},He=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!sl(e)?mn(o,n):c},mn=(e,n)=>Ei(e)?e.style.getPropertyValue(n):"",yo=(e,n)=>{const o=e.dom,r=mn(o,n);return R.from(r).filter(c=>c.length>0)},ts=e=>{const n={},o=e.dom;if(Ei(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Zo=(e,n)=>{const o=e.dom;$(o,n),sa(yc(e,"style").map(Go),"")&&Gr(e,"style")},qn=e=>e.dom.offsetWidth,ns=(e,n)=>{wc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},_r=(e,n)=>{Ld(e).fold(()=>{wc(e).each(c=>{Qr(c,n)})},r=>{ns(r,n)})},qa=(e,n)=>{$f(e).fold(()=>{Qr(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Qr=(e,n)=>{e.dom.appendChild(n.dom)},Bm=(e,n)=>{ns(e,n),Qr(n,e)},Cv=(e,n)=>{z(n,(o,r)=>{const c=r===0?e:n[r-1];_r(c,o)})},Bo=(e,n)=>{z(n,o=>{Qr(e,o)})},Lr=e=>{e.dom.textContent="",z(ha(e),n=>{Bs(n)})},Bs=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},ic=e=>{const n=ha(e);n.length>0&&Cv(e,n),Bs(e)},La=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,ha(be.fromDom(r))},Pf=e=>re(e,be.fromDom),Ff=e=>e.dom.innerHTML,Yg=(e,n)=>{const r=Nf(e).dom,c=be.fromDom(r.createDocumentFragment()),u=La(n,r);Bo(c,u),Lr(e),Qr(e,c)},Yl=e=>{const n=be.fromTag("div"),o=be.fromDom(e.dom.cloneNode(!0));return Qr(n,o),Ff(n)},If=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),Sv=e=>{const n=be.fromDom(Kg(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=Ot(r,o);return If(n,e.clientX,e.clientY,o,r,c,e)},y2=(e,n)=>o=>{e(o)&&n(Sv(o))},qr=(e,n,o,r,c)=>{const u=y2(o,r);return e.dom.addEventListener(n,u,c),{unbind:_e(n1,e,n,u,c)}},Xg=(e,n,o,r)=>qr(e,n,o,r,!1),n1=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},gp=(e,n)=>({left:e,top:n,translate:(r,c)=>gp(e+r,n+c)}),Lf=gp,o1=e=>{const n=e.getBoundingClientRect();return Lf(n.left,n.top)},cd=(e,n)=>e!==void 0?e:n!==void 0?n:0,hr=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Lf(o.offsetLeft,o.offsetTop);const u=cd(r==null?void 0:r.pageYOffset,c.scrollTop),f=cd(r==null?void 0:r.pageXOffset,c.scrollLeft),b=cd(c.clientTop,o.clientTop),y=cd(c.clientLeft,o.clientLeft);return Lo(e).translate(f-y,u-b)},Lo=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Lf(r.offsetLeft,r.offsetTop):sl(e)?o1(n):Lf(0,0)},lc=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Lf(o,r)},Xl=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},ku=(e,n)=>{Mr().browser.isSafari()&&Q(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Jg=e=>{const n=e===void 0?window:e;return Mr().browser.isFirefox()?R.none():R.from(n.visualViewport)},Pm=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),s1=e=>{const n=e===void 0?window:e,o=n.document,r=lc(be.fromDom(o));return Jg(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Pm(r.left,r.top,u,f)},c=>Pm(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},r1=(e,n)=>Z(ha(e),n),Fm=(e,n)=>{let o=[];return z(ha(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Fm(r,n))}),o};var Qg=(e,n,o,r,c)=>e(o,r)?R.some(o):Q(c)&&c(o)?R.none():n(o,r,c);const Im=(e,n,o)=>{let r=e.dom;const c=Q(o)?o:Et;for(;r.parentNode;){r=r.parentNode;const u=be.fromDom(r);if(n(u))return R.some(u);if(c(u))break}return R.none()},_l=(e,n,o)=>Qg((c,u)=>u(c),Im,e,n,o),Al=(e,n)=>{const o=e.dom;return o.parentNode?xv(be.fromDom(o.parentNode),r=>!$s(e,r)&&n(r)):R.none()},xv=(e,n)=>{const o=c=>n(be.fromDom(c));return Jt(e.dom.childNodes,o).map(be.fromDom)},id=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=be.fromDom(r.childNodes[c]);if(n(u))return R.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return R.none()};return o(e.dom)},Tu=(e,n,o)=>Im(e,r=>Ai(r,n),o),Hf=(e,n)=>Wg(n,e),ld=(e,n,o)=>Qg((c,u)=>Ai(c,u),Tu,e,n,o),eh=(e,n,o)=>Tu(e,n,o).isSome();class pa{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Wi=e=>n=>!!n&&n.nodeType===e,Lm=e=>!!e&&!Object.getPrototypeOf(e),En=Wi(1),Hm=e=>{const n=e.toLowerCase();return o=>we(o)&&o.nodeName.toLowerCase()===n},rl=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return ae(n,r)}return!1}},th=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(En(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},nh=e=>n=>En(n)&&n.hasAttribute(e),w2=(e,n)=>o=>En(o)&&o.getAttribute(e)===n,Eu=e=>En(e)&&e.hasAttribute("data-mce-bogus"),jk=e=>En(e)&&e.getAttribute("data-mce-bogus")==="all",Ka=e=>En(e)&&e.tagName==="TABLE",ro=e=>n=>!!(En(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Qc=rl(["textarea","input"]),Lt=Wi(3),a1=Wi(4),c1=Wi(7),al=Wi(8),ei=Wi(9),zm=Wi(11),Ur=Hm("br"),Ea=Hm("img"),ti=ro("true"),ar=ro("false"),_u=rl(["td","th"]),i1=rl(["td","th","caption"]),Jl=rl(["video","audio","object","embed"]),oh=Hm("li"),Vm="\uFEFF",ra="\xA0",sh=e=>e===Vm,Um=e=>e.replace(/\uFEFF/g,""),Rs=(e,n)=>Dm(n,e),Sc=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?R.from(u.dom.nodeValue):R.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Os,"text"),eu=e=>Sc.get(e),fi=e=>Sc.getOption(e),l1=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Ya=["td","th"],xc=["thead","tbody","tfoot"],hp=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Tt=["h1","h2","h3","h4","h5","h6"],Oi=["li","dd","dt"],kv=["ul","ol","dl"],aa=["pre","script","textarea","style"],zf=["pre"].concat(Tt),ud=e=>{let n;return o=>(n=n||Ye(e,Ve),uo(n,Yn(o)))},ba=ud(l1),Tv=e=>Yn(e)==="table",cl=e=>Jo(e)&&!ba(e),tu=e=>Jo(e)&&Yn(e)==="br",gi=ud(hp),Ns=ud(kv),Zi=ud(Oi),zd=ud(xc),Xa=ud(Ya),Vf=ud(aa),Uf=ud(zf),Wf=e=>Uf(e)||cl(e),hi=e=>{const n=[];let o=e.dom;for(;o;)n.push(be.fromDom(o)),o=o.lastChild;return n},pp=e=>{const n=Rs(e,"br"),o=Z(hi(e).slice(-1),tu);n.length===o.length&&z(o,Bs)},Ke=()=>{const e=be.fromTag("br");return nr(e,"data-mce-bogus","1"),e},_a=e=>{Lr(e),Qr(e,Ke())},u1=e=>{Mm(e).each(n=>{Fc(n).each(o=>{ba(e)&&tu(n)&&ba(o)&&Bs(n)})})},yr=Vm,il=sh,Aa=Um,Oa=En,C=Lt,k=e=>(C(e)&&(e=e.parentNode),Oa(e)&&e.hasAttribute("data-mce-caret")),I=e=>C(e)&&il(e.data),V=e=>k(e)||I(e),Te=e=>e.firstChild!==e.lastChild||!Ur(e.firstChild),dt=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(yr),u=e.parentNode;if(n){const f=e.previousSibling;if(C(f)){if(V(f))return f;if(cr(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(C(f)){if(V(f))return f;if(jo(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},Ht=e=>{const n=e.container();return Lt(n)?n.data.charAt(e.offset())===yr||e.isAtStart()&&I(n.previousSibling):!1},xn=e=>{const n=e.container();return Lt(n)?n.data.charAt(e.offset()-1)===yr||e.isAtEnd()&&I(n.nextSibling):!1},Io=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Ke().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},jo=e=>C(e)&&e.data[0]===yr,cr=e=>C(e)&&e.data[e.data.length-1]===yr,Us=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Eu(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Qs=e=>e&&e.hasAttribute("data-mce-caret")?(Us(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,ni=e=>k(e.startContainer),ll=ti,Au=ar,dd=Ur,rh=Lt,md=rl(["script","style","textarea"]),Ou=rl(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Wm=rl(["table"]),Du=V,pi=e=>Du(e)?!1:rh(e)?!md(e.parentNode):Ou(e)||dd(e)||Wm(e)||bp(e),ah=e=>En(e)&&e.getAttribute("unselectable")==="true",bp=e=>!ah(e)&&Au(e),Ev=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(bp(o))return!1;if(ll(o))return!0}return!0},Eo=e=>bp(e)?!Be(Oo(e.getElementsByTagName("*")),(n,o)=>n||ll(o),!1):!1,er=e=>Ou(e)||Eo(e),Ha=(e,n)=>pi(e)&&Ev(e,n),Ic=/^[ \t\r\n]*$/,Ol=e=>Ic.test(e),Lc=e=>" \f	\v".indexOf(e)!==-1,Di=e=>e===`
`||e==="\r",Ru=(e,n)=>n<e.length&&n>=0?Di(e[n]):!1,vp=(e,n=4,o=!0,r=!0)=>{const c=Pr(" ",n),u=e.replace(/\t/g,c);return Be(u,(b,y)=>Lc(y)||y===ra?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Ru(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+ra}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Di(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},Vd=(e,n)=>{const o=be.fromDom(n),r=be.fromDom(e);return eh(r,"pre,code",_e($s,o))},Zm=(e,n)=>Lt(e)&&Ol(e.data)&&!Vd(e,n),Gk=e=>En(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),jm=(e,n)=>pi(e)&&!Zm(e,n)||Gk(e)||qk(e),qk=nh("data-mce-bookmark"),Zf=nh("data-mce-bogus"),yp=w2("data-mce-bogus","all"),wp=(e,n)=>{let o=0;if(jm(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new pa(r,e);do{if(n){if(yp(r)){r=c.next(!0);continue}if(Zf(r)){r=c.next();continue}}if(Ur(r)){o++,r=c.next();continue}if(jm(r,e))return!1;r=c.next()}while(r);return o<=1}},va=(e,n=!0)=>wp(e.dom,n),Ud="data-mce-block",Kk=e=>Z(Le(e),n=>!/[A-Z]/.test(n)),d1=e=>Kk(e).join(","),ea=(e,n)=>we(n.querySelector(e))?(n.setAttribute(Ud,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Ud),!1),C2=(e,n)=>{const o=d1(e.getTransparentElements()),r=d1(e.getBlockElements());return Z(n.querySelectorAll(o),c=>ea(r,c))},Wd=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(va(be.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},Cp=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();Wd(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Wd(u,!1),va(be.fromDom(c))||r.insertBefore(c,e),va(be.fromDom(n))||r.insertBefore(n,e),va(be.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},_v=(e,n,o)=>{const r=e.getBlockElements(),c=be.fromDom(n),u=b=>Yn(b)in r,f=b=>$s(b,c);z(Pf(o),b=>{Im(b,u,f).each(y=>{const x=r1(b,N=>u(N)&&!e.isValidChild(Yn(y),Yn(N)));if(x.length>0){const N=Mf(y);z(x,P=>{Im(P,u,f).each(L=>{Cp(L.dom,P.dom)})}),N.each(P=>C2(e,P.dom))}})})},nu=(e,n)=>{const o=C2(e,n);_v(e,n,o)},ul=(e,n)=>{if(Sp(e,n)){const o=d1(e.getBlockElements());ea(o,n)}},Gm=(e,n,o)=>{const r=u=>$s(u,be.fromDom(n)),c=sd(be.fromDom(o),r);on(c,c.length-2).filter(Jo).fold(()=>nu(e,n),u=>nu(e,u.dom))},ch=e=>e.hasAttribute(Ud),m1=(e,n)=>uo(e.getTransparentElements(),n),Sp=(e,n)=>En(n)&&m1(e,n.nodeName),jf=(e,n)=>Sp(e,n)&&ch(n),f1=(e,n)=>n.type===1&&m1(e,n.name)&&oe(n.attr(Ud)),S2=(e,n)=>n.type===1&&m1(e,n.name)&&On(n.attr(Ud)),Yk=Mr().browser,g1=e=>Jt(e,Jo),xp=e=>Yk.isFirefox()&&Yn(e)==="table"?g1(ha(e)).filter(n=>Yn(n)==="caption").bind(n=>g1(rd(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,fd=(e,n)=>e.children&&ae(e.children,n),ih=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&He(be.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!fd(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!fd(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=xp(be.fromDom(n))}return{x:r,y:c}},Zd=(e,n={})=>{let o=0;const r={},c=be.fromDom(e),u=Vi(c),f=ee=>{n.referrerPolicy=ee},b=ee=>{n.contentCssCors=ee},y=ee=>{Qr(ad(c),ee)},x=ee=>{const ue=ad(c);Hf(ue,"#"+ee).each(Bs)},N=ee=>as(r,ee).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),P=ee=>new Promise((ue,Re)=>{let Ae;const je=_t._addCacheSuffix(ee),et=N(je);r[je]=et,et.count++;const xt=(Je,Sn)=>{z(Je,It),et.status=Sn,et.passed=[],et.failed=[],Ae&&(Ae.onload=null,Ae.onerror=null,Ae=null)},un=()=>xt(et.passed,2),Xt=()=>xt(et.failed,3);if(ue&&et.passed.push(ue),Re&&et.failed.push(Re),et.status===1)return;if(et.status===2){un();return}if(et.status===3){Xt();return}et.status=1;const lt=be.fromTag("link",u.dom);Ds(lt,{rel:"stylesheet",type:"text/css",id:et.id}),n.contentCssCors&&nr(lt,"crossOrigin","anonymous"),n.referrerPolicy&&nr(lt,"referrerpolicy",n.referrerPolicy),Ae=lt.dom,Ae.onload=un,Ae.onerror=Xt,y(lt),nr(lt,"href",je)}),L=ee=>Promise.allSettled(re(ee,Re=>P(Re).then(ge(Re)))).then(Re=>{const Ae=H(Re,je=>je.status==="fulfilled");return Ae.fail.length>0?Promise.reject(re(Ae.fail,je=>je.reason)):re(Ae.pass,je=>je.value)}),ce=ee=>{const ue=_t._addCacheSuffix(ee);as(r,ue).each(Re=>{--Re.count===0&&(delete r[ue],x(Re.id))})};return{load:P,loadAll:L,unload:ce,unloadAll:ee=>{z(ee,ue=>{ce(ue)})},_setReferrerPolicy:f,_setContentCssCors:b}},kp=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=ol(o).dom;return R.from(e.get(u)).getOrThunk(()=>{const f=Zd(u,r);return e.set(u,f),f})}}})(),Av=e=>e.nodeName.toLowerCase()==="span",p1=(e,n)=>we(e)&&(jm(e,n)||cl(be.fromDom(e))),x2=(e,n)=>{const o=new pa(e,n).prev(!1),r=new pa(e,n).next(!1),c=On(o)||p1(o,n),u=On(r)||p1(r,n);return c&&u},Ov=e=>Av(e)&&e.getAttribute("data-mce-type")==="bookmark",b1=(e,n)=>Lt(e)&&e.data.length>0&&x2(e,n),zs=e=>En(e)?e.childNodes.length>0:!1,po=e=>zm(e)||ei(e),jd=(e,n,o)=>{var r;const c=o||n;if(En(n)&&Ov(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)jd(e,u[f],c);if(En(n)){const f=n.childNodes;f.length===1&&Ov(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!po(n)&&!jm(n,c)&&!zs(n)&&!b1(n,c)&&e.remove(n),n},Dv=_t.makeMap,Gd=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v1=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,k2=/[<>&\"\']/g,ir=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,T2={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},qd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},E2={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Pt=e=>{const n=be.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},gd=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!qd[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},lh=gd("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Tp=(e,n)=>e.replace(n?Gd:v1,o=>qd[o]||o),Xk=e=>(""+e).replace(k2,n=>qd[n]||n),Gf=(e,n)=>e.replace(n?Gd:v1,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":qd[o]||"&#"+o.charCodeAt(0)+";"),uh=(e,n,o)=>{const r=o||lh;return e.replace(n?Gd:v1,c=>qd[c]||r[c]||c)},Ja={encodeRaw:Tp,encodeAllRaw:Xk,encodeNumeric:Gf,encodeNamed:uh,getEncodeFunc:(e,n)=>{const o=gd(n)||lh,r=(f,b)=>f.replace(b?Gd:v1,y=>qd[y]!==void 0?qd[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>uh(f,b,o),u=Dv(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:uh:u.numeric?Gf:Tp},decode:e=>e.replace(ir,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):T2[o]||String.fromCharCode(o)):E2[n]||lh[n]||Pt(n))},Hr={},Dl={},Jk={},dl=_t.makeMap,oi=_t.each,Kd=_t.extend,qm=_t.explode,A2=_t.inArray,kc=(e,n)=>(e=_t.trim(e),e?e.split(n||" "):[]),O2=(e,n={})=>{const o=dl(e," ",dl(e.toUpperCase()," "));return Kd(o,n)},D2=e=>O2("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Km=e=>{const n={};let o,r,c,u;const f=(y,x="",N="")=>{const P=kc(N),L=kc(y);let ce=L.length;for(;ce--;){const ie=kc([o,x].join(" "));n[L[ce]]={attributes:Ye(ie,()=>({})),attributesOrder:ie,children:Ye(P,ge(Jk))}}},b=(y,x)=>{const N=kc(y),P=kc(x);let L=N.length;for(;L--;){const ce=n[N[L]];for(let ie=0,ee=P.length;ie<ee;ie++)ce.attributes[P[ie]]={},ce.attributesOrder.push(P[ie])}};if(Hr[e])return Hr[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const y="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+y,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const y="acronym applet basefont big font strike tt";c=[c,y].join(" "),oi(kc(y),N=>{f(N,"",c)});const x="center dir isindex noframes";r=[r,x].join(" "),u=[r,c].join(" "),oi(kc(x),N=>{f(N,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("address dt dd div caption","",u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&z([n.video,n.audio],y=>{delete y.children.audio,delete y.children.video}),oi(kc("a form meter progress dfn"),y=>{n[y]&&delete n[y].children[y]}),delete n.caption.children.table,delete n.script,Hr[e]=n,n},Rv=(e,n)=>{if(e){const o={};return oe(e)&&(e={"*":e}),oi(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?dl(r,/[, ]/):qm(r,/[, ]/)}),o}else return},Nu=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(Ro,Ps,xa)=>{const vr=e[Ro];if(vr)return dl(vr,/[, ]/,dl(vr.toUpperCase(),/[, ]/));{let Yr=Dl[Ro];return Yr||(Yr=O2(Ps,xa),Dl[Ro]=Yr),Yr}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",x=Km(y);e.verify_html===!1&&(e.valid_elements="*[*]");const N=Rv(e.valid_styles),P=Rv(e.invalid_styles,"map"),L=Rv(e.valid_classes,"map"),ce=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ie=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),ee=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ue=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Re="td th iframe video audio object script code",Ae=b("non_empty_elements",Re+" pre",ee),je=b("move_caret_before_on_enter_elements",Re+" table",ee),et=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),xt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",et),un=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Xt=b("transparent_elements","a ins del canvas map");oi("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Ro=>{f[Ro]=new RegExp("</"+Ro+"[^>]*>","gi")});const lt=Ro=>new RegExp("^"+Ro.replace(/([?+*])/g,".$1")+"$"),Je=Ro=>{const Ps=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,xa=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,vr=/[*?+]/;if(Ro){const Yr=kc(Ro,",");let ua,Br;o["@"]&&(ua=o["@"].attributes,Br=o["@"].attributesOrder);for(let $a=0,gu=Yr.length;$a<gu;$a++){let ui=Ps.exec(Yr[$a]);if(ui){const Sm=ui[1],hu=ui[2],Yb=ui[3],Xb=ui[5],xm={},$d=[],Xr={attributes:xm,attributesOrder:$d};if(Sm==="#"&&(Xr.paddEmpty=!0),Sm==="-"&&(Xr.removeEmpty=!0),ui[4]==="!"&&(Xr.removeEmptyAttrs=!0),ua&&(en(ua,(Ju,km)=>{xm[km]=Ju}),Br&&$d.push(...Br)),Xb){const Ju=kc(Xb,"|");for(let km=0,Qu=Ju.length;km<Qu;km++)if(ui=xa.exec(Ju[km]),ui){const ed={},Tm=ui[1],Mc=ui[2].replace(/[\\:]:/g,":"),Em=ui[3],Rf=ui[4];if(Tm==="!"&&(Xr.attributesRequired=Xr.attributesRequired||[],Xr.attributesRequired.push(Mc),ed.required=!0),Tm==="-"){delete xm[Mc],$d.splice(A2($d,Mc),1);continue}if(Em&&(Em==="="&&(Xr.attributesDefault=Xr.attributesDefault||[],Xr.attributesDefault.push({name:Mc,value:Rf}),ed.defaultValue=Rf),Em==="~"&&(Xr.attributesForced=Xr.attributesForced||[],Xr.attributesForced.push({name:Mc,value:Rf}),ed.forcedValue=Rf),Em==="<"&&(ed.validValues=dl(Rf,"?"))),vr.test(Mc)){const td=ed;Xr.attributePatterns=Xr.attributePatterns||[],td.pattern=lt(Mc),Xr.attributePatterns.push(td)}else xm[Mc]||$d.push(Mc),xm[Mc]=ed}}if(!ua&&hu==="@"&&(ua=xm,Br=$d),Yb&&(Xr.outputName=hu,o[Yb]=Xr),vr.test(hu)){const Ju=Xr;Ju.pattern=lt(hu),c.push(Ju)}else o[hu]=Xr}}}},Sn=Ro=>{c=[],z(Le(o),Ps=>{delete o[Ps]}),Je(Ro),oi(x,(Ps,xa)=>{r[xa]=Ps.children})},no=Ro=>{const Ps=/^(~)?(.+)$/;Ro&&(delete Dl.text_block_elements,delete Dl.block_elements,oi(kc(Ro,","),xa=>{const vr=Ps.exec(xa);if(vr){const Yr=vr[1]==="~",ua=Yr?"span":"div",Br=vr[2];if(r[Br]=r[ua],u[Br]=ua,Ae[Br.toUpperCase()]={},Ae[Br]={},Yr||(xt[Br.toUpperCase()]={},xt[Br]={}),!o[Br]){let $a=o[ua];$a=Kd({},$a),delete $a.removeEmptyAttrs,delete $a.removeEmpty,o[Br]=$a}oi(r,($a,gu)=>{$a[ua]&&(r[gu]=$a=Kd({},r[gu]),$a[Br]=$a[ua])})}}))},lo=Ro=>{const Ps=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Hr[y],Ro&&oi(kc(Ro,","),xa=>{const vr=Ps.exec(xa);if(vr){const Yr=vr[1];let ua;Yr?ua=r[vr[2]]:ua=r[vr[2]]={"#comment":{}},ua=r[vr[2]],oi(kc(vr[3],"|"),Br=>{Yr==="-"?delete ua[Br]:ua[Br]={}})}})},Vo=Ro=>{const Ps=o[Ro];if(Ps)return Ps;let xa=c.length;for(;xa--;){const vr=c[xa];if(vr.pattern.test(Ro))return vr}};e.valid_elements?Sn(e.valid_elements):(oi(x,(Ro,Ps)=>{o[Ps]={attributes:Ro.attributes,attributesOrder:Ro.attributesOrder},r[Ps]=Ro.children}),oi(kc("strong/b em/i"),Ro=>{const Ps=kc(Ro,"/");o[Ps[1]].outputName=Ps[0]}),oi(un,(Ro,Ps)=>{o[Ps]&&(e.padd_empty_block_inline_children&&(o[Ps].paddInEmptyBlock=!0),o[Ps].removeEmpty=!0)}),oi(kc("ol ul blockquote a table tbody"),Ro=>{o[Ro]&&(o[Ro].removeEmpty=!0)}),oi(kc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Ro=>{o[Ro].paddEmpty=!0}),oi(kc("span"),Ro=>{o[Ro].removeEmptyAttrs=!0})),no(e.custom_elements),lo(e.valid_children),Je(e.extended_valid_elements),lo("+ol[ul|ol],+ul[ul|ol]"),oi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Ro,Ps)=>{o[Ps]&&(o[Ps].parentsRequired=kc(Ro))}),e.invalid_elements&&oi(qm(e.invalid_elements),Ro=>{o[Ro]&&delete o[Ro]}),Vo("span")||Je("span[!data-mce-type|*]");const bs=ge(N),js=ge(P),Ws=ge(L),Ma=ge(ue),Si=ge(xt),Gt=ge(et),Uo=ge(un),go=ge(Object.seal(ee)),Or=ge(ie),Cn=ge(Ae),Ao=ge(je),wo=ge(ce),hn=ge(Xt),fs=ge(Object.seal(f)),rs=(Ro,Ps)=>{const xa=r[Ro.toLowerCase()];return!!(xa&&xa[Ps.toLowerCase()])},oc=(Ro,Ps)=>{const xa=Vo(Ro);if(xa)if(Ps){if(xa.attributes[Ps])return!0;const vr=xa.attributePatterns;if(vr){let Yr=vr.length;for(;Yr--;)if(vr[Yr].pattern.test(Ps))return!0}}else return!0;return!1},Sr=ge(u);return{type:y,children:r,elements:o,getValidStyles:bs,getValidClasses:Ws,getBlockElements:Si,getInvalidStyles:js,getVoidElements:go,getTextBlockElements:Gt,getTextInlineElements:Uo,getBoolAttrs:Ma,getElementRule:Vo,getSelfClosingElements:Or,getNonEmptyElements:Cn,getMoveCaretBeforeOnEnterElements:Ao,getWhitespaceElements:wo,getTransparentElements:hn,getSpecialElements:fs,isValidChild:rs,isValid:oc,getCustomElements:Sr,addValidElements:Je,setValidElements:Sn,addCustomElements:no,addValidChildren:lo}},y1=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const y=Vm;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let P=0;P<x.length;P++)u[x[P]]=y+P,u[y+P]=x[P];const N={parse:P=>{const L={};let ce=!1;const ie=e.url_converter,ee=e.url_converter_scope||N,ue=(lt,Je,Sn)=>{const no=L[lt+"-top"+Je];if(!no)return;const lo=L[lt+"-right"+Je];if(!lo)return;const Vo=L[lt+"-bottom"+Je];if(!Vo)return;const bs=L[lt+"-left"+Je];if(!bs)return;const js=[no,lo,Vo,bs];let Ws=js.length-1;for(;Ws--&&js[Ws]===js[Ws+1];);Ws>-1&&Sn||(L[lt+Je]=Ws===-1?js[0]:js.join(" "),delete L[lt+"-top"+Je],delete L[lt+"-right"+Je],delete L[lt+"-bottom"+Je],delete L[lt+"-left"+Je])},Re=lt=>{const Je=L[lt];if(!Je)return;const Sn=Je.split(" ");let no=Sn.length;for(;no--;)if(Sn[no]!==Sn[0])return!1;return L[lt]=Sn[0],!0},Ae=(lt,Je,Sn,no)=>{!Re(Je)||!Re(Sn)||!Re(no)||(L[lt]=L[Je]+" "+L[Sn]+" "+L[no],delete L[Je],delete L[Sn],delete L[no])},je=lt=>(ce=!0,u[lt]),et=(lt,Je)=>(ce&&(lt=lt.replace(/\uFEFF[0-9]/g,Sn=>u[Sn])),Je||(lt=lt.replace(/\\([\'\";:])/g,"$1")),lt),xt=lt=>String.fromCharCode(parseInt(lt.slice(1),16)),un=lt=>lt.replace(/\\[0-9a-f]+/gi,xt),Xt=(lt,Je,Sn,no,lo,Vo)=>{if(lo=lo||Vo,lo)return lo=et(lo),"'"+lo.replace(/\'/g,"\\'")+"'";if(Je=et(Je||Sn||no||""),!e.allow_script_urls){const bs=Je.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(bs)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(bs))return""}return ie&&(Je=ie.call(ee,Je,"style")),"url('"+Je.replace(/\'/g,"\\'")+"')"};if(P){P=P.replace(/[\u0000-\u001F]/g,""),P=P.replace(/\\[\"\';:\uFEFF]/g,je).replace(/\"[^\"]+\"|\'[^\']+\'/g,Je=>Je.replace(/[;:]/g,je));let lt;for(;lt=r.exec(P);){r.lastIndex=lt.index+lt[0].length;let Je=lt[1].replace(c,"").toLowerCase(),Sn=lt[2].replace(c,"");if(Je&&Sn){if(Je=un(Je),Sn=un(Sn),Je.indexOf(y)!==-1||Je.indexOf('"')!==-1||!e.allow_script_urls&&(Je==="behavior"||/expression\s*\(|\/\*|\*\//.test(Sn)))continue;Je==="font-weight"&&Sn==="700"?Sn="bold":(Je==="color"||Je==="background-color")&&(Sn=Sn.toLowerCase()),Sn=Sn.replace(o,Xt),L[Je]=ce?et(Sn,!0):Sn}}ue("border","",!0),ue("border","-width"),ue("border","-color"),ue("border","-style"),ue("padding",""),ue("margin",""),Ae("border","border-width","border-style","border-color"),L.border==="medium none"&&delete L.border,L["border-image"]==="none"&&delete L["border-image"]}return L},serialize:(P,L)=>{let ce="";const ie=(ue,Re)=>{const Ae=Re[ue];if(Ae)for(let je=0,et=Ae.length;je<et;je++){const xt=Ae[je],un=P[xt];un&&(ce+=(ce.length>0?" ":"")+xt+": "+un+";")}},ee=(ue,Re)=>{if(!b||!Re)return!0;let Ae=b["*"];return Ae&&Ae[ue]?!1:(Ae=b[Re],!(Ae&&Ae[ue]))};return L&&f?(ie("*",f),ie(L,f)):en(P,(ue,Re)=>{ue&&ee(Re,L)&&(ce+=(ce.length>0?" ":"")+Re+": "+ue+";")}),ce}};return N},Nv={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Un=e=>e instanceof Event||Q(e.initEvent),Qk=e=>e.isDefaultPrevented===Ve||e.isDefaultPrevented===Et,R2=e=>Nt(e.preventDefault)||Un(e),w1=(e,n)=>{const o=n!=null?n:{};for(const r in e)uo(Nv,r)||(o[r]=e[r]);return we(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},mh=(e,n,o,r)=>{var c;const u=w1(n,r);return u.type=e,Nt(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),R2(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Ve,Q(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Ve,Q(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Ve,u.stopPropagation()},Qk(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Ve:Et,u.isPropagationStopped=u.cancelBubble===!0?Ve:Et,u.isImmediatePropagationStopped=Et)),u},C1="mce-data-",fh=/^(?:mouse|contextmenu)|click/,qf=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},hd=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Mv=e=>we(e)&&fh.test(e.type),Ym=(e,n)=>{const o=mh(e.type,e,document,n);if(Mv(e)&&On(e.pageX)&&!On(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},eT=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{hd(e,"DOMContentLoaded",f),hd(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():qf(e,"DOMContentLoaded",f),o.domLoaded||qf(e,"load",f)};class Yd{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=C1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=L=>{u.executeHandlers(Ym(L||b.event),x)};if(!n||Lt(n)||al(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),c=c||n;const N=o.split(" ");let P=N.length;for(;P--;){let L=N[P],ce=y,ie=!1,ee=!1;if(L==="DOMContentLoaded"&&(L="ready"),u.domLoaded&&L==="ready"&&n.readyState==="complete"){r.call(c,Ym({type:L}));continue}!u.hasFocusIn&&(L==="focusin"||L==="focusout")&&(ie=!0,ee=L==="focusin"?"focus":"blur",ce=ue=>{const Re=Ym(ue||b.event);Re.type=Re.type==="focus"?"focusin":"focusout",u.executeHandlers(Re,x)}),f=u.events[x][L],f?L==="ready"&&u.domLoaded?r(Ym({type:L})):f.push({func:r,scope:c}):(u.events[x][L]=f=[{func:r,scope:c}],f.fakeName=ee,f.capture=ie,f.nativeHandler=ce,L==="ready"?eT(n,ce,u):qf(n,ee||L,ce,ie))}return n=f=null,r}unbind(n,o,r){if(!n||Lt(n)||al(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],x=u[y];if(x){if(r){let N=x.length;for(;N--;)if(x[N].func===r){const P=x.nativeHandler,L=x.fakeName,ce=x.capture,ie=x.slice(0,N).concat(x.slice(N+1));ie.nativeHandler=P,ie.fakeName=L,ie.capture=ce,u[y]=ie}}(!r||x.length===0)&&(delete u[y],hd(n,x.fakeName||y,x.nativeHandler,x.capture))}}}else en(u,(f,b)=>{hd(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(uo(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||Lt(n)||al(n))return this;const c=Ym({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||Lt(n)||al(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Yd.Event=new Yd;const Kf=_t.each,S1=_t.grep,x1="data-mce-style",Ep=_t.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),_p=(e,n,o)=>{Nt(o)||o===""?Gr(e,n):nr(e,n,o)},tT=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Mu=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&Lt(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},gh=(e,n)=>{const o=Ir(n,"style"),r=e.serialize(e.parse(o),Yn(n));_p(n,x1,r)},ou=(e,n)=>ct(e)?uo(Ep,n)?e+"":e+"px":e,Ri=(e,n,o)=>{const r=tT(n);Nt(o)||o===""?Zo(e,r):j(e,r,ou(o,r))},Ap=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const x=be.fromDom(f);Q(n.url_converter)&&we(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const N="data-mce-"+y;_p(x,N,b),_p(x,y,b)},get:(f,b)=>{const y=be.fromDom(f);return Ir(y,"data-mce-"+b)||Ir(y,b)}},u={style:{set:(f,b)=>{const y=be.fromDom(f);r&&_p(y,x1,b),Gr(y,"style"),oe(b)&&Se(y,e.parse(b))},get:f=>{const b=be.fromDom(f),y=Ir(b,x1)||Ir(b,"style");return e.serialize(e.parse(y),Yn(b))}}};return r&&(u.href=u.src=c),u},pr=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=kp.forElement(be.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],N=n.schema?n.schema:Nu({}),P=y1({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),L=n.ownEvents?new Yd:Yd.Event,ce=N.getBlockElements(),ie=tt=>oe(tt)?uo(ce,tt):En(tt)&&(uo(ce,tt.nodeName)||jf(N,tt)),ee=tt=>tt&&e&&oe(tt)?e.getElementById(tt):tt,ue=tt=>{const at=ee(tt);return we(at)?be.fromDom(at):null},Re=(tt,at,Wt="")=>{let $t;const Xn=ue(tt);if(we(Xn)&&Jo(Xn)){const Es=fp[at];Es&&Es.get?$t=Es.get(Xn.dom,at):$t=Ir(Xn,at)}return we($t)?$t:Wt},Ae=tt=>{const at=ee(tt);return Nt(at)?[]:at.attributes},je=(tt,at,Wt)=>{go(tt,$t=>{if(En($t)){const Xn=be.fromDom($t),Es=Wt===""?null:Wt,$r=Ir(Xn,at),tr=fp[at];tr&&tr.set?tr.set(Xn.dom,Es,at):_p(Xn,at,Es),$r!==Es&&n.onSetAttrib&&n.onSetAttrib({attrElm:Xn.dom,attrName:at,attrValue:Es})}})},et=(tt,at)=>tt.cloneNode(at),xt=()=>n.root_element||e.body,un=tt=>{const at=s1(tt);return{x:at.x,y:at.y,w:at.width,h:at.height}},Xt=(tt,at)=>ih(e.body,ee(tt),at),lt=(tt,at,Wt)=>{go(tt,$t=>{const Xn=be.fromDom($t);Ri(Xn,at,Wt),n.update_styles&&gh(P,Xn)})},Je=(tt,at)=>{go(tt,Wt=>{const $t=be.fromDom(Wt);en(at,(Xn,Es)=>{Ri($t,Es,Xn)}),n.update_styles&&gh(P,$t)})},Sn=(tt,at,Wt)=>{const $t=ee(tt);if(!(Nt($t)||!En($t)))return Wt?He(be.fromDom($t),tT(at)):(at=at.replace(/-(\D)/g,(Xn,Es)=>Es.toUpperCase()),at==="float"&&(at="cssFloat"),$t.style?$t.style[at]:void 0)},no=tt=>{const at=ee(tt);if(!at)return{w:0,h:0};let Wt=Sn(at,"width"),$t=Sn(at,"height");return(!Wt||Wt.indexOf("px")===-1)&&(Wt="0"),(!$t||$t.indexOf("px")===-1)&&($t="0"),{w:parseInt(Wt,10)||at.offsetWidth||at.clientWidth,h:parseInt($t,10)||at.offsetHeight||at.clientHeight}},lo=tt=>{const at=ee(tt),Wt=Xt(at),$t=no(at);return{x:Wt.x,y:Wt.y,w:$t.w,h:$t.h}},Vo=(tt,at)=>{if(!tt)return!1;const Wt=wt(tt)?tt:[tt];return se(Wt,$t=>Ai(be.fromDom($t),at))},bs=(tt,at,Wt,$t)=>{const Xn=[];let Es=ee(tt);$t=$t===void 0;const $r=Wt||(xt().nodeName!=="BODY"?xt().parentNode:null);if(oe(at))if(at==="*")at=En;else{const tr=at;at=pu=>Vo(pu,tr)}for(;Es&&!(Es===$r||Nt(Es.nodeType)||ei(Es)||zm(Es));){if(!at||at(Es))if($t)Xn.push(Es);else return[Es];Es=Es.parentNode}return $t?Xn:null},js=(tt,at,Wt)=>{const $t=bs(tt,at,Wt,!1);return $t&&$t.length>0?$t[0]:null},Ws=(tt,at,Wt)=>{let $t=at;if(tt){oe(at)&&($t=Xn=>Vo(Xn,at));for(let Xn=tt[Wt];Xn;Xn=Xn[Wt])if(Q($t)&&$t(Xn))return Xn}return null},Ma=(tt,at)=>Ws(tt,at,"nextSibling"),Si=(tt,at)=>Ws(tt,at,"previousSibling"),Gt=tt=>Q(tt.querySelectorAll),Uo=(tt,at)=>{var Wt,$t;const Xn=($t=(Wt=ee(at))!==null&&Wt!==void 0?Wt:n.root_element)!==null&&$t!==void 0?$t:e;return Gt(Xn)?Oo(Xn.querySelectorAll(tt)):[]},go=function(tt,at,Wt){const $t=Wt!=null?Wt:this;if(wt(tt)){const Xn=[];return Kf(tt,(Es,$r)=>{const tr=ee(Es);tr&&Xn.push(at.call($t,tr,$r))}),Xn}else{const Xn=ee(tt);return Xn?at.call($t,Xn):!1}},Or=(tt,at)=>{go(tt,Wt=>{en(at,($t,Xn)=>{je(Wt,Xn,$t)})})},Cn=(tt,at)=>{go(tt,Wt=>{const $t=be.fromDom(Wt);Yg($t,at)})},Ao=(tt,at,Wt,$t,Xn)=>go(tt,Es=>{const $r=oe(at)?e.createElement(at):at;return we(Wt)&&Or($r,Wt),$t&&(!oe($t)&&$t.nodeType?$r.appendChild($t):oe($t)&&Cn($r,$t)),Xn?$r:Es.appendChild($r)}),wo=(tt,at,Wt)=>Ao(e.createElement(tt),tt,at,Wt,!0),hn=Ja.decode,fs=Ja.encodeAllRaw,rs=(tt,at,Wt="")=>{let $t="<"+tt;for(const Xn in at)dr(at,Xn)&&($t+=" "+Xn+'="'+fs(at[Xn])+'"');return Ss(Wt)&&uo(N.getVoidElements(),tt)?$t+" />":$t+">"+Wt+"</"+tt+">"},oc=tt=>{const at=e.createElement("div"),Wt=e.createDocumentFragment();Wt.appendChild(at),tt&&(at.innerHTML=tt);let $t;for(;$t=at.firstChild;)Wt.appendChild($t);return Wt.removeChild(at),Wt},Sr=(tt,at)=>go(tt,Wt=>{const $t=be.fromDom(Wt);return at&&z(ha($t),Xn=>{Os(Xn)&&Xn.dom.length===0?Bs(Xn):ns($t,Xn)}),Bs($t),$t.dom}),Ro=tt=>go(tt,at=>{const Wt=at.attributes;for(let $t=Wt.length-1;$t>=0;$t--)at.removeAttributeNode(Wt.item($t))}),Ps=tt=>P.parse(tt),xa=(tt,at)=>P.serialize(tt,at),vr=tt=>{if(Lg!==pr.DOM&&e===document){if(o[tt])return;o[tt]=!0}let at=e.getElementById("mceDefaultStyles");if(!at){at=e.createElement("style"),at.id="mceDefaultStyles",at.type="text/css";const Wt=e.head;Wt.firstChild?Wt.insertBefore(at,Wt.firstChild):Wt.appendChild(at)}at.styleSheet?at.styleSheet.cssText+=tt:at.appendChild(e.createTextNode(tt))},Yr=tt=>{tt||(tt=""),z(tt.split(","),at=>{c[at]=!0,y.load(at).catch(Ne)})},ua=(tt,at,Wt)=>{go(tt,$t=>{if(En($t)){const Xn=be.fromDom($t),Es=at.split(" ");z(Es,$r=>{we(Wt)?(Wt?wu:Gl)(Xn,$r):_m(Xn,$r)})}})},Br=(tt,at)=>{ua(tt,at,!0)},$a=(tt,at)=>{ua(tt,at,!1)},gu=(tt,at)=>{const Wt=ue(tt),$t=at.split(" ");return we(Wt)&&pn($t,Xn=>Fd(Wt,Xn))},ui=tt=>{go(tt,at=>Zo(be.fromDom(at),"display"))},Sm=tt=>{go(tt,at=>j(be.fromDom(at),"display","none"))},hu=tt=>{const at=ue(tt);return we(at)&&sa(yo(at,"display"),"none")},Yb=tt=>(tt||"mce_")+u++,Xb=tt=>{const at=ue(tt);return we(at)?En(at.dom)?at.dom.outerHTML:Yl(at):""},xm=(tt,at)=>{go(tt,Wt=>{En(Wt)&&(Wt.outerHTML=at)})},$d=(tt,at)=>{const Wt=ee(at);return go(tt,$t=>{const Xn=Wt==null?void 0:Wt.parentNode,Es=Wt==null?void 0:Wt.nextSibling;return Xn&&(Es?Xn.insertBefore($t,Es):Xn.appendChild($t)),$t})},Xr=(tt,at,Wt)=>go(at,$t=>{var Xn;const Es=wt(at)?tt.cloneNode(!0):tt;return Wt&&Kf(S1($t.childNodes),$r=>{Es.appendChild($r)}),(Xn=$t.parentNode)===null||Xn===void 0||Xn.replaceChild(Es,$t),$t}),Ju=(tt,at)=>{if(tt.nodeName!==at.toUpperCase()){const Wt=wo(at);return Kf(Ae(tt),$t=>{je(Wt,$t.nodeName,Re(tt,$t.nodeName))}),Xr(Wt,tt,!0),Wt}else return tt},km=(tt,at)=>{let Wt=tt;for(;Wt;){let $t=at;for(;$t&&Wt!==$t;)$t=$t.parentNode;if(Wt===$t)break;Wt=Wt.parentNode}return!Wt&&tt.ownerDocument?tt.ownerDocument.documentElement:Wt},Qu=tt=>{if(En(tt)){const at=tt.nodeName.toLowerCase()==="a"&&!Re(tt,"href")&&Re(tt,"id");if(Re(tt,"name")||Re(tt,"data-mce-bookmark")||at)return!0}return!1},ed=(tt,at)=>{let Wt=0;if(Qu(tt))return!1;const $t=tt.firstChild;if($t){const Xn=new pa($t,tt),Es=N?N.getWhitespaceElements():{},$r=at||(N?N.getNonEmptyElements():null);let tr=$t;do{if(En(tr)){const pu=tr.getAttribute("data-mce-bogus");if(pu){tr=Xn.next(pu==="all");continue}const f2=tr.nodeName.toLowerCase();if($r&&$r[f2]){if(f2==="br"){Wt++,tr=Xn.next();continue}return!1}if(Qu(tr))return!1}if(al(tr)||Lt(tr)&&!Ol(tr.data)||Lt(tr)&&tr.parentNode&&Es[tr.parentNode.nodeName]&&Ol(tr.data))return!1;tr=Xn.next()}while(tr)}return Wt<=1},Tm=()=>e.createRange(),Mc=(tt,at,Wt)=>{let $t=Tm(),Xn,Es;if(tt&&at&&tt.parentNode&&at.parentNode){const $r=tt.parentNode;return $t.setStart($r,Mu(tt)),$t.setEnd(at.parentNode,Mu(at)),Xn=$t.extractContents(),$t=Tm(),$t.setStart(at.parentNode,Mu(at)+1),$t.setEnd($r,Mu(tt)+1),Es=$t.extractContents(),$r.insertBefore(jd(Lg,Xn),tt),Wt?$r.insertBefore(Wt,tt):$r.insertBefore(at,tt),$r.insertBefore(jd(Lg,Es),tt),Sr(tt),Wt||at}else return},Em=(tt,at,Wt,$t)=>{if(wt(tt)){let Xn=tt.length;const Es=[];for(;Xn--;)Es[Xn]=Em(tt[Xn],at,Wt,$t);return Es}else return n.collect&&(tt===e||tt===r)&&x.push([tt,at,Wt,$t]),L.bind(tt,at,Wt,$t||Lg)},Rf=(tt,at,Wt)=>{if(wt(tt)){let $t=tt.length;const Xn=[];for(;$t--;)Xn[$t]=Rf(tt[$t],at,Wt);return Xn}else{if(x.length>0&&(tt===e||tt===r)){let $t=x.length;for(;$t--;){const[Xn,Es,$r]=x[$t];tt===Xn&&(!at||at===Es)&&(!Wt||Wt===$r)&&L.unbind(Xn,Es,$r)}}return L.unbind(tt,at,Wt)}},td=(tt,at,Wt)=>L.dispatch(tt,at,Wt),Ig=(tt,at,Wt)=>L.dispatch(tt,at,Wt),Pk=tt=>{if(tt&&En(tt)){const at=tt.getAttribute("data-mce-contenteditable");return at&&at!=="inherit"?at:tt.contentEditable!=="inherit"?tt.contentEditable:null}else return null},Lg={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:x,styles:P,schema:N,events:L,isBlock:ie,root:null,clone:et,getRoot:xt,getViewPort:un,getRect:lo,getSize:no,getParent:js,getParents:bs,get:ee,getNext:Ma,getPrev:Si,select:Uo,is:Vo,add:Ao,create:wo,createHTML:rs,createFragment:oc,remove:Sr,setStyle:lt,getStyle:Sn,setStyles:Je,removeAllAttribs:Ro,setAttrib:je,setAttribs:Or,getAttrib:Re,getPos:Xt,parseStyle:Ps,serializeStyle:xa,addStyle:vr,loadCSS:Yr,addClass:Br,removeClass:$a,hasClass:gu,toggleClass:ua,show:ui,hide:Sm,isHidden:hu,uniqueId:Yb,setHTML:Cn,getOuterHTML:Xb,setOuterHTML:xm,decode:hn,encode:fs,insertAfter:$d,replace:Xr,rename:Ju,findCommonAncestor:km,run:go,getAttribs:Ae,isEmpty:ed,createRng:Tm,nodeIndex:Mu,split:Mc,bind:Em,unbind:Rf,fire:Ig,dispatch:td,getContentEditable:Pk,getContentEditableParent:tt=>{const at=xt();let Wt=null;for(let $t=tt;$t&&$t!==at&&(Wt=Pk($t),Wt===null);$t=$t.parentNode);return Wt},destroy:()=>{if(x.length>0){let tt=x.length;for(;tt--;){const[at,Wt,$t]=x[tt];L.unbind(at,Wt,$t)}}en(c,(tt,at)=>{y.unload(at),delete c[at]})},isChildOf:(tt,at)=>tt===at||at.contains(tt),dumpRng:tt=>"startContainer: "+tt.startContainer.nodeName+", startOffset: "+tt.startOffset+", endContainer: "+tt.endContainer.nodeName+", endOffset: "+tt.endOffset},fp=Ap(P,n,ge(Lg));return Lg};pr.DOM=pr(document),pr.nodeIndex=Mu;const nT=pr.DOM,N2=0,su=1,k1=2,M2=3;class pd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=nT;let u;const f=()=>{c.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},x=c.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=_t._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===k1}markDone(n){this.states[n]=k1}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=N2),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,x)=>{as(o.scriptLoadedCallbacks,x).each(N=>{z(N,P=>P[y](x))}),delete o.scriptLoadedCallbacks[x]},c=y=>{const x=Z(y,N=>N.status==="rejected");return x.length>0?Promise.reject(jn(x,({reason:N})=>wt(N)?N:[N])):Promise.resolve()},u=y=>Promise.allSettled(re(y,x=>o.states[x]===k1?(r("resolve",x),Promise.resolve()):o.states[x]===M2?(r("reject",x),Promise.reject(x)):(o.states[x]=su,o.loadScript(x).then(()=>{o.states[x]=k1,r("resolve",x);const N=o.queue;return N.length>0?(o.queue=[],u(N).then(c)):Promise.resolve()},()=>(o.states[x]=M2,r("reject",x),Promise.reject(x)))))),f=y=>(o.loading=!0,u(y).then(x=>{o.loading=!1;const N=o.queueLoadedCallbacks.shift();return R.from(N).each(It),c(x)})),b=Fs(n);return o.loading?new Promise((y,x)=>{o.queueLoadedCallbacks.push(()=>f(b).then(y,x))}):f(b)}}pd.ScriptLoader=new pd;const uc=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},oT=e=>bt(e)&&uo(e,"raw"),Op=e=>wt(e)&&e.length>1,Yf={},hh=uc("en"),T1=()=>as(Yf,hh.get()),zc={getData:()=>Ut(Yf,e=>({...e})),setCode:e=>{e&&hh.set(e)},getCode:()=>hh.get(),add:(e,n)=>{let o=Yf[e];o||(Yf[e]=o={}),en(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=T1().getOr({}),o=f=>Q(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return as(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(oT(e))return o(e.raw);if(Op(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,x)=>uo(f,x)?o(f[x]):y);return u(b)}return u(c(e))},isRtl:()=>T1().bind(e=>as(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>uo(Yf,e)},bi=()=>{const e=[],n={},o={},r=[],c=(ee,ue)=>{const Re=Z(r,Ae=>Ae.name===ee&&Ae.state===ue);z(Re,Ae=>Ae.resolve())},u=ee=>uo(n,ee),f=ee=>uo(o,ee),b=ee=>{if(o[ee])return o[ee].instance},y=(ee,ue)=>{const Re=zc.getCode(),Ae=","+(ue||"")+",";!Re||ue&&Ae.indexOf(","+Re+",")===-1||pd.ScriptLoader.add(n[ee]+"/langs/"+Re+".js")},x=(ee,ue)=>{bi.languageLoad!==!1&&(u(ee)?y(ee,ue):ie(ee,"loaded").then(()=>y(ee,ue)))},N=(ee,ue)=>(e.push(ue),o[ee]={instance:ue},c(ee,"added"),ue),P=ee=>{delete n[ee],delete o[ee]},L=(ee,ue)=>oe(ue)?oe(ee)?{prefix:"",resource:ue,suffix:""}:{prefix:ee.prefix,resource:ue,suffix:ee.suffix}:ue,ce=(ee,ue)=>{if(n[ee])return Promise.resolve();let Re=oe(ue)?ue:ue.prefix+ue.resource+ue.suffix;Re.indexOf("/")!==0&&Re.indexOf("://")===-1&&(Re=bi.baseURL+"/"+Re),n[ee]=Re.substring(0,Re.lastIndexOf("/"));const Ae=()=>(c(ee,"loaded"),Promise.resolve());return o[ee]?Ae():pd.ScriptLoader.add(Re).then(Ae)},ie=(ee,ue="added")=>ue==="added"&&f(ee)||ue==="loaded"&&u(ee)?Promise.resolve():new Promise(Re=>{r.push({name:ee,state:ue,resolve:Re})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:N,remove:P,createUrl:L,load:ce,waitFor:ie}};bi.languageLoad=!0,bi.baseURL="",bi.PluginManager=bi(),bi.ThemeManager=bi(),bi.ModelManager=bi();const P2=e=>{const n=uc(R.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(R.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(R.some(b))}}},sT=e=>{const n=uc(R.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(R.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(R.some(setInterval(b,e)))}}},Xm=()=>{const e=P2(Ne);return{...e,on:o=>e.get().each(o)}},ph=(e,n)=>{let o=null;return{cancel:()=>{Y(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{Y(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},E1=(e,n)=>{let o=null;const r=()=>{Y(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Dp=ge("mce-annotation"),$u=ge("data-mce-annotation"),Xf=ge("data-mce-annotation-uid"),bh=ge("data-mce-annotation-active"),vh=ge("data-mce-annotation-classes"),ya=ge("data-mce-annotation-attrs"),Rp=e=>n=>$s(n,e),ca=(e,n)=>{const o=e.selection.getRng(),r=be.fromDom(o.startContainer),c=be.fromDom(e.getBody()),u=n.fold(()=>"."+Dp(),y=>`[${$u()}="${y}"]`),f=Hd(r,o.startOffset).getOr(r);return ld(f,u,Rp(c)).bind(y=>yc(y,`${Xf()}`).bind(x=>yc(y,`${$u()}`).map(N=>{const P=fl(e,x);return{uid:x,name:N,elements:P}})))},ji=e=>Jo(e)&&Fd(e,Dp()),Xd=(e,n)=>Tl(e,"data-mce-bogus")||eh(e,'[data-mce-bogus="all"]',Rp(n)),fl=(e,n)=>{const o=be.fromDom(e.getBody()),r=Rs(o,`[${Xf()}="${n}"]`);return Z(r,c=>!Xd(c,o))},F2=(e,n)=>{const o=be.fromDom(e.getBody()),r=Rs(o,`[${$u()}="${n}"]`),c={};return z(r,u=>{if(!Xd(u,o)){const f=Ir(u,Xf()),b=as(c,f).getOr([]);c[f]=b.concat([u])}}),c},rT=(e,n)=>{const o=uc({}),r=()=>({listeners:[],previous:Xm()}),c=(P,L)=>{u(P,ce=>(L(ce),ce))},u=(P,L)=>{const ce=o.get(),ie=as(ce,P).getOrThunk(r),ee=L(ie);ce[P]=ee,o.set(ce)},f=(P,L,ce)=>{c(P,ie=>{z(ie.listeners,ee=>ee(!0,P,{uid:L,nodes:re(ce,ue=>ue.dom)}))})},b=P=>{c(P,L=>{z(L.listeners,ce=>ce(!1,P))})},y=(P,L)=>{z(fl(e,P),ce=>{L?nr(ce,bh(),"true"):Gr(ce,bh())})},x=E1(()=>{const P=Dt(n.getNames());z(P,L=>{u(L,ce=>{const ie=ce.previous.get();return ca(e,R.some(L)).fold(()=>{ie.each(ee=>{b(L),ce.previous.clear(),y(ee,!1)})},({uid:ee,name:ue,elements:Re})=>{sa(ie,ee)||(ie.each(Ae=>y(Ae,!1)),f(ue,ee,Re),ce.previous.set(ee),y(ee,!0))}),{previous:ce.previous,listeners:ce.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(P,L)=>{u(P,ce=>({previous:ce.previous,listeners:ce.listeners.concat([L])}))}}},aT=(e,n)=>{const o=$u(),r=u=>R.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(Xf(),null),u.attr($u(),null),u.attr(bh(),null);const y=R.from(u.attr(ya())).map(L=>L.split(",")).getOr([]),x=R.from(u.attr(vh())).map(L=>L.split(",")).getOr([]);z(y,L=>u.attr(L,null));const N=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],P=De(N,[Dp()].concat(x));u.attr("class",P.length>0?P.join(" "):null),u.attr(vh(),null),u.attr(ya(),null)};e.serializer.addTempAttr(bh()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},gl=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>as(e,c).map(u=>u.settings),getNames:()=>Le(e)}};let Jm=0;const I2=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return Jm++,e+"_"+r+Jm+String(o)},L2=(e,n)=>{z(n,o=>{wu(e,o)})},$v=(e,n)=>{z(n,o=>{Gl(e,o)})},Bv=(e,n)=>be.fromDom(e.dom.cloneNode(n)),Jf=e=>Bv(e,!1),Pv=e=>Bv(e,!0),H2=(e,n)=>{const o=be.fromTag(n),r=vu(e);return Ds(o,r),o},z2=(e,n)=>{const o=H2(e,n);_r(e,o);const r=ha(e);return Bo(o,r),Bs(e),o},V2=(e,n,o=Et)=>{const r=new pa(e,n),c=u=>{let f;do f=r[u]();while(f&&!Lt(f)&&!o(f));return R.from(f).filter(Lt)};return{current:()=>R.from(r.current()).filter(Lt),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Qm=(e,n)=>{const o=n||(f=>e.isBlock(f)||Ur(f)||ar(f)),r=(f,b,y,x)=>{if(Lt(f)){const N=x(f,b,f.data);if(N!==-1)return R.some({container:f,offset:N})}return y().bind(N=>r(N.container,N.offset,y,x))};return{backwards:(f,b,y,x)=>{const N=V2(f,x!=null?x:e.getRoot(),o);return r(f,b,()=>N.prev().map(P=>({container:P,offset:P.length})),y).getOrNull()},forwards:(f,b,y,x)=>{const N=V2(f,x!=null?x:e.getRoot(),o);return r(f,b,()=>N.next().map(P=>({container:P,offset:0})),y).getOrNull()}}},yh=Math.round,Qf=e=>e?{left:yh(e.left),top:yh(e.top),bottom:yh(e.bottom),right:yh(e.right),width:yh(e.width),height:yh(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},U2=(e,n)=>(e=Qf(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),cT=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Fv=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Np=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Fv(n.top-e.bottom,e,n)},Mp=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Fv(n.bottom-e.top,e,n),W2=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,iT=e=>Be(e,(n,o)=>n.fold(()=>R.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return R.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),R.none()),Z2=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},za=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),_1=(e,n,o)=>Math.min(Math.max(e,n),o),$p=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},ef=(e,n)=>{if(En(e)&&e.hasChildNodes()){const o=e.childNodes,r=_1(n,0,o.length-1);return o[r]}else return e},A1=(e,n)=>{if(!(n<0&&En(e)&&e.hasChildNodes()))return ef(e,n)},vi=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),hl=e=>oe(e)&&e.charCodeAt(0)>=768&&vi.test(e),lT=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},tf=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},j2=En,wh=pi,G2=th("display","block table"),q2=th("float","left right"),Jd=tf(j2,wh,jt(q2)),uT=jt(th("white-space","pre pre-line pre-wrap")),ia=Lt,Rl=Ur,Ch=pr.nodeIndex,O1=A1,D1=e=>e?e.createRange():pr.DOM.createRng(),Bp=e=>oe(e)&&/[\r\n\t ]/.test(e),Qd=e=>!!e.setStart&&!!e.setEnd,R1=e=>{const n=e.startContainer,o=e.startOffset;if(Bp(e.toString())&&uT(n.parentNode)&&Lt(n)){const r=n.data;if(Bp(r[o-1])||Bp(r[o+1]))return!0}return!1},Sh=e=>{const n=e.ownerDocument,o=D1(n),r=n.createTextNode(ra),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Qf(o.getBoundingClientRect());return c.removeChild(r),u},Iv=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&Lt(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),em(u)}else return null},eg=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,em=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Qf(r[0]):o=Qf(e.getBoundingClientRect()),!Qd(e)&&Rl(e)&&eg(o)?Sh(e):eg(o)&&Qd(e)&&(n=Iv(e))!==null&&n!==void 0?n:o},nf=(e,n)=>{const o=U2(e,n);return o.width=1,o.right=o.left+1,o},K2=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&cT(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=D1(f.ownerDocument);if(b<f.data.length){if(hl(f.data[b]))return;if(hl(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!R1(y))){o(nf(em(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),R1(y)||o(nf(em(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),R1(y)||o(nf(em(y),!0)))},c=e.container(),u=e.offset();if(ia(c))return r(c,u),n;if(j2(c))if(e.isAtEnd()){const f=O1(c,u);ia(f)&&r(f,f.data.length),Jd(f)&&!Rl(f)&&o(nf(em(f),!1))}else{const f=O1(c,u);if(ia(f)&&r(f,0),Jd(f)&&e.isAtEnd())return o(nf(em(f),!1)),n;const b=O1(e.container(),e.offset()-1);Jd(b)&&!Rl(b)&&(G2(b)||G2(f)||!Jd(f))&&o(nf(em(b),!1)),Jd(f)&&o(nf(em(f),!0))}return n},gt=(e,n,o)=>{const r=()=>(ia(e),n===0),c=()=>ia(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const N=D1(e.ownerDocument);return N.setStart(e,n),N.setEnd(e,n),N},f=()=>(o||(o=K2(gt(e,n))),o),b=()=>f().length>0,y=N=>N&&e===N.container()&&n===N.offset(),x=N=>O1(e,N?n-1:n);return{container:ge(e),offset:ge(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:x}};gt.fromRangeStart=e=>gt(e.startContainer,e.startOffset),gt.fromRangeEnd=e=>gt(e.endContainer,e.endOffset),gt.after=e=>gt(e.parentNode,Ch(e)+1),gt.before=e=>gt(e.parentNode,Ch(e)),gt.isAbove=(e,n)=>Vr(wn(n.getClientRects()),bn(e.getClientRects()),Np).getOr(!1),gt.isBelow=(e,n)=>Vr(bn(n.getClientRects()),wn(e.getClientRects()),Mp).getOr(!1),gt.isAtStart=e=>e?e.isAtStart():!1,gt.isAtEnd=e=>e?e.isAtEnd():!1,gt.isTextPosition=e=>e?Lt(e.container()):!1,gt.isElementPosition=e=>!gt.isTextPosition(e);const xh=(e,n)=>{Lt(n)&&n.data.length===0&&e.remove(n)},dT=(e,n,o)=>{n.insertNode(o),xh(e,o.previousSibling),xh(e,o.nextSibling)},Lv=(e,n,o)=>{const r=R.from(o.firstChild),c=R.from(o.lastChild);n.insertNode(o),r.each(u=>xh(e,u.previousSibling)),c.each(u=>xh(e,u.nextSibling))},N1=(e,n,o)=>{zm(o)?Lv(e,n,o):dT(e,n,o)},wa=Lt,Y2=Eu,X2=pr.nodeIndex,Pp=e=>{const n=e.parentNode;return Y2(n)?Pp(n):n},tm=e=>e?st(e.childNodes,(n,o)=>(Y2(o)&&o.nodeName!=="BR"?n=n.concat(tm(o)):n.push(o),n),[]):[],kh=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&wa(o);)n+=o.data.length;return n},us=e=>n=>e===n,Gi=e=>{let n,o;n=tm(Pp(e)),o=ht(n,us(e),e),n=n.slice(0,o+1);const r=st(n,(c,u,f)=>(wa(u)&&wa(n[f-1])&&c++,c),0);return n=ve(n,rl([e.nodeName])),o=ht(n,us(e),e),o-r},of=e=>(wa(e)?"text()":e.nodeName.toLowerCase())+"["+Gi(e)+"]",Hv=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},br=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(wa(r))u=kh(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(of(r));let f=Hv(e,r);return f=ve(f,jt(Eu)),o=o.concat(ka(f,b=>of(b))),o.reverse().join("/")+","+u},zv=(e,n,o)=>{let r=tm(e);return r=ve(r,(c,u)=>!wa(c)||!wa(r[u-1])),r=ve(r,rl([n])),r[o]},Fp=(e,n)=>{let o=e,r=0;for(;wa(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!wa(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return wa(e)&&n>e.data.length&&(n=e.data.length),gt(e,n)},dc=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=st(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),zv(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!wa(u)&&u.parentNode){let f;return c==="after"?f=X2(u)+1:f=X2(u),gt(u.parentNode,f)}return Fp(u,parseInt(c,10))},Bu=ar,Ni=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&Lt(c);c=c.previousSibling)r+=e(c.data).length;return r},Ip=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(Lt(u))b.push(o?Ni(n,u,f):f);else{let x=0;const N=u.childNodes;f>=N.length&&N.length&&(x=1,f=Math.max(0,N.length-1)),b.push(e.nodeIndex(N[f],o)+x)}for(let x=u;x&&x!==y;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},mT=(e,n,o,r)=>{const c=n.dom,u=Ip(c,e,o,r,!0),f=n.isForward(),b=ni(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=Ip(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},Th=(e,n,o)=>{let r=0;return _t.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},M1=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(En(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},$1=e=>(M1(e,!0),M1(e,!1),e),B1=(e,n)=>{if(En(e)&&(e=ef(e,n),Bu(e)))return e;if(V(e)){Lt(e)&&k(e)&&(e=e.parentNode);let o=e.previousSibling;if(Bu(o)||(o=e.nextSibling,Bu(o)))return o}},J2=e=>B1(e.startContainer,e.startOffset)||B1(e.endContainer,e.endOffset),Vv=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Bu(r)){const f=r.nodeName;return{name:f,index:Th(o.dom,f,r)}}const u=J2(c);if(u){const f=u.tagName;return{name:f,index:Th(o.dom,f,u)}}return mT(e,o,n,c)},Q2=e=>{const n=e.getRng();return{start:br(e.dom.getRoot(),gt.fromRangeStart(n)),end:br(e.dom.getRoot(),gt.fromRangeEnd(n)),forward:e.isForward()}},P1=e=>({rng:e.getRng(),forward:e.isForward()}),tg=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},pl=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:Th(o,b,f)};const x=$1(r.cloneRange());if(!u){x.collapse(!1);const P=tg(o,c+"_end",n);N1(o,x,P)}r=$1(r),r.collapse(!0);const N=tg(o,c+"_start",n);return N1(o,r,N),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},fT=(e,n,o=!1)=>n===2?Vv(Aa,o,e):n===3?Q2(e):n?P1(e):pl(e,!1),Qa=_e(Vv,Ue,!0),eC=e=>{const n=u=>u(e),o=ge(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Ve,isError:Et,map:u=>yi.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>R.some(e)};return c},nm=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Et,isError:Ve,map:n,mapError:r=>yi.error(r(e)),bind:n,exists:Et,forall:Ve,getOr:Ue,or:Ue,getOrThunk:ze,orThunk:ze,getOrDie:nn(String(e)),each:Ne,toOptional:R.none};return o},yi={value:eC,error:nm,fromOption:(e,n)=>e.fold(()=>nm(n),eC)},ru={generate:e=>{if(!wt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return z(e,(r,c)=>{const u=Le(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!wt(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const x=y.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...P)=>{if(P.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+P.length);return P[c].apply(null,y)},match:P=>{const L=Le(P);if(n.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+L.join(","));if(!pn(n,ie=>ae(L,ie)))throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+n.join(", "));return P[f].apply(null,y)},log:P=>{console.log(P,{constructors:n,constructor:f,params:y})}}}}),o}};ru.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Uv=e=>{const n=[],o=[];return z(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},tC=e=>e.type==="inline-command"||e.type==="inline-format",hT=e=>e.type==="block-command"||e.type==="block-format",pT=e=>{const n=r=>yi.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(wt(e.format)){if(!pn(e.format,oe))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(oe(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return yi.value(c(f))}else return e.cmd!==void 0?oe(e.cmd)?yi.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!bt(e))return n("Raw pattern is not an object");if(!oe(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!oe(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?oe(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):yi.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},Tc=e=>Z(e,hT),Ec=e=>Z(e,tC),si=(e,n)=>({inlinePatterns:Ec(e),blockPatterns:Tc(e),dynamicPatternsLookup:n}),Vc=e=>{const n=Uv(re(e,pT));return z(n.errors,o=>console.error(o.message,o.pattern)),n.values},qi=e=>n=>{const o=e(n);return Vc(o)},Va=Mr().deviceType,I1=Va.isTouch(),L1=pr.DOM,nC=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Be(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[Go(u)]=Go(f),o},{})},H1=e=>Oe(e,RegExp),Pn=e=>n=>n.options.get(e),ng=e=>oe(e)||bt(e),z1=(e,n="")=>o=>{const r=oe(o);if(r)if(o.indexOf("=")!==-1){const c=nC(o);return{value:as(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Wv=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:z1(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:z1(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=oe(o)&&ws(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=ae(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>At(o)?{valid:!0,value:o}:oe(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||oe(o)||Pe(o,oe);return r?oe(o)?{value:re(o.split(","),Go),valid:r}:wt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Yv(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=oe(o)||Pe(o,oe);return r?{value:wt(o)?o:re(o.split(","),Go),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=At(o)||oe(o);return r?o===!1||Va.isiPhone()||Va.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!I1}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||oe(o)||Q(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||oe(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean"}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:ng}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:ng}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:ng}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>oe(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Pe(o,bt)||o===!1?{value:Vc(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>Q(o)?{value:qi(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Pe(o,H1)?{value:o,valid:!0}:H1(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:zc.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:L1.getAttrib(e.getElement(),"placeholder")})})},bT=Pn("iframe_attrs"),W4=Pn("doctype"),oC=Pn("document_base_url"),vT=Pn("body_id"),yT=Pn("body_class"),V1=Pn("content_security_policy"),wT=Pn("br_in_pre"),bl=Pn("forced_root_block"),Lp=Pn("forced_root_block_attrs"),CT=Pn("newline_behavior"),sC=Pn("br_newline_selector"),cn=Pn("no_newline_selector"),ST=Pn("keep_styles"),mc=Pn("end_container_on_empty_block"),rC=Pn("automatic_uploads"),Zv=Pn("images_reuse_filename"),xT=Pn("images_replace_blob_uris"),Nl=Pn("icons"),Z4=Pn("icons_url"),kT=Pn("images_upload_url"),om=Pn("images_upload_base_path"),aC=Pn("images_upload_credentials"),jv=Pn("images_upload_handler"),Ki=Pn("content_css_cors"),Ml=Pn("referrer_policy"),U1=Pn("language"),Pu=Pn("language_url"),cC=Pn("indent_use_margin"),Hp=Pn("indentation"),Ua=Pn("content_css"),iC=Pn("content_style"),sf=Pn("font_css"),W1=Pn("directionality"),lC=Pn("inline_boundaries_selector"),Gv=Pn("object_resizing"),TT=Pn("resize_img_proportional"),ET=Pn("placeholder"),qv=Pn("event_root"),_T=Pn("service_message"),og=Pn("theme"),zp=Pn("theme_url"),Z1=Pn("model"),Kv=Pn("model_url"),sg=Pn("inline_boundaries"),rg=Pn("formats"),Eh=Pn("preview_styles"),Vp=Pn("format_empty_lines"),AT=Pn("format_noneditable_selector"),uC=Pn("custom_ui_selector"),Yv=Pn("inline"),Xv=Pn("hidden_input"),OT=Pn("submit_patch"),ag=Pn("add_form_submit_trigger"),zr=Pn("add_unload_trigger"),Jv=Pn("custom_undo_redo_levels"),ri=Pn("disable_nodechange"),Qv=Pn("readonly"),ey=Pn("content_css_cors"),Up=Pn("plugins"),j1=Pn("external_plugins"),Wp=Pn("block_unsupported_drop"),dC=Pn("visual"),j4=Pn("visual_table_class"),rf=Pn("visual_anchor_class"),DT=Pn("iframe_aria_text"),RT=Pn("setup"),NT=Pn("init_instance_callback"),MT=Pn("urlconverter_callback"),mC=Pn("auto_focus"),ty=Pn("browser_spellcheck"),$T=Pn("protect"),BT=Pn("paste_block_drop"),G1=Pn("paste_data_images"),PT=Pn("paste_preprocess"),fC=Pn("paste_postprocess"),FT=Pn("paste_webkit_styles"),Zp=Pn("paste_remove_styles_if_webkit"),ny=Pn("paste_merge_formats"),gC=Pn("smart_paste"),hC=Pn("paste_as_text"),pC=Pn("paste_tab_spaces"),cg=Pn("allow_html_data_urls"),ig=Pn("text_patterns"),af=Pn("text_patterns_lookup"),_h=Pn("noneditable_class"),bC=Pn("editable_class"),sm=Pn("noneditable_regexp"),oy=Pn("preserve_cdata"),IT=e=>e.options.isSet("text_patterns_lookup"),cf=e=>_t.explode(e.options.get("font_size_style_values")),q1=e=>_t.explode(e.options.get("font_size_classes")),LT=e=>e.options.get("encoding")==="xml",sy=e=>_t.explode(e.options.get("images_file_types")),HT=Pn("table_tab_navigation"),zT=En,ry=Lt,vC=e=>{const n=e.parentNode;n&&n.removeChild(e)},yC=e=>{const n=Aa(e);return{count:e.length-n.length,text:n}},ay=e=>{let n;for(;(n=e.data.lastIndexOf(yr))!==-1;)e.deleteData(n,1)},wC=(e,n)=>(bd(e),n),CC=(e,n)=>{const o=yC(e.data.substr(0,n.offset())),r=yC(e.data.substr(n.offset()));return(o.text+r.text).length>0?(ay(e),gt(e,n.offset()-o.count)):n},VT=(e,n)=>{const o=n.container(),r=ke(Oo(o.childNodes),e).map(c=>c<n.offset()?gt(o,n.offset()-1):n).getOr(n);return bd(e),r},K1=(e,n)=>ry(e)&&n.container()===e?CC(e,n):wC(e,n),SC=(e,n)=>n.container()===e.parentNode?VT(e,n):wC(e,n),Y1=(e,n)=>gt.isTextPosition(n)?K1(e,n):SC(e,n),bd=e=>{zT(e)&&V(e)&&(Te(e)?e.removeAttribute("data-mce-caret"):vC(e)),ry(e)&&(ay(e),e.data.length===0&&vC(e))},cy=ar,iy=Jl,xC=_u,kC="*[contentEditable=false],video,audio,embed,object",ly=(e,n,o)=>{const r=U2(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},G4=e=>{var n,o;const r=Rs(be.fromDom(e),kC);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(cr(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,jo(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},X1=(e,n,o,r)=>{const c=Xm();let u,f;const b=bl(e),y=e.dom,x=(ee,ue)=>{let Re;if(N(),xC(ue))return null;if(o(ue)){const Ae=Io(b,ue,ee),je=ly(n,ue,ee);y.setStyle(Ae,"top",je.top),f=Ae;const et=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(et,{...je}),y.add(n,et),c.set({caret:et,element:ue,before:ee}),ee&&y.addClass(et,"mce-visual-caret-before"),P(),Re=ue.ownerDocument.createRange(),Re.setStart(Ae,0),Re.setEnd(Ae,0)}else return f=dt(ue,ee),Re=ue.ownerDocument.createRange(),Gp(f.nextSibling)?(Re.setStart(f,0),Re.setEnd(f,0)):(Re.setStart(f,1),Re.setEnd(f,1)),Re;return Re},N=()=>{G4(n),f&&(bd(f),f=null),c.on(ee=>{y.remove(ee.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},P=()=>{u=setInterval(()=>{c.on(ee=>{r()?y.toggleClass(ee.caret,"mce-visual-caret-hidden"):y.addClass(ee.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:N,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(ee=>{const ue=ly(n,ee.element,ee.before);y.setStyles(ee.caret,{...ue})})},destroy:()=>clearInterval(u)}},jp=()=>ls.browser.isFirefox(),Gp=e=>cy(e)||iy(e),lg=e=>Gp(e)||Ka(e)&&jp(),UT=ti,uy=ar,WT=Jl,J1=th("display","block table table-cell table-caption list-item"),qp=V,TC=k,ZT=En,jT=Lt,GT=pi,ec=e=>e>0,Ah=e=>e<0,rm=(e,n)=>{let o;for(;o=e(n);)if(!TC(o))return o;return null},am=(e,n,o,r,c)=>{const u=new pa(e,r),f=uy(e)||TC(e);let b;if(Ah(n)){if(f&&(b=rm(u.prev.bind(u),!0),o(b)))return b;for(;b=rm(u.prev.bind(u),c);)if(o(b))return b}if(ec(n)){if(f&&(b=rm(u.next.bind(u),!0),o(b)))return b;for(;b=rm(u.next.bind(u),c);)if(o(b))return b}return null},qT=(e,n)=>{const o=c=>UT(c.dom),r=c=>c.dom===n;return Im(be.fromDom(e),o,r).map(c=>c.dom).getOr(n)},lf=(e,n)=>{for(;e&&e!==n;){if(J1(e))return e;e=e.parentNode}return null},Fu=(e,n,o)=>lf(e.container(),o)===lf(n.container(),o),Q1=(e,n)=>{if(!n)return R.none();const o=n.container(),r=n.offset();return ZT(o)?R.from(o.childNodes[r+e]):R.none()},e0=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},dy=(e,n,o)=>lf(n,e)===lf(o,e),EC=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&qp(u)&&(u=u[r]),uy(u)||WT(u)){if(dy(n,u,c))return u;break}if(GT(u))break;c=c.parentNode}return null},cm=_e(e0,!0),vd=_e(e0,!1),t0=(e,n,o)=>{let r;const c=_e(EC,!0,n),u=_e(EC,!1,n),f=o.startContainer,b=o.startOffset;if(k(f)){const y=jT(f)?f.parentNode:f,x=y.getAttribute("data-mce-caret");if(x==="before"&&(r=y.nextSibling,lg(r)))return cm(r);if(x==="after"&&(r=y.previousSibling,lg(r)))return vd(r)}if(!o.collapsed)return o;if(Lt(f)){if(qp(f)){if(e===1){if(r=u(f),r)return cm(r);if(r=c(f),r)return vd(r)}if(e===-1){if(r=c(f),r)return vd(r);if(r=u(f),r)return cm(r)}return o}if(cr(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?cm(r):o;if(jo(f)&&b<=1)return e===-1&&(r=c(f),r)?vd(r):o;if(b===f.data.length)return r=u(f),r?cm(r):o;if(b===0)return r=c(f),r?vd(r):o}return o},_C=(e,n)=>Q1(e?0:-1,n).filter(uy),Kp=(e,n,o)=>{const r=t0(e,n,o);return e===-1?gt.fromRangeStart(r):gt.fromRangeEnd(r)},Oh=e=>R.from(e.getNode()).map(be.fromDom),Uc=e=>R.from(e.getNode(!0)).map(be.fromDom),AC=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},uf=(e,n)=>{const o=Fu(e,n);return!o&&Ur(e.getNode())?!0:o};var _c;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(_c||(_c={}));const my=ar,Iu=Lt,Yp=En,n0=Ur,ug=pi,KT=er,Dh=Ha,OC=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},yd=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Rh=(e,n)=>{if(ec(e)){if(ug(n.previousSibling)&&!Iu(n.previousSibling))return gt.before(n);if(Iu(n))return gt(n,0)}if(Ah(e)){if(ug(n.nextSibling)&&!Iu(n.nextSibling))return gt.after(n);if(Iu(n))return gt(n,n.data.length)}return Ah(e)?n0(n)?gt.before(n):gt.after(n):gt.before(n)},DC=(e,n)=>{const o=n.nextSibling;return o&&ug(o)?Iu(o)?gt(o,0):gt.before(o):Xp(_c.Forwards,gt.after(n),e)},Xp=(e,n,o)=>{let r,c,u,f;if(!Yp(o)||!n)return null;if(n.isEqual(gt.after(o))&&o.lastChild){if(f=gt.after(o.lastChild),Ah(e)&&ug(o.lastChild)&&Yp(o.lastChild))return n0(o.lastChild)?gt.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(Iu(b)){if(Ah(e)&&y>0)return gt(b,--y);if(ec(e)&&y<b.length)return gt(b,++y);r=b}else{if(Ah(e)&&y>0&&(c=yd(b,y-1),ug(c)))return!KT(c)&&(u=am(c,e,Dh,c),u)?Iu(u)?gt(u,u.data.length):gt.after(u):Iu(c)?gt(c,c.data.length):gt.before(c);if(ec(e)&&y<b.childNodes.length&&(c=yd(b,y),ug(c)))return n0(c)?DC(o,c):!KT(c)&&(u=am(c,e,Dh,c),u)?Iu(u)?gt(u,0):gt.before(u):Iu(c)?gt(c,0):gt.after(c);r=c||f.getNode()}if(r&&(ec(e)&&f.isAtEnd()||Ah(e)&&f.isAtStart())&&(r=am(r,e,Ve,o,!0),Dh(r,o)))return Rh(e,r);c=r&&am(r,e,Dh,o);const x=In(Z(OC(b,o),my));return x&&(!c||!x.contains(c))?(ec(e)?f=gt.after(x):f=gt.before(x),f):c?Rh(e,c):null},im=e=>({next:n=>Xp(_c.Forwards,n,e),prev:n=>Xp(_c.Backwards,n,e)}),q4=(e,n,o)=>{const r=e?gt.before(o):gt.after(o);return vl(e,n,r)},Jp=e=>Ur(e)?gt.before(e):gt.after(e),Qp=e=>gt.isTextPosition(e)?e.offset()===0:pi(e.getNode()),fy=e=>{if(gt.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return pi(e.getNode(!0))},gy=(e,n)=>!gt.isTextPosition(e)&&!gt.isTextPosition(n)&&e.getNode()===n.getNode(!0),hy=e=>!gt.isTextPosition(e)&&Ur(e.getNode()),RC=(e,n,o)=>e?!gy(n,o)&&!hy(n)&&fy(n)&&Qp(o):!gy(o,n)&&Qp(n)&&fy(o),vl=(e,n,o)=>{const r=im(n);return R.from(e?r.next(o):r.prev(o))},Nh=(e,n,o)=>vl(e,n,o).bind(r=>Fu(o,r,n)&&RC(e,o,r)?vl(e,n,r):R.some(r)),o0=(e,n,o,r)=>Nh(e,n,o).bind(c=>r(c)?o0(e,n,c,r):R.some(c)),wd=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Lt(o)?R.some(gt(o,e?0:o.data.length)):o?pi(o)?R.some(e?gt.before(o):Jp(o)):q4(e,n,o):R.none()},wi=_e(vl,!0),yl=_e(vl,!1),Mi=_e(wd,!0),Cd=_e(wd,!1),py="_mce_caret",wl=e=>En(e)&&e.id===py,dg=(e,n)=>{let o=n;for(;o&&o!==e;){if(wl(o))return o;o=o.parentNode}return null},YT=e=>oe(e.start),K4=e=>uo(e,"rng"),Y4=e=>uo(e,"id"),mg=e=>uo(e,"name"),by=e=>_t.isArray(e.start),eb=e=>!mg(e)&&At(e.forward)?e.forward:!0,XT=(e,n)=>(En(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),NC=(e,n)=>{const o=R.from(dc(e.getRoot(),n.start)),r=R.from(dc(e.getRoot(),n.end));return Vr(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:eb(n)}})},vy=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(yr);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},X4=e=>!e.hasChildNodes(),JT=(e,n)=>Cd(e).fold(Et,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),ai=(e,n,o)=>X4(n)&&dg(e,n)?(vy(n,o),!0):!1,s0=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const x=f.childNodes;if(ai(u,f,r))return!0;if(c[y]>x.length-1)return ai(u,f,r)?!0:JT(f,r);f=x[c[y]]}Lt(f)&&(b=Math.min(c[0],f.data.length)),En(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},fg=e=>Lt(e)&&e.data.length>0,lm=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):fg(r.nextSibling)?(f=r.nextSibling,b=0):fg(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):fg(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,x=r.nextSibling;_t.each(_t.grep(r.childNodes),P=>{Lt(P)&&(P.data=P.data.replace(/\uFEFF/g,""))});let N;for(;N=e.get(o.id+"_"+n);)e.remove(N,!0);if(Lt(x)&&Lt(y)&&!ls.browser.isOpera()){const P=y.data.length;y.appendData(x.data),e.remove(x),f=y,b=P}}return R.some(gt(f,b))}else return R.none()},tb=(e,n)=>{const o=e.createRng();return s0(e,!0,n,o)&&s0(e,!1,n,o)?R.some({range:o,forward:eb(n)}):R.none()},r0=(e,n)=>{const o=lm(e,"start",n),r=lm(e,"end",n);return Vr(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(XT(e,c.container()),c.offset()),f.setEnd(XT(e,u.container()),u.offset()),{range:f,forward:eb(n)}})},MC=(e,n)=>R.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),QT=(e,n)=>{const o=e.dom;if(n){if(by(n))return tb(o,n);if(YT(n))return NC(o,n);if(Y4(n))return r0(o,n);if(mg(n))return MC(o,n);if(K4(n))return R.some({range:n.rng,forward:eb(n)})}return R.none()},eE=(e,n,o)=>fT(e,n,o),a0=(e,n)=>{QT(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Ac=e=>En(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Mh=(e=>n=>e===n)(ra),Oc=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,c0=e=>!Oc(e)&&!Mh(e)&&!sh(e),au=e=>({value:e}),yy=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},wy=e=>{const n=yy(e.red)+yy(e.green)+yy(e.blue);return au(n)},tE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,nE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Cy=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),BC=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Cy(c,u,f,b)},oE=e=>{if(e==="transparent")return R.some(Cy(0,0,0,0));const n=tE.exec(e);if(n!==null)return R.some(BC(n[1],n[2],n[3],"1"));const o=nE.exec(e);return o!==null?R.some(BC(o[1],o[2],o[3],o[4])):R.none()},nb=e=>oE(e).map(wy).map(n=>"#"+n.value).getOr(e),$h=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},sE=e=>jn(e,n=>{const o=$p(n);return o?[be.fromDom(o)]:[]}),PC=e=>$h(e).length>1,Sy=e=>Z(sE(e),Xa),rE=e=>Rs(e,"td[data-mce-selected],th[data-mce-selected]"),xy=(e,n)=>{const o=rE(n);return o.length>0?o:Sy(e)},df=e=>xy($h(e.selection.getSel()),be.fromDom(e.getBody())),gg=(e,n)=>Tu(e,"table",n),FC=e=>{const n=e.startContainer,o=e.startOffset;return Lt(n)?o===0?R.some(be.fromDom(n)):R.none():R.from(n.childNodes[o]).map(be.fromDom)},J4=e=>{const n=e.endContainer,o=e.endOffset;return Lt(n)?o===n.data.length?R.some(be.fromDom(n)):R.none():R.from(n.childNodes[o-1]).map(be.fromDom)},IC=e=>$f(e).fold(ge([e]),n=>[e].concat(IC(n))),ky=e=>Mm(e).fold(ge([e]),n=>Yn(n)==="br"?Fc(n).map(o=>[e].concat(ky(o))).getOr([]):[e].concat(ky(n))),Ty=(e,n)=>Vr(FC(n),J4(n),(o,r)=>{const c=Jt(IC(e),_e($s,o)),u=Jt(ky(e),_e($s,r));return c.isSome()&&u.isSome()}).getOr(!1),i0=(e,n,o,r)=>{const c=o,u=new pa(o,c),f=ps(e.schema.getMoveCaretBeforeOnEnterElements(),(y,x)=>!ae(["td","th","table"],x.toLowerCase()));let b=o;do{if(Lt(b)&&_t.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},ds=e=>{const n=e.selection.getSel();return we(n)&&n.rangeCount>0},Sd=(e,n)=>{const o=df(e);o.length>0?z(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},mf=(e,n,o)=>{const r=pl(e,n);o(r),e.moveToBookmark(r)},ff=e=>ct(e==null?void 0:e.nodeType),Ey=e=>En(e)&&!Ac(e)&&!wl(e)&&!Eu(e),Bh=(e,n)=>{if(Ey(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},gf=e=>e.isContentEditable===!0,l0=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=ar(u);mf(r,!0,()=>{n()}),f&&ar(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&u0(c,r)},u0=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!Bh(e,b)&&En(u)){const y=u.childNodes,x=e.getRoot();let N;if(f<y.length){const P=y[f];N=new pa(P,(o=e.getParent(P,e.isBlock))!==null&&o!==void 0?o:x)}else{const P=y[y.length-1];N=new pa(P,(r=e.getParent(P,e.isBlock))!==null&&r!==void 0?r:x),N.next(!0)}for(let P=N.current();P;P=N.next()){if(e.getContentEditable(P)==="false")return;if(Lt(P)&&!ob(P)){c.setStart(P,0),n.setRng(c);return}}}},d0=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(En(e)||!ob(e))return e}},hg=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||jf(e,n),pg=(e,n,o)=>e.schema.isValidChild(n,o),ob=(e,n=!1)=>{if(we(e)&&Lt(e)){const o=n?e.data.replace(/ /g,"\xA0"):e.data;return Ol(o)}else return!1},m0=e=>we(e)&&Lt(e)&&e.length===0,Q4=(e,n)=>{const o="[data-mce-cef-wrappable]",r=AT(e),c=Ss(r)?o:`${o},${r}`;return Ai(be.fromDom(n),c)},LC=(e,n)=>{const o=e.dom;return Ey(n)&&o.getContentEditable(n)==="false"&&Q4(e,n)&&o.select('[contenteditable="true"]',n).length===0},um=(e,n)=>Q(e)?e(n):(we(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),_y=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),bg=(e,n)=>{if(Nt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=nb(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Ay=(e,n,o)=>{const r=e.getStyle(n,o);return bg(r,o)},HC=(e,n)=>{let o;return e.getParent(n,r=>En(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},sb=(e,n,o)=>e.getParents(n,o,e.getRoot()),Oy=(e,n,o)=>{const r=e.formatter.get(n);return we(r)&&se(r,o)},aE=(e,n)=>Oy(e,n,r=>{const c=u=>Q(u)||u.length>1&&u.charAt(0)==="%";return se(["styles","attributes"],u=>as(r,u).exists(f=>{const b=wt(f)?f:vs(f);return se(b,c)}))}),cE=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>ps(u,(f,b)=>se(r,y=>y===b));return Oy(e,n,u=>{const f=c(u);return Oy(e,o,b=>{const y=c(b);return Wr(f,y)})})},xd=e=>dr(e,"block"),Ph=e=>xd(e)&&e.wrapper===!0,iE=e=>xd(e)&&e.wrapper!==!0,$l=e=>dr(e,"selector"),tc=e=>dr(e,"inline"),lE=e=>$l(e)&&tc(e)&&sa(as(e,"mixed"),!0),Fh=e=>$l(e)&&e.expand!==!1&&!tc(e),Ih=Ac,zC=sb,VC=ob,uE=hg,vn=e=>Ur(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Da=(e,n)=>{let o=n;for(;o;){if(En(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},vg=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},fc=(e,n,o)=>vg(e,n,o,r=>Mh(r)||Oc(r)),Bl=(e,n,o)=>vg(e,n,o,c0),f0=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(N,P,L)=>{const ce=Qm(e),ie=c?ce.backwards:ce.forwards;return R.from(ie(N,P,(ee,ue)=>Ih(ee.parentNode)?-1:(f=ee,L(c,ee,ue)),b))};return y(o,r,fc).bind(N=>u?y(N.container,N.offset+(c?-1:0),Bl):R.some(N)).orThunk(()=>f?R.some({container:f,offset:c?0:f.length}):R.none())},Lh=(e,n,o,r,c)=>{const u=r[c];Lt(r)&&Ss(r.data)&&u&&(r=u);const f=zC(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const x=n[y];if(!(we(x.collapsed)&&x.collapsed!==o.collapsed)&&$l(x)&&e.is(f[b],x.selector))return f[b]}return r},rb=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(xd(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(Lt(o)?o.parentNode:o,x=>x!==f&&uE(e.schema,x),y)}if(u&&xd(b)&&b.wrapper&&(u=zC(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!_y(u,"br")););return u||o},UC=(e,n,o,r)=>{const c=o.parentNode;return we(o[r])?!1:c===n||Nt(c)||e.isBlock(c)?!0:UC(e,n,c,r)},ab=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(Lt(o)&&!VC(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const x=Lt(y)&&!UC(e,b,y,f);if(!Ih(y)&&!vn(y)&&!VC(y,x))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Dy=e=>Ih(e.parentNode)||Ih(e),hf=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return En(c)&&c.hasChildNodes()&&(c=ef(c,u),Lt(c)&&(u=0)),En(f)&&f.hasChildNodes()&&(f=ef(f,n.collapsed?b:b-1),Lt(f)&&(b=f.data.length)),c=Da(e,c),f=Da(e,f),Dy(c)&&(c=Ih(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,Lt(c)&&(u=n.collapsed?c.length:0)),Dy(f)&&(f=Ih(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,Lt(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(f0(e,e.getRoot(),c,u,!0,r).each(({container:P,offset:L})=>{c=P,u=L}),f0(e,e.getRoot(),f,b,!1,r).each(({container:P,offset:L})=>{f=P,b=L})),(tc(y)||y.block_expand)&&((!tc(y)||!Lt(c)||u===0)&&(c=ab(e,o,c,u,!0)),(!tc(y)||!Lt(f)||b===f.data.length)&&(f=ab(e,o,f,b,!1))),Fh(y)&&(c=Lh(e,o,n,c,"previousSibling"),f=Lh(e,o,n,f,"nextSibling")),(xd(y)||$l(y))&&(c=rb(e,o,c,"previousSibling"),f=rb(e,o,f,"nextSibling"),xd(y)&&(e.isBlock(c)||(c=ab(e,o,c,u,!0)),e.isBlock(f)||(f=ab(e,o,f,b,!1)))),En(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),En(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},cb=(e,n,o)=>{var r;const c=n.startOffset,u=ef(n.startContainer,c),f=n.endOffset,b=ef(n.endContainer,f-1),y=ue=>{const Re=ue[0];Lt(Re)&&Re===u&&c>=Re.data.length&&ue.splice(0,1);const Ae=ue[ue.length-1];return f===0&&ue.length>0&&Ae===b&&Lt(Ae)&&ue.splice(ue.length-1,1),ue},x=(ue,Re,Ae)=>{const je=[];for(;ue&&ue!==Ae;ue=ue[Re])je.push(ue);return je},N=(ue,Re)=>e.getParent(ue,Ae=>Ae.parentNode===Re,Re),P=(ue,Re,Ae)=>{const je=Ae?"nextSibling":"previousSibling";for(let et=ue,xt=et.parentNode;et&&et!==Re;et=xt){xt=et.parentNode;const un=x(et===ue?et:et[je],je);un.length&&(Ae||un.reverse(),o(y(un)))}};if(u===b)return o(y([u]));const L=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return P(u,L,!0);if(e.isChildOf(b,u))return P(b,L);const ce=N(u,L)||u,ie=N(b,L)||b;P(u,ce,!0);const ee=x(ce===u?ce:ce.nextSibling,"nextSibling",ie===b?ie.nextSibling:ie);ee.length&&o(y(ee)),P(b,ie)},dE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],WC=e=>Os(e)&&eu(e)===yr,Ry=(e,n,o,r)=>wc(n).fold(()=>"skipping",c=>r==="br"||WC(n)?"valid":ji(n)?"existing":wl(n.dom)?"caret":se(dE,u=>Ai(n,u))?"valid-block":!pg(e,o,r)||!pg(e,Yn(c),o)?"invalid-child":"valid"),yg=(e,n)=>{const o=hf(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},ib=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;wu(e,Dp()),nr(e,`${Xf()}`,f),nr(e,`${$u()}`,r);const{attributes:y={},classes:x=[]}=c(f,b);if(Ds(e,y),L2(e,x),u){x.length>0&&nr(e,`${vh()}`,x.join(","));const N=Le(y);N.length>0&&nr(e,`${ya()}`,N.join(","))}},g0=e=>{Gl(e,Dp()),Gr(e,`${Xf()}`),Gr(e,`${$u()}`),Gr(e,`${bh()}`);const n=yc(e,`${ya()}`).map(r=>r.split(",")).getOr([]),o=yc(e,`${vh()}`).map(r=>r.split(",")).getOr([]);z(n,r=>Gr(e,r)),$v(e,o),Gr(e,`${vh()}`),Gr(e,`${ya()}`)},h0=(e,n,o,r,c)=>{const u=be.fromTag("span",e);return ib(u,n,o,r,c,!1),u},Hh=(e,n,o,r,c,u)=>{const f=[],b=h0(e.getDoc(),o,u,r,c),y=Xm(),x=()=>{y.clear()},N=()=>y.get().getOrThunk(()=>{const ie=Jf(b);return f.push(ie),y.set(ie),ie}),P=ie=>{z(ie,L)},L=ie=>{switch(Ry(e,ie,"span",Yn(ie))){case"invalid-child":{x();const ue=ha(ie);P(ue),x();break}case"valid-block":{x(),ib(ie,o,u,r,c,!0);break}case"valid":{const ue=N();Bm(ie,ue);break}}},ce=ie=>{const ee=re(ie,be.fromDom);P(ee)};return cb(e.dom,n,ie=>{x(),ce(ie)}),f},Ny=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=df(e).length>0,b=I2("mce-annotation");if(u.collapsed&&!f&&yg(e,u),c.getRng().collapsed&&!f){const y=h0(e.getDoc(),b,r,n,o.decorate);Yg(y,ra),c.getRng().insertNode(y.dom),c.select(y.dom)}else mf(c,!1,()=>{Sd(e,y=>{Hh(e,y,b,n,o.decorate,r)})})})},ZC=e=>{const n=gl();aT(e,n);const o=rT(e,n),r=zi("span"),c=u=>{z(u,f=>{r(f)?ic(f):g0(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Ny(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{const f=e.selection.getBookmark();ca(e,R.some(u)).each(({elements:b})=>{c(b)}),e.selection.moveToBookmark(f)},removeAll:u=>{const f=e.selection.getBookmark();en(F2(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=F2(e,u);return Ut(f,b=>re(b,y=>y.dom))}}},Lu=e=>({getBookmark:_e(eE,e),moveToBookmark:_e(a0,e)});Lu.isBookmarkNode=Ac;const lb=(e,n,o)=>o.collapsed?!1:se(o.getClientRects(),r=>W2(r,e,n)),mE=(e,n)=>e.dispatch("PreProcess",n),fE=(e,n)=>e.dispatch("PostProcess",n),dm=e=>{e.dispatch("remove")},gE=e=>{e.dispatch("detach")},jC=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},p0=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},hE=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},b0=e=>{e.dispatch("PreInit")},Wc=e=>{e.dispatch("PostRender")},Hu=e=>{e.dispatch("Init")},cu=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},ub=(e,n,o)=>{e.dispatch(n,o)},v0=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},GC=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},My=(e,n)=>e.dispatch("BeforeSetContent",n),qC=(e,n)=>e.dispatch("SetContent",n),$y=(e,n)=>e.dispatch("BeforeGetContent",n),KC=(e,n)=>e.dispatch("GetContent",n),By=(e,n)=>{e.dispatch("AutocompleterStart",n)},YC=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},XC=e=>{e.dispatch("AutocompleterEnd")},y0=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Py=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),sr=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Fn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Fn.metaKeyPressed(e),metaKeyPressed:e=>ls.os.isMacOS()||ls.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},pf="data-mce-selected",JC="table,img,figure.image,hr,video,span.mce-preview-object",bf=Math.abs,kd=Math.round,zh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Fy=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Pl=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,x,N,P,L,ce,ie,ee,ue,Re,Ae,je,et,xt,un;const Xt=hn=>we(hn)&&(Ea(hn)||o.is(hn,"figure.image")),lt=hn=>Jl(hn)||o.hasClass(hn,"mce-preview-object"),Je=(hn,fs)=>{if(Fy(hn)){const rs=hn.touches[0];return Xt(hn.target)&&!lb(rs.clientX,rs.clientY,fs)}else return Xt(hn.target)&&!lb(hn.clientX,hn.clientY,fs)},Sn=hn=>{const fs=hn.target;Je(hn,n.selection.getRng())&&!hn.isDefaultPrevented()&&n.selection.select(fs)},no=hn=>o.hasClass(hn,"mce-preview-object")&&we(hn.firstElementChild)?[hn,hn.firstElementChild]:o.is(hn,"figure.image")?[hn.querySelector("img")]:[hn],lo=hn=>{const fs=Gv(n);return!fs||hn.getAttribute("data-mce-resize")==="false"||hn===n.getBody()?!1:o.hasClass(hn,"mce-preview-object")&&we(hn.firstElementChild)?Ai(be.fromDom(hn.firstElementChild),fs):Ai(be.fromDom(hn),fs)},Vo=hn=>lt(hn)?o.create("img",{src:ls.transparentSrc}):hn.cloneNode(!0),bs=(hn,fs,rs)=>{if(we(rs)){const oc=no(hn);z(oc,Sr=>{Sr.style[fs]||!n.schema.isValid(Sr.nodeName.toLowerCase(),fs)?o.setStyle(Sr,fs,rs):o.setAttrib(Sr,fs,""+rs)})}},js=(hn,fs,rs)=>{bs(hn,"width",fs),bs(hn,"height",rs)},Ws=hn=>{let fs,rs,oc,Sr,Ro;fs=hn.screenX-P,rs=hn.screenY-L,je=fs*x[2]+ee,et=rs*x[3]+ue,je=je<5?5:je,et=et<5?5:et,(Xt(f)||lt(f))&&TT(n)!==!1?oc=!Fn.modifierPressed(hn):oc=Fn.modifierPressed(hn),oc&&(bf(fs)>bf(rs)?(et=kd(je*Re),je=kd(et/Re)):(je=kd(et/Re),et=kd(je*Re))),js(b,je,et),Sr=x.startPos.x+fs,Ro=x.startPos.y+rs,Sr=Sr>0?Sr:0,Ro=Ro>0?Ro:0,o.setStyles(y,{left:Sr,top:Ro,display:"block"}),y.innerHTML=je+" &times; "+et,x[2]<0&&b.clientWidth<=je&&o.setStyle(b,"left",ce+(ee-je)),x[3]<0&&b.clientHeight<=et&&o.setStyle(b,"top",ie+(ue-et)),fs=u.scrollWidth-xt,rs=u.scrollHeight-un,fs+rs!==0&&o.setStyles(y,{left:Sr-fs,top:Ro-rs}),Ae||(p0(n,f,ee,ue,"corner-"+x.name),Ae=!0)},Ma=()=>{const hn=Ae;Ae=!1,hn&&(bs(f,"width",je),bs(f,"height",et)),o.unbind(r,"mousemove",Ws),o.unbind(r,"mouseup",Ma),c!==r&&(o.unbind(c,"mousemove",Ws),o.unbind(c,"mouseup",Ma)),o.remove(b),o.remove(y),o.remove(N),Si(f),hn&&(hE(n,f,je,et,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Si=hn=>{Cn();const fs=o.getPos(hn,u),rs=fs.x,oc=fs.y,Sr=hn.getBoundingClientRect(),Ro=Sr.width||Sr.right-Sr.left,Ps=Sr.height||Sr.bottom-Sr.top;f!==hn&&(Uo(),f=hn,je=et=0);const xa=n.dispatch("ObjectSelected",{target:hn});lo(hn)&&!xa.isDefaultPrevented()?en(zh,(vr,Yr)=>{const ua=$a=>{const gu=no(f)[0];P=$a.screenX,L=$a.screenY,ee=gu.clientWidth,ue=gu.clientHeight,Re=ue/ee,x=vr,x.name=Yr,x.startPos={x:Ro*vr[0]+rs,y:Ps*vr[1]+oc},xt=u.scrollWidth,un=u.scrollHeight,N=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(N,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Vo(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:rs,top:oc,margin:0}),js(b,Ro,Ps),b.removeAttribute(pf),u.appendChild(b),o.bind(r,"mousemove",Ws),o.bind(r,"mouseup",Ma),c!==r&&(o.bind(c,"mousemove",Ws),o.bind(c,"mouseup",Ma)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},ee+" &times; "+ue)};let Br=o.get("mceResizeHandle"+Yr);Br&&o.remove(Br),Br=o.add(u,"div",{id:"mceResizeHandle"+Yr,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Yr+"-resize; margin:0; padding:0"}),o.bind(Br,"mousedown",$a=>{$a.stopImmediatePropagation(),$a.preventDefault(),ua($a)}),vr.elm=Br,o.setStyles(Br,{left:Ro*vr[0]+rs-Br.offsetWidth/2,top:Ps*vr[1]+oc-Br.offsetHeight/2})}):Uo(!1)},Gt=ph(Si,0),Uo=(hn=!0)=>{Gt.cancel(),Cn(),f&&hn&&f.removeAttribute(pf),en(zh,(fs,rs)=>{const oc=o.get("mceResizeHandle"+rs);oc&&(o.unbind(oc),o.remove(oc))})},go=(hn,fs)=>o.isChildOf(hn,fs),Or=hn=>{if(Ae||n.removed||n.composing)return;const fs=hn.type==="mousedown"?hn.target:e.getNode(),rs=ld(be.fromDom(fs),JC).map(Sr=>Sr.dom).getOrUndefined(),oc=we(rs)?o.getAttrib(rs,pf,"1"):"1";if(z(o.select(`img[${pf}],hr[${pf}]`),Sr=>{Sr.removeAttribute(pf)}),we(rs)&&go(rs,u)){Ao();const Sr=e.getStart(!0);if(go(Sr,rs)&&go(e.getEnd(!0),rs)){o.setAttrib(rs,pf,oc),Gt.throttle(rs);return}}Uo()},Cn=()=>{en(zh,hn=>{hn.elm&&(o.unbind(hn.elm),delete hn.elm)})},Ao=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Ao(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Or),n.on("keyup compositionend",hn=>{f&&f.nodeName==="TABLE"&&Or(hn)}),n.on("hide blur",Uo),n.on("contextmenu longpress",Sn,!0)}),n.on("remove",Cn),{isResizable:lo,showResizeRect:Si,hideResizeRect:Uo,updateResizeRect:Or,destroy:()=>{Gt.cancel(),f=b=N=null}}},wg=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},QC=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Vh=(e,n,o)=>{const r=e.document.createRange();return wg(r,n),QC(r,o),r},db=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},mb=ru.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Iy=(e,n,o)=>n(be.fromDom(o.startContainer),o.startOffset,be.fromDom(o.endContainer),o.endOffset),pE=(e,n)=>n.match({domRange:o=>({ltr:ge(o),rtl:R.none}),relative:(o,r)=>({ltr:Gn(()=>Vh(e,o,r)),rtl:Gn(()=>R.some(Vh(e,r,o)))}),exact:(o,r,c,u)=>({ltr:Gn(()=>db(e,o,r,c,u)),rtl:Gn(()=>R.some(db(e,c,u,o,r)))})}),bE=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>mb.rtl(be.fromDom(c.endContainer),c.endOffset,be.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>Iy(e,mb.ltr,o)):Iy(e,mb.ltr,o)},vE=(e,n)=>{const o=pE(e,n);return bE(e,o)};mb.ltr,mb.rtl;const Zc={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},vf=(e,n,o)=>{var r,c;return R.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return R.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),R.some(f)})},eO=(e,n,o)=>{var r,c;return R.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},yE=(()=>document.caretPositionFromPoint?vf:document.caretRangeFromPoint?eO:R.none)(),wE=(e,n,o)=>{const r=be.fromDom(e.document);return yE(r,n,o).map(c=>Zc.create(be.fromDom(c.startContainer),c.startOffset,be.fromDom(c.endContainer),c.endOffset))},os=ru.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),CE=(e,n,o,r)=>e.fold(n,o,r),eS=e=>e.fold(Ue,Ue,Ue),Ly=os.before,tS=os.on,tO=os.after,Td={before:Ly,on:tS,after:tO,cata:CE,getStart:eS},w0=ru.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),nO=e=>w0.exact(e.start,e.soffset,e.finish,e.foffset),oO=e=>e.match({domRange:n=>be.fromDom(n.startContainer),relative:(n,o)=>Td.getStart(n),exact:(n,o,r,c)=>n}),nS=w0.domRange,oS=w0.relative,sS=w0.exact,sO=e=>{const n=oO(e);return Su(n)},rO=Zc.create,yf={domRange:nS,relative:oS,exact:sS,exactFromRange:nO,getWin:sO,range:rO},Hy=(e,n)=>{const o=Yn(e);return o==="input"?Td.after(e):ae(["br","img"],o)?n===0?Td.before(e):Td.after(e):Td.on(e,n)},SE=(e,n)=>{const o=e.fold(Td.before,Hy,Td.after),r=n.fold(Td.before,Hy,Td.after);return yf.relative(o,r)},rS=(e,n,o,r)=>{const c=Hy(e,n),u=Hy(o,r);return yf.relative(c,u)},xo=e=>e.match({domRange:n=>{const o=be.fromDom(n.startContainer),r=be.fromDom(n.endContainer);return rS(o,n.startOffset,r,n.endOffset)},relative:SE,exact:rS}),Uh=(e,n)=>{const r=(n||document).createDocumentFragment();return z(e,c=>{r.appendChild(c.dom)}),be.fromDom(r)},aS=e=>{const n=yf.getWin(e).dom,o=(c,u,f,b)=>db(n,c,u,f,b),r=xo(e);return vE(n,r).match({ltr:o,rtl:o})},cS=(e,n,o)=>wE(e,n,o),Cg=(e,n,o)=>{const r=Su(be.fromDom(o));return cS(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},zy=(e,n)=>we(e)&&we(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,xE=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},C0=(e,n,o)=>xE(e,n,o)!==null,iS=(e,n,o)=>C0(e,n,r=>r.nodeName===o),Vy=(e,n)=>V(e)&&!C0(e,n,wl),lS=(e,n,o)=>{const r=n.parentNode;if(r){const c=new pa(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(Ur(u))return!0}return!1},kE=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},S0=(e,n)=>{let o=n;for(;o&&o!==e;){if(ar(o))return!0;o=o.parentNode}return!1},fb=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,x;if(!b)return R.none();const N=e.getParent(b,e.isBlock)||u;if(r&&Ur(c)&&n&&e.isEmpty(N))return R.some(gt(b,e.nodeIndex(c)));const P=new pa(c,N);for(;x=P[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||Vy(x,u))return R.none();if(Lt(x)&&x.data.length>0)return iS(x,u,"A")?R.none():R.some(gt(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return R.none();y=x}return al(y)?R.none():o&&y?R.some(gt(y,0)):R.none()},Uy=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const x=En(b)&&y===b.childNodes.length,N=e.schema.getNonEmptyElements();let P=o;if(V(b))return R.none();if(En(b)&&y>b.childNodes.length-1&&(P=!1),ei(b)&&(b=c,y=0),b===c){if(P&&(u=b.childNodes[y>0?y-1:0],u&&(V(u)||N[u.nodeName]||Ka(u))))return R.none();if(b.hasChildNodes()){if(y=Math.min(!P&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=Lt(b)&&x?b.data.length:0,!n&&b===c.lastChild&&Ka(b)||S0(c,b)||V(b))return R.none();if(b.hasChildNodes()&&!Ka(b)){u=b;const L=new pa(b,c);do{if(ar(u)||V(u)){f=!1;break}if(Lt(u)&&u.data.length>0){y=P?0:u.data.length,b=u,f=!0;break}if(N[u.nodeName.toLowerCase()]&&!i1(u)){y=e.nodeIndex(u),b=u.parentNode,P||y++,f=!0;break}}while(u=P?L.next():L.prev())}}}return n&&(Lt(b)&&y===0&&fb(e,x,n,!0,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),En(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&Ur(u)&&!kE(u,"A")&&!lS(e,u,!1)&&!lS(e,u,!0)&&fb(e,x,n,!0,u).each(L=>{b=L.container(),y=L.offset(),f=!0}))),P&&!n&&Lt(b)&&y===b.data.length&&fb(e,x,n,!1,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),f&&b?R.some(gt(b,y)):R.none()},x0=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=gt.fromRangeStart(n);return Uy(e,o,!0,r).each(u=>{(!o||!gt.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Uy(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),zy(n,r)?R.none():R.some(r)},k0=(e,n)=>e.splitText(n),gb=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&Lt(n)){if(o>0&&o<n.data.length)if(r=k0(n,o),n=r.previousSibling,c>o){c=c-o;const u=k0(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(Lt(n)&&o>0&&o<n.data.length&&(n=k0(n,o),o=0),Lt(r)&&c>0&&c<r.data.length){const u=k0(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Sg=e=>({walk:(u,f)=>cb(e,u,f),split:gb,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=hf(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>x0(e,u).fold(Et,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Sg.compareRanges=zy,Sg.getCaretRangeFromPoint=Cg,Sg.getSelectedNode=$p,Sg.getNode=ef;const Ls=((e,n)=>{const o=(b,y)=>{if(!ct(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const x=b.dom;Ei(x)&&(x.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const x=He(b,e);return parseFloat(x)||0}return y},c=r,u=(b,y)=>Be(y,(x,N)=>{const P=He(b,N),L=P===void 0?0:parseInt(P,10);return isNaN(L)?x:x+L},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,x)=>{const N=u(b,x);return y>N?y-N:0}}})("height",e=>{const n=e.dom;return sl(e)?n.getBoundingClientRect().height:n.offsetHeight}),TE=e=>Ls.get(e),wf=()=>be.fromDom(document),Ed=(e,n)=>e.view(n).fold(ge([]),r=>{const c=e.owner(r),u=Ed(e,c);return[r].concat(u)}),Wy=(e,n)=>{const o=n.owner(e);return Ed(n,o)};var hb=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?R.none():R.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(be.fromDom)},owner:e=>Vi(e)});const T0=e=>{const n=wf(),o=lc(n),r=Wy(e,hb),c=Lo(e),u=$e(r,(f,b)=>{const y=Lo(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return Lf(u.left+c.left+o.left,u.top+c.top+o.top)},mm=e=>Yn(e)==="textarea",jy=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),EE=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},_E=(e,n)=>{const o=ha(e);if(o.length===0||mm(e))return{element:e,offset:n};if(n<o.length&&!mm(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return mm(r)?{element:e,offset:n}:Yn(r)==="img"?{element:r,offset:1}:Os(r)?{element:r,offset:eu(r).length}:{element:r,offset:ha(r).length}}},uS=(e,n)=>{const o=hr(e),r=TE(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Cs=(e,n)=>{const o=_E(e,n),r=be.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+yr+"</span>");return ns(o.element,r),uS(r,()=>Bs(r))},zu=e=>uS(be.fromDom(e),Ne),xg=(e,n,o,r)=>{v(e,(c,u)=>m(e,n,o,r),o)},l=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(jy(e,u))return;const f=lc(n).top;o(n,f,r,c),EE(e,u)},m=(e,n,o,r)=>{const c=be.fromDom(e.getBody()),u=be.fromDom(e.getDoc());qn(c);const f=Cs(be.fromDom(o.startContainer),o.startOffset);l(e,u,n,f,r),f.cleanup()},h=(e,n,o,r)=>{const c=be.fromDom(e.getDoc());l(e,c,o,zu(n),r)},v=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(be.fromDom(r),be.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},S=(e,n,o,r)=>{const c=e.pos;if(o)Xl(c.left,c.top,r);else{const u=c.top-n+e.height;Xl(c.left,u,r)}},O=(e,n,o,r,c)=>{const u=o+n,f=r.pos.top,b=r.bottom,y=b-f>=o;f<n?S(r,o,c!==!1,e):f>u?S(r,o,y?c!==!1:c===!0,e):b>u&&!y&&S(r,o,c===!0,e)},F=(e,n,o,r)=>{const c=Su(e).dom.innerHeight;O(e,n,c,o,r)},G=(e,n,o,r)=>{const c=Su(e).dom.innerHeight;O(e,n,c,o,r);const u=T0(o.element),f=s1(window);u.top<f.y?ku(o.element,r!==!1):u.top>f.bottom&&ku(o.element,r===!0)},ne=(e,n,o)=>xg(e,F,n,o),ye=(e,n,o)=>h(e,n,F,o),Ze=(e,n,o)=>xg(e,G,n,o),Mt=(e,n,o)=>h(e,n,G,o),ln=(e,n,o)=>{(e.inline?ye:Mt)(e,n,o)},Yt=(e,n,o)=>{(e.inline?ne:Ze)(e,n,o)},vt=e=>e.dom.focus(),fn=e=>{const n=ol(e).dom;return e.dom===n.activeElement},St=(e=wf())=>R.from(e.dom.activeElement).map(be.fromDom),Wn=e=>St(ol(e)).filter(n=>e.dom.contains(n.dom)),To=(e,n)=>{const o=Os(n)?eu(n).length:ha(n).length+1;return e>o?o:e<0?0:e},zo=e=>yf.range(e.start,To(e.soffset,e.start),e.finish,To(e.foffset,e.finish)),Ar=(e,n)=>!Lm(n.dom)&&(Ga(e,n)||$s(e,n)),gc=e=>n=>Ar(e,n.start)&&Ar(e,n.finish),la=e=>e.inline||ls.browser.isFirefox(),$i=e=>yf.range(be.fromDom(e.startContainer),e.startOffset,be.fromDom(e.endContainer),e.endOffset),Cf=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?R.none():R.from(n.getRangeAt(0))).map($i)},pb=e=>{const n=Su(e);return Cf(n.dom).filter(gc(e))},E0=(e,n)=>R.from(n).filter(gc(e)).map(zo),_0=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),R.some(n)}catch{return R.none()}},qs=e=>{const n=la(e)?pb(be.fromDom(e.getBody())):R.none();e.bookmark=n.isSome()?n:e.bookmark},Dc=e=>(e.bookmark?e.bookmark:R.none()).bind(o=>E0(be.fromDom(e.getBody()),o)).bind(_0),Rc=e=>{Dc(e).each(n=>e.selection.setRng(n))},Xi={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},Wh=(e,n)=>(ct(n)||(n=0),setTimeout(e,n)),ci=(e,n)=>(ct(n)||(n=0),setInterval(e,n)),Bi={setEditorTimeout:(e,n,o)=>Wh(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=ci(()=>{e.removed?clearInterval(r):n()},o);return r}},Zh=e=>e.type==="nodechange"&&e.selectionChange,Uu=(e,n)=>{const o=()=>{n.throttle()};pr.DOM.bind(document,"mouseup",o),e.on("remove",()=>{pr.DOM.unbind(document,"mouseup",o)})},Nc=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},AE=(e,n)=>{Nc(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Zh(o)||qs(e)})},OE=e=>{const n=ph(()=>{qs(e)},0);e.on("init",()=>{e.inline&&Uu(e,n),AE(e,n)}),e.on("remove",()=>{n.cancel()})};let jh;const Gy=pr.DOM,DE=e=>En(e)&&Xi.isEditorUIElement(e),qy=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},A0=(e,n)=>{const o=uC(e);return Gy.getParent(n,c=>DE(c)||(o?e.dom.is(c,o):!1))!==null},bb=e=>{try{const n=ol(be.fromDom(e.getElement()));return St(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},dS=(e,n)=>{const o=n.editor;OE(o),o.on("focusin",()=>{const r=e.focusedEditor;r!==o&&(r&&r.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:r}),o.focus(!0))}),o.on("focusout",()=>{Bi.setEditorTimeout(o,()=>{const r=e.focusedEditor;!A0(o,bb(o))&&r===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),jh||(jh=r=>{const c=e.activeEditor;c&&Kg(r).each(u=>{const f=u;f.ownerDocument===document&&f!==document.body&&!A0(c,f)&&e.focusedEditor===c&&(c.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Gy.bind(document,"focusin",jh))},cO=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&jh&&(Gy.unbind(document,"focusin",jh),jh=null)},tF=e=>{e.on("AddEditor",_e(dS,e)),e.on("RemoveEditor",_e(cO,e))},iO=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),lO=e=>e.collapsed?R.from(ef(e.startContainer,e.startOffset)).map(be.fromDom):R.none(),nF=(e,n)=>lO(n).bind(o=>zd(o)?R.some(o):Ga(e,o)?R.none():R.some(e)),uO=(e,n)=>{nF(be.fromDom(e.getBody()),n).bind(o=>Mi(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},RE=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},oF=e=>fn(e)||Wn(e).isSome(),sF=e=>we(e.iframeElement)&&fn(be.fromDom(e.iframeElement)),mS=e=>{const n=e.getBody();return n&&oF(be.fromDom(n))},rF=e=>{const n=ol(be.fromDom(e.getElement()));return St(n).filter(o=>!qy(o.dom)&&A0(e,o.dom)).isSome()},vb=e=>e.inline?mS(e):sF(e),NE=e=>vb(e)||rF(e),aF=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),we(e.bookmark)&&!vb(e)&&Dc(e).each(u=>{e.selection.setRng(u),r=u});const c=iO(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){RE(c),uO(e,r),fS(e);return}e.inline||(ls.browser.isOpera()||RE(o),e.getWin().focus()),(ls.browser.isFirefox()||e.inline)&&(RE(o),uO(e,r)),fS(e)},fS=e=>e.editorManager.setActive(e),dO=(e,n)=>{e.removed||(n?fS(e):aF(e))},ME=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return R.from(u).map(be.fromDom).map(b=>!r||!n.collapsed?Hd(b,c(b,f)).getOr(b):b).bind(b=>Jo(b)?R.some(b):wc(b).filter(Jo)).map(b=>b.dom).getOr(e)},mO=(e,n,o=!1)=>ME(e,n,!0,o,(r,c)=>Math.min(xu(r),c)),fO=(e,n,o=!1)=>ME(e,n,!1,o,(r,c)=>c>0?c-1:c),gO=(e,n)=>{const o=e;for(;e&&Lt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},cF=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),Lt(o)&&Lt(r)&&(o.length===c?o=gO(o.nextSibling,!0):o=o.parentNode,u===0?r=gO(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=Lt(f)?f.parentNode:f;return En(b)?b:e},gS=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||mO(u,n,n.collapsed),e.isBlock),b=e.getParent(r||fO(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y=f;const x=new pa(f,u);for(;(y=x.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},hO=(e,n,o)=>R.from(n).bind(r=>R.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(i0(e,f,r,!0),i0(e,f,r,!1)),f})),hS=(e,n)=>re(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),pO=e=>Yn(e)==="img"?1:fi(e).fold(()=>ha(e).length,n=>n.length),bO=e=>fi(e).filter(n=>n.trim().length!==0||n.indexOf(ra)>-1).isSome(),iF=["img","br"],vO=e=>bO(e)||ae(iF,Yn(e)),lF=e=>id(e,vO),uF=e=>dF(e,vO),dF=(e,n)=>{const o=r=>{const c=ha(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return R.some(f);const b=o(f);if(b.isSome())return b}return R.none()};return o(e)},yO="[data-mce-autocompleter]",mF=(e,n)=>{if(wO(be.fromDom(e.getBody())).isNone()){const o=be.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Qr(o,be.fromDom(n.extractContents())),n.insertNode(o.dom),wc(o).each(r=>r.dom.normalize()),uF(o).map(r=>{e.selection.setCursorLocation(r.dom,pO(r))})}},fF=e=>ld(e,yO),wO=e=>Hf(e,yO),gF=(e,n)=>wO(n).each(o=>{const r=e.selection.getBookmark();ic(o),e.selection.moveToBookmark(r)}),hF={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},pS=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},bS=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Ol(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},$E=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ji{constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new Ji(n,hF[n]||1);return o&&en(o,(c,u)=>{r.attr(u,c)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!oe(n))return we(n)&&en(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Ji(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=pS(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=pS(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if($E(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||$E(f))return!1}if(f.type===8||f.type===3&&!bS(f)||f.type===3&&f.parent&&o[f.parent.name]&&Ol((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=pS(f,u));return!0}walk(n){return pS(this,null,n)}}const pF=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),CO=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&pF(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},bF=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const y=r.exec(n);if(y===null)return b;if(y[1]==="!"){vo(y[2],"--")?b=CO(n,!1,y.index+3):b=CO(n,!0,y.index+1);break}else{c.lastIndex=r.lastIndex;const x=c.exec(n);if(Y(x)||x.index!==r.lastIndex)continue;y[1]==="/"?f-=1:uo(u,y[2])||(f+=1),b=r.lastIndex+x[0].length;break}}return b},vF=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},SO=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=vF(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,y=f[0].length;let x;u[f[1]]?x=b:x=bF(r,c,b),c=c.substring(0,b-y)+c.substring(x),o.lastIndex=b-y}return Aa(c)},yF=SO,BE=e=>{const n=Rs(e,"[data-mce-bogus]");z(n,o=>{Ir(o,"data-mce-bogus")==="all"?Bs(o):tu(o)?(ns(o,be.fromText(Vm)),Bs(o)):ic(o)})},xO=e=>{const n=Rs(e,"input");z(n,o=>{Gr(o,"name")})},kO=(e,n)=>{const o=bl(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},TO=(e,n)=>{const o=e.getDoc(),r=ol(be.fromDom(e.getBody())),c=be.fromTag("div",o);nr(c,"data-mce-bogus","all"),Se(c,{position:"fixed",left:"-9999999px",top:"0"}),Yg(c,n.innerHTML),BE(c),xO(c);const u=Kl(r);Qr(u,c);const f=Aa(c.dom.innerText);return Bs(c),f},wF=(e,n,o)=>{let r;return n.format==="raw"?r=_t.trim(yF(e.serializer,o.innerHTML)):n.format==="text"?r=TO(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=kO(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Vf(be.fromDom(o))&&oe(r)?_t.trim(r):r},CF=(e,n)=>R.from(e.getBody()).fold(ge(n.format==="tree"?new Ji("body",11):""),o=>wF(e,n,o)),EO=_t.makeMap,_O=e=>{const n=[];e=e||{};const o=e.indent,r=EO(e.indent_before||""),c=EO(e.indent_after||""),u=Ja.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,x)=>{if(o&&r[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let N=0,P=y.length;N<P;N++){const L=y[N];n.push(" ",L.name,'="',u(L.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&c[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Gh=(e={},n=Nu())=>{const o=_O(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var x;o.text((x=y.value)!==null&&x!==void 0?x:"",y.raw)},8:y=>{var x;o.comment((x=y.value)!==null&&x!==void 0?x:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var x;o.doctype((x=y.value)!==null&&x!==void 0?x:"")},4:y=>{var x;o.cdata((x=y.value)!==null&&x!==void 0?x:"")},11:y=>{let x=y;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=y=>{var x;const N=f[y.type];if(N)N(y);else{const P=y.name,L=P in n.getVoidElements();let ce=y.attributes;if(u&&ce&&ce.length>1){const ie=[];ie.map={};const ee=n.getElementRule(y.name);if(ee){for(let ue=0,Re=ee.attributesOrder.length;ue<Re;ue++){const Ae=ee.attributesOrder[ue];if(Ae in ce.map){const je=ce.map[Ae];ie.map[Ae]=je,ie.push({name:Ae,value:je})}}for(let ue=0,Re=ce.length;ue<Re;ue++){const Ae=ce[ue].name;if(!(Ae in ie.map)){const je=ce.map[Ae];ie.map[Ae]=je,ie.push({name:Ae,value:je})}}ce=ie}}if(o.start(P,ce,L),!L){let ie=y.firstChild;if(ie){(P==="pre"||P==="textarea")&&ie.type===3&&((x=ie.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(ie);while(ie=ie.next)}o.end(P)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},AO=new Set;z(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{AO.add(n)});const OO=["font","text-decoration","text-emphasis"],PE=(e,n)=>Le(e.parseStyle(e.getAttrib(n,"style"))),SF=e=>AO.has(e),xF=(e,n)=>pn(PE(e,n),o=>!SF(o)),kF=e=>Z(e,n=>se(OO,o=>vo(n,o))),TF=(e,n,o)=>{const r=PE(e,n),c=PE(e,o),u=f=>{var b,y;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",N=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return ws(x)&&ws(N)&&x!==N};return se(r,f=>{const b=y=>se(y,x=>x===f);if(!b(c)&&b(OO)){const y=kF(c);return se(y,u)}else return u(f)})},DO=(e,n,o)=>R.from(o.container()).filter(Lt).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),FE=_e(DO,!0,Oc),IE=_e(DO,!1,Oc),EF=e=>{const n=e.container();return Lt(n)&&(n.data.length===0||il(n.data)&&Lu.isBookmarkNode(n.parentNode))},qh=(e,n)=>o=>Q1(e?0:-1,o).filter(n).isSome(),RO=e=>Ea(e)&&He(be.fromDom(e),"display")==="block",NO=e=>ar(e)&&!jk(e),fo=qh(!0,RO),MO=qh(!1,RO),O0=qh(!0,Jl),Ky=qh(!1,Jl),vS=qh(!0,Ka),$O=qh(!1,Ka),Kh=qh(!0,NO),Yh=qh(!1,NO),_F=e=>e.slice(0,-1),AF=(e,n,o)=>Ga(n,e)?_F(sd(e,r=>o(r)||$s(r,n))):[],Yy=(e,n)=>AF(e,n,Et),Sf=(e,n)=>[e].concat(Yy(e,n)),BO=(e,n,o)=>o0(e,n,o,EF),PO=(e,n)=>Jt(Sf(be.fromDom(n.container()),e),ba),Ho=(e,n,o)=>BO(e,n.dom,o).forall(r=>PO(n,o).fold(()=>!Fu(r,o,n.dom),c=>!Fu(r,o,n.dom)&&Ga(c,be.fromDom(r.container())))),FO=(e,n,o)=>PO(n,o).fold(()=>BO(e,n.dom,o).forall(r=>!Fu(r,o,n.dom)),r=>BO(e,r.dom,o).isNone()),ms=_e(FO,!1),LE=_e(FO,!0),RV=_e(Ho,!1),NV=_e(Ho,!0),OF=e=>Oh(e).exists(tu),HE=(e,n,o)=>{const r=Z(Sf(be.fromDom(o.container()),n),ba),c=wn(r).getOr(n);return vl(e,c.dom,o).filter(OF)},IO=(e,n)=>Oh(n).exists(tu)||HE(!0,e,n).isSome(),zE=(e,n)=>Uc(n).exists(tu)||HE(!1,e,n).isSome(),DF=_e(HE,!1),_o=_e(HE,!0),LO=e=>gt.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),HO=(e,n)=>{const o=Z(Sf(be.fromDom(n.container()),e),ba);return wn(o).getOr(e)},zO=(e,n)=>LO(n)?IE(n):IE(n)||yl(HO(e,n).dom,n).exists(IE),D0=(e,n)=>LO(n)?FE(n):FE(n)||wi(HO(e,n).dom,n).exists(FE),VO=e=>ae(["pre","pre-wrap"],e),VE=e=>Oh(e).bind(n=>_l(n,Jo)).exists(n=>VO(He(n,"white-space"))),RF=(e,n)=>yl(e.dom,n).isNone(),NF=(e,n)=>wi(e.dom,n).isNone(),UO=(e,n)=>RF(e,n)||NF(e,n)||ms(e,n)||LE(e,n)||zE(e,n)||IO(e,n),MF=e=>we(e)&&ar(e)&&J1(e),$F=(e,n)=>o=>MF(new pa(o,e)[n]()),MV=(e,n)=>{const o=wi(e.dom,n).getOr(n),r=$F(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},BF=(e,n)=>{const o=yl(e.dom,n).getOr(n),r=$F(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},PF=(e,n)=>VE(n)?!1:UO(e,n)||zO(e,n)||D0(e,n),Xy=(e,n)=>VE(n)?!1:ms(e,n)||RV(e,n)||zE(e,n)||zO(e,n)||BF(e,n),FF=e=>{const n=e.container(),o=e.offset();return Lt(n)&&o<n.data.length?gt(n,o+1):e},R0=(e,n)=>VE(n)?!1:LE(e,n)||NV(e,n)||IO(e,n)||D0(e,n)||MV(e,n),UE=(e,n)=>Xy(e,n)||R0(e,FF(n)),Ts=(e,n)=>Mh(e.charAt(n)),WE=(e,n)=>Oc(e.charAt(n)),yS=e=>{const n=e.container();return Lt(n)&&Kn(n.data,ra)},WO=e=>{const n=e.split("");return re(n,(o,r)=>Mh(o)&&r>0&&r<n.length-1&&c0(n[r-1])&&c0(n[r+1])?" ":o).join("")},ZE=(e,n,o)=>{const r=n.data,c=gt(n,0);return!o&&Ts(r,0)&&!UE(e,c)?(n.data=" "+r.slice(1),!0):o&&WE(r,0)&&Xy(e,c)?(n.data=ra+r.slice(1),!0):!1},ZO=e=>{const n=e.data,o=WO(n);return o!==n?(e.data=o,!0):!1},jE=(e,n,o)=>{const r=n.data,c=gt(n,r.length-1);return!o&&Ts(r,r.length-1)&&!UE(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&WE(r,r.length-1)&&R0(e,c)?(n.data=r.slice(0,-1)+ra,!0):!1},jO=(e,n)=>{const o=n.container();if(!Lt(o))return R.none();if(yS(n)){const r=ZE(e,o,!1)||ZO(o)||jE(e,o,!1);return $o(r,n)}else if(UE(e,n)){const r=ZE(e,o,!0)||jE(e,o,!0);return $o(r,n)}else return R.none()},IF=e=>{const n=be.fromDom(e.getBody());e.selection.isCollapsed()&&jO(n,gt.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},GE=(e,n,o)=>{if(o===0)return;const r=be.fromDom(e),c=Im(r,ba).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&R0(c,gt(e,e.data.length)),b=n===0&&Xy(c,gt(e,0));e.replaceData(n,o,vp(u,4,b,f))},wS=(e,n)=>{const o=e.data.slice(n),r=o.length-qc(o).length;GE(e,n,r)},qE=(e,n)=>{const o=e.data.slice(0,n),r=o.length-is(o).length;GE(e,n-r,r)},KE=(e,n,o,r=!0)=>{const c=is(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),Bs(be.fromDom(f)),o&&wS(u,c),u},LF=(e,n)=>{const o=e.container(),r=e.offset();return!gt.isTextPosition(e)&&o===n.parentNode&&r>gt.before(n).offset()},HF=(e,n)=>LF(n,e)?gt(n.container(),n.offset()-1):n,zF=e=>Lt(e)?gt(e,0):gt.before(e),VF=e=>Lt(e)?gt(e,e.data.length):gt.after(e),GO=e=>pi(e.previousSibling)?R.some(VF(e.previousSibling)):e.previousSibling?Cd(e.previousSibling):R.none(),CS=e=>pi(e.nextSibling)?R.some(zF(e.nextSibling)):e.nextSibling?Mi(e.nextSibling):R.none(),YE=(e,n)=>R.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>yl(e,gt.before(o))).orThunk(()=>wi(e,gt.after(n))),UF=(e,n)=>wi(e,gt.after(n)).orThunk(()=>yl(e,gt.before(n))),WF=(e,n)=>GO(n).orThunk(()=>CS(n)).orThunk(()=>YE(e,n)),ZF=(e,n)=>CS(n).orThunk(()=>GO(n)).orThunk(()=>UF(e,n)),jF=(e,n,o)=>e?ZF(n,o):WF(n,o),GF=(e,n,o)=>jF(e,n,o).map(_e(HF,o)),qO=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},qF=e=>n=>n.dom===e,KF=(e,n)=>n&&uo(e.schema.getBlockElements(),Yn(n)),KO=e=>{if(va(e)){const n=be.fromHtml('<br data-mce-bogus="1">');return Lr(e),Qr(e,n),R.some(gt.before(n.dom))}else return R.none()},YF=(e,n,o)=>{const r=Fc(e).filter(Os),c=Ld(e).filter(Os);return Bs(e),tl(r,c,n,(u,f,b)=>{const y=u.dom,x=f.dom,N=y.data.length;return KE(y,x,o),b.container()===x?gt(y,N):b}).orThunk(()=>(o&&(r.each(u=>qE(u.dom,u.dom.length)),c.each(u=>wS(u.dom,0))),n))},XF=(e,n)=>uo(e.schema.getTextInlineElements(),Yn(n)),Wu=(e,n,o,r=!0)=>{const c=GF(n,e.getBody(),o.dom),u=Im(o,_e(KF,e),qF(e.getBody())),f=YF(o,c,XF(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(KO).fold(()=>{r&&qO(e,n,f)},b=>{r&&qO(e,n,R.some(b))})},JF=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,YO=e=>JF.test(e),yb=(e,n)=>Ai(be.fromDom(n),lC(e))&&!jf(e.schema,n),QF=e=>{var n;return pr.DOM.getStyle(e,"direction",!0)==="rtl"||YO((n=e.textContent)!==null&&n!==void 0?n:"")},XO=(e,n,o)=>Z(pr.DOM.getParents(o.container(),"*",n),e),kg=(e,n,o)=>{const r=XO(e,n,o);return R.from(r[r.length-1])},JO=(e,n,o)=>{const r=lf(n,e),c=lf(o,e);return we(r)&&r===c},QO=e=>Ht(e)||xn(e),ta=(e,n)=>{const o=n.container(),r=n.offset();return e?I(o)?Lt(o.nextSibling)?gt(o.nextSibling,0):gt.after(o):Ht(n)?gt(o,r+1):n:I(o)?Lt(o.previousSibling)?gt(o.previousSibling,o.previousSibling.data.length):gt.before(o):xn(n)?gt(o,r-1):n},eD=_e(ta,!0),tD=_e(ta,!1),nD=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},e5=e=>{e.execCommand("delete")},oD=e=>nD(e,"Delete"),wb=e=>nD(e,"ForwardDelete"),t5=e=>n=>sa(wc(n),e,$s),n5=e=>gi(e)||Zi(e),Kr=(e,n)=>Ga(e,n)?_l(n,n5,t5(e)):R.none(),N0=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},$V=(e,n,o)=>Vr(Mi(o),Cd(o),(r,c)=>{const u=ta(!0,r),f=ta(!1,c),b=ta(!1,n);return e?wi(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):yl(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),Qi=e=>(Hi(e)?Fc(e):Mm(e)).bind(Qi).orThunk(()=>R.some(e)),wr=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=Qi(o).getOr(o),f=be.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?N0(e,r):va(f)&&(_a(f),r&&e.selection.setCursorLocation(f.dom,0)),!$s(o,f)){const b=sa(wc(f),o)?[]:Zg(f);z(b.concat(ha(o)),y=>{!$s(y,f)&&!Ga(y,f)&&va(y)&&Bs(y)})}},_d=e=>n=>$s(e,n),XE=e=>Rs(e,"td,th"),sD=(e,n)=>{const o=x=>gg(be.fromDom(x),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=Vr(r,c,$s).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},Jy=(e,n)=>({start:e,end:n}),JE=(e,n,o)=>({rng:e,table:n,cells:o}),M0=ru.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Qy=(e,n)=>ld(be.fromDom(e),"td,th",n),rD=e=>!$s(e.start,e.end),aD=(e,n)=>gg(e.start,n).bind(o=>gg(e.end,n).bind(r=>$o($s(o,r),o))),QE=(e,n)=>!rD(e)&&aD(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),cD=(e,n)=>{const o=Qy(e.startContainer,n),r=Qy(e.endContainer,n);return Vr(o,r,Jy)},fm=e=>n=>gg(n,e).bind(o=>bn(XE(o)).map(r=>Jy(n,r))),o5=e=>n=>gg(n,e).bind(o=>wn(XE(o)).map(r=>Jy(r,n))),e_=e=>n=>aD(n,e).map(o=>JE(n,o,XE(o))),s5=(e,n,o,r)=>{if(o.collapsed||!e.forall(rD))return R.none();if(n.isSameTable){const c=e.bind(e_(r));return R.some({start:c,end:c})}else{const c=Qy(o.startContainer,r),u=Qy(o.endContainer,r),f=c.bind(fm(r)).bind(e_(r)),b=u.bind(o5(r)).bind(e_(r));return R.some({start:f,end:b})}},SS=(e,n)=>eo(e,o=>$s(o,n)),t_=e=>Vr(SS(e.cells,e.rng.start),SS(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),ew=(e,n,o)=>e.exists(r=>QE(r,o)&&Ty(r.start,n)),iD=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},$0=(e,n,o,r)=>s5(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=t_(c).getOr([]);if(u&&c.cells.length===f.length)return R.some(M0.fullTable(c.table));if(f.length>0){if(u)return R.some(M0.partialTable(f,R.none()));{const b=iD(o,n);return R.some(M0.partialTable(f,R.some({...n,rng:b})))}}else return R.none()}),Zu=(e,n,o,r)=>s5(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(t_).getOr([]),b=u.bind(t_).getOr([]);if(f.length>0&&b.length>0){const y=iD(o,n);return R.some(M0.multiTable(f,b,y))}else return R.none()}),tw=(e,n)=>{const o=_d(e),r=cD(n,o),c=sD(n,o);return ew(r,n,o)?r.map(u=>M0.singleCellTable(n,u.start)):c.isMultiTable?Zu(r,c,n,o):$0(r,c,n,o)},Cr=e=>z(e,n=>{Gr(n,"contenteditable"),_a(n)}),nw=(e,n)=>R.from(e.dom.getParent(n,e.dom.isBlock)).map(be.fromDom),lD=(e,n,o)=>{o.each(r=>{n?Bs(r):(_a(r),e.selection.setCursorLocation(r.dom,0))})},xS=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),ow(e,c,n,!1).each(u=>u())},kS=e=>{const n=df(e),o=be.fromDom(e.selection.getNode());_u(o.dom)&&va(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&se(n,r=>$s(r,o))&&nr(o,"data-mce-selected","1")},TS=(e,n,o)=>R.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=nw(e,f?u.endContainer:u.startContainer);u.deleteContents(),lD(e,f,b.filter(va));const y=f?n[0]:n[n.length-1];return xS(e,y,r,f),va(y)?R.none():R.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);Cr(c),kS(e)}),n_=(e,n,o,r)=>R.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];xS(e,u,c,!0),xS(e,f,c,!1);const b=va(u)?n:n.slice(1),y=va(f)?o:o.slice(0,-1);Cr(b.concat(y)),r.deleteContents(),kS(e)}),ow=(e,n,o,r=!0)=>R.some(()=>{wr(e,n,o,r)}),ES=(e,n)=>R.some(()=>Wu(e,!1,n)),o_=(e,n,o)=>tw(n,o).bind(r=>r.fold(_e(ow,e),_e(ES,e),_e(TS,e),_e(n_,e))),uD=(e,n)=>sw(e,n),dD=(e,n,o,r)=>_S(n,r).fold(()=>o_(e,n,o),c=>uD(e,c)),mD=(e,n,o)=>{const r=be.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?TS(e,o,R.none()):dD(e,r,c,n)},s_=(e,n)=>Jt(Sf(n,e),Xa),_S=(e,n)=>Jt(Sf(n,e),zi("caption")),B0=(e,n,o,r,c)=>Nh(o,e.getBody(),c).bind(u=>s_(n,be.fromDom(u.getNode())).bind(f=>$s(f,r)?R.none():R.some(Ne))),sw=(e,n)=>R.some(()=>{_a(n),e.selection.setCursorLocation(n.dom,0)}),r_=(e,n,o,r)=>Mi(e.dom).bind(c=>Cd(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),r5=(e,n)=>sw(e,n),a5=(e,n,o)=>_S(e,be.fromDom(o.getNode())).fold(()=>R.some(Ne),r=>$o(!$s(r,n),Ne)),fD=(e,n,o,r,c)=>Nh(o,e.getBody(),c).fold(()=>R.some(Ne),u=>r_(r,o,c,u)?r5(e,r):a5(n,r,u)),gD=(e,n,o,r)=>{const c=gt.fromRangeStart(e.selection.getRng());return s_(o,r).bind(u=>va(u)?sw(e,u):B0(e,o,n,u,c))},hD=(e,n,o,r)=>{const c=gt.fromRangeStart(e.selection.getRng());return va(r)?sw(e,r):fD(e,o,n,r,c)},rw=(e,n)=>e?vS(n):$O(n),pD=(e,n)=>{const o=gt.fromRangeStart(e.selection.getRng());return rw(n,o)||vl(n,e.getBody(),o).exists(r=>rw(n,r))},bD=(e,n,o)=>{const r=be.fromDom(e.getBody());return _S(r,o).fold(()=>gD(e,n,r,o).orThunk(()=>$o(pD(e,n),Ne)),c=>hD(e,n,r,c))},AS=(e,n)=>{const o=be.fromDom(e.selection.getStart(!0)),r=df(e);return e.selection.isCollapsed()&&r.length===0?bD(e,n,o):mD(e,o,r)},Xh=(e,n)=>{let o=n;for(;o&&o!==e;){if(ti(o)||ar(o))return o;o=o.parentNode}return null},vD=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],yD=_t.each,OS=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const N={};return yD(n.getAttribs(x),P=>{const L=P.nodeName.toLowerCase();L!=="style"&&!c(L)&&(N[L]=n.getAttrib(x,L))}),N},y=(x,N)=>{for(const P in x)if(uo(x,P)){const L=N[P];if(On(L)||x[P]!==L)return!1;delete N[P]}for(const P in N)if(uo(N,P))return!1;return!0};return En(u)&&En(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Ac(u)&&!Ac(f)},c=u=>se(vD,f=>vo(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},wD=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},a_=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const x=r.attributes[y];x?x.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},CD=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&wD(o,c=>{a_(e,n,c,r)}),r},c_=(e,n)=>{const o=(r,c)=>{en(r,u=>{const f=Oo(u.nodes);z(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const x=f[y];(!(c?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||Nt(x.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},i_=(e,n,o,r={})=>{const c=CD(e,n,o);c_(c,r)},DS=(e,n,o)=>{if(e.insert&&n(o)){const r=new Ji("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Ji("#text",3)).value=ra},SD=e=>{var n;return RS(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===ra},RS=(e,n)=>{const o=e==null?void 0:e.firstChild;return we(o)&&o===e.lastChild&&o.name===n},NS=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},P0=(e,n,o,r)=>r.isEmpty(n,o,c=>NS(e,c)),xD=(e,n)=>we(e)&&(n(e)||e.name==="br"),F0=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&F0(c,n,o);e.unwrap()}},aw=(e,n,o=Ne)=>{const r=n.getTextBlockElements(),c=n.getNonEmptyElements(),u=n.getWhitespaceElements(),f=_t.makeMap("tr,td,th,tbody,thead,tfoot,table"),b=new Set;for(let y=0;y<e.length;y++){const x=e[y];let N,P,L;if(!x.parent||b.has(x))continue;if(r[x.name]&&x.parent.name==="li"){let ie=x.next;for(;ie&&r[ie.name];){ie.name="li",b.add(ie),x.parent.insert(ie,x.parent);ie=ie.next}x.unwrap();continue}const ce=[x];for(N=x.parent;N&&!n.isValidChild(N.name,x.name)&&!f[N.name];N=N.parent)ce.push(N);if(N&&ce.length>1)if(n.isValidChild(N.name,x.name)){ce.reverse(),P=ce[0].clone(),o(P);let ie=P;for(let ee=0;ee<ce.length-1;ee++){n.isValidChild(ie.name,ce[ee].name)?(L=ce[ee].clone(),o(L),ie.append(L)):L=ie;for(let ue=ce[ee].firstChild;ue&&ue!==ce[ee+1];){const Re=ue.next;L.append(ue),ue=Re}ie=L}P0(n,c,u,P)?N.insert(x,ce[0],!0):(N.insert(P,ce[0],!0),N.insert(x,P)),N=ce[0],(P0(n,c,u,N)||RS(N,"br"))&&N.empty().remove()}else F0(x,n);else if(x.parent){if(x.name==="li"){let ie=x.prev;if(ie&&(ie.name==="ul"||ie.name==="ol")){ie.append(x);continue}if(ie=x.next,ie&&(ie.name==="ul"||ie.name==="ol")&&ie.firstChild){ie.insert(x,ie.firstChild,!0);continue}const ee=new Ji("ul",1);o(ee),x.wrap(ee);continue}if(n.isValidChild(x.parent.name,"div")&&n.isValidChild("div",x.name)){const ie=new Ji("div",1);o(ie),x.wrap(ie)}else F0(x,n)}}},cw=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},MS=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&cw(o,"a")),kD=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},iw=e=>{const n=gt.fromRangeStart(e),o=gt.fromRangeEnd(e),r=e.commonAncestorContainer;return vl(!1,r,o).map(c=>!Fu(n,o,r)&&Fu(n,c,r)?kD(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},lw=e=>e.collapsed?e:iw(e),l_=e=>we(e.firstChild)&&e.firstChild===e.lastChild,uw=e=>e.name==="br"||e.value===ra,TD=(e,n)=>e.getBlockElements()[n.name]&&l_(n)&&uw(n.firstChild),c5=(e,n)=>{const o=e.getNonEmptyElements();return we(n)&&(n.isEmpty(o)||TD(e,n))},ED=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),c5(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},_D=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},i5=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return _D(c)},BV=e=>{var n;return Z((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},l5=e=>e.data===ra||Ur(e),u_=e=>we(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&l5(e.firstChild),gm=e=>!e.firstChild||u_(e),d_=e=>e.length>0&&gm(e[e.length-1])?e.slice(0,-1):e,I0=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},m_=(e,n)=>!!I0(e,n),u5=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},AD=(e,n)=>{const o=gt.before(e),c=im(n).next(o);return c?c.toRange():null},OD=(e,n)=>{const o=gt.after(e),c=im(n).prev(o);return c?c.toRange():null},DD=(e,n,o,r)=>{const c=u5(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),_t.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),OD(n[n.length-1],o)},f_=(e,n,o)=>{const r=e.parentNode;return r&&_t.each(n,c=>{r.insertBefore(c,e)}),AD(e,o)},d5=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),OD(n[0],o)),RD=(e,n,o,r)=>{const c=i5(n,e,r),u=I0(n,o.startContainer),f=d_(BV(c.firstChild)),b=1,y=2,x=n.getRoot(),N=P=>{const L=gt.fromRangeStart(o),ce=im(n.getRoot()),ie=P===b?ce.prev(L):ce.next(L),ee=ie==null?void 0:ie.getNode();return ee?I0(n,ee)!==u:!0};return u?N(b)?f_(u,f,x):N(y)?d5(u,f,x,n):DD(u,f,x,o):null},m5=["pre"],dw=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,x=ae(m5,u.name);if(y&&x){const N=u.attr("contenteditable")!=="false",P=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,L=R.from(Xh(r,o)).forall(ti);return N&&P&&L}else return!1},$S=_u,f5=(e,n,o)=>{if(we(o)){const r=e.getParent(n.endContainer,$S);return o===r&&Ty(be.fromDom(o),n)}else return!1},ND=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},g5=(e,n)=>{R.from(e.getParent(n,"td,th")).map(be.fromDom).each(u1)},h5=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=OS(e);_t.each(r.select("*[data-mce-fragment]"),f=>{if(we(o[f.nodeName.toLowerCase()])&&xF(r,f)){for(let y=f.parentElement;we(y)&&y!==c&&!TF(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},p5=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},b5=e=>{_t.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},v5=e=>!!e.getAttribute("data-mce-fragment"),MD=(e,n)=>we(n)&&!e.schema.getVoidElements()[n.nodeName],y5=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=Xh(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let x=f.createRng();const N=n.previousSibling;if(Lt(N)){x.setStart(N,(r=(o=N.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const ce=n.nextSibling;Lt(ce)&&(N.appendData(ce.data),(c=ce.parentNode)===null||c===void 0||c.removeChild(ce))}else x.setStartBefore(n),x.setEndBefore(n);const P=ce=>{let ie=gt.fromRangeStart(ce);return ie=im(e.getBody()).next(ie),ie==null?void 0:ie.toRange()},L=f.getParent(n,f.isBlock);f.remove(n),L&&f.isEmpty(L)&&(Lr(be.fromDom(L)),x.setStart(L,0),x.setEnd(L,0),!$S(L)&&!v5(L)&&(u=P(x))?(x=u,f.remove(L)):f.add(L,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(x)},g_=e=>{const n=e.dom,o=lw(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,$S);f5(n,o,r)?ow(e,o,be.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Lt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},Cb=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,x=Gh({validate:!0},e.schema),N='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,N);let P=u.getRng();const L=P.startContainer,ce=e.getBody();L===ce&&u.isCollapsed()&&f.isBlock(ce.firstChild)&&MD(e,ce.firstChild)&&f.isEmpty(ce.firstChild)&&(P=f.createRng(),P.setStart(ce.firstChild,0),P.setEnd(ce.firstChild,0),u.setRng(P)),u.isCollapsed()||g_(e);const ie=u.getNode(),ee={context:ie.nodeName.toLowerCase(),data:o.data,insert:!0},ue=b.parse(n,ee);if(o.paste===!0&&ED(e.schema,ue)&&m_(f,ie))return P=RD(x,f,u.getRng(),ue),P&&u.setRng(P),n;o.paste===!0&&dw(f,ue,ie,e.getBody())&&((r=ue.firstChild)===null||r===void 0||r.unwrap()),p5(ue);let Re=ue.lastChild;if(Re&&Re.attr("id")==="mce_marker"){const Ae=Re;for(Re=Re.prev;Re;Re=Re.walk(!0))if(Re.type===3||!f.isBlock(Re.name)){Re.parent&&e.schema.isValidChild(Re.parent.name,"span")&&Re.parent.insert(Ae,Re,Re.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ie),!ee.invalid)n=x.serialize(ue),ND(e,n,ie);else{e.selection.setContent(N);let Ae=u.getNode(),je;const et=e.getBody();for(ei(Ae)?Ae=je=et:je=Ae;je&&je!==et;)Ae=je,je=je.parentNode;n=Ae===et?et.innerHTML:f.getOuterHTML(Ae);const xt=b.parse(n);for(let Je=xt;Je;Je=Je.walk())if(Je.attr("id")==="mce_marker"){Je.replace(ue);break}const un=ue.children(),Xt=(c=ue.parent)!==null&&c!==void 0?c:xt;ue.unwrap();const lt=Z(un,Je=>MS(e.schema,Je,Xt));aw(lt,e.schema),i_(b.getNodeFilters(),b.getAttributeFilters(),xt),n=x.serialize(xt),Ae===et?f.setHTML(et,n):f.setOuterHTML(Ae,n)}return h5(e,y),y5(e,f.get("mce_marker")),b5(e.getBody()),g5(f,u.getStart()),Gm(e.schema,e.getBody(),u.getStart()),n},BS=e=>e instanceof Ji,w5=e=>{vb(e)&&Mi(e.getBody()).each(n=>{const o=n.getNode(),r=Ka(o)?Mi(o).getOr(n):n;e.selection.setRng(r.toRange())})},L0=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&w5(e)},$D=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=bl(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Lp(e),o)):o||(o=c),L0(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Gh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=Vf(be.fromDom(n))?o:_t.trim(o);return L0(e,c,r.no_selection),{content:c,html:c}}},BD=(e,n,o,r)=>{i_(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Gh({validate:!1},e.schema).serialize(o),u=Vf(be.fromDom(n))?c:_t.trim(c);return L0(e,u,r.no_selection),{content:o,html:u}},C5=(e,n,o)=>R.from(e.getBody()).map(r=>BS(n)?BD(e,r,n,o):$D(e,r,n,o)).getOr({content:n,html:BS(o.content)?"":o.content}),PD=(e,n)=>Al(e,n).isSome(),FD=e=>Q(e)?e:Et,H0=(e,n,o)=>{let r=e.dom;const c=FD(o);for(;r.parentNode;){r=r.parentNode;const u=be.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return R.none()},PS=(e,n,o)=>{const r=n(e),c=FD(o);return r.orThunk(()=>c(e)?R.none():H0(e,n,c))},FS=_y,h_=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if($l(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},z0=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>h_(e,b,o)?!0:b.parentNode===u||!!hm(e,b,o,r,!0));return!!hm(e,f,o,r,c)},mw=(e,n,o)=>tc(o)&&FS(n,o.inline)||xd(o)&&FS(n,o.block)?!0:$l(o)?En(n)&&e.is(n,o.selector):!1,ID=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(Q(o.onmatch))return o.onmatch(n,o,r);if(f){if(ma(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):Ay(e,n,f[y]))return!0}else for(const y in f)if(uo(f,y)){const x=b?e.getAttrib(n,y):Ay(e,n,y),N=um(f[y],u),P=Nt(x)||Ss(x);if(P&&Nt(N))continue;if(c&&P&&!o.exact||(!c||o.exact)&&!FS(x,bg(N,y)))return!1}}return!0},hm=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&En(n))for(let b=0;b<u.length;b++){const y=u[b];if(mw(e.dom,n,y)&&ID(f,n,y,"attributes",c,r)&&ID(f,n,y,"styles",c,r)){const x=y.classes;if(x){for(let N=0;N<x.length;N++)if(!e.dom.hasClass(n,um(x[N],r)))return}return y}}},p_=(e,n,o,r,c)=>{if(r)return z0(e,r,n,o,c);if(r=e.selection.getNode(),z0(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&z0(e,u,n,o,c))},S5=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&hm(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},IS=(e,n)=>{const o=c=>$s(c,be.fromDom(e.getBody())),r=(c,u)=>hm(e,c.dom,u)?R.some(u):R.none();return R.from(e.selection.getStart(!0)).bind(c=>PS(be.fromDom(c),u=>xs(n,f=>r(u,f)),o)).getOrNull()},LD=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o){const c=e.selection.getStart(),u=sb(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!$l(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},b_=(e,n,o)=>Be(o,(r,c)=>{const u=aE(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),V0=yr,x5=(e,n)=>e.importNode(n,!0),HD=e=>{const n=[];let o=e;for(;o;){if(Lt(o)&&o.data!==V0||o.childNodes.length>1)return[];En(o)&&n.push(o),o=o.firstChild}return n},LS=e=>HD(e).length>0,v_=e=>{if(e){const n=new pa(e,e);for(let o=n.current();o;o=n.next())if(Lt(o))return o}return null},y_=e=>{const n=be.fromTag("span");return Ds(n,{id:py,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Qr(n,be.fromText(V0)),n},k5=e=>{const n=v_(e);return n&&n.data.charAt(0)===V0&&n.deleteData(0,1),n},w_=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(LS(n))Wu(e,!1,be.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,x=u.endContainer,N=u.endOffset,P=k5(n);r.remove(n,!0),b===P&&y>0&&u.setStart(P,y-1),x===P&&N>0&&u.setEnd(P,N-1),f&&r.isEmpty(f)&&_a(be.fromDom(f)),c.setRng(u)}},U0=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)w_(e,n,o);else if(n=dg(e.getBody(),c.getStart()),!n)for(;n=r.get(py);)w_(e,n,!1)},Tg=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,_e(hg,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(pp(be.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},zD=(e,n)=>(e.appendChild(n),n),HS=(e,n)=>{var o;const r=$e(e,(u,f)=>zD(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return zD(r,c.createTextNode(V0))},Ra=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=Z(Le(f.get()),P=>P!==r&&!Kn(P,"removeformat")),x=b_(e,o,y);if(Z(x,P=>!cE(e,P,r)).length>0){const P=o.cloneNode(!1);return b.add(n,P),f.remove(r,c,P,u),b.remove(P),R.some(P)}else return R.none()},C_=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=dg(e.getBody(),c.getStart());const N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&N.test(x.charAt(b))&&N.test(x.charAt(b-1))){const P=c.getBookmark();f.collapse(!0);let L=hf(e.dom,f,u);L=gb(L),e.formatter.apply(n,o,L),c.moveToBookmark(P)}else{let P=r?v_(r):null;(!r||(P==null?void 0:P.data)!==V0)&&(r=x5(e.getDoc(),y_(!0).dom),P=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(P,b)}},S_=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),x=y.startContainer,N=y.startOffset;let P=x;Lt(x)&&(N!==x.data.length&&(f=!0),P=P.parentNode);const L=[];let ce;for(;P;){if(hm(e,P,n,o,r)){ce=P;break}P.nextSibling&&(f=!0),L.push(P),P=P.parentNode}if(!!ce)if(f){const ie=u.getBookmark();y.collapse(!0);let ee=hf(c,y,b,!0);ee=gb(ee),e.formatter.remove(n,o,ee,r),u.moveToBookmark(ie)}else{const ie=dg(e.getBody(),ce),ee=y_(!1).dom;Tg(e,ee,ie!=null?ie:ce);const ue=Ra(e,ee,ce,n,o,r),Re=HS(L.concat(ue.toArray()),ee);ie&&w_(e,ie,!1),u.setCursorLocation(Re,1),c.isEmpty(ce)&&c.remove(ce)}},Eg=(e,n)=>{const o=e.selection,r=e.getBody();U0(e,null,!1),(n===8||n===46)&&o.isCollapsed()&&o.getStart().innerHTML===V0&&U0(e,dg(r,o.getStart())),(n===37||n===39)&&U0(e,dg(r,o.getStart()))},T5=e=>{e.on("mouseup keydown",n=>{Eg(e,n.keyCode)})},VD=(e,n)=>{const o=y_(!1),r=HS(n,o.dom);return ns(be.fromDom(e),o),Bs(be.fromDom(e)),gt(r,0)},fw=(e,n)=>{const o=e.schema.getTextInlineElements();return uo(o,Yn(n))&&!wl(n.dom)&&!Eu(n.dom)},E5=e=>wl(e.dom)&&LS(e.dom),gw={},Sb=rl(["pre"]),_5=(e,n)=>{gw[e]||(gw[e]=[]),gw[e].push(n)},xb=(e,n)=>{uo(gw,e)&&z(gw[e],o=>{o(n)})};_5("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return Sb(f)&&ae(c,f)},r=(c,u)=>{const f=be.fromDom(u),b=Vi(f).dom;Bs(f),Bo(be.fromDom(c),[be.fromTag("br",b),be.fromTag("br",b),...ha(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Z(Z(c,Sb),o(c));z(u,f=>{r(f.previousSibling,f)})}});const UD=["fontWeight","fontStyle","color","fontSize","fontFamily"],W0=e=>bt(e.styles)&&se(Le(e.styles),n=>ae(UD,n)),pm=e=>Jt(e,n=>tc(n)&&n.inline==="span"&&W0(n)),hw=(e,n)=>{const o=e.get(n);return wt(o)?pm(o):R.none()},zS=(e,n)=>yl(n,gt.fromRangeStart(e)).isNone(),WD=(e,n)=>wi(n,gt.fromRangeEnd(e)).exists(o=>!Ur(o.getNode())||wi(n,o).isSome())===!1,ZD=e=>n=>oh(n)&&e.getContentEditableParent(n)!=="false",VS=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return zS(o,n[0])&&WD(o,n[0])?n:[];{const r=wn(n).filter(f=>zS(o,f)).toArray(),c=bn(n).filter(f=>WD(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},A5=e=>Z(VS(e),ZD(e.dom)),ju=e=>Z(e.getSelectedBlocks(),ZD(e.dom)),Z0=_t.each,US=e=>En(e)&&!Ac(e)&&!wl(e)&&!Eu(e),WS=(e,n)=>{for(let o=e;o;o=o[n]){if(Lt(o)&&ws(o.data))return e;if(En(o)&&!Ac(o))return o}return e},ZS=(e,n,o)=>{const r=OS(e),c=En(n)&&gf(n),u=En(o)&&gf(o);if(c&&u){const f=WS(n,"previousSibling"),b=WS(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const x=y;y=y.nextSibling,f.appendChild(x)}return e.dom.remove(b),_t.each(_t.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},Jh=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=ZS(e,d0(r),r))!==null&&c!==void 0?c:r;ZS(e,u,d0(u,!0))}},x_=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Z0(e.select(r,o),c=>{US(c)&&gf(c)&&Z0(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},k_=(e,n,o)=>{Z0(e.childNodes,r=>{US(r)&&(n(r)&&o(r),r.hasChildNodes()&&k_(r,n,o))})},jD=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},GD=(e,n)=>o=>!!(o&&Ay(e,o,n)),qD=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),jD(e,r)},kb=ru.generate([{keep:[]},{rename:["name"]},{removed:[]}]),O5=/^(src|href|style)$/,Tb=_t.each,jS=_y,KD=e=>/^(TR|TH|TD)$/.test(e.nodeName),GS=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),YD=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(En(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return Lt(r)&&o&&c>=r.data.length&&(r=new pa(r,e.getBody()).next()||r),Lt(r)&&!o&&c===0&&(r=new pa(r,e.getBody()).prev()||r),r},T_=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return KD(e)&&r?e.nodeName==="TR"&&r[o]||r:e},qS=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},XD=(e,n,o,r,c)=>{const u=be.fromDom(n),f=be.fromDom(e.create(r,c)),b=o?rd(u):Nm(u);return Bo(f,b),o?(ns(u,f),qa(f,u)):(_r(u,f),Qr(f,u)),f.dom},D5=(e,n)=>n.links&&e.nodeName==="A",JD=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=bl(e);xd(o)&&r===u.getRoot()&&(!o.list_block||!jS(n,o.list_block))&&z(Oo(n.childNodes),b=>{pg(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=qS(u,b,f),u.setAttribs(c,Lp(e))):c=null}),!(lE(o)&&!jS(o.inline,n))&&u.remove(n,!0)},QD=(e,n,o)=>ct(e)?{name:n,value:null}:{name:e,value:um(n,o)},eR=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},tR=(e,n,o,r,c)=>{let u=!1;Tb(o.styles,(f,b)=>{const{name:y,value:x}=QD(b,f,r),N=bg(x,y);(o.remove_similar||Y(x)||!En(c)||jS(Ay(e,c,y),N))&&e.setStyle(n,y,""),u=!0}),u&&eR(e,n)},R5=(e,n,o)=>{n==="removeformat"?z(ju(e.selection),r=>{z(UD,c=>e.dom.setStyle(r,c,"")),eR(e.dom,r)}):hw(e.formatter,n).each(r=>{z(ju(e.selection),c=>tR(e.dom,c,r,o,null))})},nR=(e,n,o,r,c)=>{const u=e.dom,f=OS(e),b=e.schema;if(tc(n)&&m1(b,n.inline)&&jf(b,r)&&r.parentElement===e.getBody())return JD(e,r,n),kb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!mw(u,r,n)&&!D5(r,n))return kb.keep();const y=r,x=n.preserve_attributes;if(tc(n)&&n.remove==="all"&&wt(x)){const N=Z(u.getAttribs(y),P=>ae(x,P.name.toLowerCase()));if(u.removeAllAttribs(y),z(N,P=>u.setAttrib(y,P.name,P.value)),N.length>0)return kb.rename("span")}if(n.remove!=="all"){tR(u,y,n,o,c),Tb(n.attributes,(P,L)=>{const{name:ce,value:ie}=QD(L,P,o);if(n.remove_similar||Y(ie)||!En(c)||jS(u.getAttrib(c,ce),ie)){if(ce==="class"){const ee=u.getAttrib(y,ce);if(ee){let ue="";if(z(ee.split(/\s+/),Re=>{/mce\-\w+/.test(Re)&&(ue+=(ue?" ":"")+Re)}),ue){u.setAttrib(y,ce,ue);return}}}if(O5.test(ce)&&y.removeAttribute("data-mce-"+ce),ce==="style"&&rl(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(ce),u.setStyle(y,"list-style-type","none");return}ce==="class"&&y.removeAttribute("className"),y.removeAttribute(ce)}}),Tb(n.classes,P=>{P=um(P,o),(!En(c)||u.hasClass(c,P))&&u.removeClass(y,P)});const N=u.getAttribs(y);for(let P=0;P<N.length;P++){const L=N[P].nodeName;if(!f.isAttributeInternal(L))return kb.keep()}}return n.remove!=="none"?(JD(e,y,n),kb.removed()):kb.keep()},pw=(e,n,o,r,c)=>nR(e,n,o,r,c).fold(Et,u=>(e.dom.rename(r,u),!0),Ve),N5=(e,n,o,r,c)=>{let u;return n.parentNode&&z(sb(e.dom,n.parentNode).reverse(),f=>{if(!u&&En(f)&&f.id!=="_start"&&f.id!=="_end"){const b=hm(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},M5=(e,n,o,r)=>nR(e,n,o,r,r).fold(ge(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),ge(null)),$5=(e,n,o,r,c,u,f,b)=>{var y,x;let N,P;const L=e.dom;if(o){const ce=o.parentNode;for(let ie=r.parentNode;ie&&ie!==ce;ie=ie.parentNode){let ee=L.clone(ie,!1);for(let ue=0;ue<n.length&&(ee=M5(e,n[ue],b,ee),ee!==null);ue++);ee&&(N&&ee.appendChild(N),P||(P=ee),N=ee)}u&&(!f.mixed||!L.isBlock(o))&&(r=(y=L.split(o,r))!==null&&y!==void 0?y:r),N&&P&&((x=c.parentNode)===null||x===void 0||x.insertBefore(N,c),P.appendChild(c),tc(f)&&Jh(e,f,b,N))}return r},oR=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,x=ee=>{const ue=N5(e,ee,n,o,c);return $5(e,u,ue,ee,ee,!0,f,o)},N=ee=>Ac(ee)&&En(ee)&&(ee.id==="_start"||ee.id==="_end"),P=ee=>se(u,ue=>pw(e,ue,o,ee,ee)),L=ee=>{const ue=Oo(ee.childNodes),Ae=P(ee)||se(u,xt=>mw(b,ee,xt)),je=ee.parentNode;if(!Ae&&we(je)&&Fh(f)&&P(je),f.deep&&ue.length)for(let xt=0;xt<ue.length;xt++)L(ue[xt]);z(["underline","line-through","overline"],xt=>{En(ee)&&e.dom.getStyle(ee,"text-decoration")===xt&&ee.parentNode&&HC(b,ee.parentNode)===xt&&pw(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:xt}},void 0,ee)})},ce=ee=>{const ue=b.get(ee?"_start":"_end");if(ue){let Re=ue[ee?"firstChild":"lastChild"];return N(Re)&&(Re=Re[ee?"firstChild":"lastChild"]),Lt(Re)&&Re.data.length===0&&(Re=ee?ue.previousSibling||ue.nextSibling:ue.nextSibling||ue.previousSibling),b.remove(ue,!0),Re}else return null},ie=ee=>{let ue,Re,Ae=hf(b,ee,u,ee.collapsed);if(f.split){if(Ae=gb(Ae),ue=YD(e,Ae,!0),Re=YD(e,Ae),ue!==Re){if(ue=T_(ue,!0),Re=T_(Re,!1),GS(b,ue,Re)){const et=R.from(ue.firstChild).getOr(ue);x(XD(b,et,!0,"span",{id:"_start","data-mce-type":"bookmark"})),ce(!0);return}if(GS(b,Re,ue)){const et=R.from(Re.lastChild).getOr(Re);x(XD(b,et,!1,"span",{id:"_end","data-mce-type":"bookmark"})),ce(!1);return}ue=qS(b,ue,"span",{id:"_start","data-mce-type":"bookmark"}),Re=qS(b,Re,"span",{id:"_end","data-mce-type":"bookmark"});const je=b.createRng();je.setStartAfter(ue),je.setEndBefore(Re),cb(b,je,et=>{z(et,xt=>{!Ac(xt)&&!Ac(xt.parentNode)&&x(xt)})}),x(ue),x(Re),ue=ce(!0),Re=ce()}else ue=Re=x(ue);Ae.startContainer=ue.parentNode?ue.parentNode:ue,Ae.startOffset=b.nodeIndex(ue),Ae.endContainer=Re.parentNode?Re.parentNode:Re,Ae.endOffset=b.nodeIndex(Re)+1}cb(b,Ae,je=>{z(je,L)})};if(r){if(ff(r)){const ee=b.createRng();ee.setStartBefore(r),ee.setEndAfter(r),ie(ee)}else ie(r);GC(e,n,r,o);return}!y.isCollapsed()||!tc(f)||df(e).length?(l0(e,()=>Sd(e,ie),ee=>tc(f)&&p_(e,n,o,ee)),e.nodeChanged()):S_(e,n,o,c),R5(e,n,o),GC(e,n,r,o)},E_=_t.each,B5=(e,n,o,r)=>{const c=u=>{if(En(u)&&En(u.parentNode)&&gf(u)){const f=HC(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(_t.walk(r,c,"childNodes"),c(r))},j0=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=GD(e,"fontSize");k_(r,u=>c(u)&&gf(u),qD(e,"backgroundColor",um(n.styles.backgroundColor,o)))}},P5=(e,n,o,r)=>{if(tc(n)&&(n.inline==="sub"||n.inline==="sup")){const c=GD(e,"fontSize");k_(r,f=>c(f)&&gf(f),qD(e,"fontSize",""));const u=Z(e.select(n.inline==="sup"?"sub":"sup",r),gf);e.remove(u,!0)}},F5=(e,n,o,r)=>{E_(n,c=>{tc(c)&&E_(e.dom.select(c.inline,r),u=>{US(u)&&pw(e,c,o,u,c.exact?u:null)}),x_(e.dom,c,r)})},I5=(e,n,o,r,c)=>{const u=c.parentNode;hm(e,u,o,r)&&pw(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>hm(e,f,o,r)?(pw(e,n,r,c),!0):!1)},KS=_t.each,sR=(e,n,o,r)=>{if(Vp(e)&&tc(n)&&o.parentNode){const c=D2(e.schema),u=PD(be.fromDom(o),f=>wl(f.dom));return dr(c,r)&&va(be.fromDom(o.parentNode),!1)&&!u}else return!1},rR=(e,n,o,r)=>{if(KS(o.styles,(c,u)=>{e.setStyle(n,u,um(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},aR=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,x=(ie,ee=u)=>{Q(ee.onformat)&&ee.onformat(ie,ee,o,r),rR(b,ie,ee,o),KS(ee.attributes,(ue,Re)=>{b.setAttrib(ie,Re,um(ue,o))}),KS(ee.classes,ue=>{const Re=um(ue,o);b.hasClass(ie,Re)||b.addClass(ie,Re)})},N=(ie,ee)=>{let ue=!1;return KS(ie,Re=>$l(Re)?b.getContentEditable(ee)==="false"&&!Re.ceFalseOverride||we(Re.collapsed)&&Re.collapsed!==f?!0:b.is(ee,Re.selector)&&!wl(ee)?(x(ee,Re),ue=!0,!1):!0:!1),ue},P=ie=>{if(oe(ie)){const ee=b.create(ie);return x(ee),ee}else return null},L=(ie,ee,ue)=>{const Re=[];let Ae=!0;const je=u.inline||u.block,et=P(je),xt=lt=>Ph(u)&&hm(e,lt,n,o),un=(lt,Je,Sn)=>{const no=iE(u)&&hg(e.schema,lt)&&pg(e,Je,je);return Sn&&no},Xt=(lt,Je,Sn,no)=>{const lo=lt.nodeName.toLowerCase(),Vo=pg(e,je,lo)&&pg(e,Je,je),bs=!ue&&Lt(lt)&&il(lt.data),js=wl(lt),Ws=!tc(u)||!ie.isBlock(lt);return(Sn||no)&&Vo&&!bs&&!js&&Ws};cb(ie,ee,lt=>{let Je;const Sn=no=>{let lo=!1,Vo=Ae,bs=!1;const js=no.parentNode,Ws=js.nodeName.toLowerCase(),Ma=ie.getContentEditable(no);we(Ma)&&(Vo=Ae,Ae=Ma==="true",lo=!0,bs=LC(e,no));const Si=Ae&&!lo;if(Ur(no)&&!sR(e,u,no,Ws)){Je=null,xd(u)&&ie.remove(no);return}if(xt(no)){Je=null;return}if(un(no,Ws,Si)){const Gt=ie.rename(no,je);x(Gt),Re.push(Gt),Je=null;return}if($l(u)){let Gt=N(c,no);if(!Gt&&we(js)&&Fh(u)&&(Gt=N(c,js)),!tc(u)||Gt){Je=null;return}}we(et)&&Xt(no,Ws,Si,bs)?(Je||(Je=ie.clone(et,!1),js.insertBefore(Je,no),Re.push(Je)),bs&&lo&&(Ae=Vo),Je.appendChild(no)):(Je=null,z(Oo(no.childNodes),Sn),lo&&(Ae=Vo),Je=null)};z(lt,Sn)}),u.links===!0&&z(Re,lt=>{const Je=Sn=>{Sn.nodeName==="A"&&x(Sn,u),z(Oo(Sn.childNodes),Je)};Je(lt)}),z(Re,lt=>{const Je=lo=>{let Vo=0;return z(lo.childNodes,bs=>{!m0(bs)&&!Ac(bs)&&Vo++}),Vo},Sn=lo=>Jt(lo.childNodes,Ey).filter(bs=>ie.getContentEditable(bs)!=="false"&&mw(ie,bs,u)).map(bs=>{const js=ie.clone(bs,!1);return x(js),ie.replace(js,lo,!0),ie.remove(bs,!0),js}).getOr(lo),no=Je(lt);if((Re.length>1||!ie.isBlock(lt))&&no===0){ie.remove(lt,!0);return}(tc(u)||xd(u)&&u.wrapper)&&(!u.exact&&no===1&&(lt=Sn(lt)),F5(e,c,o,lt),I5(e,u,n,o,lt),j0(ie,u,o,lt),B5(ie,u,o,lt),P5(ie,u,o,lt),Jh(e,u,o,lt))})},ce=ff(r)?r:y.getNode();if(b.getContentEditable(ce)==="false"&&!LC(e,ce)){r=ce,N(c,r),v0(e,n,r,o);return}if(u){if(r)if(ff(r)){if(!N(c,r)){const ie=b.createRng();ie.setStartBefore(r),ie.setEndAfter(r),L(b,hf(b,ie,c),!0)}}else L(b,r,!0);else!f||!tc(u)||df(e).length?(y.setRng(lw(y.getRng())),l0(e,()=>{Sd(e,(ie,ee)=>{const ue=ee?ie:hf(b,ie,c);L(b,ue,!1)})},Ve),e.nodeChanged()):C_(e,n,o),hw(e.formatter,n).each(ie=>{z(A5(e.selection),ee=>rR(b,ee,ie,o))});xb(n,e)}v0(e,n,r,o)},cR=e=>uo(e,"vars"),L5=(e,n)=>{e.set({}),n.on("NodeChange",o=>{dR(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=R.from(o.node).map(c=>ff(c)?c:c.startContainer).bind(c=>En(c)?R.some(c):R.from(c.parentElement)).getOrThunk(()=>iR(n));dR(n,r,e.get())})},iR=e=>e.selection.getStart(),lR=(e,n,o,r,c)=>zt(n,b=>{const y=e.formatter.matchNode(b,o,c!=null?c:{},r);return!On(y)},b=>h_(e,b,o)?!0:r?!1:we(e.formatter.matchNode(b,o,c,!0))),uR=(e,n)=>{const o=n!=null?n:iR(e);return Z(sb(e.dom,o),r=>En(r)&&!Eu(r))},dR=(e,n,o)=>{const r=uR(e,n);en(o,(c,u)=>{const f=b=>{const y=lR(e,r,u,b.similar,cR(b)?b.vars:void 0),x=y.isSome();if(b.state.get()!==x){b.state.set(x);const N=y.getOr(n);cR(b)?b.callback(x,{node:N,format:u,parents:r}):z(b.callbacks,P=>P(x,{node:N,format:u,parents:r}))}};z([c.withSimilar,c.withoutSimilar],f),z(c.withVars,f)})},H5=(e,n,o,r,c,u)=>{const f=n.get();z(o.split(","),b=>{const y=as(f,b).getOrThunk(()=>{const N={withSimilar:{state:uc(!1),similar:!0,callbacks:[]},withoutSimilar:{state:uc(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=N,N}),x=()=>{const N=uR(e);return lR(e,N,b,c,u).isSome()};if(On(u)){const N=c?y.withSimilar:y.withoutSimilar;N.callbacks.push(r),N.callbacks.length===1&&N.state.set(x())}else y.withVars.push({state:uc(x()),similar:c,vars:u,callback:r})}),n.set(f)},z5=(e,n,o)=>{const r=e.get();z(n.split(","),c=>as(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Z(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Z(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Z(u.withVars,f=>f.callback!==o)}})),e.set(r)},__=(e,n,o,r,c,u)=>(H5(e,n,o,r,c,u),{unbind:()=>z5(n,o,r)}),mR=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(p_(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?oR(e,n,o,r):aR(e,n,o,r))};function G0(e){return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},G0(e)}function Eb(e,n){return Eb=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},Eb(e,n)}function fR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qh(e,n,o){return fR()?Qh=Reflect.construct:Qh=function(c,u,f){var b=[null];b.push.apply(b,u);var y=Function.bind.apply(c,b),x=new y;return f&&Eb(x,f.prototype),x},Qh.apply(null,arguments)}function Il(e){return gR(e)||PV(e)||V5(e)||U5()}function gR(e){if(Array.isArray(e))return hR(e)}function PV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V5(e,n){if(!!e){if(typeof e=="string")return hR(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return hR(e,n)}}function hR(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function U5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W5=Object.hasOwnProperty,Z5=Object.setPrototypeOf,j5=Object.isFrozen,pR=Object.getPrototypeOf,G5=Object.getOwnPropertyDescriptor,Cl=Object.freeze,xf=Object.seal,YS=Object.create,A_=typeof Reflect<"u"&&Reflect,Ca=A_.apply,bR=A_.construct;Ca||(Ca=function(n,o,r){return n.apply(o,r)}),Cl||(Cl=function(n){return n}),xf||(xf=function(n){return n}),bR||(bR=function(n,o){return Qh(n,Il(o))});var FV=Sl(Array.prototype.forEach),IV=Sl(Array.prototype.pop),XS=Sl(Array.prototype.push),Ll=Sl(String.prototype.toLowerCase),JS=Sl(String.prototype.match),Ad=Sl(String.prototype.replace),bw=Sl(String.prototype.indexOf),q5=Sl(String.prototype.trim),Hl=Sl(RegExp.prototype.test),_b=q0(TypeError);function Sl(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return Ca(e,n,r)}}function q0(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return bR(e,o)}}function lr(e,n){Z5&&Z5(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=Ll(r);c!==r&&(j5(n)||(n[o]=c),r=c)}e[r]=!0}return e}function _g(e){var n=YS(null),o;for(o in e)Ca(W5,e,[o])&&(n[o]=e[o]);return n}function vw(e,n){for(;e!==null;){var o=G5(e,n);if(o){if(o.get)return Sl(o.get);if(typeof o.value=="function")return Sl(o.value)}e=pR(e)}function r(c){return console.warn("fallback value for",c),null}return r}var O_=Cl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D_=Cl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R_=Cl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vR=Cl(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),N_=Cl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),K5=Cl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),yR=Cl(["#text"]),wR=Cl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),M_=Cl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$_=Cl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),QS=Cl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yw=xf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),CR=xf(/<%[\w\W]*|[\w\W]*%>/gm),Y5=xf(/^data-[\-\w.\u00B7-\uFFFF]/),SR=xf(/^aria-[\-\w]+$/),X5=xf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xR=xf(/^(?:\w+script|data):/i),J5=xf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Q5=xf(/^html$/i),kR=function(){return typeof window>"u"?null:window},TR=function(n,o){if(G0(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function B_(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kR(),n=function(mt){return B_(mt)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,y=e.NodeFilter,x=e.NamedNodeMap,N=x===void 0?e.NamedNodeMap||e.MozNamedAttrMap:x,P=e.HTMLFormElement,L=e.DOMParser,ce=e.trustedTypes,ie=b.prototype,ee=vw(ie,"cloneNode"),ue=vw(ie,"nextSibling"),Re=vw(ie,"childNodes"),Ae=vw(ie,"parentNode");if(typeof u=="function"){var je=r.createElement("template");je.content&&je.content.ownerDocument&&(r=je.content.ownerDocument)}var et=TR(ce,o),xt=et?et.createHTML(""):"",un=r,Xt=un.implementation,lt=un.createNodeIterator,Je=un.createDocumentFragment,Sn=un.getElementsByTagName,no=o.importNode,lo={};try{lo=_g(r).documentMode?r.documentMode:{}}catch{}var Vo={};n.isSupported=typeof Ae=="function"&&Xt&&typeof Xt.createHTMLDocument<"u"&&lo!==9;var bs=yw,js=CR,Ws=Y5,Ma=SR,Si=xR,Gt=J5,Uo=X5,go=null,Or=lr({},[].concat(Il(O_),Il(D_),Il(R_),Il(N_),Il(yR))),Cn=null,Ao=lr({},[].concat(Il(wR),Il(M_),Il($_),Il(QS))),wo=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),hn=null,fs=null,rs=!0,oc=!0,Sr=!1,Ro=!1,Ps=!1,xa=!1,vr=!1,Yr=!1,ua=!1,Br=!1,$a=!0,gu=!0,ui=!1,Sm={},hu=null,Yb=lr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xb=null,xm=lr({},["audio","video","img","source","image","track"]),$d=null,Xr=lr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ju="http://www.w3.org/1998/Math/MathML",km="http://www.w3.org/2000/svg",Qu="http://www.w3.org/1999/xhtml",ed=Qu,Tm=!1,Mc,Em=["application/xhtml+xml","text/html"],Rf="text/html",td,Ig=null,Pk=r.createElement("form"),d2=function(mt){return mt instanceof RegExp||mt instanceof Function},m2=function(mt){Ig&&Ig===mt||((!mt||G0(mt)!=="object")&&(mt={}),mt=_g(mt),go="ALLOWED_TAGS"in mt?lr({},mt.ALLOWED_TAGS):Or,Cn="ALLOWED_ATTR"in mt?lr({},mt.ALLOWED_ATTR):Ao,$d="ADD_URI_SAFE_ATTR"in mt?lr(_g(Xr),mt.ADD_URI_SAFE_ATTR):Xr,Xb="ADD_DATA_URI_TAGS"in mt?lr(_g(xm),mt.ADD_DATA_URI_TAGS):xm,hu="FORBID_CONTENTS"in mt?lr({},mt.FORBID_CONTENTS):Yb,hn="FORBID_TAGS"in mt?lr({},mt.FORBID_TAGS):{},fs="FORBID_ATTR"in mt?lr({},mt.FORBID_ATTR):{},Sm="USE_PROFILES"in mt?mt.USE_PROFILES:!1,rs=mt.ALLOW_ARIA_ATTR!==!1,oc=mt.ALLOW_DATA_ATTR!==!1,Sr=mt.ALLOW_UNKNOWN_PROTOCOLS||!1,Ro=mt.SAFE_FOR_TEMPLATES||!1,Ps=mt.WHOLE_DOCUMENT||!1,Yr=mt.RETURN_DOM||!1,ua=mt.RETURN_DOM_FRAGMENT||!1,Br=mt.RETURN_TRUSTED_TYPE||!1,vr=mt.FORCE_BODY||!1,$a=mt.SANITIZE_DOM!==!1,gu=mt.KEEP_CONTENT!==!1,ui=mt.IN_PLACE||!1,Uo=mt.ALLOWED_URI_REGEXP||Uo,ed=mt.NAMESPACE||Qu,mt.CUSTOM_ELEMENT_HANDLING&&d2(mt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(wo.tagNameCheck=mt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),mt.CUSTOM_ELEMENT_HANDLING&&d2(mt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(wo.attributeNameCheck=mt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),mt.CUSTOM_ELEMENT_HANDLING&&typeof mt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(wo.allowCustomizedBuiltInElements=mt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mc=Em.indexOf(mt.PARSER_MEDIA_TYPE)===-1?Mc=Rf:Mc=mt.PARSER_MEDIA_TYPE,td=Mc==="application/xhtml+xml"?function(Ln){return Ln}:Ll,Ro&&(oc=!1),ua&&(Yr=!0),Sm&&(go=lr({},Il(yR)),Cn=[],Sm.html===!0&&(lr(go,O_),lr(Cn,wR)),Sm.svg===!0&&(lr(go,D_),lr(Cn,M_),lr(Cn,QS)),Sm.svgFilters===!0&&(lr(go,R_),lr(Cn,M_),lr(Cn,QS)),Sm.mathMl===!0&&(lr(go,N_),lr(Cn,$_),lr(Cn,QS))),mt.ADD_TAGS&&(go===Or&&(go=_g(go)),lr(go,mt.ADD_TAGS)),mt.ADD_ATTR&&(Cn===Ao&&(Cn=_g(Cn)),lr(Cn,mt.ADD_ATTR)),mt.ADD_URI_SAFE_ATTR&&lr($d,mt.ADD_URI_SAFE_ATTR),mt.FORBID_CONTENTS&&(hu===Yb&&(hu=_g(hu)),lr(hu,mt.FORBID_CONTENTS)),gu&&(go["#text"]=!0),Ps&&lr(go,["html","head","body"]),go.table&&(lr(go,["tbody"]),delete hn.tbody),Cl&&Cl(mt),Ig=mt)},Fk=lr({},["mi","mo","mn","ms","mtext"]),Ik=lr({},["foreignobject","desc","title","annotation-xml"]),Lg=lr({},["title","style","font","a","script"]),fp=lr({},D_);lr(fp,R_),lr(fp,vR);var tt=lr({},N_);lr(tt,K5);var at=function(mt){var Ln=Ae(mt);(!Ln||!Ln.tagName)&&(Ln={namespaceURI:Qu,tagName:"template"});var No=Ll(mt.tagName),Ks=Ll(Ln.tagName);return mt.namespaceURI===km?Ln.namespaceURI===Qu?No==="svg":Ln.namespaceURI===Ju?No==="svg"&&(Ks==="annotation-xml"||Fk[Ks]):Boolean(fp[No]):mt.namespaceURI===Ju?Ln.namespaceURI===Qu?No==="math":Ln.namespaceURI===km?No==="math"&&Ik[Ks]:Boolean(tt[No]):mt.namespaceURI===Qu?Ln.namespaceURI===km&&!Ik[Ks]||Ln.namespaceURI===Ju&&!Fk[Ks]?!1:!tt[No]&&(Lg[No]||!fp[No]):!1},Wt=function(mt){XS(n.removed,{element:mt});try{mt.parentNode.removeChild(mt)}catch{try{mt.outerHTML=xt}catch{mt.remove()}}},$t=function(mt,Ln){try{XS(n.removed,{attribute:Ln.getAttributeNode(mt),from:Ln})}catch{XS(n.removed,{attribute:null,from:Ln})}if(Ln.removeAttribute(mt),mt==="is"&&!Cn[mt])if(Yr||ua)try{Wt(Ln)}catch{}else try{Ln.setAttribute(mt,"")}catch{}},Xn=function(mt){var Ln,No;if(vr)mt="<remove></remove>"+mt;else{var Ks=JS(mt,/^[\r\n\t ]+/);No=Ks&&Ks[0]}Mc==="application/xhtml+xml"&&(mt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+mt+"</body></html>");var pc=et?et.createHTML(mt):mt;if(ed===Qu)try{Ln=new L().parseFromString(pc,Mc)}catch{}if(!Ln||!Ln.documentElement){Ln=Xt.createDocument(ed,"template",null);try{Ln.documentElement.innerHTML=Tm?"":pc}catch{}}var kl=Ln.body||Ln.documentElement;return mt&&No&&kl.insertBefore(r.createTextNode(No),kl.childNodes[0]||null),ed===Qu?Sn.call(Ln,Ps?"html":"body")[0]:Ps?Ln.documentElement:kl},Es=function(mt){return lt.call(mt.ownerDocument||mt,mt,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},$r=function(mt){return mt instanceof P&&(typeof mt.nodeName!="string"||typeof mt.textContent!="string"||typeof mt.removeChild!="function"||!(mt.attributes instanceof N)||typeof mt.removeAttribute!="function"||typeof mt.setAttribute!="function"||typeof mt.namespaceURI!="string"||typeof mt.insertBefore!="function")},tr=function(mt){return G0(f)==="object"?mt instanceof f:mt&&G0(mt)==="object"&&typeof mt.nodeType=="number"&&typeof mt.nodeName=="string"},pu=function(mt,Ln,No){!Vo[mt]||FV(Vo[mt],function(Ks){Ks.call(n,Ln,No,Ig)})},f2=function(mt){var Ln;if(pu("beforeSanitizeElements",mt,null),$r(mt)||Hl(/[\u0080-\uFFFF]/,mt.nodeName))return Wt(mt),!0;var No=td(mt.nodeName);if(pu("uponSanitizeElement",mt,{tagName:No,allowedTags:go}),mt.hasChildNodes()&&!tr(mt.firstElementChild)&&(!tr(mt.content)||!tr(mt.content.firstElementChild))&&Hl(/<[/\w]/g,mt.innerHTML)&&Hl(/<[/\w]/g,mt.textContent)||No==="select"&&Hl(/<template/i,mt.innerHTML))return Wt(mt),!0;if(!go[No]||hn[No]){if(!hn[No]&&Lk(No)&&(wo.tagNameCheck instanceof RegExp&&Hl(wo.tagNameCheck,No)||wo.tagNameCheck instanceof Function&&wo.tagNameCheck(No)))return!1;if(gu&&!hu[No]){var Ks=Ae(mt)||mt.parentNode,pc=Re(mt)||mt.childNodes;if(pc&&Ks)for(var kl=pc.length,Fi=kl-1;Fi>=0;--Fi)Ks.insertBefore(ee(pc[Fi],!0),ue(mt))}return Wt(mt),!0}return mt instanceof b&&!at(mt)||(No==="noscript"||No==="noembed")&&Hl(/<\/no(script|embed)/i,mt.innerHTML)?(Wt(mt),!0):(Ro&&mt.nodeType===3&&(Ln=mt.textContent,Ln=Ad(Ln,bs," "),Ln=Ad(Ln,js," "),mt.textContent!==Ln&&(XS(n.removed,{element:mt.cloneNode()}),mt.textContent=Ln)),pu("afterSanitizeElements",mt,null),!1)},VP=function(mt,Ln,No){if($a&&(Ln==="id"||Ln==="name")&&(No in r||No in Pk))return!1;if(!(oc&&!fs[Ln]&&Hl(Ws,Ln))){if(!(rs&&Hl(Ma,Ln))){if(!Cn[Ln]||fs[Ln]){if(!(Lk(mt)&&(wo.tagNameCheck instanceof RegExp&&Hl(wo.tagNameCheck,mt)||wo.tagNameCheck instanceof Function&&wo.tagNameCheck(mt))&&(wo.attributeNameCheck instanceof RegExp&&Hl(wo.attributeNameCheck,Ln)||wo.attributeNameCheck instanceof Function&&wo.attributeNameCheck(Ln))||Ln==="is"&&wo.allowCustomizedBuiltInElements&&(wo.tagNameCheck instanceof RegExp&&Hl(wo.tagNameCheck,No)||wo.tagNameCheck instanceof Function&&wo.tagNameCheck(No))))return!1}else if(!$d[Ln]){if(!Hl(Uo,Ad(No,Gt,""))){if(!((Ln==="src"||Ln==="xlink:href"||Ln==="href")&&mt!=="script"&&bw(No,"data:")===0&&Xb[mt])){if(!(Sr&&!Hl(Si,Ad(No,Gt,"")))){if(No)return!1}}}}}}return!0},Lk=function(mt){return mt.indexOf("-")>0},UP=function(mt){var Ln,No,Ks,pc;pu("beforeSanitizeAttributes",mt,null);var kl=mt.attributes;if(!!kl){var Fi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Cn};for(pc=kl.length;pc--;){Ln=kl[pc];var Jb=Ln,xi=Jb.name,WP=Jb.namespaceURI;No=xi==="value"?Ln.value:q5(Ln.value),Ks=td(xi);var fV=No;if(Fi.attrName=Ks,Fi.attrValue=No,Fi.keepAttr=!0,Fi.forceKeepAttr=void 0,pu("uponSanitizeAttribute",mt,Fi),No=Fi.attrValue,!Fi.forceKeepAttr){if(!Fi.keepAttr){$t(xi,mt);continue}if(Hl(/\/>/i,No)){$t(xi,mt);continue}Ro&&(No=Ad(No,bs," "),No=Ad(No,js," "));var g2=td(mt.nodeName);if(!VP(g2,Ks,No)){$t(xi,mt);continue}if(No!==fV)try{WP?mt.setAttributeNS(WP,xi,No):mt.setAttribute(xi,No)}catch{$t(xi,mt)}}}pu("afterSanitizeAttributes",mt,null)}},mV=function Yo(mt){var Ln,No=Es(mt);for(pu("beforeSanitizeShadowDOM",mt,null);Ln=No.nextNode();)pu("uponSanitizeShadowNode",Ln,null),!f2(Ln)&&(Ln.content instanceof c&&Yo(Ln.content),UP(Ln));pu("afterSanitizeShadowDOM",mt,null)};return n.sanitize=function(Yo,mt){var Ln,No,Ks,pc,kl;if(Tm=!Yo,Tm&&(Yo="<!-->"),typeof Yo!="string"&&!tr(Yo)){if(typeof Yo.toString!="function")throw _b("toString is not a function");if(Yo=Yo.toString(),typeof Yo!="string")throw _b("dirty is not a string, aborting")}if(!n.isSupported){if(G0(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Yo=="string")return e.toStaticHTML(Yo);if(tr(Yo))return e.toStaticHTML(Yo.outerHTML)}return Yo}if(xa||m2(mt),n.removed=[],typeof Yo=="string"&&(ui=!1),ui){if(Yo.nodeName){var Fi=td(Yo.nodeName);if(!go[Fi]||hn[Fi])throw _b("root node is forbidden and cannot be sanitized in-place")}}else if(Yo instanceof f)Ln=Xn("<!---->"),No=Ln.ownerDocument.importNode(Yo,!0),No.nodeType===1&&No.nodeName==="BODY"||No.nodeName==="HTML"?Ln=No:Ln.appendChild(No);else{if(!Yr&&!Ro&&!Ps&&Yo.indexOf("<")===-1)return et&&Br?et.createHTML(Yo):Yo;if(Ln=Xn(Yo),!Ln)return Yr?null:Br?xt:""}Ln&&vr&&Wt(Ln.firstChild);for(var Jb=Es(ui?Yo:Ln);Ks=Jb.nextNode();)Ks.nodeType===3&&Ks===pc||f2(Ks)||(Ks.content instanceof c&&mV(Ks.content),UP(Ks),pc=Ks);if(pc=null,ui)return Yo;if(Yr){if(ua)for(kl=Je.call(Ln.ownerDocument);Ln.firstChild;)kl.appendChild(Ln.firstChild);else kl=Ln;return Cn.shadowroot&&(kl=no.call(o,kl,!0)),kl}var xi=Ps?Ln.outerHTML:Ln.innerHTML;return Ps&&go["!doctype"]&&Ln.ownerDocument&&Ln.ownerDocument.doctype&&Ln.ownerDocument.doctype.name&&Hl(Q5,Ln.ownerDocument.doctype.name)&&(xi="<!DOCTYPE "+Ln.ownerDocument.doctype.name+`>
`+xi),Ro&&(xi=Ad(xi,bs," "),xi=Ad(xi,js," ")),et&&Br?et.createHTML(xi):xi},n.setConfig=function(Yo){m2(Yo),xa=!0},n.clearConfig=function(){Ig=null,xa=!1},n.isValidAttribute=function(Yo,mt,Ln){Ig||m2({});var No=td(Yo),Ks=td(mt);return VP(No,Ks,Ln)},n.addHook=function(Yo,mt){typeof mt=="function"&&(Vo[Yo]=Vo[Yo]||[],XS(Vo[Yo],mt))},n.removeHook=function(Yo){if(Vo[Yo])return IV(Vo[Yo])},n.removeHooks=function(Yo){Vo[Yo]&&(Vo[Yo]=[])},n.removeAllHooks=function(){Vo={}},n}var ER=B_();const P_=_t.explode,_R=()=>{const e={};return{addFilter:(c,u)=>{z(P_(c),f=>{uo(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>vs(e),removeFilter:(c,u)=>{z(P_(c),f=>{if(uo(e,f))if(we(u)){const b=e[f],y=Z(b.callbacks,x=>x!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},eI=(e,n)=>{z(n,o=>{e.attr(o,null)})},tI=(e,n,o)=>{e.addNodeFilter("font",r=>{z(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&Rr(y).each(x=>{u["font-size"]=o[x-1]}),c.name="span",c.attr("style",n.serialize(u)),eI(c,["color","face","size"])})})},nI=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";z(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},F_=(e,n,o)=>{var r;const c=y1();n.convert_fonts_to_spans&&tI(e,c,_t.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),nI(e,o,c)},ww=(e,n,o)=>{n.inline_styles&&F_(e,n,o)},AR=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),OR=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},K0=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?OR(r):decodeURIComponent(r);return R.some({type:c[1],data:f,base64Encoded:u})}else return R.none()},DR=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return R.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return R.some(new Blob([c],{type:e}))},oI=e=>new Promise((n,o)=>{K0(e).bind(({type:r,data:c,base64Encoded:u})=>DR(r,c,u)).fold(()=>o("Invalid data URI"),n)}),ep=e=>vo(e,"blob:")?AR(e):vo(e,"data:")?oI(e):Promise.reject("Unknown URI format"),ex=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let RR=0;const Cw=e=>(e||"blobid")+RR++,I_=(e,n,o)=>K0(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return R.none();{const f=u?r:btoa(r);return o(f,c)}}),L_=(e,n,o)=>{const r=e.create(Cw(),n,o);return e.add(r),r},H_=(e,n,o=!1)=>I_(n,o,(r,c)=>R.from(e.getByData(r,c)).orThunk(()=>DR(c,r).map(u=>L_(e,u,r)))),NR=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(vo(n,"blob:")){const r=e.getByUri(n);return we(r)?Promise.resolve(r):ep(n).then(c=>ex(c).then(u=>I_(u,!1,f=>R.some(L_(e,c,f))).getOrThunk(o)))}else return vo(n,"data:")?H_(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},sI=e=>we(e.attr("data-mce-bogus")),rI=e=>e.attr("src")===ls.transparentSrc||we(e.attr("data-mce-placeholder")),aI=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");rI(c)||sI(c)||Nt(u)||H_(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>z(c,r))}},z_=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",(c,u,f)=>{const b=_t.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),x=o.getWhitespaceElements();b.body=1;const N=P=>P.name in b&&S2(o,P);for(let P=0,L=c.length;P<L;P++){let ce=c[P],ie=ce.parent;if(ie&&b[ie.name]&&ce===ie.lastChild){let ee=ce.prev;for(;ee;){const ue=ee.name;if(ue!=="span"||ee.attr("data-mce-type")!=="bookmark"){ue==="br"&&(ce=null);break}ee=ee.prev}if(ce&&(ce.remove(),P0(o,y,x,ie))){const ue=o.getElementRule(ie.name);ue&&(ue.removeEmpty?ie.remove():ue.paddEmpty&&DS(f,N,ie))}}else{let ee=ce;for(;ie&&ie.firstChild===ee&&ie.lastChild===ee&&(ee=ie,!b[ie.name]);)ie=ie.parent;if(ee===ie){const ue=new Ji("#text",3);ue.value=ra,ce.replace(ue)}}}}),e.addAttributeFilter("href",c=>{let u=c.length;const f=y=>y.split(" ").filter(N=>N.length>0).concat(["noopener"]).sort().join(" "),b=y=>{const x=y?_t.trim(y):"";return/\b(noopener)\b/g.test(x)?x:f(x)};if(!n.allow_unsafe_link_target)for(;u--;){const y=c[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",b(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,y,x;for(;u--;)if(x=c[u],x.name==="a"&&x.firstChild&&!x.attr("href"))for(y=x.parent,f=x.lastChild;f&&y;)b=f.prev,y.insert(f,x),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new Ji("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],y=(u=b.attr("class"))!==null&&u!==void 0?u:"",x=_t.explode(y," ");let N="";for(let P=0;P<x.length;P++){const L=x[P];let ce=!1,ie=r["*"];ie&&ie[L]&&(ce=!0),ie=r[b.name],!ce&&ie&&ie[L]&&(ce=!0),ce&&(N&&(N+=" "),N+=L)}N.length||(N=null),b.attr("class",N)}}),aI(e,n)},MR=_t.each,cI=_t.trim,iI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],lI={ftp:21,http:80,https:443,mailto:25},uI=["img","video"],Ab=(e,n)=>we(e)?!e:we(n)?!ae(uI,n):!0,$R=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},BR=(e,n,o)=>{const r=$R(n);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?Ab(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Od{constructor(n,o={}){this.path="",this.directory="",n=cI(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Od(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&MR(iI,(b,y)=>{let x=f[y];x&&(x=x.replace(/\(mce_at\)/g,"@@")),c[b]=x}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Ja.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!BR(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Od(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Od(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?lI[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];MR(u,P=>{P&&b.push(P)});const y=[];for(let P=f.length-1;P>=0;P--)if(!(f[P].length===0||f[P]===".")){if(f[P]===".."){r++;continue}if(r>0){r--;continue}y.push(f[P])}const x=b.length-r;let N;return x<=0?N=to(y).join("/"):N=b.slice(0,x).join("/")+"/"+to(y).join("/"),N.indexOf("/")!==0&&(N="/"+N),c&&N.lastIndexOf("/")!==N.length-1&&(N+=c),N}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const PR=_t.makeMap,V_=_t.extend,Sw={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},U_=_t.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),W_="data-mce-type",FR=(e,n)=>{const o={...Sw};return o.PARSER_MEDIA_TYPE=n,e.allow_script_urls?o.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(o.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),o},dI=(e,n)=>{const o=ER(),r=n.getSpecialElements(),c=e.validate;let u=0;return o.addHook("uponSanitizeElement",(f,b)=>{var y,x,N;f.nodeType===te&&!e.allow_conditional_comments&&/^\[if/i.test((y=f.nodeValue)!==null&&y!==void 0?y:"")&&(f.nodeValue=" "+f.nodeValue);const P=b.tagName;if(f.nodeType!==ut||P==="body")return;const L=be.fromDom(f),ce=P.toLowerCase(),ie=Tl(L,W_),ee=Ir(L,"data-mce-bogus");if(!ie&&oe(ee)){ee==="all"?Bs(L):ic(L);return}const ue=n.getElementRule(ce);if(c&&!ue){uo(r,ce)?Bs(L):ic(L);return}else b.allowedTags[P]=!0;if(c&&ue&&!ie){if(z((x=ue.attributesForced)!==null&&x!==void 0?x:[],Re=>{nr(L,Re.name,Re.value==="{$uid}"?`mce_${u++}`:Re.value)}),z((N=ue.attributesDefault)!==null&&N!==void 0?N:[],Re=>{Tl(L,Re.name)||nr(L,Re.name,Re.value==="{$uid}"?`mce_${u++}`:Re.value)}),ue.attributesRequired&&!se(ue.attributesRequired,Re=>Tl(L,Re))){ic(L);return}if(ue.removeEmptyAttrs&&jl(L)){ic(L);return}ue.outputName&&ue.outputName!==ce&&z2(L,ue.outputName)}}),o.addHook("uponSanitizeAttribute",(f,b)=>{const y=f.tagName.toLowerCase(),{attrName:x,attrValue:N}=b;b.keepAttr=!c||n.isValid(y,x)||vo(x,"data-")||vo(x,"aria-"),x in U_&&BR(e,N,y)&&(b.keepAttr=!1),b.keepAttr?(b.allowedAttributes[x]=!0,x in n.getBoolAttrs()&&(b.attrValue=x),e.allow_svg_data_urls&&vo(N,"data:image/svg+xml")&&(b.forceKeepAttr=!0)):f.hasAttribute(W_)&&(x==="id"||x==="class"||x==="style")&&(b.forceKeepAttr=!0)}),o},tx=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const y=u[f],x=new Ji(y.nodeName.toLowerCase(),y.nodeType);if(En(y)){const N=y.attributes;for(let P=0,L=N.length;P<L;P++){const ce=N[P];x.attr(ce.name,ce.value)}}else Lt(y)?(x.value=y.data,c&&(x.raw=!0)):(al(y)||a1(y)||c1(y))&&(x.value=y.data);tx(x,y,o),e.append(x)}},Z_=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;z(n,b=>b(f)),Nt(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];z(o,f=>f(u))}},j_=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=V_(PR("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=D2(n),x=/[ \t\r\n]+/g,N=/^[ \t\r\n]+/,P=/[ \t\r\n]+$/,L=Ae=>{let je=Ae.parent;for(;we(je);){if(je.name in f)return!0;je=je.parent}return!1},ce=Ae=>{let je=Ae;for(;we(je);){if(je.name in y)return P0(n,u,f,je);je=je.parent}return!1},ie=Ae=>Ae.name in b&&!S2(n,Ae),ee=(Ae,je)=>{const et=je?Ae.prev:Ae.next;return we(et)||Nt(Ae.parent)?!1:ie(Ae.parent)&&(Ae.parent!==e||r.isRootContent===!0)};return[Ae=>{var je;if(Ae.type===3&&!L(Ae)){let et=(je=Ae.value)!==null&&je!==void 0?je:"";et=et.replace(x," "),(xD(Ae.prev,ie)||ee(Ae,!0))&&(et=et.replace(N,"")),et.length===0?Ae.remove():Ae.value=et}},Ae=>{var je;if(Ae.type===1){const et=n.getElementRule(Ae.name);if(c&&et){const xt=P0(n,u,f,Ae);et.paddInEmptyBlock&&xt&&ce(Ae)?DS(r,ie,Ae):et.removeEmpty&&xt?ie(Ae)?Ae.remove():Ae.unwrap():et.paddEmpty&&(xt||SD(Ae))&&DS(r,ie,Ae)}}else if(Ae.type===3&&!L(Ae)){let et=(je=Ae.value)!==null&&je!==void 0?je:"";(Ae.next&&ie(Ae.next)||ee(Ae,!1))&&(et=et.replace(P,"")),et.length===0?Ae.remove():Ae.value=et}}]},mI=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},iu=(e={},n=Nu())=>{const o=_R(),r=_R(),c={validate:!0,root_name:"body",...e},u=new DOMParser,f=dI(c,n),b=(je,et,xt="html")=>{const un=xt==="xhtml"?"application/xhtml+xml":"text/html",Xt=uo(n.getSpecialElements(),et.toLowerCase()),lt=Xt?`<${et}>${je}</${et}>`:je,Je=xt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${lt}</body></html>`:`<body>${lt}</body>`,Sn=u.parseFromString(Je,un).body;return f.sanitize(Sn,FR(c,un)),f.removed=[],Xt?Sn.firstChild:Sn},y=o.addFilter,x=o.getFilters,N=o.removeFilter,P=r.addFilter,L=r.getFilters,ce=r.removeFilter,ie=(je,et)=>{MS(n,je)&&et.push(je)},ee=(je,et)=>{const xt=oe(et.attr(W_)),un=et.type===1&&!uo(je,et.name)&&!f1(n,et);return et.type===3||un&&!xt},ue=(je,et)=>{const xt=V_(PR("script,style,head,html,body,title,meta,param"),n.getBlockElements()),un=/^[ \t\r\n]+/,Xt=/[ \t\r\n]+$/;let lt=je.firstChild,Je=null;const Sn=no=>{var lo,Vo;no&&(lt=no.firstChild,lt&&lt.type===3&&(lt.value=(lo=lt.value)===null||lo===void 0?void 0:lo.replace(un,"")),lt=no.lastChild,lt&&lt.type===3&&(lt.value=(Vo=lt.value)===null||Vo===void 0?void 0:Vo.replace(Xt,"")))};if(!!n.isValidChild(je.name,et.toLowerCase())){for(;lt;){const no=lt.next;ee(xt,lt)?(Je||(Je=new Ji(et,1),Je.attr(c.forced_root_block_attrs),je.insert(Je,lt)),Je.append(lt)):(Sn(Je),Je=null),lt=no}Sn(Je)}},Ae={schema:n,addAttributeFilter:P,getAttributeFilters:L,removeAttributeFilter:ce,addNodeFilter:y,getNodeFilters:x,removeNodeFilter:N,parse:(je,et={})=>{var xt;const un=c.validate,Xt=(xt=et.context)!==null&&xt!==void 0?xt:c.root_name,lt=b(je,Xt,et.format);nu(n,lt);const Je=new Ji(Xt,11);tx(Je,lt,n.getSpecialElements()),lt.innerHTML="";const[Sn,no]=j_(Je,n,c,et),lo=[],Vo=un?Ma=>ie(Ma,lo):Ne,bs={nodes:{},attributes:{}},js=Ma=>a_(x(),L(),Ma,bs);if(Z_(Je,[Sn,js],[no,Vo]),lo.reverse(),un&&lo.length>0)if(et.context){const{pass:Ma,fail:Si}=H(lo,Gt=>Gt.parent===Je);aw(Si,n,js),et.invalid=Ma.length>0}else aw(lo,n,js);const Ws=mI(c,et);return Ws&&(Je.name==="body"||et.isRootContent)&&ue(Je,Ws),et.invalid||c_(bs,et),Je}};return z_(Ae,c),ww(Ae,c,n),Ae},G_=e=>BS(e)?Gh({validate:!1}).serialize(e):e,IR=(e,n)=>{const o=G_(e),r=n(o);if(r.isDefaultPrevented())return r;if(BS(e))if(r.content!==o){const c=iu({validate:!1,forced_root_block:!1}).parse(r.content,{context:e.name});return{...r,content:c}}else return{...r,content:e};else return r},q_=(e,n)=>{if(n.no_events)return yi.value(n);{const o=$y(e,n);return o.isDefaultPrevented()?yi.error(KC(e,{content:"",...o}).content):yi.value(o)}},K_=(e,n,o)=>o.no_events?n:IR(n,c=>KC(e,{...o,content:c})).content,Ob=(e,n)=>{if(n.no_events)return yi.value(n);{const o=IR(n.content,r=>My(e,{...n,content:r}));return o.isDefaultPrevented()?(qC(e,o),yi.error(void 0)):yi.value(o)}},Y_=(e,n,o)=>{o.no_events||qC(e,{...o,content:n})},X_=(e,n,o)=>({element:e,width:n,rows:o}),J_=(e,n)=>({element:e,cells:n}),fI=(e,n)=>({x:e,y:n}),LR=(e,n)=>yc(e,n).bind(Rr).getOr(1),gI=(e,n,o,r,c)=>{const u=LR(c,"rowspan"),f=LR(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=J_(Pv(r),[]));for(let x=n;x<n+f;x++){const N=b[y].cells;N[x]=y===o&&x===n?c:Jf(c)}}},HR=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},Q_=(e,n,o)=>{for(;HR(e,n,o);)n++;return n},eA=e=>Be(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),tA=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if($s(c[u],n))return R.some(fI(u,r))}return R.none()},nA=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,x=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(J_(f[b].element,x))}return u},zR=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?nA(e,r,c,u,f):nA(e,r,f,u,c);return X_(e.element,eA(b),b)},VR=(e,n)=>{const o=Jf(e.element),r=be.fromTag("tbody");return Bo(r,n),Qr(o,r),o},UR=e=>re(e.rows,n=>{const o=re(n.cells,c=>{const u=Pv(c);return Gr(u,"colspan"),Gr(u,"rowspan"),u}),r=Jf(n.element);return Bo(r,o),r}),hI=e=>{const n=X_(Jf(e),0,[]);return z(Rs(e,"tr"),(o,r)=>{z(Rs(o,"td,th"),(c,u)=>{gI(n,Q_(n,u,r),r,o,c)})}),X_(n.element,eA(n.rows),n.rows)},oA=e=>VR(e,UR(e)),pI=(e,n,o)=>tA(e,n).bind(r=>tA(e,o).map(c=>zR(e,r,c))),nx=e=>Jt(e,n=>Yn(n)==="ul"||Yn(n)==="ol"),bI=(e,n)=>Jt(e,o=>Yn(o)==="li"&&Ty(o,n)).fold(ge([]),o=>nx(e).map(r=>{const c=be.fromTag(Yn(r)),u=ps(ts(r),(f,b)=>vo(b,"list-style"));return Se(c,u),[be.fromTag("li"),c]}).getOr([])),vI=(e,n)=>{const o=Be(n,(r,c)=>(Qr(c,r),c),e);return n.length>0?Uh([o]):o},yI=e=>Zi(e)?wc(e).filter(Ns).fold(ge([]),n=>[e,n]):Ns(e)?[e]:[],WR=(e,n)=>{const o=be.fromDom(n.commonAncestorContainer),r=Sf(o,e),c=Z(r,Wf),u=bI(r,n),f=c.concat(u.length?u:yI(o));return re(f,Jf)},sA=()=>Uh([]),wI=(e,n)=>vI(be.fromDom(n.cloneContents()),WR(e,n)),CI=(e,n)=>Tu(n,"table",_e($s,e)),SI=(e,n)=>CI(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=hI(o);return pI(u,r,c).map(f=>Uh([oA(f)]))}).getOrThunk(sA),xI=(e,n)=>n.length>0&&n[0].collapsed?sA():wI(e,n[0]),ZR=(e,n)=>{const o=xy(n,e);return o.length>0?SI(e,o):xI(e,n)},rA=(e,n)=>n>=0&&n<e.length&&Oc(e.charAt(n)),jR=e=>Aa(e.innerText),kI=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),TI=e=>R.from(e.selection.getRng()).map(n=>{var o;const r=R.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=kI(r),f=be.fromDom(n.cloneContents());BE(f),xO(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=jR(b),x=Aa((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),rA(x,0)||rA(x,x.length-1)){const N=r.getOr(c),P=jR(N),L=P.indexOf(y);if(L===-1)return y;{const ce=rA(P,L-1),ie=rA(P,L+y.length);return(ce?" ":"")+y+(ie?" ":"")}}else return y}).getOr(""),EI=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=hS(e,$h(c)),f=n.contextual?ZR(be.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},_I=(e,n)=>{if(n.format==="text")return TI(e);{const o=EI(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},AI=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),OI=(e,n,o={})=>{const r=AI(o,n);return q_(e,r).fold(Ue,c=>{const u=_I(e,c);return K_(e,u,c)})},ox=0,GR=1,qR=2,DI=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(N,P,L)=>({start:N,end:P,diag:L}),f=(N,P,L,ce,ie)=>{const ee=y(N,P,L,ce);if(ee===null||ee.start===P&&ee.diag===P-ce||ee.end===N&&ee.diag===N-L){let ue=N,Re=L;for(;ue<P||Re<ce;)ue<P&&Re<ce&&e[ue]===n[Re]?(ie.push([ox,e[ue]]),++ue,++Re):P-N>ce-L?(ie.push([qR,e[ue]]),++ue):(ie.push([GR,n[Re]]),++Re)}else{f(N,ee.start,L,ee.start-ee.diag,ie);for(let ue=ee.start;ue<ee.end;++ue)ie.push([ox,e[ue]]);f(ee.end,P,ee.end-ee.diag,ce,ie)}},b=(N,P,L,ce)=>{let ie=N;for(;ie-P<ce&&ie<L&&e[ie]===n[ie-P];)++ie;return u(N,ie,P)},y=(N,P,L,ce)=>{const ie=P-N,ee=ce-L;if(ie===0||ee===0)return null;const ue=ie-ee,Re=ee+ie,Ae=(Re%2===0?Re:Re+1)/2;r[1+Ae]=N,c[1+Ae]=P+1;let je,et,xt,un,Xt;for(je=0;je<=Ae;++je){for(et=-je;et<=je;et+=2){for(xt=et+Ae,et===-je||et!==je&&r[xt-1]<r[xt+1]?r[xt]=r[xt+1]:r[xt]=r[xt-1]+1,un=r[xt],Xt=un-N+L-et;un<P&&Xt<ce&&e[un]===n[Xt];)r[xt]=++un,++Xt;if(ue%2!==0&&ue-je<=et&&et<=ue+je&&c[xt-ue]<=r[xt])return b(c[xt-ue],et+N-L,P,ce)}for(et=ue-je;et<=ue+je;et+=2){for(xt=et+Ae-ue,et===ue-je||et!==ue+je&&c[xt+1]<=c[xt-1]?c[xt]=c[xt+1]-1:c[xt]=c[xt-1],un=c[xt]-1,Xt=un-N+L-et;un>=N&&Xt>=L&&e[un]===n[Xt];)c[xt]=un--,Xt--;if(ue%2===0&&-je<=et&&et<=je&&c[xt]<=r[xt+ue])return b(c[xt],et+N-L,P,ce)}}return null},x=[];return f(0,e.length,0,n.length,x),x},KR=e=>En(e)?e.outerHTML:Lt(e)?Ja.encodeRaw(e.data,!1):al(e)?"<!--"+e.data+"-->":"",RI=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},LV=(e,n,o)=>{const r=RI(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},HV=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},NI=(e,n)=>{let o=0;z(e,r=>{r[0]===ox?o++:r[0]===GR?(LV(n,r[1],o),o++):r[0]===qR&&HV(n,o)})},MI=e=>Z(re(Oo(e.childNodes),KR),n=>n.length>0),zV=(e,n)=>{const o=re(Oo(n.childNodes),KR);return NI(DI(o,e),n),n},$I=Gn(()=>document.implementation.createHTMLDocument("undo")),na=e=>e.indexOf("</iframe>")!==-1,aA=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),VV=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),sx=e=>{const n=MI(e.getBody()),o=jn(n,c=>{const u=SO(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return na(r)?aA(o):VV(r)},cA=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?zV(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:we(r)&&by(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},tp=e=>e.type==="fragmented"?e.fragments.join(""):e.content,BI=e=>{const n=be.fromTag("body",$I());return Yg(n,tp(e)),z(Rs(n,"*[data-mce-bogus]"),ic),Ff(n)},UV=(e,n)=>tp(e)===tp(n),ii=(e,n)=>BI(e)===BI(n),rx=(e,n)=>!e||!n?!1:UV(e,n)?!0:ii(e,n),ax=e=>e.get()===0,xw=(e,n,o)=>{ax(o)&&(e.typing=n)},YR=(e,n)=>{e.typing&&(xw(e,!1,n),e.add())},PI=e=>{e.typing&&(e.typing=!1,e.add())},cx=(e,n,o)=>{ax(n)&&o.set(Qa(e.selection))},FI=(e,n,o,r,c,u,f)=>{const b=sx(e),y=_t.extend(u||{},b);if(!ax(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&rx(x,y))return null;n.data[o.get()]&&c.get().each(L=>{n.data[o.get()].beforeBookmark=L});const N=Jv(e);if(N&&n.data.length>N){for(let L=0;L<n.data.length-1;L++)n.data[L]=n.data[L+1];n.data.length--,o.set(n.data.length)}y.bookmark=Qa(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const P={level:y,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",P),e.dispatch("change",P)):e.dispatch("AddUndo",P),y},iA=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},II=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];cA(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},XR=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],cA(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},JR=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,xw(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],cA(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},lA=e=>{e.clear(),e.add()},QR=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!rx(sx(e),n.data[0]),uA=(e,n)=>n.get()<e.data.length-1&&!e.typing,LI=(e,n,o)=>(YR(e,n),e.beforeChange(),e.ignore(o),e.add()),HI=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},zI=(e,n)=>{const o=e.dom,r=we(n)?n:e.getBody();z(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=j4(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=rf(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},lu=e=>({init:{bindEvents:Ne},undoManager:{beforeChange:(n,o)=>cx(e,n,o),add:(n,o,r,c,u,f)=>FI(e,n,o,r,c,u,f),undo:(n,o,r)=>JR(e,n,o,r),redo:(n,o)=>XR(e,n,o),clear:(n,o)=>iA(e,n,o),reset:n=>lA(n),hasUndo:(n,o)=>QR(e,n,o),hasRedo:(n,o)=>uA(n,o),transact:(n,o,r)=>LI(n,o,r),ignore:(n,o)=>HI(n,o),extra:(n,o,r,c)=>II(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>p_(e,n,o,r,c),matchAll:(n,o)=>S5(e,n,o),matchNode:(n,o,r,c)=>hm(e,n,o,r,c),canApply:n=>LD(e,n),closest:n=>IS(e,n),apply:(n,o,r)=>aR(e,n,o,r),remove:(n,o,r,c)=>oR(e,n,o,r,c),toggle:(n,o,r)=>mR(e,n,o,r),formatChanged:(n,o,r,c,u)=>__(e,n,o,r,c,u)},editor:{getContent:n=>CF(e,n),setContent:(n,o)=>C5(e,n,o),insertContent:(n,o)=>Cb(e,n,o),addVisual:n=>zI(e,n)},selection:{getContent:(n,o)=>OI(e,n,o)},autocompleter:{addDecoration:n=>mF(e,n),removeDecoration:()=>gF(e,be.fromDom(e.getBody()))},raw:{getModel:()=>R.none()}}),VI=e=>{const n=x=>bt(x)?x:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,N,P)=>r.transact(P),ignore:(x,N)=>r.ignore(N),extra:(x,N,P,L)=>r.extra(P,L)},formatter:{match:(x,N,P,L)=>c.match(x,n(N),L),matchAll:c.matchAll,matchNode:c.matchNode,canApply:x=>c.canApply(x),closest:x=>c.closest(x),apply:(x,N,P)=>c.apply(x,n(N)),remove:(x,N,P,L)=>c.remove(x,n(N)),toggle:(x,N,P)=>c.toggle(x,n(N)),formatChanged:(x,N,P,L,ce)=>c.formatChanged(N,P,L,ce)},editor:{getContent:x=>u.getContent(x),setContent:(x,N)=>({content:u.setContent(x,N),html:""}),insertContent:(x,N)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,N)=>f.getContent(N)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>R.some(y.getRawModel())}}},UI=()=>{const e=ge(null),n=ge("");return{init:{bindEvents:Ne},undoManager:{beforeChange:Ne,add:e,undo:e,redo:e,clear:Ne,reset:Ne,hasUndo:Et,hasRedo:Et,transact:e,ignore:Ne,extra:Ne},formatter:{match:Et,matchAll:ge([]),matchNode:ge(void 0),canApply:Et,closest:n,apply:Ne,remove:Ne,toggle:Ne,formatChanged:ge({unbind:Ne})},editor:{getContent:n,setContent:ge({content:"",html:""}),insertContent:ge(""),addVisual:Ne},selection:{getContent:n},autocompleter:{addDecoration:Ne,removeDecoration:Ne},raw:{getModel:ge(R.none())}}},kf=e=>uo(e.plugins,"rtc"),WI=e=>as(e.plugins,"rtc").bind(n=>R.from(n.setup)),ZI=e=>{const n=e;return WI(e).fold(()=>(n.rtcInstance=lu(e),R.none()),o=>(n.rtcInstance=UI(),R.some(()=>o().then(r=>(n.rtcInstance=VI(r),r.rtc.isRemote)))))},ix=e=>e.rtcInstance?e.rtcInstance:lu(e),Wa=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},jI=(e,n,o)=>{Wa(e).undoManager.beforeChange(n,o)},GI=(e,n,o,r,c,u,f)=>Wa(e).undoManager.add(n,o,r,c,u,f),lx=(e,n,o,r)=>Wa(e).undoManager.undo(n,o,r),qI=(e,n,o)=>Wa(e).undoManager.redo(n,o),KI=(e,n,o)=>{Wa(e).undoManager.clear(n,o)},eN=(e,n)=>{Wa(e).undoManager.reset(n)},dA=(e,n,o)=>Wa(e).undoManager.hasUndo(n,o),YI=(e,n,o)=>Wa(e).undoManager.hasRedo(n,o),XI=(e,n,o,r)=>Wa(e).undoManager.transact(n,o,r),WV=(e,n,o)=>{Wa(e).undoManager.ignore(n,o)},JI=(e,n,o,r,c)=>{Wa(e).undoManager.extra(n,o,r,c)},kw=(e,n,o,r,c)=>Wa(e).formatter.match(n,o,r,c),tN=(e,n,o)=>Wa(e).formatter.matchAll(n,o),nN=(e,n,o,r,c)=>Wa(e).formatter.matchNode(n,o,r,c),QI=(e,n)=>Wa(e).formatter.canApply(n),oN=(e,n)=>Wa(e).formatter.closest(n),e6=(e,n,o,r)=>{Wa(e).formatter.apply(n,o,r)},t6=(e,n,o,r,c)=>{Wa(e).formatter.remove(n,o,r,c)},n6=(e,n,o,r)=>{Wa(e).formatter.toggle(n,o,r)},o6=(e,n,o,r,c,u)=>Wa(e).formatter.formatChanged(n,o,r,c,u),sN=(e,n)=>ix(e).editor.getContent(n),s6=(e,n,o)=>ix(e).editor.setContent(n,o),r6=(e,n,o)=>ix(e).editor.insertContent(n,o),Tw=(e,n,o)=>Wa(e).selection.getContent(n,o),rN=(e,n)=>Wa(e).editor.addVisual(n),mA=e=>Wa(e).init.bindEvents(),a6=(e,n)=>Wa(e).autocompleter.addDecoration(n),c6=e=>Wa(e).autocompleter.removeDecoration(),i6=(e,n={})=>{const o=n.format?n.format:"html";return Tw(e,o,n)},fA=e=>e.dom.length===0?(Bs(e),R.none()):R.some(e),l6=(e,n)=>e.filter(o=>Lu.isBookmarkNode(o.dom)).bind(n?Ld:Fc),u6=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(KE(c,u,!1,!r),o.setStart(u,f)):(KE(u,c,!1,!r),o.setEnd(u,f))},d6=(e,n)=>{wc(e).each(o=>{const r=e.dom;n&&Xy(o,gt(r,0))?wS(r,0):!n&&R0(o,gt(r,r.length))&&qE(r,r.length)})},aN=(e,n,o,r)=>{e.bind(c=>((r?qE:wS)(c.dom,r?c.dom.length:0),n.filter(Os).map(f=>u6(c,f,o,r)))).orThunk(()=>l6(n,r).or(n).filter(Os).map(u=>d6(u,r)))},ZV=(e,n)=>{const o=R.from(n.firstChild).map(be.fromDom),r=R.from(n.lastChild).map(be.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(Fc).filter(Os).bind(fA),u=r.bind(Ld).filter(Os).bind(fA);aN(c,o,e,!0),aN(u,r,e,!1),e.collapse(!1)},bm=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),cN=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Gh({validate:!1},e.schema).serialize(u)}else return n.content},m6=(e,n,o={})=>{const r=bm(o,n);Ob(e,r).each(c=>{const u=cN(e,c),f=e.selection.getRng();ZV(f,f.createContextualFragment(u)),e.selection.setRng(f),Yt(e,f),Y_(e,u,c)})},iN=(e,n,o)=>{if(uo(e,n)){const r=Z(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var f6=(e,n)=>{let o,r;const c=(b,y)=>Jt(y,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,x=u(y),N={};en(o,(P,L)=>{c(L,x).each(ce=>{r[L]||(z(P,ie=>{ie(!0,{node:ce,selector:L,parents:x})}),r[L]=P),N[L]=P})}),en(r,(P,L)=>{N[L]||(delete r[L],z(P,ce=>{ce(!1,{node:y,selector:L,parents:x})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{iN(o,b,y),iN(r,b,y)}})}};const lN=e=>!!(e&&e.ownerDocument)&&Ga(be.fromDom(e.ownerDocument),be.fromDom(e)),Vs=e=>e?lN(e.startContainer)&&lN(e.endContainer):!1,g6=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=f6(e,r),b=(Gt,Uo)=>{const go=e.createRng();we(Gt)&&we(Uo)?(go.setStart(Gt,Uo),go.setEnd(Gt,Uo),je(go),ue(!1)):(i0(e,go,r.getBody(),!0),je(go))},y=Gt=>i6(r,Gt),x=(Gt,Uo)=>m6(r,Gt,Uo),N=Gt=>mO(r.getBody(),Ae(),Gt),P=Gt=>fO(r.getBody(),Ae(),Gt),L=(Gt,Uo)=>Ma.getBookmark(Gt,Uo),ce=Gt=>Ma.moveToBookmark(Gt),ie=(Gt,Uo)=>(hO(e,Gt,Uo).each(je),Gt),ee=()=>{const Gt=Ae(),Uo=Re();return!Gt||Gt.item?!1:Gt.compareEndPoints?Gt.compareEndPoints("StartToEnd",Gt)===0:!Uo||Gt.collapsed},ue=Gt=>{const Uo=Ae();Uo.collapse(!!Gt),je(Uo)},Re=()=>n.getSelection?n.getSelection():n.document.selection,Ae=()=>{let Gt;const Uo=(Or,Cn,Ao)=>{try{return Cn.compareBoundaryPoints(Or,Ao)}catch{return-1}},go=n.document;if(we(r.bookmark)&&!vb(r)){const Or=Dc(r);if(Or.isSome())return Or.map(Cn=>hS(r,[Cn])[0]).getOr(go.createRange())}try{const Or=Re();Or&&!Lm(Or.anchorNode)&&(Or.rangeCount>0?Gt=Or.getRangeAt(0):Gt=go.createRange(),Gt=hS(r,[Gt])[0])}catch{}if(Gt||(Gt=go.createRange()),ei(Gt.startContainer)&&Gt.collapsed){const Or=e.getRoot();Gt.setStart(Or,0),Gt.setEnd(Or,0)}return c&&u&&(Uo(Gt.START_TO_START,Gt,c)===0&&Uo(Gt.END_TO_END,Gt,c)===0?Gt=u:(c=null,u=null)),Gt},je=(Gt,Uo)=>{if(!Vs(Gt))return;const go=Re();if(Gt=r.dispatch("SetSelectionRange",{range:Gt,forward:Uo}).range,go){u=Gt;try{go.removeAllRanges(),go.addRange(Gt)}catch{}Uo===!1&&go.extend&&(go.collapse(Gt.endContainer,Gt.endOffset),go.extend(Gt.startContainer,Gt.startOffset)),c=go.rangeCount>0?go.getRangeAt(0):null}if(!Gt.collapsed&&Gt.startContainer===Gt.endContainer&&(go==null?void 0:go.setBaseAndExtent)&&Gt.endOffset-Gt.startOffset<2&&Gt.startContainer.hasChildNodes()){const Cn=Gt.startContainer.childNodes[Gt.startOffset];Cn&&Cn.nodeName==="IMG"&&(go.setBaseAndExtent(Gt.startContainer,Gt.startOffset,Gt.endContainer,Gt.endOffset),(go.anchorNode!==Gt.startContainer||go.focusNode!==Gt.endContainer)&&go.setBaseAndExtent(Cn,0,Cn,1))}r.dispatch("AfterSetSelectionRange",{range:Gt,forward:Uo})},et=Gt=>(x(e.getOuterHTML(Gt)),Gt),xt=()=>cF(r.getBody(),Ae()),un=(Gt,Uo)=>gS(e,Ae(),Gt,Uo),Xt=()=>{const Gt=Re(),Uo=Gt==null?void 0:Gt.anchorNode,go=Gt==null?void 0:Gt.focusNode;if(!Gt||!Uo||!go||Lm(Uo)||Lm(go))return!0;const Or=e.createRng(),Cn=e.createRng();try{Or.setStart(Uo,Gt.anchorOffset),Or.collapse(!0),Cn.setStart(go,Gt.focusOffset),Cn.collapse(!0)}catch{return!0}return Or.compareBoundaryPoints(Or.START_TO_START,Cn)<=0},Ws={dom:e,win:n,serializer:o,editor:r,expand:(Gt={type:"word"})=>je(Sg(e).expand(Ae(),Gt)),collapse:ue,setCursorLocation:b,getContent:y,setContent:x,getBookmark:L,moveToBookmark:ce,select:ie,isCollapsed:ee,isForward:Xt,setNode:et,getNode:xt,getSel:Re,setRng:je,getRng:Ae,getStart:N,getEnd:P,getSelectedBlocks:un,normalize:()=>{const Gt=Ae(),Uo=Re();if(!PC(Uo)&&ds(r)){const go=x0(e,Gt);return go.each(Or=>{je(Or,Xt())}),go.getOr(Gt)}return Gt},selectorChanged:(Gt,Uo)=>(f(Gt,Uo),Ws),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Gt,Uo=e.getRoot();for(;Uo&&Uo.nodeName!=="BODY";){if(Uo.scrollHeight>Uo.clientHeight){Gt=Uo;break}Uo=Uo.parentNode}return Gt},scrollIntoView:(Gt,Uo)=>{we(Gt)?ln(r,Gt,Uo):Yt(r,Ae(),Uo)},placeCaretAt:(Gt,Uo)=>je(Cg(Gt,Uo,r.getDoc())),getBoundingClientRect:()=>{const Gt=Ae();return Gt.collapsed?gt.fromRangeStart(Gt).getClientRects()[0]:Gt.getBoundingClientRect()},destroy:()=>{n=c=u=null,Si.destroy()}},Ma=Lu(Ws),Si=Pl(Ws,r);return Ws.bookmarkManager=Ma,Ws.controlSelection=Si,Ws},h6=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const x=r[y];let N=x.attr(u);N!==void 0?(x.attr(c,N.length>0?N:null),x.attr(u,null)):(N=x.attr(c),c==="style"?N=o.serializeStyle(o.parseStyle(N),x.name):f&&(N=f.call(b,N,c,x.name)),x.attr(c,N.length>0?N:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(R.from(b.firstChild).exists(x=>{var N;return!il((N=x.value)!==null&&N!==void 0?N:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=Ja.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],x=y.firstChild,N=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(c==="script"){const P=y.attr("type");P&&y.attr("type",P==="mce-no/type"?null:P.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&N.length>0&&(x.value=`// <![CDATA[
`+f(N)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&N.length>0&&(x.value=`<!--
`+f(N)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{z(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)})},p6=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Sa=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");_t.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return mE(e,{...o,node:u}),r&&(c.doc=r),u},b6=(e,n)=>we(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,Ew=(e,n,o)=>b6(e,o)?Sa(e,n,o):n,v6=(e,n,o)=>{_t.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},y6=(e,n,o)=>!n.no_events&&e?fE(e,{...n,content:o}).content:o,w6=(e,n,o)=>{const r=Aa(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Vf(be.fromDom(n))?r:_t.trim(r)},uN=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return p6(c),c},np=(e,n,o)=>Gh(e,n).serialize(o),zl=(e,n,o,r,c)=>{const u=np(n,o,r);return y6(e,c,u)},_w=(e,n)=>{const o=["data-mce-selected"],r=n&&n.dom?n.dom:pr.DOM,c=n&&n.schema?n.schema:Nu(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const u=iu(e,c);h6(u,e,r);const f=(b,y={})=>{const x={format:"html",...y},N=Ew(n,b,x),P=w6(r,N,x),L=uN(u,P,x);return x.format==="tree"?L:zl(n,e,c,L,x)};return{schema:c,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:f,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:_e(v6,u,o),getTempAttrs:ge(o),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},op=(e,n)=>{const o=_w(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},Ag="html",Aw=(e,n)=>({...e,format:n,get:!0,getInner:!0}),gA=(e,n={})=>{const o=n.format?n.format:Ag,r=Aw(n,o);return q_(e,r).fold(Ue,c=>{const u=sN(e,c);return K_(e,u,c)})},hA="html",dN=(e,n)=>({format:hA,...e,set:!0,content:n}),ux=(e,n,o={})=>{const r=dN(o,n);return Ob(e,r).map(c=>{const u=s6(e,c.content,c);return Y_(e,u.html,c),u.content}).getOr(n)},C6="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),S6="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),mN=e=>{const n=Z(C6,r=>uo(e,r)),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Dt(n)},fN=e=>{const n=_t.makeMap(e.plugins," "),r=Z(S6,c=>uo(n,c));return Dt(r)},gN=(e,n)=>{const o=mN(e),r=fN(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",x=c?`

Plugins:${b}${r.join(b)}`:"",N=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+x+N)}},hN=(e,n)=>{gN(e,n)},Y0=pr.DOM,jV=e=>{Y0.setStyle(e.id,"display",e.orgDisplay)},dx=e=>R.from(e).each(n=>n.destroy()),GV=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},x6=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Y0.unbind(n,"submit reset",e.formEventDelegate))},k6=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&we(c==null?void 0:c.nextSibling)&&Y0.remove(c.nextSibling),dm(e),e.editorManager.remove(e),!e.inline&&r&&jV(e),gE(e),Y0.remove(e.getContainer()),dx(n),dx(o),e.destroy()}},Tf=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),dx(o),dx(r)),x6(e),GV(e),e.destroyed=!0}},pA=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>uo(e,c)}})(),X0=bi.ModelManager,J0=(e,n)=>n.dom[e],pN=(e,n)=>parseInt(He(n,e),10),bN=_e(J0,"clientWidth"),vN=_e(J0,"clientHeight"),yN=_e(pN,"margin-top"),T6=_e(pN,"margin-left"),E6=e=>e.dom.getBoundingClientRect(),sp=(e,n,o)=>{const r=bN(e),c=vN(e);return n>=0&&o>=0&&n<=r&&o<=c},_6=(e,n,o,r)=>{const c=E6(n),u=e?c.left+n.dom.clientLeft+T6(n):0,f=e?c.top+n.dom.clientTop+yN(n):0,b=o-u,y=r-f;return{x:b,y}},A6=(e,n,o)=>{const r=be.fromDom(e.getBody()),c=e.inline?r:Rm(r),u=_6(e.inline,c,n,o);return sp(c,u.x,u.y)},O6=e=>R.from(e).map(be.fromDom),D6=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return O6(n).map(sl).getOr(!1)};var R6=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const wN=e=>{const n=[],o=()=>{const L=e.theme;return L&&L.getNotificationManagerImpl?L.getNotificationManagerImpl():R6()},r=()=>R.from(n[0]),c=(L,ce)=>L.type===ce.type&&L.text===ce.text&&!L.progressBar&&!L.timeout&&!ce.progressBar&&!ce.timeout,u=()=>{z(n,L=>{L.reposition()})},f=L=>{n.push(L)},b=L=>{eo(n,ce=>ce===L).each(ce=>{n.splice(ce,1)})},y=(L,ce=!0)=>e.removed||!D6(e)?{}:(ce&&e.dispatch("BeforeOpenNotification",{notification:L}),Jt(n,ie=>c(o().getArgs(ie),L)).getOrThunk(()=>{e.editorManager.setActive(e);const ie=o().open(L,()=>{b(ie),u(),r().fold(()=>e.focus(),ee=>vt(be.fromDom(ee.getEl())))});return f(ie),u(),e.dispatch("OpenNotification",{notification:{...ie}}),ie})),x=()=>{r().each(L=>{o().close(L),b(L),u()})},N=ge(n);return(L=>{L.on("SkinLoaded",()=>{const ce=_T(L);ce&&y({text:ce,type:"warning",timeout:0},!1),u()}),L.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),L.on("remove",()=>{z(n.slice(),ce=>{o().close(ce)})})})(e),{open:y,close:x,getNotifications:N}},Q0=bi.PluginManager,Db=bi.ThemeManager;var N6=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const CN=e=>{let n=[];const o=()=>{const ee=e.theme;return ee&&ee.getWindowManagerImpl?ee.getWindowManagerImpl():N6()},r=(ee,ue)=>(...Re)=>ue?ue.apply(ee,Re):void 0,c=ee=>{e.dispatch("OpenWindow",{dialog:ee})},u=ee=>{e.dispatch("CloseWindow",{dialog:ee})},f=ee=>{n.push(ee),c(ee)},b=ee=>{u(ee),n=Z(n,ue=>ue!==ee),n.length===0&&e.focus()},y=()=>R.from(n[n.length-1]),x=ee=>{e.editorManager.setActive(e),qs(e),e.ui.show();const ue=ee();return f(ue),ue},N=(ee,ue)=>x(()=>o().open(ee,ue,b)),P=ee=>x(()=>o().openUrl(ee,b)),L=(ee,ue,Re)=>{const Ae=o();Ae.alert(ee,r(Re||Ae,ue))},ce=(ee,ue,Re)=>{const Ae=o();Ae.confirm(ee,r(Re||Ae,ue))},ie=()=>{y().each(ee=>{o().close(ee),b(ee)})};return e.on("remove",()=>{z(n,ee=>{o().close(ee)})}),{open:N,openUrl:P,alert:L,confirm:ce,close:ie}},SN=(e,n)=>{e.notificationManager.open({type:"error",text:n})},bA=(e,n)=>{e._skinLoaded?SN(e,n):e.on("SkinLoaded",()=>{SN(e,n)})},Ow=(e,n)=>{bA(e,zc.translate(["Failed to upload image: {0}",n]))},Dw=(e,n,o)=>{ub(e,n,{message:o}),console.error(o)},Rb=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,M6=(e,n,o)=>{Dw(e,"PluginLoadError",Rb("plugin",n,o))},$6=(e,n,o)=>{Dw(e,"IconsLoadError",Rb("icons",n,o))},B6=(e,n,o)=>{Dw(e,"LanguageLoadError",Rb("language",n,o))},P6=(e,n,o)=>{Dw(e,"ThemeLoadError",Rb("theme",n,o))},Nb=(e,n,o)=>{Dw(e,"ModelLoadError",Rb("model",n,o))},Mb=(e,n,o)=>{const r=zc.translate(["Failed to initialize plugin: {0}",n]);ub(e,"PluginLoadError",{message:r}),$b(r,o),bA(e,r)},$b=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},mx=e=>/^[a-z0-9\-]+$/i.test(e),Bb=e=>Rw(e,Ua(e)),Pb=e=>Rw(e,sf(e)),Rw=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return re(n,u=>mx(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},fx=e=>{e.contentCSS=e.contentCSS.concat(Bb(e),Pb(e))},xN=Ve,vA=(e,n,o)=>Xg(e,n,xN,o),yA=e=>e?Oo(e.getElementsByTagName("img")):[],kN=(e,n)=>{const o={};return{findAll:(c,u=Ve)=>{const f=Z(yA(c),y=>{const x=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!x||x===ls.transparentSrc?!1:vo(x,"blob:")?!e.isUploaded(x)&&u(y):vo(x,"data:")?u(y):!1}),b=re(f,y=>{const x=y.src;if(uo(o,x))return o[x].then(N=>oe(N)?N:{image:y,blobInfo:N.blobInfo});{const N=NR(n,x).then(P=>(delete o[x],{image:y,blobInfo:P})).catch(P=>(delete o[x],P));return o[x]=N,N}});return Promise.all(b)}}},wA=()=>{let o={};const r=(L,ce)=>({status:L,resultUri:ce}),c=L=>L in o;return{hasBlobUri:c,getResultUri:L=>{const ce=o[L];return ce?ce.resultUri:null},isPending:L=>c(L)?o[L].status===1:!1,isUploaded:L=>c(L)?o[L].status===2:!1,markPending:L=>{o[L]=r(1,null)},markUploaded:(L,ce)=>{o[L]=r(2,ce)},removeFailed:L=>{delete o[L]},destroy:()=>{o={}}}};let ev=0;const TN=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},EN=e=>e+ev+++TN(),_N=()=>{let e=[];const n=P=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[P.toLowerCase()]||"dat",o=(P,L,ce,ie,ee)=>{if(oe(P))return r({id:P,name:ie,filename:ee,blob:L,base64:ce});if(bt(P))return r(P);throw new Error("Unknown input type")},r=P=>{if(!P.blob||!P.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const L=P.id||EN("blobid"),ce=P.name||L,ie=P.blob;return{id:ge(L),name:ge(ce),filename:ge(P.filename||ce+"."+n(ie.type)),blob:ge(ie),base64:ge(P.base64),blobUri:ge(P.blobUri||URL.createObjectURL(ie)),uri:ge(P.uri)}},c=P=>{f(P.id())||e.push(P)},u=P=>Jt(e,P).getOrUndefined(),f=P=>u(L=>L.id()===P);return{create:o,add:c,get:f,getByUri:P=>u(L=>L.blobUri()===P),getByData:(P,L)=>u(ce=>ce.base64()===P&&ce.blob().type===L),findFirst:u,removeByUri:P=>{e=Z(e,L=>L.blobUri()===P?(URL.revokeObjectURL(L.blobUri()),!1):!0)},destroy:()=>{z(e,P=>{URL.revokeObjectURL(P.blobUri())}),e=[]}}},gx=(e,n)=>{const o={},r=(ee,ue)=>ee?ee.replace(/\/$/,"")+"/"+ue.replace(/^\//,""):ue,c=(ee,ue)=>new Promise((Re,Ae)=>{const je=new XMLHttpRequest;je.open("POST",n.url),je.withCredentials=n.credentials,je.upload.onprogress=xt=>{ue(xt.loaded/xt.total*100)},je.onerror=()=>{Ae("Image upload failed due to a XHR Transport error. Code: "+je.status)},je.onload=()=>{if(je.status<200||je.status>=300){Ae("HTTP Error: "+je.status);return}const xt=JSON.parse(je.responseText);if(!xt||!oe(xt.location)){Ae("Invalid JSON: "+je.responseText);return}Re(r(n.basePath,xt.location))};const et=new FormData;et.append("file",ee.blob(),ee.filename()),je.send(et)}),u=Q(n.handler)?n.handler:c,f=()=>new Promise(ee=>{ee([])}),b=(ee,ue)=>({url:ue,blobInfo:ee,status:!0}),y=(ee,ue)=>({url:"",blobInfo:ee,status:!1,error:ue}),x=(ee,ue)=>{_t.each(o[ee],Re=>{Re(ue)}),delete o[ee]},N=(ee,ue,Re)=>(e.markPending(ee.blobUri()),new Promise(Ae=>{let je,et;try{const xt=()=>{je&&(je.close(),et=Ne)},un=lt=>{xt(),e.markUploaded(ee.blobUri(),lt),x(ee.blobUri(),b(ee,lt)),Ae(b(ee,lt))},Xt=lt=>{xt(),e.removeFailed(ee.blobUri()),x(ee.blobUri(),y(ee,lt)),Ae(y(ee,lt))};et=lt=>{lt<0||lt>100||R.from(je).orThunk(()=>R.from(Re).map(ze)).each(Je=>{je=Je,Je.progressBar.value(lt)})},ue(ee,et).then(un,lt=>{Xt(oe(lt)?{message:lt}:lt)})}catch(xt){Ae(y(ee,xt))}})),P=ee=>ee===c,L=ee=>{const ue=ee.blobUri();return new Promise(Re=>{o[ue]=o[ue]||[],o[ue].push(Re)})},ce=(ee,ue)=>(ee=_t.grep(ee,Re=>!e.isUploaded(Re.blobUri())),Promise.all(_t.map(ee,Re=>e.isPending(Re.blobUri())?L(Re):N(Re,u,ue))));return{upload:(ee,ue)=>!n.url&&P(u)?f():ce(ee,ue)}},CA=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),SA=(e,n)=>gx(n,{url:kT(e),basePath:om(e),credentials:aC(e),handler:jv(e)}),AN=e=>{const n=wA(),o=SA(e,n);return{upload:(r,c=!0)=>o.upload(r,c?CA(e):void 0)}},ON=e=>{const n=_N();let o,r;const c=wA(),u=[],f=je=>et=>e.selection?je(et):[],b=je=>je+(je.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(je,et,xt)=>{let un=0;do un=je.indexOf(et,un),un!==-1&&(je=je.substring(0,un)+xt+je.substr(un+et.length),un+=xt.length-et.length+1);while(un!==-1);return je},x=(je,et,xt)=>{const un=`src="${xt}"${xt===ls.transparentSrc?' data-mce-placeholder="1"':""}`;return je=y(je,`src="${et}"`,un),je=y(je,'data-mce-src="'+et+'"','data-mce-src="'+xt+'"'),je},N=(je,et)=>{z(e.undoManager.data,xt=>{xt.type==="fragmented"?xt.fragments=re(xt.fragments,un=>x(un,je,et)):xt.content=x(xt.content,je,et)})},P=(je,et)=>{const xt=e.convertURL(et,"src");N(je.src,et),Ds(be.fromDom(je),{src:Zv(e)?b(et):et,"data-mce-src":xt})},L=()=>(o||(o=SA(e,c)),ue().then(f(je=>{const et=re(je,xt=>xt.blobInfo);return o.upload(et,CA(e)).then(f(xt=>{const un=[];let Xt=!1;const lt=re(xt,(Je,Sn)=>{const{blobInfo:no,image:lo}=je[Sn];let Vo=!1;return Je.status&&xT(e)?(Je.url&&!Kn(lo.src,Je.url)&&(Xt=!0),n.removeByUri(lo.src),kf(e)||P(lo,Je.url)):Je.error&&(Je.error.remove&&(N(lo.src,ls.transparentSrc),un.push(lo),Vo=!0),Ow(e,Je.error.message)),{element:lo,status:Je.status,uploadUri:Je.url,blobInfo:no,removed:Vo}});return un.length>0&&!kf(e)?e.undoManager.transact(()=>{z(un,Je=>{e.dom.remove(Je),n.removeByUri(Je.src)})}):Xt&&e.undoManager.dispatchChange(),lt}))}))),ce=()=>rC(e)?L():Promise.resolve([]),ie=je=>pn(u,et=>et(je)),ee=je=>{u.push(je)},ue=()=>(r||(r=kN(c,n)),r.findAll(e.getBody(),ie).then(f(je=>{const et=Z(je,xt=>oe(xt)?(bA(e,xt),!1):!0);return kf(e)||z(et,xt=>{N(xt.image.src,xt.blobInfo.blobUri()),xt.image.src=xt.blobInfo.blobUri(),xt.image.removeAttribute("data-mce-src")}),et}))),Re=()=>{n.destroy(),c.destroy(),r=o=null},Ae=je=>je.replace(/src="(blob:[^"]+)"/g,(et,xt)=>{const un=c.getResultUri(xt);if(un)return'src="'+un+'"';let Xt=n.getByUri(xt);return Xt||(Xt=Be(e.editorManager.get(),(lt,Je)=>lt||Je.editorUpload&&Je.editorUpload.blobCache.getByUri(xt),void 0)),Xt?'src="data:'+Xt.blob().type+";base64,"+Xt.base64()+'"':et});return e.on("SetContent",()=>{rC(e)?ce():ue()}),e.on("RawSaveContent",je=>{je.content=Ae(je.content)}),e.on("GetContent",je=>{je.source_view||je.format==="raw"||je.format==="tree"||(je.content=Ae(je.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",je=>{z(je,et=>{const xt=et.attr("src");if(!xt||n.getByUri(xt))return;const un=c.getResultUri(xt);un&&et.attr("src",un)})})}),{blobCache:n,addFilter:ee,uploadImages:L,uploadImagesAuto:ce,scanForImages:ue,destroy:Re}},Og=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>En(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{_t.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return _t.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},Dg={remove_similar:!0,inherit:!1},el={selector:"td,th",...Dg},F6={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...el},tablecellverticalalign:{styles:{"vertical-align":"%value"},...el},tablecellbordercolor:{styles:{borderColor:"%value"},...el},tablecellclass:{classes:["%value"],...el},tableclass:{selector:"table",classes:["%value"],...Dg},tablecellborderstyle:{styles:{borderStyle:"%value"},...el},tablecellborderwidth:{styles:{borderWidth:"%value"},...el}},I6=ge(F6),L6=e=>{const n={},o=f=>we(f)?n[f]:n,r=f=>uo(n,f),c=(f,b)=>{f&&(oe(f)?(wt(b)||(b=[b]),z(b,y=>{On(y.deep)&&(y.deep=!$l(y)),On(y.split)&&(y.split=!$l(y)||tc(y)),On(y.remove)&&$l(y)&&!tc(y)&&(y.remove="none"),$l(y)&&tc(y)&&(y.mixed=!0,y.block_expand=!0),oe(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):en(f,(y,x)=>{c(x,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(Og(e)),c(I6()),c(rg(e)),{get:o,has:r,register:c,unregister:u}},hx=_t.each,Gu=pr.DOM,xA=e=>we(e)&&bt(e),DN=(e,n)=>{const o=n&&n.schema||Nu({}),r=(y,x)=>{x.classes.length>0&&Gu.addClass(y,x.classes.join(" ")),Gu.setAttribs(y,x.attrs)},c=y=>{const x=oe(y)?{name:y,classes:[],attrs:{}}:y,N=Gu.create(x.name);return r(N,x),N},u=(y,x)=>{const N=o.getElementRule(y.nodeName.toLowerCase()),P=N==null?void 0:N.parentsRequired;return P&&P.length?x&&ae(P,x)?x:P[0]:!1},f=(y,x,N)=>{let P;const L=x[0],ce=xA(L)?L.name:void 0,ie=u(y,ce);if(ie)ce===ie?(P=L,x=x.slice(1)):P=ie;else if(L)P=L,x=x.slice(1);else if(!N)return y;const ee=P?c(P):Gu.create("div");ee.appendChild(y),N&&_t.each(N,Re=>{const Ae=c(Re);ee.insertBefore(Ae,y)});const ue=xA(P)?P.siblings:void 0;return f(ee,x,ue)},b=Gu.create("div");if(e.length>0){const y=e[0],x=c(y),N=xA(y)?y.siblings:void 0;b.appendChild(f(x,e.slice(1),N))}return b},H6=e=>{e=_t.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":_t.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},z6=e=>oe(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),_t.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=_t.map(n.split(/(?:~\+|~|\+)/),H6),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],V6=(e,n)=>{let o="",r=Eh(e);if(r==="")return"";const c=L=>oe(L)?L.replace(/%(\w+)/g,""):"",u=(L,ce)=>Gu.getStyle(ce!=null?ce:e.getBody(),L,!0);if(oe(n)){const L=e.formatter.get(n);if(!L)return"";n=L[0]}if("preview"in n){const L=n.preview;if(L===!1)return"";r=L||r}let f=n.block||n.inline||"span",b;const y=z6(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=DN(y,e)):b=DN([f],e);const x=Gu.select(f,b)[0]||b.firstChild;hx(n.styles,(L,ce)=>{const ie=c(L);ie&&Gu.setStyle(x,ce,ie)}),hx(n.attributes,(L,ce)=>{const ie=c(L);ie&&Gu.setAttrib(x,ce,ie)}),hx(n.classes,L=>{const ce=c(L);Gu.hasClass(x,ce)||Gu.addClass(x,ce)}),e.dispatch("PreviewFormats"),Gu.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const N=u("fontSize"),P=/px$/.test(N)?parseInt(N,10):0;return hx(r.split(" "),L=>{let ce=u(L,x);if(!(L==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(ce)&&(ce=u(L),nb(ce).toLowerCase()==="#ffffff"))&&!(L==="color"&&nb(ce).toLowerCase()==="#000000")){if(L==="font-size"&&/em|%$/.test(ce)){if(P===0)return;ce=parseFloat(ce)/(/%$/.test(ce)?100:1)*P+"px"}L==="border"&&ce&&(o+="padding:0 2px;"),o+=L+":"+ce+";"}}),e.dispatch("AfterPreviewFormats"),Gu.remove(b),o},U6=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},RN=e=>{const n=L6(e),o=uc({});return U6(e),T5(e),kf(e)||L5(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{e6(e,r,c,u)},remove:(r,c,u,f)=>{t6(e,r,c,u,f)},toggle:(r,c,u)=>{n6(e,r,c,u)},match:(r,c,u,f)=>kw(e,r,c,u,f),closest:r=>oN(e,r),matchAll:(r,c)=>tN(e,r,c),matchNode:(r,c,u,f)=>nN(e,r,c,u,f),canApply:r=>QI(e,r),formatChanged:(r,c,u,f)=>o6(e,o,r,c,u,f),getCssText:_e(V6,e)}},px=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},kA=(e,n,o)=>{const r=uc(!1),c=y=>{xw(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const x=y.command;px(x)||(YR(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const x=y.command;px(x)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const x=y.keyCode;y.isDefaultPrevented()||((x>=33&&x<=36||x>=37&&x<=40||x===45||y.ctrlKey)&&(c(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!rx(sx(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&c(y);return}const N=y.ctrlKey&&!y.altKey||y.metaKey;(x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!N&&(n.beforeChange(),xw(n,!0,o),n.add({},y),r.set(!0))}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},NN=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},MN=e=>{const n=Xm(),o=uc(0),r=uc(0),c={data:[],typing:!1,beforeChange:()=>{jI(e,o,n)},add:(u,f)=>GI(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=sx(e);u.bookmark=Qa(e.selection),e.dispatch("change",{level:u,lastLevel:on(c.data,r.get()).getOrUndefined()})},undo:()=>lx(e,c,o,r),redo:()=>qI(e,r,c.data),clear:()=>{KI(e,c,r)},reset:()=>{eN(e,c)},hasUndo:()=>dA(e,c,r),hasRedo:()=>YI(e,c,r),transact:u=>XI(e,c,o,u),ignore:u=>{WV(e,o,u)},extra:(u,f)=>{JI(e,c,r,u,f)}};return kf(e)||kA(e,c,o),NN(e),c},W6=[9,27,Fn.HOME,Fn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Fn.DOWN,Fn.UP,Fn.LEFT,Fn.RIGHT].concat(ls.browser.isFirefox()?[224]:[]),TA="data-mce-placeholder",EA=e=>e.type==="keydown"||e.type==="keyup",bx=e=>{const n=e.keyCode;return n===Fn.BACKSPACE||n===Fn.DELETE},$N=e=>{if(EA(e)){const n=e.keyCode;return!bx(e)&&(Fn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||ae(W6,n))}else return!1},BN=e=>EA(e)&&!(bx(e)||e.type==="keyup"&&e.keyCode===229),_A=(e,n,o)=>{if(va(be.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},Z6=e=>{var n;const o=e.dom,r=bl(e),c=(n=ET(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if($N(f))return;const y=e.getBody(),x=BN(f)?!1:_A(o,y,r);(o.getAttrib(y,TA)!==""!==x||b)&&(o.setAttrib(y,TA,x?c:null),o.setAttrib(y,"aria-placeholder",x?c:null),cu(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};ws(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Bi.setEditorTimeout(e,()=>u(b)))})},j6=(e,n)=>({block:e,position:n}),Ef=(e,n)=>({from:e,to:n}),uu=(e,n)=>{const o=be.fromDom(e),r=be.fromDom(n.container());return Kr(o,r).map(c=>j6(c,n))},vx=e=>!$s(e.from.block,e.to.block),AA=(e,n)=>_l(n,c=>Xa(c)||ti(c.dom),c=>$s(c,e)).filter(Jo).getOr(e),yx=(e,n)=>{const o=be.fromDom(e);return $s(AA(o,n.from.block),AA(o,n.to.block))},PN=e=>ar(e.from.block.dom)===!1&&ar(e.to.block.dom)===!1,FN=e=>{const n=o=>gi(o)||ch(o.dom);return n(e.from.block)&&n(e.to.block)},IN=(e,n,o)=>Ur(o.position.getNode())&&!va(o.block)?wd(!1,o.block.dom).bind(r=>r.isEqual(o.position)?vl(n,e,r).bind(c=>uu(e,c)):R.some(o)).getOr(o):o,LN=(e,n,o)=>{const r=uu(e,gt.fromRangeStart(o)),c=r.bind(u=>vl(n,e,u.position).bind(f=>uu(e,f).map(b=>IN(e,n,b))));return Vr(r,c,Ef).filter(u=>vx(u)&&yx(e,u)&&PN(u)&&FN(u))},HN=(e,n,o)=>o.collapsed?LN(e,n,o):R.none(),zN=e=>{const n=ha(e);return eo(n,ba).fold(ge(n),o=>n.slice(0,o))},Nw=e=>{const n=zN(e);return z(n,Bs),n},wx=(e,n)=>{const o=Sf(n,e);return Jt(o.reverse(),r=>va(r)).each(Bs)},G6=e=>Z(Nm(e),n=>!va(n)).length===0,q6=(e,n,o,r)=>{if(va(o))return _a(o),Mi(o.dom);G6(r)&&va(n)&&ns(r,be.fromTag("br"));const c=yl(o.dom,gt.before(r.dom));return z(Nw(n),u=>{ns(r,u)}),wx(e,n),c},K6=(e,n,o)=>{if(va(o))return Bs(o),va(n)&&_a(n),Mi(n.dom);const r=Cd(o.dom);return z(Nw(n),c=>{Qr(o,c)}),wx(e,n),r},Y6=(e,n)=>{const o=Sf(n,e);return R.from(o[o.length-1])},VN=(e,n)=>Ga(n,e)?Y6(n,e):R.none(),UN=(e,n)=>{wd(e,n.dom).bind(o=>R.from(o.getNode())).map(be.fromDom).filter(tu).each(Bs)},WN=(e,n,o)=>(UN(!0,n),UN(!1,o),VN(n,o).fold(_e(K6,e,n,o),_e(q6,e,n,o))),Cx=(e,n,o,r)=>n?WN(e,r,o):WN(e,o,r),OA=(e,n)=>{const o=be.fromDom(e.getBody());return HN(o.dom,n,e.selection.getRng()).map(c=>()=>{Cx(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},X6=(e,n)=>{const o=n.getRng();return Vr(Kr(e,be.fromDom(o.startContainer)),Kr(e,be.fromDom(o.endContainer)),(r,c)=>$s(r,c)?R.none():R.some(()=>{o.deleteContents(),Cx(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(R.none())},ZN=(e,n)=>{const o=be.fromDom(n),r=_e($s,e);return Im(o,Xa,r).isSome()},J6=(e,n)=>ZN(e,n.startContainer)||ZN(e,n.endContainer),Q6=(e,n)=>{const o=yl(e.dom,gt.fromRangeStart(n)).isNone(),r=wi(e.dom,gt.fromRangeEnd(n)).isNone();return!J6(e,n)&&o&&r},e8=e=>R.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),t8=e=>{const n=be.fromDom(e.getBody()),o=e.selection.getRng();return Q6(n,o)?e8(e):X6(n,e.selection)},tv=(e,n)=>e.selection.isCollapsed()?R.none():t8(e),vm=(e,n,o,r,c)=>R.from(n._selectionOverrides.showCaret(e,o,r,c)),n8=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},Mw=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?R.none():R.some(n8(n)),o8=(e,n,o)=>{const r=t0(1,e.getBody(),n),c=gt.fromRangeStart(r),u=c.getNode();if(Gp(u))return vm(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Gp(f))return vm(1,e,f,!1,!1);const b=Xh(e.dom.getRoot(),c.getNode());return Gp(b)?vm(1,e,b,!1,o):R.none()},DA=(e,n,o)=>n.collapsed?o8(e,n,o).getOr(n):n,jN=e=>Kh(e)||O0(e),s8=e=>Yh(e)||Ky(e),r8=(e,n)=>{Lt(n)&&n.data.length===0&&e.remove(n)},Sx=(e,n,o,r,c,u)=>{vm(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),r8(e.dom,o)},a8=(e,n)=>{const o=e.selection.getRng();if(!Lt(o.commonAncestorContainer))return R.none();const r=n?_c.Forwards:_c.Backwards,c=im(e.getBody()),u=_e(AC,n?c.next:c.prev),f=n?jN:s8,b=Kp(r,e.getBody(),o),y=u(b),x=y&&ta(n,y);if(!x||!uf(b,x))return R.none();if(f(x))return R.some(()=>Sx(e,o,b.getNode(),r,n,x));const N=u(x);return N&&f(N)&&uf(x,N)?R.some(()=>Sx(e,o,b.getNode(),r,n,N)):R.none()},RA=(e,n)=>a8(e,n),NA=(e,n)=>{const o=e.getBody();return n?Mi(o).filter(Kh):Cd(o).filter(Yh)},MA=e=>{const n=e.selection.getRng();return!n.collapsed&&(NA(e,!0).exists(o=>o.isEqual(gt.fromRangeStart(n)))||NA(e,!1).exists(o=>o.isEqual(gt.fromRangeEnd(n))))},c8=e=>we(e)&&(Xa(be.fromDom(e))||Zi(be.fromDom(e))),du=ru.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),i8=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return En(o)&&o.getAttribute("data-mce-caret")===r},xx=(e,n,o,r)=>{const c=u=>cl(be.fromDom(u))&&!Fu(o,r,e);return _C(!n,o).fold(()=>_C(n,r).fold(Et,c),c)},$w=(e,n,o,r)=>{const c=r.getNode(!n);return Kr(be.fromDom(e),be.fromDom(o.getNode())).map(u=>va(u)?du.remove(u.dom):du.moveToElement(c)).orThunk(()=>R.some(du.moveToElement(c)))},GN=(e,n,o)=>vl(n,e,o).bind(r=>c8(r.getNode())||xx(e,n,o,r)?R.none():n&&ar(r.getNode())||!n&&ar(r.getNode(!0))?$w(e,n,o,r):n&&Yh(o)||!n&&Kh(o)?R.some(du.moveToPosition(r)):R.none()),l8=(e,n)=>Nt(n)?R.none():e&&ar(n.nextSibling)?R.some(du.moveToElement(n.nextSibling)):!e&&ar(n.previousSibling)?R.some(du.moveToElement(n.previousSibling)):R.none(),kx=(e,n,o)=>o.fold(r=>R.some(du.remove(r)),r=>R.some(du.moveToElement(r)),r=>Fu(n,r,e)?R.none():R.some(du.moveToPosition(r))),u8=(e,n,o)=>i8(n,o)?l8(n,o.getNode(!n)).orThunk(()=>GN(e,n,o)):GN(e,n,o).bind(r=>kx(e,o,r)),d8=(e,n,o)=>{const r=t0(n?1:-1,e,o),c=gt.fromRangeStart(r),u=be.fromDom(e);return!n&&Yh(c)?R.some(du.remove(c.getNode(!0))):n&&Kh(c)?R.some(du.remove(c.getNode())):!n&&Kh(c)&&zE(u,c)?DF(u,c).map(f=>du.remove(f.getNode())):n&&Yh(c)&&IO(u,c)?_o(u,c).map(f=>du.remove(f.getNode())):u8(e,n,c)},m8=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Wu(e,n,be.fromDom(o)),!0),f8=(e,n)=>o=>{const r=n?gt.before(o):gt.after(o);return e.selection.setRng(r.toRange()),!0},g8=e=>n=>(e.selection.setRng(n.toRange()),!0),qN=(e,n)=>R.from(Xh(e.getBody(),n)),h8=(e,n)=>{const o=e.selection.getNode();return qN(e,o).filter(ar).fold(()=>d8(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(m8(e,n),f8(e,n),g8(e))),()=>R.some(Ne))},p8=e=>{z(Rs(e,".mce-offscreen-selection"),Bs)},b8=(e,n)=>{const o=e.selection.getNode();return ar(o)&&!_u(o)?qN(e,o.parentNode).filter(ar).fold(()=>R.some(()=>{p8(be.fromDom(e.getBody())),Wu(e,n,be.fromDom(e.selection.getNode())),N0(e)}),()=>R.some(Ne)):MA(e)?R.some(()=>{wr(e,e.selection.getRng(),be.fromDom(e.getBody()))}):R.none()},KN=e=>{const n=e.dom,o=e.selection,r=Xh(e.getBody(),o.getNode());if(ti(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(gt.before(c).toRange())}return!0},$A=(e,n)=>e.selection.isCollapsed()?h8(e,n):b8(e,n),qV=(e,n)=>{const o=gt.fromRangeStart(e.selection.getRng());return vl(n,e.getBody(),o).filter(r=>n?fo(r):MO(r)).bind(r=>Q1(n?0:-1,r)).map(r=>()=>e.selection.select(r))},mu=(e,n)=>e.selection.isCollapsed()?qV(e,n):R.none(),rp=Lt,BA=e=>rp(e)&&e.data[0]===yr,PA=e=>rp(e)&&e.data[e.data.length-1]===yr,YN=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(yr)},XN=e=>{var n;if(rp(e.previousSibling))return PA(e.previousSibling)||e.previousSibling.appendData(yr),e.previousSibling;if(rp(e))return BA(e)||e.insertData(0,yr),e;{const o=YN(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},v8=e=>{var n,o;if(rp(e.nextSibling))return BA(e.nextSibling)||e.nextSibling.insertData(0,yr),e.nextSibling;if(rp(e))return PA(e)||e.appendData(yr),e;{const r=YN(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Bw=(e,n)=>e?XN(n):v8(n),y8=_e(Bw,!0),w8=_e(Bw,!1),JN=(e,n)=>Lt(e.container())?Bw(n,e.container()):Bw(n,e.getNode()),Fb=(e,n)=>{const o=n.get();return o&&e.container()===o&&I(o)},Tx=(e,n)=>n.fold(o=>{bd(e.get());const r=y8(o);return e.set(r),R.some(gt(r,r.length-1))},o=>Mi(o).map(r=>{if(Fb(r,e)){const c=e.get();return gt(c,1)}else{bd(e.get());const c=JN(r,!0);return e.set(c),gt(c,1)}}),o=>Cd(o).map(r=>{if(Fb(r,e)){const c=e.get();return gt(c,c.length-1)}else{bd(e.get());const c=JN(r,!1);return e.set(c),gt(c,c.length-1)}}),o=>{bd(e.get());const r=w8(o);return e.set(r),R.some(gt(r,1))}),FA=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return R.none()},Pi=ru.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Ex=(e,n)=>{const o=lf(n,e);return o||e},C8=(e,n,o)=>{const r=eD(o),c=Ex(n,r.container());return kg(e,c,r).fold(()=>wi(c,r).bind(_e(kg,e,c)).map(u=>Pi.before(u)),R.none)},S8=(e,n)=>dg(e,n)===null,QN=(e,n,o)=>kg(e,n,o).filter(_e(S8,n)),KV=(e,n,o)=>{const r=tD(o);return QN(e,n,r).bind(c=>yl(c,r).isNone()?R.some(Pi.start(c)):R.none())},YV=(e,n,o)=>{const r=eD(o);return QN(e,n,r).bind(c=>wi(c,r).isNone()?R.some(Pi.end(c)):R.none())},XV=(e,n,o)=>{const r=tD(o),c=Ex(n,r.container());return kg(e,c,r).fold(()=>yl(c,r).bind(_e(kg,e,c)).map(u=>Pi.after(u)),R.none)},qu=e=>!QF(IA(e)),_f=(e,n,o)=>FA([C8,KV,YV,XV],[e,n,o]).filter(qu),IA=e=>e.fold(Ue,Ue,Ue,Ue),LA=e=>e.fold(ge("before"),ge("start"),ge("end"),ge("after")),nv=e=>e.fold(Pi.before,Pi.before,Pi.after,Pi.after),eM=e=>e.fold(Pi.start,Pi.start,Pi.end,Pi.end),JV=(e,n)=>LA(e)===LA(n)&&IA(e)===IA(n),QV=(e,n,o,r,c,u)=>Vr(kg(n,o,r),kg(n,o,c),(f,b)=>f!==b&&JO(o,f,b)?Pi.after(e?f:b):u).getOr(u),Ku=(e,n)=>e.fold(Ve,o=>!JV(o,n)),x8=(e,n,o,r,c)=>{const u=ta(e,c);return vl(e,o,u).map(_e(ta,e)).fold(()=>r.map(nv),y=>_f(n,o,y).map(_e(QV,e,n,o,u,y)).filter(_e(Ku,r))).filter(qu)},k8=(e,n)=>e?n.fold(Ot(R.some,Pi.start),R.none,Ot(R.some,Pi.after),R.none):n.fold(R.none,Ot(R.some,Pi.before),R.none,Ot(R.some,Pi.end)),T8=(e,n,o,r)=>{const c=ta(e,r),u=_f(n,o,c);return _f(n,o,c).bind(_e(k8,e)).orThunk(()=>x8(e,n,o,u,r))},E8=e=>Q(e.selection.getSel().modify),tM=(e,n,o)=>{const r=e?1:-1;return n.setRng(gt(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},_8=(e,n)=>{const o=n.selection.getRng(),r=e?gt.fromRangeEnd(o):gt.fromRangeStart(o);return E8(n)?e&&Ht(r)?tM(!0,n.selection,r):!e&&xn(r)?tM(!1,n.selection,r):!1:!1};var xl;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(xl||(xl={}));const _x=(e,n)=>e===_c.Backwards?to(n):n,A8=(e,n,o)=>e===_c.Forwards?n.next(o):n.prev(o),O8=(e,n,o,r)=>Ur(r.getNode(n===_c.Forwards))?xl.Br:Fu(o,r)===!1?xl.Block:xl.Wrap,Ax=(e,n,o,r)=>{const c=im(o);let u=r;const f=[];for(;u;){const b=A8(n,c,u);if(!b)break;if(Ur(b.getNode(!1)))return n===_c.Forwards?{positions:_x(n,f).concat([b]),breakType:xl.Br,breakAt:R.some(b)}:{positions:_x(n,f),breakType:xl.Br,breakAt:R.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=O8(o,n,u,b);return{positions:_x(n,f),breakType:y,breakAt:R.some(b)}}f.push(b),u=b}return{positions:_x(n,f),breakType:xl.Eol,breakAt:R.none()}},Ox=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===_c.Backwards?u.concat(c):[c].concat(u)}).getOr([]),Dx=(e,n)=>Be(e,(o,r)=>o.fold(()=>R.some(r),c=>Vr(wn(c.getClientRects()),wn(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),R.none()),Pw=(e,n)=>wn(n.getClientRects()).bind(o=>Dx(e,o.left)),ov=_e(Ax,gt.isAbove,-1),Fw=_e(Ax,gt.isBelow,1),sv=_e(Ox,-1,ov),nM=_e(Ox,1,Fw),D8=(e,n)=>ov(e,n).breakAt.isNone(),R8=(e,n)=>Fw(e,n).breakAt.isNone(),N8=e=>Mi(e).map(n=>[n].concat(Fw(e,n).positions)).getOr([]),M8=e=>Cd(e).map(n=>ov(e,n).positions.concat(n)).getOr([]),$8=(e,n)=>Pw(sv(e,n),n),B8=(e,n)=>Pw(nM(e,n),n),oM=ar,sM=(e,n)=>Math.abs(e.left-n),HA=(e,n)=>Math.abs(e.right-n),rM=e=>dr(e,"node"),Iw=(e,n)=>st(e,(o,r)=>{const c=Math.min(sM(o,n),HA(o,n)),u=Math.min(sM(r,n),HA(r,n));return u===c&&rM(r)&&oM(r.node)||u<c?r:o}),aM=e=>{const n=o=>re(o,r=>{const c=Qf(r);return c.node=e,c});if(En(e))return n(e.getClientRects());if(Lt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Rx=e=>jn(e,aM);var Af;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Af||(Af={}));const cM=(e,n,o,r)=>{let c=r;for(;c=am(c,e,Ha,n);)if(o(c))return},Nx=(e,n,o,r,c,u)=>{let f=0;const b=[],y=P=>{let L=Rx([P]);e===-1&&(L=L.reverse());for(let ce=0;ce<L.length;ce++){const ie=L[ce];if(!o(ie,x)){if(b.length>0&&n(ie,In(b))&&f++,ie.line=f,c(ie))return!0;b.push(ie)}}return!1},x=In(u.getClientRects());if(!x)return b;const N=u.getNode();return N&&(y(N),cM(e,r,y,N)),b},P8=(e,n)=>n.line>e,iM=(e,n)=>n.line===e,F8=_e(Nx,Af.Up,Np,Mp),I8=_e(Nx,Af.Down,Mp,Np),lM=e=>In(e.getClientRects()),L8=(e,n,o,r)=>{const c=im(n);let u,f,b,y;const x=[];let N=0;e===1?(u=c.next,f=Mp,b=Np,y=gt.after(r)):(u=c.prev,f=Np,b=Mp,y=gt.before(r));const P=lM(y);do{if(!y.isVisible())continue;const L=lM(y);if(b(L,P))continue;x.length>0&&f(L,In(x))&&N++;const ce=Qf(L);if(ce.position=y,ce.line=N,o(ce))return x;x.push(ce)}while(y=u(y));return x},uM=e=>n=>P8(e,n),Mx=e=>n=>iM(e,n),Rg=(e,n)=>{e.selection.setRng(n),Yt(e,e.selection.getRng())},zA=(e,n,o)=>R.some(DA(e,n,o)),Ib=(e,n,o,r,c,u)=>{const f=n===_c.Forwards,b=im(e.getBody()),y=_e(AC,f?b.next:b.prev),x=f?r:c;if(!o.collapsed){const ie=$p(o);if(u(ie))return vm(n,e,ie,n===_c.Backwards,!1);if(MA(e)){const ee=o.cloneRange();return ee.collapse(n===_c.Backwards),R.from(ee)}}const N=Kp(n,e.getBody(),o);if(x(N))return Mw(e,N.getNode(!f));let P=y(N);const L=ni(o);if(P)P=ta(f,P);else return L?R.some(o):R.none();if(x(P))return vm(n,e,P.getNode(!f),f,!1);const ce=y(P);return ce&&x(ce)&&uf(P,ce)?vm(n,e,ce.getNode(!f),f,!1):L?zA(e,P.toRange(),!1):R.none()},$x=(e,n,o,r,c,u)=>{const f=Kp(n,e.getBody(),o),b=In(f.getClientRects()),y=n===Af.Down,x=e.getBody();if(!b)return R.none();if(MA(e)){const ue=y?gt.fromRangeEnd(o):gt.fromRangeStart(o);return(y?B8:$8)(x,ue).orThunk(()=>R.from(ue)).map(Ae=>Ae.toRange())}const P=(y?I8:F8)(x,uM(1),f),L=Z(P,Mx(1)),ce=b.left,ie=Iw(L,ce);if(ie&&u(ie.node)){const ue=Math.abs(ce-ie.left),Re=Math.abs(ce-ie.right);return vm(n,e,ie.node,ue<Re,!1)}let ee;if(r(f)?ee=f.getNode():c(f)?ee=f.getNode(!0):ee=$p(o),ee){const ue=L8(n,x,uM(1),ee);let Re=Iw(Z(ue,Mx(1)),ce);if(Re||(Re=In(Z(ue,Mx(0))),Re))return zA(e,Re.position.toRange(),!1)}return L.length===0?Bx(e,y).filter(y?c:r).map(ue=>DA(e,ue.toRange(),!1)):R.none()},Bx=(e,n)=>{const o=e.selection.getRng(),r=n?gt.fromRangeEnd(o):gt.fromRangeStart(o),c=qT(r.container(),e.getBody());if(n){const u=Fw(c,r);return bn(u.positions)}else{const u=ov(c,r);return wn(u.positions)}},VA=(e,n,o)=>Bx(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),rv=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},dM=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},mM=(e,n,o)=>Tx(n,o).map(r=>(rv(e,r),o)),H8=(e,n,o)=>{const r=gt.fromRangeStart(e);if(e.collapsed)return r;{const c=gt.fromRangeEnd(e);return o?yl(n,c).getOr(c):wi(n,r).getOr(r)}},z8=(e,n,o)=>{const r=e.getBody(),c=H8(e.selection.getRng(),r,o),u=_e(yb,e);return T8(o,u,r,c).bind(b=>mM(e,n,b))},V8=(e,n,o)=>{const r=re(Rs(be.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=Z(r,e),u=Z(o,e);z(De(c,u),_e(dM,!1)),z(De(u,c),_e(dM,!0))},U8=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=gt.fromRangeStart(e.selection.getRng());gt.isTextPosition(r)&&!QO(r)&&(rv(e,Y1(o,r)),n.set(null))}},W8=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Z(r,e);z(c,u=>{const f=gt.fromRangeStart(n.selection.getRng());_f(e,n.getBody(),f).bind(b=>mM(n,o,b))})}},UA=(e,n,o)=>sg(e)?z8(e,n,o).isSome():!1,fM=(e,n,o)=>sg(n)?_8(e,n):!1,Z8=e=>{const n=uc(null),o=_e(yb,e);return e.on("NodeChange",r=>{sg(e)&&(V8(o,e.dom,r.parents),U8(e,n),W8(o,e,n,r.parents))}),n},fu=_e(fM,!0),j8=_e(fM,!1),av=(e,n,o)=>{if(sg(e)){const r=Bx(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?gt.fromRangeEnd(c):gt.fromRangeStart(c)});return _f(_e(yb,e),e.getBody(),r).exists(c=>{const u=nv(c);return Tx(o,u).exists(f=>(rv(e,f),!0))})}else return!1},gM=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},WA=e=>Vr(Mi(e),Cd(e),(n,o)=>{const r=ta(!0,n),c=ta(!1,o);return wi(e,r).forall(u=>u.isEqual(c))}).getOr(!0),hM=(e,n)=>o=>Tx(n,o).map(r=>()=>rv(e,r)),pM=(e,n,o,r)=>{const c=e.getBody(),u=_e(yb,e);e.undoManager.ignore(()=>{e.selection.setRng(gM(o,r)),oD(e),_f(u,c,gt.fromRangeStart(e.selection.getRng())).map(eM).bind(hM(e,n)).each(It)}),e.nodeChanged()},G8=(e,n)=>{const o=lf(n,e);return o||e},q8=(e,n,o,r)=>{const c=G8(e.getBody(),r.container()),u=_e(yb,e),f=_f(u,c,r);return f.bind(y=>o?y.fold(ge(R.some(eM(y))),R.none,ge(R.some(nv(y))),R.none):y.fold(R.none,ge(R.some(nv(y))),R.none,ge(R.some(eM(y))))).map(hM(e,n)).getOrThunk(()=>{const y=Nh(o,c,r),x=y.bind(N=>_f(u,c,N));return Vr(f,x,()=>kg(u,c,r).bind(N=>WA(N)?R.some(()=>{Wu(e,o,be.fromDom(N))}):R.none())).getOrThunk(()=>x.bind(()=>y.map(N=>()=>{o?pM(e,n,r,N):pM(e,n,N,r)})))})},ZA=(e,n,o)=>{if(e.selection.isCollapsed()&&sg(e)){const r=gt.fromRangeStart(e.selection.getRng());return q8(e,n,o,r)}return R.none()},bM=(e,n)=>{const o=Sf(n,e);return eo(o,ba).fold(ge(o),r=>o.slice(0,r))},K8=e=>xu(e)===1,Y8=(e,n,o,r)=>{const c=_e(fw,n),u=re(Z(r,c),f=>f.dom);if(u.length===0)Wu(n,e,o);else{const f=VD(o.dom,u);n.selection.setRng(f.toRange())}},eU=(e,n)=>{const o=be.fromDom(e.getBody()),r=be.fromDom(e.selection.getStart()),c=Z(bM(o,r),K8);return bn(c).bind(u=>{const f=gt.fromRangeStart(e.selection.getRng());return $V(n,f,u.dom)&&!E5(u)?R.some(()=>Y8(n,e,u,c)):R.none()})},jA=(e,n)=>e.selection.isCollapsed()?eU(e,n):R.none(),GA=(e,n,o)=>we(o)?R.some(()=>{e._selectionOverrides.hideFakeCaret(),Wu(e,n,be.fromDom(o))}):R.none(),vM=(e,n)=>{const o=n?O0:Ky,r=n?_c.Forwards:_c.Backwards,c=Kp(r,e.getBody(),e.selection.getRng());return o(c)?GA(e,n,c.getNode(!n)):R.from(ta(n,c)).filter(u=>o(u)&&uf(c,u)).bind(u=>GA(e,n,u.getNode(!n)))},yM=(e,n)=>{const o=e.selection.getNode();return Jl(o)?GA(e,n,o):R.none()},wM=(e,n)=>e.selection.isCollapsed()?vM(e,n):yM(e,n),X8=e=>_l(e,n=>ti(n.dom)||ar(n.dom)).exists(n=>ti(n.dom)),qA=e=>Rr(e!=null?e:"").getOr(0),CM=(e,n)=>{const o=e||Tv(n)?"margin":"padding",r=He(n,"direction")==="rtl"?"-right":"-left";return o+r},KA=(e,n,o,r,c,u)=>{const f=CM(o,be.fromDom(u)),b=qA(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},Px=(e,n)=>pn(n,o=>{const r=CM(cC(e),o),c=yo(o,r).map(qA).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),YA=e=>{const n=SM(e);return!e.mode.isReadOnly()&&(n.length>1||Px(e,n))},XA=e=>Ns(e)||Zi(e),J8=e=>wc(e).exists(XA),SM=e=>Z(Pf(e.selection.getSelectedBlocks()),n=>!XA(n)&&!J8(n)&&X8(n)),Fx=(e,n)=>{var o,r;const{dom:c}=e,u=Hp(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=qA(u),y=cC(e);z(SM(e),x=>{KA(c,n,y,b,f,x.dom)})},Q8=e=>Fx(e,"indent"),xM=e=>Fx(e,"outdent"),kM=e=>{if(e.selection.isCollapsed()&&YA(e)){const n=e.dom,o=e.selection.getRng(),r=gt.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&ms(be.fromDom(c),r))return R.some(()=>xM(e))}return R.none()},TM=(e,n,o)=>xs([kM,$A,RA,(r,c)=>ZA(r,n,c),OA,AS,mu,wM,tv,jA],r=>r(e,o)),Dd=(e,n)=>{TM(e,n,!1).fold(()=>{oD(e),N0(e)},It)},EM=(e,n)=>{TM(e,n,!0).fold(()=>wb(e),It)},_M=(e,n)=>{e.addCommand("delete",()=>{Dd(e,n)}),e.addCommand("forwardDelete",()=>{EM(e,n)})},eL=5,tU=400,tL=e=>e.touches===void 0||e.touches.length!==1?R.none():R.some(e.touches[0]),nU=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>eL||r>eL},nL=e=>{const n=Xm(),o=uc(!1),r=E1(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},tU);e.on("touchstart",c=>{tL(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),tL(c).each(u=>{n.on(f=>{nU(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},JA=(e,n)=>uo(e,n.nodeName),QA=(e,n)=>Lt(n)?!0:En(n)?!JA(e.getBlockElements(),n)&&!Ac(n)&&!jf(e,n):!1,oL=(e,n,o)=>se(Yy(be.fromDom(o),be.fromDom(n)),r=>JA(e,r.dom)),AM=(e,n)=>{if(Lt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||JA(e,n.nextSibling)))return!0}return!1},OM=e=>e.dom.create(bl(e),Lp(e)),sL=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,x=!1;const N=bl(e);if(!u||!En(u))return;const P=f.nodeName.toLowerCase();if(!r.isValidChild(P,N.toLowerCase())||oL(c,f,u))return;const L=o.getRng(),{startContainer:ce,startOffset:ie,endContainer:ee,endOffset:ue}=L,Re=vb(e);let Ae=f.firstChild;for(;Ae;)if(En(Ae)&&ul(r,Ae),QA(r,Ae)){if(AM(c,Ae)){y=Ae,Ae=Ae.nextSibling,n.remove(y);continue}b||(b=OM(e),f.insertBefore(b,Ae),x=!0),y=Ae,Ae=Ae.nextSibling,b.appendChild(y)}else b=null,Ae=Ae.nextSibling;x&&Re&&(L.setStart(ce,ie),L.setEnd(ee,ue),o.setRng(L),e.nodeChanged())},e3=(e,n,o)=>{const r=be.fromDom(OM(e)),c=Ke();Qr(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},t3=e=>{e.on("NodeChange",_e(sL,e))},n3=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,rL=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},aL=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],rL(e,c,_h(e)));o.content=c}},Ix=e=>{const n="contenteditable",o=" "+_t.trim(bC(e))+" ",r=" "+_t.trim(_h(e))+" ",c=n3(o),u=n3(r),f=sm(e);f.length>0&&e.on("BeforeSetContent",b=>{aL(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const x=b[y];c(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const x=b[y];!c(x)&&!u(x)||(f.length>0&&x.attr("data-mce-content")?(x.name="#text",x.type=3,x.raw=!0,x.value=x.attr("data-mce-content")):x.attr(n,null))}})},cL=e=>Hf(be.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),DM=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Qs(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},iL=(e,n)=>{const o=cL(e);if(!!o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),DM(e,o);return}Te(o)&&(DM(e,o),e.undoManager.add())}},o3=e=>{e.on("keyup compositionstart",_e(iL,e))},RM=ar,lL=(e,n,o)=>Ib(n,e,o,Kh,Yh,RM),NM=(e,n,o)=>$x(n,e,o,u=>Kh(u)||vS(u),u=>Yh(u)||$O(u),RM),uL=e=>{const n=e.dom.create(bl(e));return n.innerHTML='<br data-mce-bogus="1">',n},MM=(e,n,o)=>{const r=im(e.getBody()),c=_e(AC,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(gt.fromRangeStart(o))){const b=be.fromDom(uL(e));n===1?_r(be.fromDom(u),b):ns(be.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},dL=(e,n)=>{const o=n?_c.Forwards:_c.Backwards,r=e.selection.getRng();return lL(o,e,r).orThunk(()=>(MM(e,o,r),R.none()))},mL=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return NM(o,e,r).orThunk(()=>(MM(e,o,r),R.none()))},$M=(e,n)=>dL(e,n).exists(o=>(Rg(e,o),!0)),BM=(e,n)=>mL(e,n).exists(o=>(Rg(e,o),!0)),Lx=(e,n)=>VA(e,n,n?Yh:Kh),Hx=(e,n)=>NA(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Rg(e,o),!0)),PM=e=>ae(["figcaption"],Yn(e)),fL=(e,n)=>{const o=_e($s,n);return _l(be.fromDom(e.container()),ba,o).filter(PM)},gL=(e,n,o)=>n?R8(e.dom,o):D8(e.dom,o),hL=(e,n)=>{const o=be.fromDom(e.getBody()),r=gt.fromRangeStart(e.selection.getRng());return fL(r,o).exists(()=>{if(gL(o,n,r)){const u=e3(e,o,n?Qr:qa);return e.selection.setRng(u),!0}else return!1})},FM=(e,n)=>e.selection.isCollapsed()?hL(e,n):!1,IM={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},pL=e=>re(e,n=>({...IM,...n})),hc=e=>re(e,n=>({...IM,...n})),LM=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,bL=(e,n)=>jn(pL(e),o=>LM(o,n)?[o]:[]),vL=(e,n)=>jn(hc(e),o=>LM(o,n)?[o]:[]),ss=(e,...n)=>()=>e.apply(null,n),Lb=(e,n)=>Jt(bL(e,n),o=>o.action()),s3=(e,n)=>xs(vL(e,n),o=>o.action()),Ng=(e,n)=>{const o=n?_c.Forwards:_c.Backwards,r=e.selection.getRng();return Ib(e,o,r,O0,Ky,Jl).exists(c=>(Rg(e,c),!0))},zx=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return $x(e,o,r,O0,Ky,Jl).exists(c=>(Rg(e,c),!0))},r3=(e,n)=>VA(e,n,n?Ky:O0),Vx=ru.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Hb={...Vx,none:e=>Vx.none(e)},zM=(e,n)=>Lw(e,n,Ve),Lw=(e,n,o)=>jn(ha(e),r=>Ai(r,n)?o(r)?[r]:[]:Lw(r,n,o)),Ux=(e,n,o=Et)=>{if(o(n))return R.none();if(ae(e,Yn(n)))return R.some(n);const r=c=>Ai(c,"table")||o(c);return Tu(n,e.join(","),r)},Hw=(e,n)=>Ux(["td","th"],e,n),zw=e=>zM(e,"th,td"),ym=(e,n)=>ld(e,"table",n),zb=(e,n,o,r,c=Ve)=>{const u=r===1;if(!u&&o<=0)return Hb.first(e[0]);if(u&&o>=e.length-1)return Hb.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?Hb.middle(n,b):zb(e,n,f,r,c)}},a3=(e,n)=>ym(e,n).bind(o=>{const r=zw(o);return eo(r,u=>$s(e,u)).map(u=>({index:u,all:r}))}),VM=(e,n,o)=>a3(e,o).fold(()=>Hb.none(e),c=>zb(c.all,e,c.index,1,n)),yL=(e,n,o)=>a3(e,o).fold(()=>Hb.none(),c=>zb(c.all,e,c.index,-1,n)),UM=e=>ld(e,"[contenteditable]"),WM=(e,n=!1)=>sl(e)?e.dom.isContentEditable:UM(e).fold(ge(n),o=>wL(o)==="true"),wL=e=>e.dom.contentEditable,ZM=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),CL=(e,n)=>jn(n,o=>{const r=ZM(Qf(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),SL=(e,n,o)=>Be(e,(r,c)=>r.fold(()=>R.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return R.some(b<f?c:u)}),R.none()),jM=(e,n,o,r,c)=>{const u=Rs(be.fromDom(o),"td,th,caption").map(b=>b.dom),f=Z(CL(e,u),b=>n(b,c));return SL(f,r,c).map(b=>b.cell)},xL=e=>e.bottom,kL=e=>e.top,TL=(e,n)=>e.y<n,EL=(e,n)=>e.y>n,_L=_e(jM,xL,TL),AL=_e(jM,kL,EL),OL=(e,n)=>wn(n.getClientRects()).bind(o=>_L(e,o.left,o.top)).bind(o=>Pw(M8(o),n)),DL=(e,n)=>bn(n.getClientRects()).bind(o=>AL(e,o.left,o.top)).bind(o=>Pw(N8(o),n)),RL=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),NL=e=>e.breakType===xl.Wrap&&e.positions.length===0,GM=e=>e.breakType===xl.Br&&e.positions.length===1,c3=(e,n,o)=>{const r=e(n,o);return NL(r)||!Ur(o.getNode())&&GM(r)?!RL(e,n,r):r.breakAt.isNone()},qM=_e(c3,ov),ML=_e(c3,Fw),$L=(e,n,o)=>{const r=gt.fromRangeStart(n);return wd(!e,o).exists(c=>c.isEqual(r))},BL=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return jp()&&$L(n,c,o)?(vm(u,e,o,!n,!1).each(f=>{Rg(e,f)}),!0):!1},PL=(e,n,o)=>OL(n,o).orThunk(()=>wn(o.getClientRects()).bind(r=>Dx(sv(e,gt.before(n)),r.left))).getOr(gt.before(n)),KM=(e,n,o)=>DL(n,o).orThunk(()=>wn(o.getClientRects()).bind(r=>Dx(nM(e,gt.after(n)),r.left))).getOr(gt.after(n)),YM=(e,n)=>{const o=n.getNode(e);return Ka(o)?R.some(o):R.none()},XM=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?_r:ns,c=e3(n,be.fromDom(o),r);Rg(n,c)})},JM=(e,n,o)=>{const r=YM(!!n,o),c=n===!1;r.fold(()=>Rg(e,o.toRange()),u=>wd(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Rg(e,o.toRange()),f=>XM(n,e,u)))},QM=(e,n,o,r)=>{const c=e.selection.getRng(),u=gt.fromRangeStart(c),f=e.getBody();if(!n&&qM(r,u)){const b=PL(f,o,u);return JM(e,n,b),!0}else if(n&&ML(r,u)){const b=KM(f,o,u);return JM(e,n,b),!0}else return!1},i3=(e,n,o)=>R.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>R.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),e$=(e,n)=>i3(e,n,BL),t$=(e,n)=>i3(e,n,QM),FL=e=>{const n=yf.exact(e,0,e,0);return aS(n)},l3=(e,n,o)=>o.fold(R.none,R.none,(r,c)=>lF(c).map(u=>FL(u)),r=>(e.execCommand("mceTableInsertRowAfter"),n$(e,n,r))),n$=(e,n,o)=>l3(e,n,VM(o,WM)),IL=(e,n,o)=>l3(e,n,yL(o,WM)),u3=(e,n)=>{const o=["table","li","dl"],r=be.fromDom(e.getBody()),c=b=>{const y=Yn(b);return $s(b,r)||ae(o,y)},u=e.selection.getRng(),f=be.fromDom(n?u.endContainer:u.startContainer);return Hw(f,c).map(b=>(ym(b,c).each(N=>{e.model.table.clearSelectedCells(N.dom)}),e.selection.collapse(!n),(n?n$:IL)(e,c,b).each(N=>{e.selection.setRng(N)}),!0)).getOr(!1)},LL=(e,n,o)=>{const r=ls.os.isMacOS()||ls.os.isiOS();Lb([{keyCode:Fn.RIGHT,action:ss($M,e,!0)},{keyCode:Fn.LEFT,action:ss($M,e,!1)},{keyCode:Fn.UP,action:ss(BM,e,!1)},{keyCode:Fn.DOWN,action:ss(BM,e,!0)},...r?[{keyCode:Fn.UP,action:ss(Hx,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Fn.DOWN,action:ss(Hx,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Fn.RIGHT,action:ss(e$,e,!0)},{keyCode:Fn.LEFT,action:ss(e$,e,!1)},{keyCode:Fn.UP,action:ss(t$,e,!1)},{keyCode:Fn.DOWN,action:ss(t$,e,!0)},{keyCode:Fn.RIGHT,action:ss(Ng,e,!0)},{keyCode:Fn.LEFT,action:ss(Ng,e,!1)},{keyCode:Fn.UP,action:ss(zx,e,!1)},{keyCode:Fn.DOWN,action:ss(zx,e,!0)},{keyCode:Fn.RIGHT,action:ss(UA,e,n,!0)},{keyCode:Fn.LEFT,action:ss(UA,e,n,!1)},{keyCode:Fn.RIGHT,ctrlKey:!r,altKey:r,action:ss(fu,e,n)},{keyCode:Fn.LEFT,ctrlKey:!r,altKey:r,action:ss(j8,e,n)},{keyCode:Fn.UP,action:ss(FM,e,!1)},{keyCode:Fn.DOWN,action:ss(FM,e,!0)}],o).each(c=>{o.preventDefault()})},HL=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||LL(e,n,o)})},Rd=(e,n)=>({container:e,offset:n}),Wx=pr.DOM,Zx=e=>n=>e===n?-1:0,zL=e=>n=>e.isBlock(n)||ae(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",jx=(e,n,o)=>{if(Lt(e)&&n>=0)return R.some(Rd(e,n));{const r=Qm(Wx);return R.from(r.backwards(e,n,Zx(e),o)).map(c=>Rd(c.container,c.container.data.length))}},o$=(e,n,o)=>{if(Lt(e)&&n>=e.length)return R.some(Rd(e,n));{const r=Qm(Wx);return R.from(r.forwards(e,n,Zx(e),o)).map(c=>Rd(c.container,0))}},d3=(e,n,o)=>{if(!Lt(e))return R.none();const r=e.data;if(n>=0&&n<=r.length)return R.some(Rd(e,n));{const c=Qm(Wx);return R.from(c.backwards(e,n,Zx(e),o)).bind(u=>{const f=u.container.data;return d3(u.container,n+f.length,o)})}},s$=(e,n,o)=>{if(!Lt(e))return R.none();const r=e.data;if(n<=r.length)return R.some(Rd(e,n));{const c=Qm(Wx);return R.from(c.forwards(e,n,Zx(e),o)).bind(u=>s$(u.container,n-r.length,o))}},m3=(e,n,o,r,c)=>{const u=Qm(e,zL(e));return R.from(u.backwards(n,o,r,c))},VL=e=>e.collapsed&&Lt(e.startContainer),r$=e=>Aa(e.toString().replace(/\u00A0/g," ")),a$=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,f3=(e,n)=>e.substring(n.length),UL=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(a$(u))return R.none();if(c===u&&Kn(e,o,r,n))break}return R.some(r)},oU=(e,n,o,r=0)=>{if(!VL(n))return R.none();const c={text:"",offset:0},u=(b,y,x)=>(c.text=x+c.text,c.offset+=y,UL(c.text,c.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return m3(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return R.none();const x=r$(y);return x.lastIndexOf(o)!==0||f3(x,o).length<r?R.none():R.some({text:f3(x,o),range:y,trigger:o})})},c$=(e,n,o,r=0)=>fF(be.fromDom(n.startContainer)).fold(()=>oU(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=r$(u);return R.some({range:u,text:f3(f,o),trigger:o})}),Gx=e=>e.nodeType===Bn,i$=e=>e.nodeType===ut,g3=e=>{if(Gx(e))return Rd(e,e.data.length);{const n=e.childNodes;return n.length>0?g3(n[n.length-1]):Rd(e,n.length)}},l$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?l$(o[n],0):o.length>0&&i$(e)&&o.length===n?g3(o[o.length-1]):Rd(e,n)},u$=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return m3(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!a$(u)}).isSome()},d$=e=>n=>{const o=l$(n.startContainer,n.startOffset);return!u$(e,o)},WL=(e,n,o)=>xs(o.triggers,r=>c$(e,n,r)),ZL=(e,n)=>{const o=n(),r=e.selection.getRng();return WL(e.dom,r,o).bind(c=>m$(e,n,c))},m$=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=Z(u.lookupByTrigger(o.trigger),N=>o.text.length>=N.minChars&&N.matches.getOrThunk(()=>d$(e.dom))(o.range,b,o.text));if(y.length===0)return R.none();const x=Promise.all(re(y,N=>N.fetch(o.text,N.maxResults,r).then(L=>({matchText:o.text,items:L,columns:N.columns,onAction:N.onAction,highlightOn:N.highlightOn}))));return R.some({lookupData:x,context:o})};var Nd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Nd||(Nd={}));const h3=(e,n,o)=>e.stype===Nd.Error?n(e.serror):o(e.svalue),p3=e=>{const n=[],o=[];return z(e,r=>{h3(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},jL=(e,n)=>e.stype===Nd.Error?{stype:Nd.Error,serror:n(e.serror)}:e,GL=(e,n)=>e.stype===Nd.Value?{stype:Nd.Value,svalue:n(e.svalue)}:e,qL=(e,n)=>e.stype===Nd.Value?n(e.svalue):e,f$=(e,n)=>e.stype===Nd.Error?n(e.serror):e,g$=e=>({stype:Nd.Value,svalue:e}),h$=e=>({stype:Nd.Error,serror:e}),li={fromResult:e=>e.fold(h$,g$),toResult:e=>h3(e,yi.error,yi.value),svalue:g$,partition:p3,serror:h$,bind:qL,bindError:f$,map:GL,mapError:jL,fold:h3},nc=e=>bt(e)&&Le(e).length>100?" removed due to size":JSON.stringify(e,null,2),Of=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:ge("... (only showing first ten failures)")}]):e;return re(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},qx=(e,n)=>li.serror([{path:e,getErrorInfo:n}]),aU=(e,n,o)=>qx(e,()=>'Could not find valid *required* value for "'+n+'" in '+nc(o)),KL=(e,n)=>qx(e,()=>'Choice schema did not contain choice key: "'+n+'"'),YL=(e,n,o)=>qx(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+nc(n)),XL=(e,n)=>qx(e,ge(n)),JL=(e,n,o,r)=>as(o,r).fold(()=>YL(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),p$=(e,n)=>({extract:(c,u)=>as(u,e).fold(()=>KL(c,e),b=>JL(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Le(n)}),cv=(e,n)=>n,cU=(e,n)=>Ft(e)&&Ft(n)?Kx(e,n):n,b$=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)uo(c,u)&&(o[u]=e(o[u],c[u]))}return o},Kx=b$(cU),wm=b$(cv),v$=()=>({tag:"required",process:{}}),QL=e=>({tag:"defaultedThunk",process:e}),b3=e=>QL(ge(e)),e7=()=>({tag:"option",process:{}}),y$=(e,n)=>e.length>0?li.svalue(Kx(n,wm.apply(void 0,e))):li.svalue(n),v3=e=>Ot(li.serror,co)(e),t7={consolidateObj:(e,n)=>{const o=li.partition(e);return o.errors.length>0?v3(o.errors):y$(o.values,n)},consolidateArr:e=>{const n=li.partition(e);return n.errors.length>0?v3(n.errors):li.svalue(n.values)}},n7=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),o7=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),C$=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},Yx=e=>{const n=(r,c)=>li.bindError(e(c),u=>XL(r,u)),o=ge("val");return{extract:n,toString:o}},S$=Yx(li.svalue),s7=(e,n,o,r)=>as(n,o).fold(()=>aU(e,o,n),r),y3=(e,n,o,r)=>{const c=as(e,n).getOrThunk(()=>o(e));return r(c)},r7=(e,n,o)=>o(as(e,n)),a7=(e,n,o,r)=>{const c=as(e,n).map(u=>u===!0?o(e):u);return r(c)},c7=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>li.svalue(R.none()),y=>{const x=c.extract(n.concat([r]),y);return li.map(x,R.some)});switch(e.tag){case"required":return s7(n,o,r,u);case"defaultedThunk":return y3(o,r,e.process,u);case"option":return r7(o,r,f);case"defaultedOptionThunk":return a7(o,r,e.process,f);case"mergeWithThunk":return y3(o,r,ge({}),b=>{const y=Kx(e.process(o),b);return u(y)})}},i7=(e,n,o)=>{const r={},c=[];for(const u of o)C$(u,(f,b,y,x)=>{const N=c7(y,e,n,f,x);li.fold(N,P=>{c.push(...P)},P=>{r[b]=P})},(f,b)=>{r[f]=b(n)});return c.length>0?li.serror(c):li.svalue(r)},Xx=e=>({extract:(r,c)=>i7(r,c,e),toString:()=>`obj{
`+re(e,c=>C$(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),Jx=e=>({extract:(r,c)=>{const u=re(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return t7.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),x$=e=>Yx(n=>e(n).fold(li.serror,li.svalue)),l7=(e,n,o)=>{const r=n.extract([e],o);return li.mapError(r,c=>({input:o,errors:c}))},u7=(e,n,o)=>li.toResult(l7(e,n,o)),w3=e=>`Errors: 
`+Of(e.errors).join(`
`)+`

Input object: `+nc(e.input),C3=(e,n)=>p$(e,Ut(n,Xx)),lU=ge(S$),S3=(e,n)=>Yx(o=>{const r=typeof o;return e(o)?li.svalue(o):li.serror(`Expected type: ${n} but got: ${r}`)}),uU=S3(ct,"number"),Qx=S3(oe,"string"),dU=S3(At,"boolean"),x3=S3(Q,"function"),Vw=n7,d7=o7,m7=e=>x$(n=>ae(e,n)?yi.value(n):yi.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),Ci=(e,n)=>Vw(e,e,v$(),n),ek=e=>Ci(e,Qx),Cm=e=>Ci(e,x3),k$=(e,n)=>Vw(e,e,v$(),Jx(n)),tk=(e,n)=>Vw(e,e,e7(),n),nk=e=>tk(e,Qx),k3=e=>tk(e,x3),T3=(e,n)=>Vw(e,e,b3(n),lU()),Vb=(e,n,o)=>Vw(e,e,b3(n),o),E3=(e,n)=>Vb(e,n,uU),f7=(e,n)=>Vb(e,n,Qx),T$=(e,n,o)=>Vb(e,n,m7(o)),_3=(e,n)=>Vb(e,n,dU),A3=(e,n)=>Vb(e,n,x3),g7=(e,n,o)=>Vb(e,n,Jx(o)),E$=ek("type"),h7=Cm("fetch"),O3=Cm("onAction"),p7=A3("onSetup",()=>Ne),b7=nk("text"),v7=nk("icon"),y7=nk("tooltip"),_$=nk("label"),w7=_3("active",!1),C7=_3("enabled",!0),S7=_3("primary",!1),D3=e=>T3("columns",e),Uw=e=>f7("type",e),x7=Xx([E$,ek("trigger"),E3("minChars",1),D3(1),E3("maxResults",10),k3("matches"),h7,O3,g7("highlightOn",[],Qx)]),k7=e=>u7("Autocompleter",x7,{trigger:e.ch,...e}),Ub=[C7,y7,v7,b7,p7],Df=[w7].concat(Ub),Wb=[A3("predicate",Et),T$("scope","node",["node","editor"]),T$("position","selection",["node","selection","line"])],ok=Ub.concat([Uw("contextformbutton"),S7,O3,d7("original",Ue)]),R3=Df.concat([Uw("contextformbutton"),S7,O3,d7("original",Ue)]),N3=Ub.concat([Uw("contextformbutton")]),A$=Df.concat([Uw("contextformtogglebutton")]),T7=C3("type",{contextformbutton:ok,contextformtogglebutton:R3});Xx([Uw("contextform"),A3("initValue",ge("")),_$,k$("commands",T7),tk("launch",C3("type",{contextformbutton:N3,contextformtogglebutton:A$}))].concat(Wb));const O$=e=>{const n=e.ui.registry.getAll().popups,o=Ut(n,f=>k7(f).fold(b=>{throw new Error(w3(b))},Ue)),r=Fs(bc(o,f=>f.trigger)),c=vs(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Z(c,b=>b.trigger===f)}},D$=(e,n)=>{const o=E1(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},E7=e=>{const n=Xm(),o=uc(!1),r=n.isSet,c=()=>{r()&&(c6(e),XC(e),o.set(!1),n.clear())},u=x=>{r()||(a6(e,x.range),n.set({trigger:x.trigger,matchLength:x.text.length}))},f=Gn(()=>O$(e)),b=x=>n.get().map(N=>c$(e.dom,e.selection.getRng(),N.trigger).bind(P=>m$(e,f,P,x))).getOrThunk(()=>ZL(e,f)),y=x=>{b(x).fold(c,N=>{u(N.context),N.lookupData.then(P=>{n.get().map(L=>{const ce=N.context;L.trigger===ce.trigger&&(ce.text.length-L.matchLength>=10?c():(n.set({...L,matchLength:ce.text.length}),o.get()?YC(e,{lookupData:P}):(o.set(!0),By(e,{lookupData:P}))))})})})};e.addCommand("mceAutocompleterReload",(x,N)=>{const P=bt(N)?N.fetchOptions:{};y(P)}),e.addCommand("mceAutocompleterClose",c),D$(e,{cancelIfNecessary:c,load:y})},R$=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Ne,inputType:o},f=w1(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},M3=R$("input"),$3=R$("beforeinput"),_7=(e,n,o)=>{const r=o.keyCode===Fn.BACKSPACE?"deleteContentBackward":"deleteContentForward";s3([{keyCode:Fn.BACKSPACE,action:ss(kM,e)},{keyCode:Fn.BACKSPACE,action:ss($A,e,!1)},{keyCode:Fn.DELETE,action:ss($A,e,!0)},{keyCode:Fn.BACKSPACE,action:ss(RA,e,!1)},{keyCode:Fn.DELETE,action:ss(RA,e,!0)},{keyCode:Fn.BACKSPACE,action:ss(ZA,e,n,!1)},{keyCode:Fn.DELETE,action:ss(ZA,e,n,!0)},{keyCode:Fn.BACKSPACE,action:ss(AS,e,!1)},{keyCode:Fn.DELETE,action:ss(AS,e,!0)},{keyCode:Fn.BACKSPACE,action:ss(mu,e,!1)},{keyCode:Fn.DELETE,action:ss(mu,e,!0)},{keyCode:Fn.BACKSPACE,action:ss(wM,e,!1)},{keyCode:Fn.DELETE,action:ss(wM,e,!0)},{keyCode:Fn.BACKSPACE,action:ss(tv,e,!1)},{keyCode:Fn.DELETE,action:ss(tv,e,!0)},{keyCode:Fn.BACKSPACE,action:ss(OA,e,!1)},{keyCode:Fn.DELETE,action:ss(OA,e,!0)},{keyCode:Fn.BACKSPACE,action:ss(jA,e,!1)},{keyCode:Fn.DELETE,action:ss(jA,e,!0)}],o).each(c=>{o.preventDefault(),$3(e,r).isDefaultPrevented()||(c(),M3(e,r))})},A7=(e,n)=>{Lb([{keyCode:Fn.BACKSPACE,action:ss(KN,e)},{keyCode:Fn.DELETE,action:ss(KN,e)}],n)},N$=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||_7(e,n,o)}),e.on("keyup",o=>{o.isDefaultPrevented()||A7(e,o)})},M$=e=>{for(;e;){if(En(e)||Lt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},sk=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=M$(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(ra),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new pa(n,n);let f=n,b;for(;b=u.current();){if(Lt(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else Ur(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Yt(e,c)},B3=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},$$=e=>R.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),O7=e=>$$(e).fold(ge(""),n=>n.nodeName.toUpperCase()),mU=e=>$$(e).filter(n=>Zi(be.fromDom(n))).isSome(),fU=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,D7=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},B$=(e,n)=>{const o=e==null?void 0:e.parentNode;return we(o)&&o.nodeName===n},R7=e=>we(e)&&/^(OL|UL|LI)$/.test(e.nodeName),N7=e=>we(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Md=e=>R7(e)&&R7(e.parentNode),Ww=e=>{const n=e.parentNode;return N7(n)?n:e},rk=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!En(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},P$=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;Md(o)&&(c="LI");let y=n(c);if(rk(o,r,!0)&&rk(o,r,!1))if(B$(o,"LI")){const x=Ww(o);u.insertAfter(y,x),D7(o)?u.remove(x):u.remove(o)}else u.replace(y,o);else if(rk(o,r,!0))B$(o,"LI")?(u.insertAfter(y,Ww(o)),y.appendChild(u.doc.createTextNode(" ")),y.appendChild(o)):b.insertBefore(y,o),u.remove(r);else if(rk(o,r,!1))u.insertAfter(y,Ww(o)),u.remove(r);else{o=Ww(o);const x=f.cloneRange();x.setStartAfter(r),x.setEndAfter(o);const N=x.extractContents();c==="LI"&&fU(N,"LI")?(y=N.firstChild,u.insertAfter(N,o)):(u.insertAfter(N,o),u.insertAfter(y,o)),u.remove(r)}sk(e,y)},M7=e=>{z(Fm(be.fromDom(e),Os),n=>{const o=n.dom;o.nodeValue=Aa(o.data)})},$7=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},gU=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),jc=e=>{e.innerHTML='<br data-mce-bogus="1">'},P3=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,F$=(e,n)=>we(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.getContentEditable(n)!=="true",B7=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;En(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||gU(e,u))&&e.remove(u)},F3=(e,n,o)=>Lt(n)?e?o===1&&n.data.charAt(o-1)===yr?0:o:o===n.data.length-1&&n.data.charAt(o)===yr?n.data.length:o:o,P7=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,F3(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,F3(!1,e.endContainer,e.endOffset)),n},F7=e=>{let n=e;do Lt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},I7=(e,n,o)=>{const r=e.dom;R.from(o.style).map(r.parseStyle).each(y=>{const N={...ts(be.fromDom(n)),...y};r.setStyles(n,N)});const c=R.from(o.class).map(y=>y.split(/\s+/)),u=R.from(n.className).map(y=>Z(y.split(/\s+/),x=>x!==""));Vr(c,u,(y,x)=>{const N=Z(x,L=>!ae(y,L)),P=[...y,...N];r.setAttrib(n,"class",P.join(" "))});const f=["style","class"],b=ps(o,(y,x)=>!ae(f,x));r.setAttribs(n,b)},Zw=(e,n)=>{if(bl(e).toLowerCase()===n.tagName.toLowerCase()){const r=Lp(e);I7(e,n,r)}},L7=(e,n,o,r,c)=>{var u;const f=e.dom,b=(u=B3(f,r))!==null&&u!==void 0?u:f.getRoot();let y=f.getParent(r,f.isBlock);if(!y||!F$(f,y)){y=y||b;let x;if(y===e.getBody()||i1(y)?x=y.nodeName.toLowerCase():y.parentNode?x=y.parentNode.nodeName.toLowerCase():x="",!y.hasChildNodes()){const L=f.create(n);return Zw(e,L),y.appendChild(L),o.setStart(L,0),o.setEnd(L,0),L}let N=r;for(;N&&N.parentNode!==y;)N=N.parentNode;let P;for(;N&&!f.isBlock(N);)P=N,N=N.previousSibling;if(P&&e.schema.isValidChild(x,n.toLowerCase())){const L=P.parentNode,ce=f.create(n);for(Zw(e,ce),L.insertBefore(ce,P),N=P;N&&!f.isBlock(N);){const ie=N.nextSibling;ce.appendChild(N),N=ie}o.setStart(r,c),o.setEnd(r,c)}}return r},I3=(e,n)=>{n.normalize();const o=n.lastChild;(!o||En(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},L3=(e,n)=>{const o=mc(e);return Nt(n)?!1:oe(o)?ae(_t.explode(o),n.nodeName.toLowerCase()):o},H7={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,x=y.getNonEmptyElements(),N=e.selection.getRng(),P=bl(e),L=un=>{let Xt=o;const lt=y.getTextInlineElements();let Je;un||c==="TABLE"||c==="HR"?Je=b.create(un||P):Je=Ae.cloneNode(!1);let Sn=Je;if(ST(e)===!1)b.setAttrib(Je,"style",null),b.setAttrib(Je,"class",null);else do if(lt[Xt.nodeName]){if(wl(Xt)||Ac(Xt))continue;const no=Xt.cloneNode(!1);b.setAttrib(no,"id",""),Je.hasChildNodes()?(no.appendChild(Je.firstChild),Je.appendChild(no)):(Sn=no,Je.appendChild(no))}while((Xt=Xt.parentNode)&&Xt!==Re);return Zw(e,Je),jc(Sn),Je},ce=un=>{const Xt=F3(un,o,r);if(Lt(o)&&(un?Xt>0:Xt<o.data.length))return!1;if(o.parentNode===Ae&&f&&!un||un&&En(o)&&o===Ae.firstChild)return!0;if(P3(o,"TABLE")||P3(o,"HR"))return f&&!un||!f&&un;const lt=new pa(o,Ae);Lt(o)&&(un&&Xt===0?lt.prev():!un&&Xt===o.data.length&&lt.next());let Je;for(;Je=lt.current();){if(En(Je)){if(!Je.getAttribute("data-mce-bogus")){const Sn=Je.nodeName.toLowerCase();if(x[Sn]&&Sn!=="br")return!1}}else if(Lt(Je)&&!Ol(Je.data))return!1;un?lt.prev():lt.next()}return!0},ie=()=>{let un;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&je!=="HGROUP"?un=L(P):un=L(),L3(e,u)&&F$(b,u)&&b.isEmpty(Ae)?un=b.split(u,Ae):b.insertAfter(un,Ae),sk(e,un),un};x0(b,N).each(un=>{N.setStart(un.startContainer,un.startOffset),N.setEnd(un.endContainer,un.endOffset)}),o=N.startContainer,r=N.startOffset;const ee=!!(n&&n.shiftKey),ue=!!(n&&n.ctrlKey);En(o)&&o.hasChildNodes()&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&Lt(o)?r=o.data.length:r=0);const Re=B3(b,o);if(!Re||$7(e,o))return;ee||(o=L7(e,P,N,o,r));let Ae=b.getParent(o,b.isBlock)||b.getRoot();u=we(Ae==null?void 0:Ae.parentNode)?b.getParent(Ae.parentNode,b.isBlock):null,c=Ae?Ae.nodeName.toUpperCase():"";const je=u?u.nodeName.toUpperCase():"";if(je==="LI"&&!ue){const un=u;Ae=un,u=un.parentNode,c=je}if(/^(LI|DT|DD)$/.test(c)&&En(u)&&b.isEmpty(Ae)){P$(e,L,u,Ae,P);return}if(Ae===e.getBody())return;const et=Ae.parentNode;let xt;if(k(Ae))xt=Qs(Ae),b.isEmpty(Ae)&&jc(Ae),Zw(e,xt),sk(e,xt);else if(ce(!1))xt=ie();else if(ce(!0)&&et)xt=et.insertBefore(L(),Ae),sk(e,P3(Ae,"HR")?xt:Ae);else{const un=P7(N).cloneRange();un.setEndAfter(Ae);const Xt=un.extractContents();M7(Xt),F7(Xt),xt=Xt.firstChild,b.insertAfter(Xt,Ae),B7(b,x,xt),I3(b,Ae),b.isEmpty(Ae)&&jc(Ae),xt.normalize(),b.isEmpty(xt)?(b.remove(xt),ie()):(Zw(e,xt),sk(e,xt))}b.setAttrib(xt,"id",""),e.dispatch("NewBlock",{newBlock:xt})},fakeEventName:"insertParagraph"},z7=(e,n,o)=>{const r=new pa(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||Lt(c)&&c.length>0)return!0;return!1},I$=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Yt(e,r)},pU=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;x0(r,c).each(ce=>{c.setStart(ce.startContainer,ce.startOffset),c.setEnd(ce.endContainer,ce.endOffset)});let b=c.startOffset,y=c.startContainer;if(En(y)&&y.hasChildNodes()){const ce=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,ce&&Lt(y)?b=y.data.length:b=0}let x=r.getParent(y,r.isBlock);const N=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,P=N?N.nodeName.toUpperCase():"",L=!!(n&&n.ctrlKey);P==="LI"&&!L&&(x=N),Lt(y)&&b>=y.data.length&&(z7(e.schema,y,x||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),N1(r,c,u),I$(e,u,f),e.undoManager.add()},V7=(e,n)=>{const o=be.fromTag("br");ns(be.fromDom(n),o),e.undoManager.add()},Mg=(e,n)=>{W7(e.getBody(),n)||_r(be.fromDom(n),be.fromTag("br"));const o=be.fromTag("br");_r(be.fromDom(n),o),I$(e,o.dom,!1),e.undoManager.add()},U7=e=>Ur(e.getNode()),W7=(e,n)=>U7(gt.after(n))?!0:wi(e,gt.after(n)).map(o=>Ur(o.getNode())).getOr(!1),$g=e=>e&&e.nodeName==="A"&&"href"in e,Z7=e=>e.fold(Et,$g,$g,Et),L$=e=>{const n=_e(yb,e),o=gt.fromRangeStart(e.selection.getRng());return _f(n,e.getBody(),o).filter(Z7)},j7=(e,n)=>{n.fold(Ne,_e(V7,e),_e(Mg,e),Ne)},H$={insert:(e,n)=>{const o=L$(e);o.isSome()?o.each(_e(j7,e)):pU(e,n)},fakeEventName:"insertLineBreak"},z$=(e,n)=>$$(e).filter(o=>n.length>0&&Ai(be.fromDom(o),n)).isSome(),G7=e=>z$(e,sC(e)),q7=e=>z$(e,cn(e)),Vl=ru.generate([{br:[]},{block:[]},{none:[]}]),V$=(e,n)=>q7(e),jw=e=>(n,o)=>mU(n)===e,U$=(e,n)=>(o,r)=>O7(o)===e.toUpperCase()===n,K7=e=>{const n=B3(e.dom,e.selection.getStart());return Nt(n)},Gw=e=>U$("pre",e),Y7=()=>U$("summary",!0),ak=e=>(n,o)=>wT(n)===e,W$=(e,n)=>G7(e),ck=(e,n)=>n,Z$=e=>{const n=bl(e),o=B3(e.dom,e.selection.getStart());return we(o)&&e.schema.isValidChild(o.nodeName,n)},Yu=(e,n)=>(o,r)=>Be(e,(u,f)=>u&&f(o,r),!0)?R.some(n):R.none(),X7=(e,n)=>FA([Yu([V$],Vl.none()),Yu([Gw(!0),K7],Vl.none()),Yu([Y7()],Vl.br()),Yu([Gw(!0),ak(!1),ck],Vl.br()),Yu([Gw(!0),ak(!1)],Vl.block()),Yu([Gw(!0),ak(!0),ck],Vl.block()),Yu([Gw(!0),ak(!0)],Vl.br()),Yu([jw(!0),ck],Vl.br()),Yu([jw(!0)],Vl.block()),Yu([W$],Vl.br()),Yu([ck],Vl.br()),Yu([Z$],Vl.block())],[e,!!(n&&n.shiftKey)]).getOr(Vl.none()),ik=(e,n,o)=>{n.selection.isCollapsed()||e5(n),!(we(o)&&$3(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),we(o)&&M3(n,e.fakeEventName))},lk=(e,n)=>{const o=()=>ik(H$,e,n),r=()=>ik(H7,e,n),c=X7(e,n);switch(CT(e)){case"linebreak":c.fold(o,o,Ne);break;case"block":c.fold(r,r,Ne);break;case"invert":c.fold(r,o,Ne);break;default:c.fold(o,r,Ne);break}},J7=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),PI(e.undoManager),e.undoManager.transact(()=>{lk(e,n)}))},Q7=e=>{e.on("keydown",n=>{n.keyCode===Fn.ENTER&&J7(e,n)})},j$=(e,n,o)=>{const r=ls.os.isMacOS()||ls.os.isiOS();Lb([{keyCode:Fn.END,action:ss(Lx,e,!0)},{keyCode:Fn.HOME,action:ss(Lx,e,!1)},...r?[]:[{keyCode:Fn.HOME,action:ss(Hx,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Fn.END,action:ss(Hx,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Fn.END,action:ss(r3,e,!0)},{keyCode:Fn.HOME,action:ss(r3,e,!1)},{keyCode:Fn.END,action:ss(av,e,!0,n)},{keyCode:Fn.HOME,action:ss(av,e,!1,n)}],o).each(c=>{o.preventDefault()})},H3=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||j$(e,n,o)})},G$=e=>{e.on("input",n=>{n.isComposing||IF(e)})},eH=Mr(),yU=(e,n,o)=>{Lb([{keyCode:Fn.PAGE_UP,action:ss(av,e,!1,n)},{keyCode:Fn.PAGE_DOWN,action:ss(av,e,!0,n)}],o)},ap=e=>e.stopImmediatePropagation(),q$=e=>e.keyCode===Fn.PAGE_UP||e.keyCode===Fn.PAGE_DOWN,K$=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",ap,!0):!o&&e.get()&&n.off("NodeChange",ap),e.set(o)},tH=(e,n)=>{if(eH.os.isMacOS())return;const o=uc(!1);e.on("keydown",r=>{q$(r)&&K$(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||yU(e,n,r),q$(r)&&o.get()&&(K$(o,e,!1),e.nodeChanged())})},qw=(e,n)=>{const o=n.container(),r=n.offset();return Lt(o)?(o.insertData(r,e),R.some(gt(o,r+e.length))):Oh(n).map(c=>{const u=be.fromText(e);return n.isAtEnd()?_r(c,u):ns(c,u),gt(u.dom,e.length)})},Y$=_e(qw,ra),X$=_e(qw," "),nH=e=>n=>n.fold(o=>yl(e.dom,gt.before(o)),o=>Mi(o),o=>Cd(o),o=>wi(e.dom,gt.after(o))),J$=(e,n)=>o=>PF(e,o)?Y$(n):X$(n),oH=e=>n=>(e.selection.setRng(n.toRange()),e.nodeChanged(),!0),sH=e=>{const n=gt.fromRangeStart(e.selection.getRng()),o=be.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=_e(yb,e),c=gt.fromRangeStart(e.selection.getRng());return _f(r,e.getBody(),c).bind(nH(o)).map(u=>()=>J$(o,n)(u).each(oH(e)))}else return R.none()},rH=(e,n)=>{s3([{keyCode:Fn.SPACEBAR,action:ss(sH,e)}],n).each(o=>{n.preventDefault(),$3(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),M3(e,"insertText",{data:" "}))})},Q$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||rH(e,n)})},z3=e=>HT(e)?[{keyCode:Fn.TAB,action:ss(u3,e,!0)},{keyCode:Fn.TAB,shiftKey:!0,action:ss(u3,e,!1)}]:[],aH=(e,n)=>{Lb([...z3(e)],n).each(o=>{n.preventDefault()})},V3=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||aH(e,n)})},eB=e=>{if(e.addShortcut("Meta+P","","mcePrint"),E7(e),kf(e))return uc(null);{const n=Z8(e);return o3(e),HL(e,n),N$(e,n),Q7(e),Q$(e),G$(e),V3(e),H3(e,n),tH(e,n),n}};class uk{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!zy(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);!c||ds(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&ds(n)&&(n.selection.getNode().nodeName==="IMG"?Bi.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!ri(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=to(r.dom.getParents(n,Ve,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const U3="x-tinymce/html",Kw=ge(U3),W3="<!-- "+U3+" -->",cH=e=>W3+e,dk=e=>e.replace(W3,""),tB=e=>e.indexOf(W3)!==-1,iH=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),lH=(e,n)=>{let o="<"+e;const r=bc(n,(c,u)=>u+'="'+Ja.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},uH=(e,n,o)=>{const r=e.split(/\n\n/),c=lH(n,o),u="</"+n+">",f=re(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:re(f,b).join("")},nB="%MCEPASTEBIN%",dH=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},nB);ls.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},mH=(e,n)=>{const o=e.dom;if(Z3(e)){let r;const c=n.get();for(;r=Z3(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},Z3=e=>e.dom.get("mcepastebin"),iv=e=>we(e)&&e.id==="mcepastebin",fH=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=Z(e.getBody().childNodes,iv);z(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},oB=e=>e===nB,sB=e=>{const n=uc(null);return{create:()=>dH(e,n),remove:()=>mH(e,n),getEl:()=>Z3(e),getHtml:()=>fH(e),getLastRng:n.get}},rB=(e,n)=>(_t.each(n,o=>{Oe(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),gH=e=>{const n=Nu(),o=iu({},n);let r="";const c=n.getVoidElements(),u=_t.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const x=y.name,N=y;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(c[x]&&(r+=" "),u[x]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let P=y.firstChild;if(P)do b(P);while(P=P.next)}f[x]&&N.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=rB(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},aB=e=>(e=rB(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":ra],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),cB=e=>{let n=0;return()=>e+n++},hH=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return _t.hasOwn(o,n)?"image/"+o[n]:"image/"+n},pH=(e,n)=>{const o=iu({},e.schema);o.addNodeFilter("meta",c=>{_t.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Gh({validate:!0},e.schema).serialize(r)},bH=(e,n)=>({content:e,cancelled:n}),mk=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=Py(e,r,o);return bH(c.node.innerHTML,c.isDefaultPrevented())},vH=(e,n,o)=>{const r=y0(e,n,o),c=pH(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?mk(e,c,o):bH(c,r.isDefaultPrevented())},yH=(e,n,o)=>vH(e,n,o),j3=(e,n)=>(e.insertContent(n,{merge:ny(e),paste:!0}),!0),G3=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),wH=(e,n)=>G3(n)&&se(sy(e),o=>As(n.toLowerCase(),`.${o.toLowerCase()}`)),CH=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),SH=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),xH=(e,n,o)=>!e.selection.isCollapsed()&&G3(n)?SH(e,n,o):!1,kH=(e,n,o)=>wH(e,n)?CH(e,n,o):!1,TH=(e,n)=>{_t.each([xH,kH,j3],o=>!o(e,n,j3))},EH=(e,n,o)=>{o||!gC(e)?j3(e,n):TH(e,n)},_H=cB("mceclip"),iB=(e,n,o,r)=>{const c=yH(e,n,o);c.cancelled||EH(e,c.content,r)},ur=(e,n,o)=>{const r=o||tB(n);iB(e,dk(n),r,!1)},q3=(e,n)=>{const o=e.dom.encode(n).replace(/\r\n/g,`
`),r=vp(o,pC(e)),c=uH(r,bl(e),Lp(e));iB(e,c,!1,!0)},K3=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},lv=(e,n)=>n in e&&e[n].length>0,fk=e=>lv(e,"text/html")||lv(e,"text/plain"),lB=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return we(o)?e.dom.encode(o[1]):void 0},uB=(e,n,o,r)=>{const c=_H(),u=Zv(e)&&we(o.name),f=u?lB(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},AH=(e,n)=>{K0(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),x=y!=null?y:uB(e,b,f,u);ur(e,`<img src="${x.blobUri()}">`,!1)})},dB=e=>e.type==="paste",OH=e=>Promise.all(re(e,n=>ex(n).then(o=>({file:n,uri:o})))),DH=e=>{const n=sy(e);return o=>vo(o.type,"image/")&&se(n,r=>hH(r)===o.type)},mB=(e,n)=>{const o=n.items?jn(Oo(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Oo(n.files):[];return Z(o.length>0?o:r,DH(e))},fB=(e,n,o)=>{const r=dB(n)?n.clipboardData:n.dataTransfer;if(G1(e)&&r){const c=mB(e,r);if(c.length>0)return n.preventDefault(),OH(c).then(u=>{o&&e.selection.setRng(o),z(u,f=>{AH(e,f)})}),!0}return!1},RH=e=>{var n,o;return ls.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},gk=e=>Fn.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Yw=(e,n,o,r)=>{let c=aB(o);const u=lv(n,Kw())||tB(o),f=!u&&iH(c),b=G3(c);(oB(c)||!c.length||f&&!b)&&(r=!0),(r||b)&&(lv(n,"text/plain")&&f?c=n["text/plain"]:c=gH(c)),!oB(c)&&(r?q3(e,c):ur(e,c,u))},gB=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{gk(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||RH(u))return;const f=o.get()==="text"||r;r=!1;const b=K3(u.clipboardData);!fk(b)&&fB(e,u,c())||(lv(b,"text/html")?(u.preventDefault(),Yw(e,b,b["text/html"],f)):(n.create(),Bi.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),Yw(e,b,y,f)},0)))})},Xu=e=>{const n=c=>vo(c,"webkit-fake-url"),o=c=>vo(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!G1(e)&&r(f))for(const b of c){const y=b.attr("src");oe(y)&&!b.attr("data-mce-object")&&y!==ls.transparentSrc&&(n(y)||!cg(e)&&o(y))&&b.remove()}})},NH=(e,n,o)=>{gB(e,n,o),Xu(e)},uv=(e,n)=>{n.get()==="text"?(n.set("html"),sr(e,!1)):(n.set("text"),sr(e,!0)),e.focus()},Xw=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{uv(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&ur(e,r.html,r.internal),r.text&&q3(e,r.text)})},MH=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(Kw(),n),!0}catch{return!1}else return!1},hB=(e,n,o,r)=>{MH(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},Zb=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),Bi.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},pB=e=>({html:cH(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Y3=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),hk=e=>!e.selection.isCollapsed()||Y3(e),bB=e=>n=>{!n.isDefaultPrevented()&&hk(e)&&hB(n,pB(e),Zb(e),()=>{if(ls.browser.isChromium()||ls.browser.isFirefox()){const o=e.selection.getRng();Bi.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},$H=e=>n=>{!n.isDefaultPrevented()&&hk(e)&&hB(n,pB(e),Zb(e),Ne)},BH=e=>{e.on("cut",bB(e)),e.on("copy",$H(e))},X3=(e,n)=>{var o,r;return Sg.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},vB=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},yB=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},PH=e=>se(e.files,n=>/^image\//.test(n.type)),FH=(e,n)=>{BT(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),G1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&PH(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented()||n.get())return;const r=X3(e,o);if(Nt(r))return;const c=K3(o.dataTransfer),u=lv(c,Kw());if((!fk(c)||vB(c))&&fB(e,o,r))return;const f=c[Kw()],b=f||c["text/html"]||c["text/plain"];b&&(o.preventDefault(),Bi.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),yB(e,r);const y=aB(b);c["text/html"]?ur(e,y,u):q3(e,y)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{G1(e)&&!n.get()&&(o.preventDefault(),yB(e,X3(e,o))),o.type==="dragend"&&n.set(!1)})},wB=e=>{const n=c=>u=>{c(e,u)},o=PT(e);Q(o)&&e.on("PastePreProcess",n(o));const r=fC(e);Q(r)&&e.on("PastePostProcess",n(r))},IH=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},CB=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,SB=e=>_t.trim(e).replace(CB,nb).toLowerCase(),LH=(e,n,o)=>{const r=FT(e);if(o||r==="all"||!Zp(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,x,N)=>{const P=u.parseStyle(u.decode(x)),L={};for(let ie=0;ie<c.length;ie++){const ee=P[c[ie]];let ue=ee,Re=u.getStyle(f,c[ie],!0);/color/.test(c[ie])&&(ue=SB(ue),Re=SB(Re)),Re!==ue&&(L[c[ie]]=ee)}const ce=u.serializeStyle(L,"span");return ce?y+' style="'+ce+'"'+N:y+N})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},HH=e=>{(ls.browser.isChromium()||ls.browser.isSafari())&&IH(e,LH)},zH=e=>{const n=uc(!1),o=uc(hC(e)?"text":"html"),r=sB(e);HH(e),Xw(e,o),wB(e),e.on("PreInit",()=>{BH(e),FH(e,n),NH(e,r,o)})},VH=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},UH=e=>{e.parser.addNodeFilter("details",n=>{z(n,o=>{o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",n=>{z(n,o=>{const r=o.attr("data-mce-open");o.attr("open",oe(r)?r:null),o.attr("data-mce-open",null)})})},WH=e=>{VH(e),UH(e)},xB=Ur,kB=Lt,ZH=e=>ar(e.dom),TB=e=>ti(e.dom),EB=e=>n=>$s(be.fromDom(e),n),jH=(e,n)=>_l(be.fromDom(e),o=>TB(o)||ba(o),EB(n)).getOr(be.fromDom(n)).dom,GH=(e,n)=>_l(be.fromDom(e),ZH,EB(n)),_B=(e,n,o)=>{const r=new pa(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!xB(f);f=c())pi(f)&&(u=f);return u},wU=(e,n)=>{const r=gt.fromRangeStart(e).getNode(),c=jH(r,n),u=_B(r,c,!1),f=_B(r,c,!0),b=document.createRange();return GH(u,c).fold(()=>{kB(u)?b.setStart(u,0):b.setStartBefore(u)},y=>b.setStartBefore(y.dom)),GH(f,c).fold(()=>{kB(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},y=>b.setEndAfter(y.dom)),b},qH=e=>{const n=wU(e.selection.getRng(),e.getBody());e.selection.setRng(lw(n))},KH=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),qH(e))})};var Jw;(function(e){e.Before="before",e.After="after"})(Jw||(Jw={}));const YH=(e,n)=>Math.abs(e.left-n),Ul=(e,n)=>Math.abs(e.right-n),XH=(e,n)=>e>=n.top&&e<=n.bottom,JH=(e,n)=>e.top<n.bottom&&e.bottom>n.top,QH=(e,n)=>{const o=za(e,n)/Math.min(e.height,n.height);return JH(e,n)&&o>.5},e9=(e,n)=>{const o=Z(e,r=>XH(n,r));return iT(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=H(e,f=>QH(f,r));return[c,u]})},t9=(e,n)=>({node:e.node,position:YH(e,n)<Ul(e,n)?Jw.Before:Jw.After}),pk=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),J3=(e,n,o)=>{const r=N=>pi(N.node)?R.some(N):En(N.node)?J3(Oo(N.node.childNodes),n,o):R.none(),c=(N,P)=>{if(N.length>=2){const L=r(N[0]).getOr(N[0]),ce=r(N[1]).getOr(N[1]);if(Math.abs(P(L,n,o)-P(ce,n,o))<2){if(Lt(L.node))return R.some(L);if(Lt(ce.node))return R.some(ce)}}return R.none()},u=(N,P)=>{const L=Dt(N,(ce,ie)=>P(ce,n,o)-P(ie,n,o));return c(L,P).orThunk(()=>xs(L,r))},[f,b]=e9(Rx(e),o),{pass:y,fail:x}=H(b,N=>N.top<o);return u(f,pk).orThunk(()=>u(x,Z2)).orThunk(()=>u(y,Z2))},n9=(e,n,o,r)=>{const c=(u,f)=>{const b=x=>En(x)&&x.classList.contains("mce-drag-container"),y=Z(u.dom.childNodes,jt(b));return f.fold(()=>J3(y,o,r),x=>{const N=Z(y,P=>P!==x.dom);return J3(N,o,r)}).orThunk(()=>($s(u,e)?R.none():Mf(u)).bind(N=>c(N,R.some(u))))};return c(n,R.none())},AB=(e,n,o)=>{const r=be.fromDom(e),c=Vi(r),f=be.fromPoint(c,n,o).filter(b=>Ga(r,b)).getOr(r);return n9(r,f,n,o)},Q3=(e,n,o)=>AB(e,n,o).filter(r=>lg(r.node)).map(r=>t9(r,n)),bk=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},o9=e=>e.inline?bk(e.getBody()):{left:0,top:0},OB=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},s9=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},DB=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=bk(e.getContentAreaContainer()),r=s9(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},r9=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),RB=(e,n)=>r9(o9(e),OB(e),DB(e,n)),vk=32,a9=100,yk=8,cp=16,e4=ar,c9=lT(e4,ti),NB=(e,n)=>e4(n)&&n!==e,i9=(e,n,o)=>Nt(n)||n===o||e.dom.isChildOf(n,o)?!1:!e4(n),l9=e=>{const n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},u9=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},d9=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},wk=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},Qw=wk("left",-vk),t4=wk("left",vk),n4=wk("top",-vk),MB=wk("top",vk),m9=(e,n,o,r,c,u,f,b,y,x,N,P)=>{let L=0,ce=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(L=n.pageX+o-c),n.pageY+r>u&&(ce=n.pageY+r-u),e.style.width=o-L+"px",e.style.height=r-ce+"px";const ie=y.clientHeight,ee=y.clientWidth,ue=f+y.getBoundingClientRect().top,Re=b+y.getBoundingClientRect().left;N.on(Ae=>{Ae.intervalId.clear(),Ae.dragging&&P&&(f+yk>=ie?Ae.intervalId.set(MB(x)):f-yk<=0?Ae.intervalId.set(n4(x)):b+yk>=ee?Ae.intervalId.set(t4(x)):b-yk<=0?Ae.intervalId.set(Qw(x)):ue+cp>=window.innerHeight?Ae.intervalId.set(MB(window)):ue-cp<=0?Ae.intervalId.set(n4(window)):Re+cp>=window.innerWidth?Ae.intervalId.set(t4(window)):Re-cp<=0&&Ae.intervalId.set(Qw(window)))})},$B=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},CU=e=>e.button===0,f9=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),o4=(e,n)=>o=>{if(CU(o)){const r=Jt(n.dom.getParents(o.target),c9).getOr(null);if(we(r)&&NB(n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:u9(n,r,r.offsetWidth,r.offsetHeight),intervalId:sT(a9)})}}},s4=(e,n)=>{const o=ph((c,u)=>{n._selectionOverrides.hideFakeCaret(),Q3(n.getBody(),c,u).fold(()=>n.selection.placeCaretAt(c,u),f=>{const b=n._selectionOverrides.showCaret(1,f.node,f.position===Jw.Before,!1);b?n.selection.setRng(b):n.selection.placeCaretAt(c,u)})},0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){if(n.dispatch("dragstart",{target:u.element}).isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=f9(u,RB(n,c));d9(u.ghost,n.getBody()),m9(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},Ck=e=>{const n=e.getSel();if(we(n)){const r=n.getRangeAt(0).startContainer;return Lt(r)?r.parentNode:r}else return null},g9=(e,n)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(i9(n,Ck(n.selection),r.element)){const c=l9(r.element);n.dispatch("drop",{clientX:o.clientX,clientY:o.clientY}).isDefaultPrevented()||n.undoManager.transact(()=>{$B(r.element),n.insertContent(n.dom.getOuterHTML(c)),n._selectionOverrides.hideFakeCaret()})}n.dispatch("dragend")}}),r4(e)},h9=(e,n)=>()=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.dispatch("dragend")}),r4(e)},r4=e=>{e.on(n=>{n.intervalId.clear(),$B(n.ghost)}),e.clear()},p9=e=>{const n=Xm(),o=pr.DOM,r=document,c=o4(n,e),u=s4(n,e),f=g9(n,e),b=h9(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===Fn.ESC&&b()})},a4=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(ae(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&bA(e,"Dropped file type is not supported"))}},o=c=>{A0(e,c.target)&&n(c)},r=()=>{const c=pr.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];z(y,x=>{c.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{z(y,x=>{c.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{Bi.setEditorTimeout(e,r,0)})},BB=e=>{p9(e),Wp(e)&&a4(e)},b9=e=>{const n=ph(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=DA(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},PB=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Jl(o)){const r=Xh(e.getBody(),o),c=ar(r)?r:o;e.selection.getNode()!==c&&Mw(e,c).each(u=>e.selection.setRng(u))}})})},dv=ar,c4=(e,n)=>Xh(e.getBody(),n),SU=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=X1(e,r,o.isBlock,()=>vb(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=Xt=>we(Xt)&&o.hasClass(Xt,"mce-offscreen-selection"),x=Xt=>Xt!==r&&(dv(Xt)||Jl(Xt))&&o.isChildOf(Xt,r),N=Xt=>{Xt&&n.setRng(Xt)},P=(Xt,lt,Je,Sn=!0)=>e.dispatch("ShowCaret",{target:lt,direction:Xt,before:Je}).isDefaultPrevented()?null:(Sn&&n.scrollIntoView(lt,Xt===-1),c.show(Je,lt)),L=Xt=>{Xt.hasAttribute("data-mce-caret")&&(Qs(Xt),n.scrollIntoView(Xt))},ce=()=>{e.on("click",lt=>{const Je=c4(e,lt.target);Je&&dv(Je)&&(lt.preventDefault(),e.focus())}),e.on("blur NewBlock",et),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",lt=>{const Je=lt.target,Sn=c4(e,Je);dv(Sn)?(lt.preventDefault(),Mw(e,Sn).each(je)):x(Je)&&Mw(e,Je).each(je)},!0),e.on("mousedown",lt=>{const Je=lt.target;if(Je!==r&&Je.nodeName!=="HTML"&&!o.isChildOf(Je,r)||!A6(e,lt.clientX,lt.clientY))return;et(),un();const Sn=c4(e,Je);dv(Sn)?(lt.preventDefault(),Mw(e,Sn).each(je)):Q3(r,lt.clientX,lt.clientY).each(no=>{lt.preventDefault();const lo=P(1,no.node,no.position===Jw.Before,!1);N(lo),En(Sn)?Sn.focus():e.getBody().focus()})}),e.on("keypress",lt=>{Fn.modifierPressed(lt)||dv(n.getNode())&&lt.preventDefault()}),e.on("GetSelectionRange",lt=>{let Je=lt.range;if(b){if(!b.parentNode){b=null;return}Je=Je.cloneRange(),Je.selectNode(b),lt.range=Je}}),e.on("SetSelectionRange",lt=>{lt.range=ue(lt.range);const Je=je(lt.range,lt.forward);Je&&(lt.range=Je)});const Xt=lt=>En(lt)&&lt.id==="mcepastebin";e.on("AfterSetSelectionRange",lt=>{const Je=lt.range,Sn=Je.startContainer.parentElement;!ee(Je)&&!Xt(Sn)&&un(),y(Sn)||et()}),BB(e),b9(e),PB(e)},ie=Xt=>V(Xt)||jo(Xt)||cr(Xt),ee=Xt=>ie(Xt.startContainer)||ie(Xt.endContainer),ue=Xt=>{const lt=e.schema.getVoidElements(),Je=o.createRng(),Sn=Xt.startContainer,no=Xt.startOffset,lo=Xt.endContainer,Vo=Xt.endOffset;return uo(lt,Sn.nodeName.toLowerCase())?no===0?Je.setStartBefore(Sn):Je.setStartAfter(Sn):Je.setStart(Sn,no),uo(lt,lo.nodeName.toLowerCase())?Vo===0?Je.setEndBefore(lo):Je.setEndAfter(lo):Je.setEnd(lo,Vo),Je},Re=(Xt,lt)=>{const Je=be.fromDom(e.getBody()),Sn=e.getDoc(),no=Hf(Je,"#"+u).getOrThunk(()=>{const bs=be.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Sn);return nr(bs,"id",u),Qr(Je,bs),bs}),lo=o.createRng();Lr(no),Bo(no,[be.fromText(ra,Sn),be.fromDom(lt),be.fromText(ra,Sn)]),lo.setStart(no.dom.firstChild,1),lo.setEnd(no.dom.lastChild,0),Se(no,{top:o.getPos(Xt,e.getBody()).y+"px"}),vt(no);const Vo=n.getSel();return Vo&&(Vo.removeAllRanges(),Vo.addRange(lo)),lo},Ae=Xt=>{const lt=Xt.cloneNode(!0),Je=e.dispatch("ObjectSelected",{target:Xt,targetClone:lt});if(Je.isDefaultPrevented())return null;const Sn=Re(Xt,Je.targetClone),no=be.fromDom(Xt);return z(Rs(be.fromDom(e.getBody()),`*[${f}]`),lo=>{$s(no,lo)||Gr(lo,f)}),o.getAttrib(Xt,f)||Xt.setAttribute(f,"1"),b=Xt,un(),Sn},je=(Xt,lt)=>{if(!Xt)return null;if(Xt.collapsed){if(!ee(Xt)){const lo=lt?1:-1,Vo=Kp(lo,r,Xt),bs=Vo.getNode(!lt);if(we(bs)){if(lg(bs))return P(lo,bs,lt?!Vo.isAtEnd():!1,!1);if(I(bs)&&ar(bs.nextSibling)){const Ws=o.createRng();return Ws.setStart(bs,0),Ws.setEnd(bs,0),Ws}}const js=Vo.getNode(lt);if(we(js)){if(lg(js))return P(lo,js,lt?!1:!Vo.isAtEnd(),!1);if(I(js)&&ar(js.previousSibling)){const Ws=o.createRng();return Ws.setStart(js,1),Ws.setEnd(js,1),Ws}}}return null}let Je=Xt.startContainer,Sn=Xt.startOffset;const no=Xt.endOffset;if(Lt(Je)&&Sn===0&&dv(Je.parentNode)&&(Je=Je.parentNode,Sn=o.nodeIndex(Je),Je=Je.parentNode),!En(Je))return null;if(no===Sn+1&&Je===Xt.endContainer){const lo=Je.childNodes[Sn];if(x(lo))return Ae(lo)}return null},et=()=>{b&&b.removeAttribute(f),Hf(be.fromDom(e.getBody()),"#"+u).each(Bs),b=null},xt=()=>{c.destroy(),b=null},un=()=>{c.hide()};return kf(e)||ce(),{showCaret:P,showBlockCaretContainer:L,hideFakeCaret:un,destroy:xt}},v9=(e,n)=>{let o=n;for(let r=e.previousSibling;Lt(r);r=r.previousSibling)o+=r.data.length;return o},FB=(e,n,o,r,c)=>{if(Lt(o)&&(r<0||r>o.data.length))return[];const u=c&&Lt(o)?[v9(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},i4=(e,n,o,r,c,u,f=!1)=>{const b=FB(e,n,o,r,f),y=FB(e,n,c,u,f);return{start:b,end:y}},l4=(e,n)=>{const o=n.slice(),r=o.pop();return ct(r)?Be(o,(u,f)=>u.bind(b=>R.from(b.childNodes[f])),R.some(e)).bind(u=>Lt(u)&&(r<0||r>u.data.length)?R.none():R.some({node:u,offset:r})):R.none()},IB=(e,n)=>l4(e,n.start).bind(({node:o,offset:r})=>l4(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),LB=(e,n,o,r=!1)=>i4(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),mv=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),mv(e,r,o)}},Sk=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Lt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Lt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),mv(e,c,o),c!==u&&mv(e,u,o))},u4=(e,n)=>R.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),HB=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Tc(r).concat(e.blockPatterns),inlinePatterns:Ec(r).concat(e.inlinePatterns)}},zB=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},d4=(e,n,o)=>{o$(n,0,n).each(c=>{const u=c.container;s$(u,o.start.length,n).each(f=>{const b=e.createRng();b.setStart(u,0),b.setEnd(f.container,f.offset),Sk(e,b,y=>y===n)})})},xU=(e,n)=>{const o=e.dom,r=n.pattern,c=IB(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const y=b.get(f);return wt(y)&&wn(y).exists(x=>uo(x,"block"))};return u4(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{d4(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{d4(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},y9=e=>Dt(e,(n,o)=>o.start.length-n.start.length),VB=(e,n)=>{const o=y9(e),r=n.replace(ra," ");return Jt(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},w9=(e,n,o,r)=>{var c;const u=e.dom,f=bl(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return VB(o.blockPatterns,b).map(y=>_t.trim(b).length===y.start.length?[]:[{pattern:y,range:i4(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},m4=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();z(n,r=>xU(e,r)),e.selection.moveToBookmark(o)},UB=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),xk=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},WB=(e,n,o)=>{const r=IB(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(UB(e,n+"-end"),f),start:y.insertBefore(UB(e,n+"-start"),b)}},f4=(e,n,o)=>{mv(e,e.get(n.prefix+"-end"),o),mv(e,e.get(n.prefix+"-start"),o)},fv=e=>e.start.length===0,ZB=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},g4=(e,n,o,r)=>{const c=n.start;return m3(e,r.container,r.offset,ZB(c),o).bind(f=>{var b,y;const x=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(x!==-1&&f.offset>=x+c.length){const P=e.createRng();return P.setStart(f.container,f.offset-c.length),P.setEnd(f.container,f.offset),R.some(P)}else{const P=f.offset-c.length;return d3(f.container,P,o).map(L=>{const ce=e.createRng();return ce.setStart(L.container,L.offset),ce.setEnd(f.container,f.offset),ce}).filter(L=>L.toString()===c).orThunk(()=>g4(e,n,o,Rd(f.container,0)))}})},C9=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),R.some(f)}return jx(o,r,c).bind(f=>g4(e,n,c,f).bind(y=>{var x;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return R.none();if(f.offset===0&&((x=y.endContainer.textContent)===null||x===void 0?void 0:x.length)===y.endOffset)return R.none()}return R.some(y)}))},S9=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return d3(b,y-o.pattern.end.length,n).bind(x=>{const N=i4(c,u,x.container,x.offset,b,y,r);if(fv(f))return R.some({matches:[{pattern:f,startRng:N,endRng:N}],position:x});{const P=e2(e,o.remainingPatterns,x.container,x.offset,n,r),L=P.getOr({matches:[],position:x}),ce=L.position;return C9(c,f,ce.container,ce.offset,n,P.isNone()).map(ee=>{const ue=LB(c,u,ee,r);return{matches:L.matches.concat([{pattern:f,startRng:ue,endRng:N}]),position:Rd(ee.startContainer,ee.startOffset)}})}})},e2=(e,n,o,r,c,u)=>{const f=e.dom;return jx(o,r,f.getRoot()).bind(b=>{const y=zB(f,c,o,r);for(let x=0;x<n.length;x++){const N=n[x];if(!As(y,N.end))continue;const P=n.slice();P.splice(x,1);const L=S9(e,c,{pattern:N,remainingPatterns:P,position:b},u);if(L.isNone()&&r>0)return e2(e,n,o,r-1,c,u);if(L.isSome())return L}return R.none()})},jB=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?z(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},x9=(e,n,o,r)=>{const c=xk(e.dom,o);Sk(e.dom,c,r),jB(e,n,c)},k9=(e,n,o,r,c)=>{const u=e.dom,f=xk(u,r),b=xk(u,o);Sk(u,b,c),Sk(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},x=xk(u,y);jB(e,n,x)},h4=(e,n)=>{const o=I2("mce_textpattern"),r=$e(n,(c,u)=>{const f=WB(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return $e(r,(c,u)=>{const f=r.length-c.length-1,b=fv(u.pattern)?u.endMarker:WB(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},T9=e=>Dt(e,(n,o)=>o.end.length-n.end.length),E9=(e,n)=>{const o=pn(e,r=>se(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},GB=(e,n,o,r,c,u)=>{const f=e2(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=e2(e,T9(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return E9(f,b)},qB=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=h4(o,n);z(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;fv(u.pattern)?x9(e,u.pattern,u.endMarker,b):k9(e,u.pattern,u.startMarker,u.endMarker,b),f4(o,u.endMarker,b),f4(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},_9=(e,n)=>{const o=e.selection.getRng();return u4(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=HB(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=GB(e,r,o.startContainer,u,f,!0),y=w9(e,r,f,!0);return y.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Vm),qB(e,b),m4(e,y);const x=e.selection.getRng(),N=jx(x.startContainer,x.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),N.each(P=>{const L=P.container;L.data.charAt(P.offset-1)===Vm&&(L.deleteData(P.offset-1,1),mv(e.dom,L.parentNode,ce=>ce===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},A9=(e,n)=>{const o=e.selection.getRng();u4(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=zB(e.dom,r,o.startContainer,c),f=HB(n,r,u),b=GB(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{qB(e,b)})})},p4=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},KB=(e,n)=>p4(e,n,(o,r)=>o===r.keyCode&&!Fn.modifierPressed(r)),b4=(e,n)=>p4(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),v4=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>si(ig(e),af(e)),c=()=>IT(e);e.on("keydown",f=>{if(f.keyCode===13&&!Fn.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&_9(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&A9(e,f)}};e.on("keyup",f=>{KB(o,f)&&u()}),e.on("keypress",f=>{b4(n,f)&&Bi.setEditorTimeout(e,u)})},O9=e=>{v4(e)},y4=e=>{const n=_t.each,o=Fn.BACKSPACE,r=Fn.DELETE,c=e.dom,u=e.selection,f=e.parser,b=ls.browser,y=b.isFirefox(),x=b.isChromium()||b.isSafari(),N=ls.deviceType.isiPhone()||ls.deviceType.isiPad(),P=ls.os.isMacOS()||ls.os.isiOS(),L=(Cn,Ao)=>{try{e.getDoc().execCommand(Cn,!1,String(Ao))}catch{}},ce=Cn=>Cn.isDefaultPrevented(),ie=()=>{const Cn=wo=>{const hn=c.create("body"),fs=wo.cloneContents();return hn.appendChild(fs),u.serializer.serialize(hn,{format:"html"})},Ao=wo=>{const hn=Cn(wo),fs=c.createRng();fs.selectNode(e.getBody());const rs=Cn(fs);return hn===rs};e.on("keydown",wo=>{const hn=wo.keyCode;if(!ce(wo)&&(hn===r||hn===o)){const fs=e.selection.isCollapsed(),rs=e.getBody();if(fs&&!c.isEmpty(rs)||!fs&&!Ao(e.selection.getRng()))return;wo.preventDefault(),e.setContent(""),rs.firstChild&&c.isBlock(rs.firstChild)?e.selection.setCursorLocation(rs.firstChild,0):e.selection.setCursorLocation(rs,0),e.nodeChanged()}})},ee=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ue=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Cn=>{let Ao;if(Cn.target===e.getDoc().documentElement)if(Ao=u.getRng(),e.getBody().focus(),Cn.type==="mousedown"){if(V(Ao.startContainer))return;u.placeCaretAt(Cn.clientX,Cn.clientY)}else u.setRng(Ao)})},Re=()=>{e.on("keydown",Cn=>{if(!ce(Cn)&&Cn.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Ao=u.getNode(),wo=Ao.previousSibling;if(Ao.nodeName==="HR"){c.remove(Ao),Cn.preventDefault();return}wo&&wo.nodeName&&wo.nodeName.toLowerCase()==="hr"&&(c.remove(wo),Cn.preventDefault())}}})},Ae=()=>{Range.prototype.getClientRects||e.on("mousedown",Cn=>{if(!ce(Cn)&&Cn.target.nodeName==="HTML"){const Ao=e.getBody();Ao.blur(),Bi.setEditorTimeout(e,()=>{Ao.focus()})}})},je=()=>{const Cn=rf(e);e.on("click",Ao=>{const wo=Ao.target;/^(IMG|HR)$/.test(wo.nodeName)&&c.getContentEditableParent(wo)!=="false"&&(Ao.preventDefault(),e.selection.select(wo),e.nodeChanged()),wo.nodeName==="A"&&c.hasClass(wo,Cn)&&wo.childNodes.length===0&&(Ao.preventDefault(),u.select(wo))})},et=()=>{const Cn=()=>{const wo=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const hn=u.getStart();hn!==e.getBody()&&(c.setAttrib(hn,"style",null),n(wo,fs=>{hn.setAttributeNode(fs.cloneNode(!0))}))}},Ao=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",wo=>{let hn;return!ce(wo)&&(wo.keyCode===8||wo.keyCode===46)&&Ao()?(hn=Cn(),e.getDoc().execCommand("delete",!1),hn(),wo.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",wo=>{if(!ce(wo)&&Ao()){const hn=Cn();Bi.setEditorTimeout(e,()=>{hn()})}})},xt=()=>{e.on("keydown",Cn=>{if(!ce(Cn)&&Cn.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Ao=u.getNode().previousSibling;if(Ao&&Ao.nodeName&&Ao.nodeName.toLowerCase()==="table")return Cn.preventDefault(),!1}return!0})},un=()=>{e.on("keydown",Cn=>{if(ce(Cn)||Cn.keyCode!==Fn.BACKSPACE)return;let Ao=u.getRng();const wo=Ao.startContainer,hn=Ao.startOffset,fs=c.getRoot();let rs=wo;if(!(!Ao.collapsed||hn!==0)){for(;rs.parentNode&&rs.parentNode.firstChild===rs&&rs.parentNode!==fs;)rs=rs.parentNode;rs.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,rs),Ao=c.createRng(),Ao.setStart(wo,0),Ao.setEnd(wo,0),u.setRng(Ao))}})},Xt=()=>{const Cn=()=>{L("StyleWithCSS",!1),L("enableInlineTableEditing",!1),Gv(e)||L("enableObjectResizing",!1)};Qv(e)||e.on("BeforeExecCommand mousedown",Cn)},lt=()=>{const Cn=()=>{n(c.select("a:not([data-mce-block])"),Ao=>{var wo;let hn=Ao.parentNode;const fs=c.getRoot();if((hn==null?void 0:hn.lastChild)===Ao){for(;hn&&!c.isBlock(hn);){if(((wo=hn.parentNode)===null||wo===void 0?void 0:wo.lastChild)!==hn||hn===fs)return;hn=hn.parentNode}c.add(hn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ao=>{(Ao.type==="setcontent"||Ao.command==="mceInsertLink")&&Cn()})},Je=()=>{e.on("init",()=>{L("DefaultParagraphSeparator",bl(e))})},Sn=Cn=>{const Ao=Cn.getBody(),wo=Cn.selection.getRng();return wo.startContainer===wo.endContainer&&wo.startContainer===Ao&&wo.startOffset===0&&wo.endOffset===Ao.childNodes.length},no=()=>{e.on("keyup focusin mouseup",Cn=>{!Fn.modifierPressed(Cn)&&!Sn(e)&&u.normalize()},!0)},lo=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Vo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},bs=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Cn=>{let Ao;Cn.target.nodeName==="HTML"&&(Ao=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ao),e.selection.normalize(),e.nodeChanged())}))},js=()=>{P&&e.on("keydown",Cn=>{Fn.metaKeyPressed(Cn)&&!Cn.shiftKey&&(Cn.keyCode===37||Cn.keyCode===39)&&(Cn.preventDefault(),e.selection.getSel().modify("move",Cn.keyCode===37?"backward":"forward","lineboundary"))})},Ws=()=>{e.on("click",Cn=>{let Ao=Cn.target;do if(Ao.tagName==="A"){Cn.preventDefault();return}while(Ao=Ao.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ma=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Cn=>{Cn.preventDefault()})})},Si=()=>{f.addNodeFilter("br",Cn=>{let Ao=Cn.length;for(;Ao--;)Cn[Ao].attr("class")==="Apple-interchange-newline"&&Cn[Ao].remove()})},Gt=Ne,Uo=()=>{if(!y||e.removed)return!1;const Cn=e.selection.getSel();return!Cn||!Cn.rangeCount||Cn.rangeCount===0},go=()=>{x&&(ue(),je(),Ma(),ee(),N&&(Vo(),bs(),Ws())),y&&(Ae(),Xt(),lo(),js())},Or=()=>{un(),ie(),ls.windowsPhone||no(),x&&(ue(),je(),Je(),Ma(),xt(),Si(),N?(Vo(),bs(),Ws()):ee()),y&&(Re(),Ae(),et(),Xt(),lt(),lo(),js(),xt())};return kf(e)?go():Or(),{refreshContentEditable:Gt,isHidden:Uo}},w4=pr.DOM,D9=(e,n)=>{const o=be.fromDom(e.getBody()),r=ad(ol(o)),c=be.fromTag("style");nr(c,"type","text/css"),Qr(c,be.fromText(n)),Qr(r,c),e.on("remove",()=>{Bs(c)})},R9=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,C4=e=>ps(e,n=>On(n)===!1),YB=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return C4({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),remove_trailing_brs:n("remove_trailing_brs"),inline_styles:n("inline_styles"),root_name:R9(e),validate:!0,blob_cache:o,document:e.getDoc()})},XB=e=>{const n=e.options.get;return C4({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},N9=e=>{const n=e.options.get;return{...YB(e),...XB(e),...C4({url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},JB=e=>{const n=iu(YB(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),oy(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Ji("br",1))}}),n},M9=e=>{const n=mC(e);n&&Bi.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},$9=e=>{const n=e.dom.getRoot();!e.inline&&(!ds(e)||e.selection.getStart(!0)===n)&&Mi(n).each(o=>{const r=o.getNode(),c=Ka(r)?Mi(r).getOr(o):o;e.selection.setRng(c.toRange())})},B9=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Hu(e),e.focus(!0),$9(e),e.nodeChanged({initial:!0});const n=NT(e);Q(n)&&n.call(e,e),M9(e)},QB=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,P9=(e,n,o)=>{const r=[QB(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},eP=e=>{const n=QB(e),o=sf(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";_t.each(e.contentStyles,x=>{y+=x+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(P9(e,r,o)).then(u).catch(u),b=iC(e);return b&&D9(e,b),f},F9=e=>{const n=e.getDoc(),o=e.getBody();b0(e),ty(e)||(n.body.spellcheck=!1,w4.setAttrib(o,"spellcheck","false")),e.quirks=y4(e),Wc(e);const r=W1(e);r!==void 0&&(o.dir=r);const c=$T(e);c&&e.on("BeforeSetContent",u=>{_t.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},tP=e=>{kf(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},S4=e=>{e.removed!==!0&&(tP(e),B9(e))},kk=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(w4.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Qv(e),e.readonly||(e.inline&&w4.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=ON(e),e.schema=Nu(XB(e)),e.dom=pr(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Ki(e),referrerPolicy:Ml(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=JB(e),e.serializer=op(N9(e),e),e.selection=g6(e.dom,e.getWin(),e.serializer,e),e.annotator=ZC(e),e.formatter=RN(e),e.undoManager=MN(e),e._nodeChangeDispatcher=new uk(e),e._selectionOverrides=SU(e),nL(e),WH(e),Ix(e),kf(e)||(KH(e),O9(e));const c=eB(e);_M(e,c),t3(e),Z6(e),zH(e);const u=ZI(e);F9(e),u.fold(()=>{eP(e).then(()=>S4(e))},f=>{e.setProgressState(!0),eP(e).then(()=>{f().then(b=>{e.setProgressState(!1),S4(e),mA(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),S4(e),mA(e)})})})},nP=(e,n)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!n&&!e.inline){const o=e.iframeElement,r=vA(be.fromDom(o),"load",()=>{r.unbind(),e.contentDocument=o.contentDocument,kk(e)});if(ls.browser.isFirefox()){const c=e.getDoc();c.open(),c.write(e.iframeHTML),c.close()}else o.srcdoc=e.iframeHTML}else kk(e)},x4=pr.DOM,I9=(e,n,o,r)=>{const c=be.fromTag("iframe");return r.each(u=>nr(c,"tabindex",u)),Ds(c,o),Ds(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),wu(c,"tox-edit-area__iframe"),c},L9=e=>{let n=W4(e)+"<html><head>";oC(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=vT(e),r=yT(e),c=e.translate(DT(e));return V1(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+V1(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},H9=(e,n)=>{const o=e.translate("Rich Text Area"),r=yc(be.fromDom(e.getElement()),"tabindex").bind(Rr),c=I9(e.id,o,bT(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=L9(e),x4.add(n.iframeContainer,c)},z9=(e,n)=>{H9(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=x4.isHidden(n.editorContainer)),e.getElement().style.display="none",x4.setAttrib(e.id,"aria-hidden","true"),nP(e)},t2=pr.DOM,V9=(e,n,o)=>{const r=Q0.get(o),c=Q0.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=_t.trim(o),r&&_t.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,Q(u.init)&&(u.init(e,c),n.push(o))}catch(u){Mb(e,o,u)}}},U9=e=>e.replace(/^\-/,""),W9=e=>{const n=[];z(Up(e),o=>{V9(e,n,U9(o))})},Z9=e=>{const n=_t.trim(Nl(e)),o=e.ui.registry.getAll().icons,r={...pA.get("default").icons,...pA.get(n).icons};en(r,(c,u)=>{uo(o,u)||e.ui.registry.addIcon(u,c)})},j9=e=>{const n=og(e);if(oe(n)){const o=Db.get(n);e.theme=o(e,Db.urls[n])||{},Q(e.theme.init)&&e.theme.init(e,Db.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},G9=e=>{const n=Z1(e),o=X0.get(n);e.model=o(e,X0.urls[n])},q9=e=>{const n=e.theme.renderUI;return n?n():rP(e)},K9=e=>{const n=e.getElement(),r=og(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},oP=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),sP=e=>{const n=t2.create("div");return t2.insertAfter(n,e),oP(n,n)},rP=e=>{const n=e.getElement();return e.inline?oP(null):sP(n)},aP=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,oe(og(e))?q9(e):Q(og(e))?K9(e):rP(e)},Y9=(e,n)=>{const o={show:R.from(n.show).getOr(Ne),hide:R.from(n.hide).getOr(Ne),isEnabled:R.from(n.isEnabled).getOr(Ve),setEnabled:r=>{e.mode.isReadOnly()||R.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},X9=e=>{e.dispatch("ScriptsLoaded"),Z9(e),j9(e),G9(e),W9(e);const n=aP(e);Y9(e,R.from(n.api).getOr({})),e.editorContainer=n.editorContainer,fx(e),e.inline?nP(e):z9(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},ip=pr.DOM,gv=e=>e.charAt(0)==="-",J9=(e,n)=>{const o=U1(n),r=Pu(n);if(!zc.hasCode(o)&&o!=="en"){const c=ws(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{B6(n,c,o)})}},cP=(e,n)=>{const o=og(e);if(oe(o)&&!gv(o)&&!uo(Db.urls,o)){const r=zp(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Db.load(o,c).catch(()=>{P6(e,c,o)})}},Q9=(e,n)=>{const o=Z1(e);if(o!=="plugin"&&!uo(X0.urls,o)){const r=Kv(e),c=oe(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;X0.load(o,c).catch(()=>{Nb(e,c,o)})}},ez=e=>R.from(Z4(e)).filter(ws).map(n=>({url:n,name:R.none()})),iP=(e,n,o)=>R.from(n).filter(r=>ws(r)&&!pA.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:R.some(r)})),tz=(e,n,o)=>{const r=iP(n,"default",o),c=ez(n).orThunk(()=>iP(n,Nl(n),""));z(Js([r,c]),u=>{e.add(u.url).catch(()=>{$6(n,u.url,u.name.getOrUndefined())})})},lP=(e,n)=>{const o=(r,c)=>{Q0.load(r,c).catch(()=>{M6(e,c,r)})};en(j1(e),(r,c)=>{o(c,r),e.options.set("plugins",Up(e).concat(c))}),z(Up(e),r=>{r=_t.trim(r),r&&!Q0.urls[r]&&!gv(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},nz=e=>{const n=og(e);return!oe(n)||we(Db.get(n))},uP=e=>{const n=Z1(e);return we(X0.get(n))},oz=(e,n)=>{const o=pd.ScriptLoader,r=()=>{!e.removed&&nz(e)&&uP(e)&&X9(e)};cP(e,n),Q9(e,n),J9(o,e),tz(o,e,n),lP(e,n),o.loadQueue().then(r,r)},sz=(e,n)=>kp.forElement(e,{contentCssCors:ey(n),referrerPolicy:Ml(n)}),rz=e=>{const n=e.id;zc.setCode(U1(e));const o=()=>{ip.unbind(window,"ready",o),e.render()};if(!Yd.Event.domLoaded){ip.bind(window,"ready",o);return}if(!e.getElement())return;const r=be.fromDom(e.getElement()),c=vu(r);e.on("remove",()=>{K(r.dom.attributes,f=>Gr(r,f.name)),Ds(r,c)}),e.ui.styleSheetLoader=sz(r,e),Yv(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||ip.getParent(n,"form");u&&(e.formElement=u,Xv(e)&&!Qc(e.getElement())&&(ip.insertAfter(ip.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},ip.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),OT(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=CN(e),e.notificationManager=wN(e),LT(e)&&e.on("GetContent",f=>{f.save&&(f.content=ip.encode(f.content))}),ag(e)&&e.on("submit",()=>{e.initialized&&e.save()}),zr(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),oz(e,e.suffix)},az=(e,n)=>({sections:ge(e),options:ge(n)}),dP=Mr().deviceType,mP=dP.isPhone(),cz=dP.isTablet(),n2=e=>{if(Nt(e))return[];{const n=wt(e)?e:e.split(/[ ,]/),o=re(n,Go);return Z(o,ws)}},iz=(e,n)=>{const o=da(n,(r,c)=>ae(e,c));return az(o.t,o.f)},fP=(e,n,o={})=>{const r=e.sections(),c=as(r,n).getOr({});return _t.extend({},o,c)},o2=(e,n)=>uo(e.sections(),n),gP=(e,n)=>o2(e,n)?e.sections()[n]:{},hP=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:as(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),lz=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?_t.extend({},e.external_plugins,r):r},uz=(e,n)=>[...n2(e),...n2(n)],dz=(e,n,o,r)=>e&&o2(n,"mobile")?r:o,pP=(e,n,o,r)=>{const c=n2(o.forced_plugins),u=n2(r.plugins),f=gP(n,"mobile"),b=f.plugins?n2(f.plugins):u,y=dz(e,n,u,b),x=uz(c,y);return _t.extend(r,{forced_plugins:c,plugins:x})},bP=(e,n)=>e&&o2(n,"mobile"),mz=(e,n,o,r,c)=>{var u;const f=e?{mobile:hP((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=iz(["mobile"],Kx(f,c)),y=_t.extend(o,r,b.options(),bP(e,b)?fP(b,"mobile"):{},{external_plugins:lz(r,b.options())});return pP(e,b,r,y)},fz=(e,n)=>mz(mP||cz,mP,n,e,n),k4=(e,n)=>rN(e,n),Tk=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{z("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},Ek=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return se(c,u=>we(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},Bg=e=>{Tk(e),Ek(e)},_k=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ls.os.isMacOS()||ls.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:c,type:"error"})}}})},hv=(e,n,o)=>{const r=be.fromDom(e.getRoot());return Xy(r,gt.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),R0(r,gt.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},vP=e=>{if(typeof e!="string"){const n=_t.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},gz=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?hv(r,o.getRng(),n):n},Ak=(e,n)=>{const{content:o,details:r}=vP(n);Ob(e,{...r,content:gz(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=r6(e,c.content,r);Y_(e,u,c),e.addVisual()})},yP=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Ak(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Ak(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Ak(e,r)},mceInsertContent:(n,o,r)=>{Ak(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},hz={"font-size":"size","font-family":"face"},T4=zi("font"),Ok=(e,n,o)=>{const r=u=>yo(u,e).orThunk(()=>T4(u)?as(hz,e).bind(f=>yc(u,f)):R.none()),c=u=>$s(be.fromDom(n),u);return PS(be.fromDom(o),u=>r(u),c)},lp=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),jb=(e,n)=>R.from(pr.DOM.getStyle(n,e,!0)),E4=e=>(n,o)=>R.from(o).map(be.fromDom).filter(Jo).bind(r=>Ok(e,n,r.dom).or(jb(e,r.dom))).getOr(""),pz=E4("font-size"),bz=Ot(lp,E4("font-family")),vz=e=>Mi(e.getBody()).bind(n=>{const o=n.container();return R.from(Lt(o)?o.parentNode:o)}),yz=e=>R.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?R.none():R.from(e.selection.getStart(!0))}),wz=(e,n)=>yz(e).orThunk(_e(vz,e)).map(be.fromDom).filter(Jo).bind(n),_4=(e,n)=>wz(e,_(R.some,n)),A4=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=cf(e),c=q1(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},Cz=e=>{const n=e.split(/\s*,\s*/);return re(n,o=>o.indexOf(" ")!==-1&&!(vo(o,'"')||vo(o,"'"))?`'${o}'`:o).join(",")},Sz=(e,n)=>{const o=A4(e,n);e.formatter.toggle("fontname",{value:Cz(o)}),e.nodeChanged()},xz=e=>_4(e,n=>bz(e.getBody(),n.dom)).getOr(""),kU=(e,n)=>{e.formatter.toggle("fontsize",{value:A4(e,n)}),e.nodeChanged()},kz=e=>_4(e,n=>pz(e.getBody(),n.dom)).getOr(""),O4=e=>_4(e,n=>{const o=be.fromDom(e.getBody()),r=PS(n,u=>yo(u,"line-height"),_e($s,o)),c=()=>{const u=parseFloat(He(n,"line-height")),f=parseFloat(He(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),Tz=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Ez=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{Sz(e,c)},FontSize:(o,r,c)=>{kU(e,c)},LineHeight:(o,r,c)=>{Tz(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(oe(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},wP=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>xz(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>kz(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>O4(e))},_z=e=>{Ez(e),wP(e)},CP=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Az=e=>{e.editorCommands.addCommands({Indent:()=>{Q8(e)},Outdent:()=>{xM(e)}}),e.editorCommands.addCommands({Outdent:()=>YA(e)},"state")},D4=e=>{const n=(o,r,c)=>{const u=oe(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");bt(u)&&oe(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")},mceInsertLink:n,createLink:n})},Oz=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},Dz=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},Rz=e=>{Oz(e),Dz(e)},Nz=e=>{e.editorCommands.addCommands({insertParagraph:()=>{ik(H7,e)},mceInsertNewLine:(n,o,r)=>{lk(e,r)},InsertLineBreak:(n,o,r)=>{ik(H$,e)}})},SP=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>En(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),ti);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},R4=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r!=null?r:e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{dO(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},xP=e=>{Bg(e),_k(e),CP(e),SP(e),yP(e),D4(e),Az(e),Nz(e),Rz(e),_z(e),R4(e)},N4=["toggleview"],kP=e=>ae(N4,e.toLowerCase());class Mz{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():Rc(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return Q(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!kP(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return Q(r)?r(o):!1}queryCommandValue(n){if(!kP(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return Q(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;en(n,(c,u)=>{z(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r!=null?r:this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}}const pv="data-mce-contenteditable",$z=(e,n,o)=>{Fd(e,n)&&!o?Gl(e,n):o&&wu(e,n)},Dk=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Rk=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Bz=e=>{z(Rs(e,'*[contenteditable="true"]'),n=>{nr(n,pv,"true"),Rk(n,!1)})},Pz=e=>{z(Rs(e,`*[${pv}="true"]`),n=>{Gr(n,pv),Rk(n,!0)})},TU=e=>{R.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},EU=e=>{e.selection.setRng(e.selection.getRng())},TP=(e,n)=>{const o=be.fromDom(e.getBody());$z(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),TU(e),e.readonly=!0,Rk(o,!1),Bz(o)):(e.readonly=!1,Rk(o,!0),Pz(o),Dk(e,"StyleWithCSS",!1),Dk(e,"enableInlineTableEditing",!1),Dk(e,"enableObjectResizing",!1),NE(e)&&e.focus(),EU(e),e.nodeChanged())},up=e=>e.readonly,EP=e=>{e.parser.addAttributeFilter("contenteditable",n=>{up(e)&&z(n,o=>{o.attr(pv,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(pv,n=>{up(e)&&z(n,o=>{o.attr("contenteditable",o.attr(pv))})}),e.serializer.addTempAttr(pv)},Fz=e=>{e.serializer?EP(e):e.on("PreInit",()=>{EP(e)})},Iz=e=>e.type==="click",_U=["copy"],AU=e=>ae(_U,e.type),OU=(e,n)=>ld(n,"a",r=>$s(r,be.fromDom(e.getBody()))).bind(r=>yc(r,"href")),Lz=(e,n)=>{if(Iz(n)&&!Fn.metaKeyPressed(n)){const o=be.fromDom(n.target);OU(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Mn(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else AU(n)&&e.dispatch(n.type,n)},DU=e=>{e.on("ShowCaret",n=>{up(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{up(e)&&n.preventDefault()})},Hz=_t.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Pg{constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Et}static isNative(n){return!!Hz[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=mh(r,o!=null?o:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Et),o){const u={func:o,removed:!1};c&&_t.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let x=this.bindings[y];x||(x=[],this.toggleEvent(y,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[y]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return en(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=H(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,z(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else en(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const Gb=e=>(e._eventDispatcher||(e._eventDispatcher=new Pg({scope:e,toggleEvent:(n,o)=>{Pg.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),bv={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return mh(e.toLowerCase(),n!=null?n:{},r);const c=Gb(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return Gb(this).on(e,n,o)},off(e,n){return Gb(this).off(e,n)},once(e,n){return Gb(this).once(e,n)},hasEventListeners(e){return Gb(this).has(e)}},s2=pr.DOM;let dp;const r2=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(n))return e.getDoc().documentElement;const o=qv(e);return o?(e.eventRoot||(e.eventRoot=s2.select(o)[0]),e.eventRoot):e.getBody()},zz=e=>!e.hidden&&!up(e),_P=(e,n,o)=>{zz(e)?e.dispatch(n,o):up(e)&&Lz(e,o)},AP=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=r2(e,n);if(qv(e)){if(dp||(dp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||dp&&(en(dp,(c,u)=>{e.dom.unbind(r2(e,u))}),dp=null)})),dp[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||s2.isChildOf(u,y))&&_P(f[b],n,c)}};dp[n]=r,s2.bind(o,n,r)}else{const r=c=>{_P(e,n,c)};s2.bind(o,n,r),e.delegates[n]=r}},OP={...bv,bindPendingEventDelegates(){const e=this;_t.each(e._pendingNativeEvents,n=>{AP(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?AP(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(r2(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(en(e.delegates,(r,c)=>{e.dom.unbind(r2(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},qb=e=>oe(e)?{value:e.split(/[ ,]/),valid:!0}:Pe(e,oe)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Vz=e=>{const n=(()=>{switch(e){case"array":return wt;case"boolean":return At;case"function":return Q;case"number":return ct;case"object":return bt;case"string":return oe;case"string[]":return qb;case"object[]":return o=>Pe(o,bt);case"regexp":return o=>Oe(o,RegExp);default:return Ve}})();return o=>M4(o,n,`The value must be a ${e}.`)},DP=e=>oe(e.processor),RP=(e,n)=>{const o=Ss(n.message)?"":`. ${n.message}`;return e+o},a2=e=>e.valid,M4=(e,n,o="")=>{const r=n(e);return At(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Uz=(e,n,o)=>{if(!On(n)){const r=M4(n,o);if(a2(r))return r.value;console.error(RP(`Invalid default value passed for the "${e}" option`,r))}},Wz=(e,n)=>{const o={},r={},c=(P,L,ce)=>{const ie=M4(L,ce);return a2(ie)?(r[P]=ie.value,!0):(console.warn(RP(`Invalid value passed for the ${P} option`,ie)),!1)},u=(P,L)=>{const ce=DP(L)?Vz(L.processor):L.processor,ie=Uz(P,L.default,ce);o[P]={...L,default:ie,processor:ce},as(r,P).orThunk(()=>as(n,P)).each(ue=>c(P,ue,ce))},f=P=>uo(o,P);return{register:u,isRegistered:f,get:P=>as(r,P).orThunk(()=>as(o,P).map(L=>L.default)).getOrUndefined(),set:(P,L)=>{if(f(P)){const ce=o[P];return ce.immutable?(console.error(`"${P}" is an immutable option and cannot be updated`),!1):c(P,L,ce.processor)}else return console.warn(`"${P}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:P=>{const L=f(P);return L&&delete r[P],L},isSet:P=>uo(r,P)}},NP=["design","readonly"],MP=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&TP(e,u.editorReadOnly),n.set(r),jC(e,r)},Zz=(e,n,o,r)=>{if(r!==o.get()){if(!uo(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?MP(e,o,n,r):e.on("init",()=>MP(e,o,n,r))}},jz=(e,n,o)=>{if(ae(NP,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Gz=e=>{const n=uc("design"),o=uc({design:{activate:Ne,deactivate:Ne,editorReadOnly:!1},readonly:{activate:Ne,deactivate:Ne,editorReadOnly:!0}});return Fz(e),DU(e),{isReadOnly:()=>up(e),set:r=>Zz(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(jz(o.get(),r,c))}}},c2=_t.each,$4=_t.explode,qz={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Za=_t.makeMap("alt,ctrl,shift,meta,access"),Kz=e=>e in Za,Yz=e=>{const n={},o=ls.os.isMacOS()||ls.os.isiOS();c2($4(e.toLowerCase(),"+"),u=>{Kz(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=qz[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in Za)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class B4{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(c2(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return c2($4(_t.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:_t.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=_t.map($4(n,">"),Yz);return u[u.length-1]=_t.extend(u[u.length-1],{func:r,scope:c||this.editor}),_t.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const $P=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(N,P)=>(L,ce)=>{N[L.toLowerCase()]={...ce,type:P}},x=(N,P)=>r[N.toLowerCase()]=P;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:x,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},P4=()=>{const e=$P();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Kb=pr.DOM,BP=_t.extend,Xz=_t.each;class Nk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,BP(this,OP);const c=this;this.id=n,this.hidden=!1;const u=fz(r.defaultOptions,o);this.options=Wz(c,u),Wv(c);const f=this.options.get;f("deprecation_warnings")&&hN(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const x=Ml(c);x&&(pd.ScriptLoader._setReferrerPolicy(x),pr.DOM.styleSheetLoader._setReferrerPolicy(x));const N=ey(c);we(N)&&pr.DOM.styleSheetLoader._setContentCssCors(N),bi.languageLoad=f("language_load"),bi.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Od(oC(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Yv(c),this.hasVisual=dC(c),this.shortcuts=new B4(this),this.editorCommands=new Mz(this),xP(this);const P=f("cache_suffix");P&&(ls.cacheSuffix=P.replace(/^[\?\&]+/,"")),this.ui={registry:P4(),styleSheetLoader:void 0,show:Ne,hide:Ne,setEnabled:Ne,isEnabled:Ve},this.mode=Gz(c),r.dispatch("SetupEditor",{editor:this});const L=RT(c);Q(L)&&L.call(c,c)}render(){rz(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return vb(this)}translate(n){return zc.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(we(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:Ve,default:o})),!c.isSet(n)&&!On(o)?o:c.get(n)}hasPlugin(n,o){return ae(Up(this),n)?o?Q0.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Kb.show(n.getContainer()),Kb.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Kb.hide(n.getContainer()),Kb.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=Qc(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Qc(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=Kb.getParent(o.id,"form");b&&Xz(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return ux(this,n,o)}getContent(n){return gA(this,n)}insertContent(n,o){o&&(n=BP({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?ux(this,this.startContent,{format:"raw"}):ux(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Kb.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Kb.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=MT(c);return Q(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||bt(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){k4(this,n)}remove(){k6(this)}destroy(n){Tf(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const vv=pr.DOM,Mk=_t.each;let PP=!1,Fg,Na=[];const $k=e=>{const n=e.type;Mk(mp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},FP=e=>{if(e!==PP){const n=pr.DOM;e?(n.bind(window,"resize",$k),n.bind(window,"scroll",$k)):(n.unbind(window,"resize",$k),n.unbind(window,"scroll",$k)),PP=e}},IP=e=>{const n=Na;return Na=Z(Na,o=>e!==o),mp.activeEditor===e&&(mp.activeEditor=Na.length>0?Na[0]:null),mp.focusedEditor===e&&(mp.focusedEditor=null),n.length!==Na.length},Jz=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(IP(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Qz=document.compatMode!=="CSS1Compat",mp={...bv,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"3.2",releaseDate:"2023-02-22",i18n:zc,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Od.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Od(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Od(e.baseURL),e.suffix=o,tF(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&en(r,(c,u)=>{bi.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=_t.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(N,P)=>N.inline&&P.tagName.toLowerCase()in r,u=N=>{let P=N.id;return P||(P=as(N,"name").filter(L=>!vv.get(L)).getOrThunk(vv.uniqueId),N.setAttribute("id",P)),P},f=N=>{const P=e[N];if(!!P)return P.apply(n,[])},b=N=>ls.browser.isIE()||ls.browser.isEdge()?($b("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Qz?($b("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):oe(N.selector)?vv.select(N.selector):we(N.target)?[N.target]:[];let y=N=>{o=N};const x=()=>{let N=0;const P=[];let L;const ce=(ie,ee,ue)=>{const Re=new Nk(ie,ee,n);P.push(Re),Re.on("init",()=>{++N===L.length&&y(P)}),Re.targetElm=Re.targetElm||ue,Re.render()};vv.unbind(window,"ready",x),f("onpageload"),L=Ge(b(e)),_t.each(L,ie=>{Jz(n.get(ie.id))}),L=_t.grep(L,ie=>!n.get(ie.id)),L.length===0?y([]):Mk(L,ie=>{c(e,ie)?$b("Could not initialize inline editor on invalid inline target element",ie):ce(u(ie),e,ie)})};return vv.bind(window,"ready",x),new Promise(N=>{o?N(o):y=P=>{N(P)}})},get(e){return arguments.length===0?Na.slice(0):oe(e)?Jt(Na,n=>n.id===e).getOr(null):ct(e)&&Na[e]?Na[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Na.push(e),FP(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Fg||(Fg=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",Fg))),e},createEditor(e,n){return this.add(new Nk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Na.length-1;r>=0;r--)n.remove(Na[r]);return}if(oe(e)){Mk(vv.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,Y(n.get(o.id))?null:(IP(o)&&n.dispatch("RemoveEditor",{editor:o}),Na.length===0&&window.removeEventListener("beforeunload",Fg),o.remove(),FP(Na.length>0),o)},execCommand(e,n,o){var r;const c=this,u=bt(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new Nk(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Mk(Na,e=>{e.save()})},addI18n:(e,n)=>{zc.add(e,n)},translate:e=>zc.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Od(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Od(this.baseURL)}};mp.setup();const eV=(()=>{const e=Xm(),n=u=>({items:u,types:Le(u),getType:f=>as(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),LP=Math.min,i2=Math.max,Bk=Math.round,HP=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,x=(o||"").split("");return x[0]==="b"&&(c+=y),x[1]==="r"&&(r+=b),x[0]==="c"&&(c+=Bk(y/2)),x[1]==="c"&&(r+=Bk(b/2)),x[3]==="b"&&(c-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(c-=Bk(f/2)),x[4]==="c"&&(r-=Bk(u/2)),l2(r,c,u,f)},tV=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=HP(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},nV=(e,n,o)=>l2(e.x-n,e.y-o,e.w+n*2,e.h+o*2),oV=(e,n)=>{const o=i2(e.x,n.x),r=i2(e.y,n.y),c=LP(e.x+e.w,n.x+n.w),u=LP(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:l2(o,r,c-o,u-r)},sV=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,x=i2(0,n.x-r),N=i2(0,n.y-c),P=i2(0,u-b),L=i2(0,f-y);return r+=x,c+=N,o&&(u+=x,f+=N,r-=P,c-=L),u-=P,f-=L,l2(r,c,u-r,f-c)},l2=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),rV={inflate:nV,relativePosition:HP,findBestRelativePosition:tV,intersect:oV,clamp:sV,create:l2,fromClientRect:e=>l2(e.left,e.top,e.width,e.height)},aV=(e,n,o=1e3)=>{let r=!1,c=null;const u=x=>(...N)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),x.apply(null,N))},f=u(e),b=u(n);return{start:(...x)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},cV=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,y=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const x=new Promise((N,P)=>{const L=aV(N,P);n[u]=L.resolve,pd.ScriptLoader.loadScript(f).then(()=>L.start(y),()=>L.reject(b))});return e[u]=x,x}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),iV=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let u2;try{const e="__storage_test__";u2=window.localStorage,u2.setItem(e,e),u2.removeItem(e)}catch{u2=iV()}var lV=u2;const uV={geom:{Rect:rV},util:{Delay:Bi,Tools:_t,VK:Fn,URI:Od,EventDispatcher:Pg,Observable:bv,I18n:zc,LocalStorage:lV,ImageUploader:AN},dom:{EventUtils:Yd,TreeWalker:pa,TextSeeker:Qm,DOMUtils:pr,ScriptLoader:pd,RangeUtils:Sg,Serializer:op,StyleSheetLoader:Zd,ControlSelection:Pl,BookmarkManager:Lu,Selection:g6,Event:Yd.Event},html:{Styles:y1,Entities:Ja,Node:Ji,Schema:Nu,DomParser:iu,Writer:_O,Serializer:Gh},Env:ls,AddOnManager:bi,Annotator:ZC,Formatter:RN,UndoManager:MN,EditorCommands:Mz,WindowManager:CN,NotificationManager:wN,EditorObservable:OP,Shortcuts:B4,Editor:Nk,FocusManager:Xi,EditorManager:mp,DOM:pr.DOM,ScriptLoader:pd.ScriptLoader,PluginManager:Q0,ThemeManager:Db,ModelManager:X0,IconManager:pA,Resource:cV,FakeClipboard:eV,trim:_t.trim,isArray:_t.isArray,is:_t.is,toArray:_t.toArray,makeMap:_t.makeMap,each:_t.each,map:_t.map,grep:_t.grep,inArray:_t.inArray,extend:_t.extend,walk:_t.walk,resolve:_t.resolve,explode:_t.explode,_addCacheSuffix:_t._addCacheSuffix},zP=_t.extend(mp,uV),dV=e=>{try{Fo.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(zP),dV(zP)})()})(SW);const TZ=SW.exports;(function(){const Fo=Object.getPrototypeOf,ko=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},mo=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&ko(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Jn=t=>s=>mo(s)===t,An=t=>s=>typeof s===t,so=t=>s=>t===s,Qn=(t,s)=>Kt(t)&&ko(t,s,(a,i)=>Fo(a)===i),qt=Jn("string"),Kt=Jn("object"),Ct=t=>Qn(t,Object),Tn=Jn("array"),ao=so(null),Zt=An("boolean"),yt=so(void 0),Rt=t=>t==null,an=t=>!Rt(t),qe=An("function"),rt=An("number"),Oe=(t,s)=>{if(Tn(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},oe=()=>{},bt=t=>()=>t(),Ft=(t,s)=>(...a)=>t(s.apply(null,a)),wt=(t,s)=>a=>t(s(a)),Y=t=>()=>t,At=t=>t,On=(t,s)=>t===s;function Nt(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const we=t=>s=>!t(s),Q=t=>()=>{throw new Error(t)},ct=t=>t(),Pe=Y(!1),Ne=Y(!0);var Ot=tinymce.util.Tools.resolve("tinymce.ThemeManager");class _{constructor(s,a){this.tag=s,this.value=a}static some(s){return new _(!0,s)}static none(){return _.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?_.some(s(this.value)):_.none()}bind(s){return this.tag?s(this.value):_.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:_.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s!=null?s:"Called getOrDie on None")}static from(s){return an(s)?_.some(s):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const ge=Array.prototype.slice,Ue=Array.prototype.indexOf,Ie=Array.prototype.push,_e=(t,s)=>Ue.call(t,s),jt=(t,s)=>{const a=_e(t,s);return a===-1?_.none():_.some(a)},nn=(t,s)=>_e(t,s)>-1,ze=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},It=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},Et=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=ge.call(t,i,i+s);a.push(d)}return a},Ve=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},R=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},zn=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},Ee=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:i).push(p)}return{pass:a,fail:i}},xe=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},We=(t,s,a)=>(zn(t,(i,d)=>{a=s(a,i,d)}),a),ke=(t,s,a)=>(R(t,(i,d)=>{a=s(a,i,d)}),a),ae=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return _.some(g);if(a(g,i))break}return _.none()},se=(t,s)=>ae(t,s,Pe),re=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return _.some(a)}return _.none()},z=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!Tn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Ie.apply(s,t[a])}return s},K=(t,s)=>z(Ve(t,s)),H=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Z=t=>{const s=ge.call(t,0);return s.reverse(),s},$e=(t,s)=>xe(t,a=>!nn(s,a)),Be=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},zt=t=>[t],Jt=(t,s)=>{const a=ge.call(t,0);return a.sort(s),a},eo=(t,s)=>s>=0&&s<t.length?_.some(t[s]):_.none(),co=t=>eo(t,0),jn=t=>eo(t,t.length-1),pn=qe(Array.from)?Array.from:t=>ge.call(t),to=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return _.none()},De=Object.keys,Ye=Object.hasOwnProperty,Dt=(t,s)=>{const a=De(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];s(p,g)}},on=(t,s)=>wn(t,(a,i)=>({k:i,v:s(a,i)})),wn=(t,s)=>{const a={};return Dt(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},bn=t=>(s,a)=>{t[a]=s},Oo=(t,s,a,i)=>{Dt(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},xs=(t,s)=>{const a={},i={};return Oo(t,s,bn(a),bn(i)),{t:a,f:i}},Ge=(t,s)=>{const a={};return Oo(t,s,bn(a),oe),a},Le=(t,s)=>{const a=[];return Dt(t,(i,d)=>{a.push(s(i,d))}),a},tn=(t,s)=>{const a=De(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];if(s(p,g,t))return _.some(p)}return _.none()},en=t=>Le(t,At),Ut=(t,s)=>Vn(t,s)?_.from(t[s]):_.none(),Vn=(t,s)=>Ye.call(t,s),ks=(t,s)=>Vn(t,s)&&t[s]!==void 0&&t[s]!==null,kr=(t,s,a=On)=>t.exists(i=>a(i,s)),da=(t,s,a=On)=>vs(t,s,a).getOr(t.isNone()&&s.isNone()),ps=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},bc=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return _.none()}return _.some(s)},vs=(t,s,a)=>t.isSome()&&s.isSome()?_.some(a(t.getOrDie(),s.getOrDie())):_.none(),as=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?_.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):_.none(),uo=(t,s)=>t!=null?_.some(s(t)):_.none(),dr=(t,s)=>t?_.some(s):_.none(),Wr=(t,s)=>t+s,Fs=(t,s)=>t.substring(s),ma=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Zr=(t,s)=>ka(t,s)?Fs(t,s.length):t,sc=(t,s)=>ve(t,s)?t:Wr(t,s),Ys=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?yt(i)?!0:d+s.length<=i:!1},ka=(t,s)=>ma(t,s,0),ve=(t,s)=>ma(t,s,t.length-s.length),st=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),ht=t=>t.length>0,In=t=>!ht(t),Gn=t=>t.style!==void 0&&qe(t.style.getPropertyValue),Rn=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Co(i.childNodes[0])},cs=(t,s)=>{const i=(s||document).createElement(t);return Co(i)},es=(t,s)=>{const i=(s||document).createTextNode(t);return Co(i)},Co=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Bt={fromHtml:Rn,fromTag:cs,fromText:es,fromDom:Co,fromPoint:(t,s,a)=>_.from(t.dom.elementFromPoint(s,a)).map(Co)},fe=typeof window<"u"?window:Function("return this;")(),pe=(t,s)=>{let a=s!=null?s:fe;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},kt=(t,s)=>{const a=t.split(".");return pe(a,s)},Qt=(t,s)=>kt(t,s),rn=(t,s)=>{const a=Qt(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},_n=Object.getPrototypeOf,dn=t=>rn("HTMLElement",t),Mn=t=>{const s=kt("ownerDocument.defaultView",t);return Kt(t)&&(dn(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(_n(t).constructor.name))},Kn=9,vo=11,As=1,mr=3,Go=t=>t.dom.nodeName.toLowerCase(),qc=t=>t.dom.nodeType,is=t=>s=>qc(s)===t,ws=t=>Ss(t)&&Mn(t.dom),Ss=is(As),Pr=is(mr),Rr=is(Kn),$c=is(vo),Pa=t=>s=>Ss(s)&&Go(s)===t,Kc=(t,s)=>{const a=t.dom;if(a.nodeType!==As)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},ki=t=>t.nodeType!==As&&t.nodeType!==Kn&&t.nodeType!==vo||t.childElementCount===0,Yc=(t,s)=>{const a=s===void 0?document:s.dom;return ki(a)?[]:Ve(a.querySelectorAll(t),Bt.fromDom)},Ii=(t,s)=>{const a=s===void 0?document:s.dom;return ki(a)?_.none():_.from(a.querySelector(t)).map(Bt.fromDom)},Hs=(t,s)=>t.dom===s.dom,di=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},fa=t=>Bt.fromDom(t.dom.ownerDocument),rc=t=>Rr(t)?t:fa(t),mi=t=>Bt.fromDom(rc(t).dom.documentElement),Bc=t=>Bt.fromDom(rc(t).dom.defaultView),oa=t=>_.from(t.dom.parentNode).map(Bt.fromDom),Ti=t=>_.from(t.dom.parentElement).map(Bt.fromDom),vc=t=>_.from(t.dom.offsetParent).map(Bt.fromDom),Li=t=>_.from(t.dom.nextSibling).map(Bt.fromDom),Xs=t=>Ve(t.dom.childNodes,Bt.fromDom),ga=(t,s)=>{const a=t.dom.childNodes;return _.from(a[s]).map(Bt.fromDom)},X=t=>ga(t,0),Ce=(t,s)=>({element:t,offset:s}),Fe=(t,s)=>{const a=Xs(t);return a.length>0&&s<a.length?Ce(a[s],0):Ce(t,s)},pt=t=>$c(t)&&an(t.dom.host),Vt=qe(Element.prototype.attachShadow)&&qe(Node.prototype.getRootNode),io=Y(Vt),qo=Vt?t=>Bt.fromDom(t.dom.getRootNode()):rc,Tr=t=>pt(t)?t:Bt.fromDom(rc(t).dom.body),Is=t=>Nr(t).isSome(),Nr=t=>{const s=qo(t);return pt(s)?_.some(s):_.none()},Er=t=>Bt.fromDom(t.dom.host),Mr=t=>{if(io()&&an(t.target)){const s=Bt.fromDom(t.target);if(Ss(s)&&Fa(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return co(a)}}return _.from(t.target)},Fa=t=>an(t.dom.shadowRoot),jr=t=>{const s=Pr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Nr(Bt.fromDom(s)).fold(()=>a.body.contains(s),wt(jr,Er))},Jr=()=>Xc(Bt.fromDom(document)),Xc=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Bt.fromDom(s)},Jc=(t,s,a)=>{if(qt(a)||Zt(a)||rt(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},So=(t,s,a)=>{Jc(t.dom,s,a)},ls=(t,s)=>{const a=t.dom;Dt(s,(i,d)=>{Jc(a,d,i)})},or=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},B=(t,s)=>_.from(or(t,s)),J=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},de=(t,s)=>{t.dom.removeAttribute(s)},Xe=t=>ke(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),kn=(t,s,a)=>{if(!qt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Gn(t)&&t.style.setProperty(s,a)},Do=(t,s)=>{Gn(t)&&t.style.removeProperty(s)},$n=(t,s,a)=>{const i=t.dom;kn(i,s,a)},Fr=(t,s)=>{const a=t.dom;Dt(s,(i,d)=>{kn(a,d,i)})},fr=(t,s)=>{const a=t.dom;Dt(s,(i,d)=>{i.fold(()=>{Do(a,d)},g=>{kn(a,d,g)})})},_t=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!jr(t)?sa(a,s):d},sa=(t,s)=>Gn(t)?t.style.getPropertyValue(s):"",Js=(t,s)=>{const a=t.dom,i=sa(a,s);return _.from(i).filter(d=>d.length>0)},Vr=t=>{const s={},a=t.dom;if(Gn(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},tl=(t,s,a)=>{const i=Bt.fromTag(t);return $n(i,s,a),Js(i,s).isSome()},$o=(t,s)=>{const a=t.dom;Do(a,s),kr(B(t,"style").map(st),"")&&de(t,"style")},te=t=>t.dom.offsetWidth,me=(t,s)=>{const a=(w,T)=>{if(!rt(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const A=w.dom;Gn(A)&&(A.style[t]=T+"px")},i=w=>{const T=s(w);if(T<=0||T===null){const A=_t(w,t);return parseFloat(A)||0}return T},d=i,g=(w,T)=>ke(T,(A,D)=>{const M=_t(w,D),U=M===void 0?0:parseInt(M,10);return isNaN(U)?A:A+U},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(w,T,A)=>{const D=g(w,A);return T>D?T-D:0}}},Qe=me("height",t=>{const s=t.dom;return jr(t)?s.getBoundingClientRect().height:s.offsetHeight}),ut=t=>Qe.get(t),Bn=t=>Qe.getOuter(t),Yn=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=Qe.max(t,s,a);$n(t,"max-height",i+"px")},Gs=(t,s)=>({left:t,top:s,translate:(i,d)=>Gs(t+i,s+d)}),Ko=Gs,Hi=t=>{const s=t.getBoundingClientRect();return Ko(s.left,s.top)},Jo=(t,s)=>t!==void 0?t:s!==void 0?s:0,Os=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return Ko(a.offsetLeft,a.offsetTop);const g=Jo(i==null?void 0:i.pageYOffset,d.scrollTop),p=Jo(i==null?void 0:i.pageXOffset,d.scrollLeft),w=Jo(d.clientTop,a.clientTop),T=Jo(d.clientLeft,a.clientLeft);return Ta(t).translate(p-T,g-w)},Ta=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?Ko(i.offsetLeft,i.offsetTop):jr(t)?Hi(s):Ko(0,0)},ac=me("width",t=>t.dom.offsetWidth),zi=(t,s)=>ac.set(t,s),gr=t=>ac.get(t),nr=t=>ac.getOuter(t),Ds=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=ac.max(t,s,a);$n(t,"max-width",i+"px")},Ir=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},yc=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),w=p||i("(pointer:coarse)"),T=d||!g&&p&&i("(min-device-width:768px)"),A=g||p&&!T,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,M=!A&&!T&&!D;return{isiPad:Y(d),isiPhone:Y(g),isTablet:Y(T),isPhone:Y(A),isTouch:Y(w),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:Y(D),isDesktop:Y(M)}},Tl=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},Gr=(t,s)=>{const a=Tl(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return cc(i(1),i(2))},jl=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?vu():Gr(t,a)},vu=()=>cc(0,0),cc=(t,s)=>({major:t,minor:s}),yu={nu:cc,detect:jl,unknown:vu},Vg=(t,s)=>to(s.brands,a=>{const i=a.brand.toLowerCase();return se(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:yu.nu(parseInt(a.version,10),0)}))}),Pc=(t,s)=>{const a=String(s).toLowerCase();return se(t,i=>i.search(a))},El=(t,s)=>Pc(t,s).map(a=>{const i=yu.detect(a.versionRegexes,s);return{current:a.name,version:i}}),od=(t,s)=>Pc(t,s).map(a=>{const i=yu.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Ia=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nl=t=>s=>Ys(s,t),wu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Ys(t,"edge/")&&Ys(t,"chrome")&&Ys(t,"safari")&&Ys(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ia],search:t=>Ys(t,"chrome")&&!Ys(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Ys(t,"msie")||Ys(t,"trident")},{name:"Opera",versionRegexes:[Ia,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:nl("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:nl("firefox")},{name:"Safari",versionRegexes:[Ia,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Ys(t,"safari")||Ys(t,"mobile/"))&&Ys(t,"applewebkit")}],Pd=[{name:"Windows",search:nl("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Ys(t,"iphone")||Ys(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:nl("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:nl("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:nl("linux"),versionRegexes:[]},{name:"Solaris",search:nl("sunos"),versionRegexes:[]},{name:"FreeBSD",search:nl("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:nl("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Gl={browsers:Y(wu),oses:Y(Pd)},_m="Edge",Fd="Chromium",Ei="IE",Ug="Opera",Am="Firefox",Cu="Safari",Id=()=>_i({current:void 0,version:yu.unknown()}),_i=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(_m),isChromium:i(Fd),isIE:i(Ei),isOpera:i(Ug),isFirefox:i(Am),isSafari:i(Cu)}},be={unknown:Id,nu:_i,edge:Y(_m),chromium:Y(Fd),ie:Y(Ei),opera:Y(Ug),firefox:Y(Am),safari:Y(Cu)},ql="Windows",Ai="iOS",Om="Android",Dm="Linux",Wg="macOS",$s="Solaris",Ga="FreeBSD",Nf="ChromeOS",Vi=()=>Rm({current:void 0,version:yu.unknown()}),Rm=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(ql),isiOS:i(Ai),isAndroid:i(Om),isMacOS:i(Wg),isLinux:i(Dm),isSolaris:i($s),isFreeBSD:i(Ga),isChromeOS:i(Nf)}},Su={unknown:Vi,nu:Rm,windows:Y(ql),ios:Y(Ai),android:Y(Om),linux:Y(Dm),macos:Y(Wg),solaris:Y($s),freebsd:Y(Ga),chromeos:Y(Nf)},Mf={detect:(t,s,a)=>{const i=Gl.browsers(),d=Gl.oses(),g=s.bind(T=>Vg(i,T)).orThunk(()=>El(i,t)).fold(be.unknown,be.nu),p=od(d,t).fold(Su.unknown,Su.nu),w=yc(p,g,t,a);return{browser:g,os:p,deviceType:w}}},sd=t=>window.matchMedia(t).matches;let Zg=Ir(()=>Mf.detect(navigator.userAgent,_.from(navigator.userAgentData),sd));const Fc=()=>Zg(),Ld=(t,s,a,i,d,g,p)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:p}),Nm=t=>{const s=Bt.fromDom(Mr(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Ft(i,a);return Ld(s,t.clientX,t.clientY,a,i,d,t)},rd=(t,s)=>a=>{t(a)&&s(Nm(a))},ha=(t,s,a,i,d)=>{const g=rd(a,i);return t.dom.addEventListener(s,g,d),{unbind:Nt(Mm,t,s,g,d)}},Hd=(t,s,a,i)=>ha(t,s,a,i,!1),$f=(t,s,a,i)=>ha(t,s,a,i,!0),Mm=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},xu=(t,s)=>{oa(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},jg=(t,s)=>{Li(t).fold(()=>{oa(t).each(d=>{Cc(d,s)})},i=>{xu(i,s)})},$m=(t,s)=>{X(t).fold(()=>{Cc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Cc=(t,s)=>{t.dom.appendChild(s.dom)},Gg=(t,s,a)=>{ga(t,a).fold(()=>{Cc(t,s)},i=>{xu(i,s)})},ol=(t,s)=>{R(s,a=>{Cc(t,a)})},ad=t=>{t.dom.textContent="",R(Xs(t),s=>{Kl(s)})},Kl=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Ui=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return Ko(a,i)},qg=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Kg=t=>{const s=t===void 0?window:t;return Fc().browser.isFirefox()?_.none():_.from(s.visualViewport)},Bf=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),sl=t=>{const s=t===void 0?window:t,a=s.document,i=Ui(Bt.fromDom(a));return Kg(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return Bf(i.left,i.top,g,p)},d=>Bf(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},E=()=>Bt.fromDom(document),$=(t,s)=>t.view(s).fold(Y([]),i=>{const d=t.owner(i),g=$(t,d);return[i].concat(g)}),j=(t,s)=>{const a=s.owner(t),i=$(s,a);return _.some(i)};var mn=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?_.none():_.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Bt.fromDom)},owner:t=>fa(t)});const yo=t=>{const s=E(),a=Ui(s);return j(t,mn).fold(Nt(Os,t),d=>{const g=Ta(t),p=We(d,(w,T)=>{const A=Ta(T);return{left:w.left+A.left,top:w.top+A.top}},{left:0,top:0});return Ko(p.left+g.left+a.left,p.top+g.top+a.top)})},ts=(t,s,a)=>({point:t,width:s,height:a}),Zo=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),qn=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),ns=t=>{const s=Os(t),a=nr(t),i=Bn(t);return qn(s.left,s.top,a,i)},_r=t=>{const s=yo(t),a=nr(t),i=Bn(t);return qn(s.left,s.top,a,i)},qa=()=>sl(window),Qr=t=>{const s=g=>g(t),a=Y(t),i=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:Ne,isError:Pe,map:g=>Bo.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>_.some(t)};return d},Bm=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Pe,isError:Ne,map:s,mapError:i=>Bo.error(i(t)),bind:s,exists:Pe,forall:Ne,getOr:At,or:At,getOrThunk:ct,orThunk:ct,getOrDie:Q(String(t)),each:oe,toOptional:_.none};return a},Bo={value:Qr,error:Bm,fromOption:(t,s)=>t.fold(()=>Bm(s),Qr)};var Lr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Lr||(Lr={}));const Bs=(t,s,a)=>t.stype===Lr.Error?s(t.serror):a(t.svalue),ic=t=>{const s=[],a=[];return R(t,i=>{Bs(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},La=(t,s)=>t.stype===Lr.Error?{stype:Lr.Error,serror:s(t.serror)}:t,Pf=(t,s)=>t.stype===Lr.Value?{stype:Lr.Value,svalue:s(t.svalue)}:t,Ff=(t,s)=>t.stype===Lr.Value?s(t.svalue):t,Yg=(t,s)=>t.stype===Lr.Error?s(t.serror):t,Yl=t=>({stype:Lr.Value,svalue:t}),If=t=>({stype:Lr.Error,serror:t}),qr={fromResult:t=>t.fold(If,Yl),toResult:t=>Bs(t,Bo.error,Bo.value),svalue:Yl,partition:ic,serror:If,bind:Ff,bindError:Yg,map:Pf,mapError:La,fold:Bs},Xg=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),n1=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),gp=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Lf=(t,s)=>s,o1=(t,s)=>Ct(t)&&Ct(s)?hr(t,s):s,cd=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Vn(d,g)&&(a[g]=t(a[g],d[g]))}return a},hr=cd(o1),Lo=cd(Lf),lc=()=>({tag:"required",process:{}}),Xl=t=>({tag:"defaultedThunk",process:t}),ku=t=>Xl(Y(t)),Jg=()=>({tag:"option",process:{}}),Pm=t=>({tag:"mergeWithThunk",process:t}),s1=t=>Pm(Y(t)),r1=(t,s)=>t.length>0?qr.svalue(hr(s,Lo.apply(void 0,t))):qr.svalue(s),Fm=t=>Ft(qr.serror,z)(t),_l={consolidateObj:(t,s)=>{const a=qr.partition(t);return a.errors.length>0?Fm(a.errors):r1(a.values,s)},consolidateArr:t=>{const s=qr.partition(t);return s.errors.length>0?Fm(s.errors):qr.svalue(s.values)}},Al=t=>Kt(t)&&De(t).length>100?" removed due to size":JSON.stringify(t,null,2),xv=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:Y("... (only showing first ten failures)")}]):t;return Ve(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},id=(t,s)=>qr.serror([{path:t,getErrorInfo:s}]),Tu=(t,s,a)=>id(t,()=>'Could not find valid *required* value for "'+s+'" in '+Al(a)),Hf=(t,s)=>id(t,()=>'Choice schema did not contain choice key: "'+s+'"'),ld=(t,s,a)=>id(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Al(s)),eh=(t,s)=>id(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),pa=(t,s)=>id(t,Y(s)),Wi=t=>{const s=(i,d)=>qr.bindError(t(d),g=>pa(i,g)),a=Y("val");return{extract:s,toString:a}},Lm=Wi(qr.svalue),En=(t,s,a,i)=>Ut(s,a).fold(()=>Tu(t,a,s),i),Hm=(t,s,a,i)=>{const d=Ut(t,s).getOrThunk(()=>a(t));return i(d)},rl=(t,s,a)=>a(Ut(t,s)),th=(t,s,a,i)=>{const d=Ut(t,s).map(g=>g===!0?a(t):g);return i(d)},nh=(t,s,a,i,d)=>{const g=w=>d.extract(s.concat([i]),w),p=w=>w.fold(()=>qr.svalue(_.none()),T=>{const A=d.extract(s.concat([i]),T);return qr.map(A,_.some)});switch(t.tag){case"required":return En(s,a,i,g);case"defaultedThunk":return Hm(a,i,t.process,g);case"option":return rl(a,i,p);case"defaultedOptionThunk":return th(a,i,t.process,p);case"mergeWithThunk":return Hm(a,i,Y({}),w=>{const T=hr(t.process(a),w);return g(T)})}},w2=(t,s,a)=>{const i={},d=[];for(const g of a)gp(g,(p,w,T,A)=>{const D=nh(T,t,s,p,A);qr.fold(D,M=>{d.push(...M)},M=>{i[w]=M})},(p,w)=>{i[p]=w(s)});return d.length>0?qr.serror(d):qr.svalue(i)},Eu=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),jk=t=>De(Ge(t,an)),Ka=t=>{const s=ro(t),a=We(t,(d,g)=>gp(g,p=>hr(d,{[p]:!0}),Y(d)),{});return{extract:(d,g)=>{const p=Zt(g)?[]:jk(g),w=xe(p,T=>!ks(a,T));return w.length===0?s.extract(d,g):eh(d,w)},toString:s.toString}},ro=t=>({extract:(i,d)=>w2(i,d,t),toString:()=>`obj{
`+Ve(t,d=>gp(d,(g,p,w,T)=>g+" -> "+T.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),Qc=t=>({extract:(i,d)=>{const g=Ve(d,(p,w)=>t.extract(i.concat(["["+w+"]"]),p));return _l.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Lt=(t,s)=>{const a=s!==void 0?s:At;return{extract:(g,p)=>{const w=[];for(const T of t){const A=T.extract(g,p);if(A.stype===Lr.Value)return{stype:Lr.Value,svalue:a(A.svalue)};w.push(A)}return _l.consolidateArr(w)},toString:()=>"oneOf("+Ve(t,g=>g.toString()).join(", ")+")"}},a1=(t,s)=>{const a=(g,p)=>Qc(Wi(t)).extract(g,p);return{extract:(g,p)=>{const w=De(p),T=a(g,w);return qr.bind(T,A=>{const D=Ve(A,M=>Xg(M,M,lc(),s));return ro(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},c1=(t,s)=>{const a=Ir(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},al=Ft(Qc,ro),ei=Y(Lm),zm=(t,s)=>Wi(a=>{const i=typeof a;return t(a)?qr.svalue(a):qr.serror(`Expected type: ${s} but got: ${i}`)}),Ur=zm(rt,"number"),Ea=zm(qt,"string"),ti=zm(Zt,"boolean"),ar=zm(qe,"function"),_u=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>_u(t[s]));default:return!1}},i1=Wi(t=>_u(t)?qr.svalue(t):qr.serror("Expected value to be acceptable for sending via postMessage")),Jl=(t,s,a,i)=>Ut(a,i).fold(()=>ld(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),oh=(t,s)=>({extract:(d,g)=>Ut(g,t).fold(()=>Hf(d,t),w=>Jl(d,g,s,w)),toString:()=>"chooseOn("+t+"). Possible values: "+De(s)}),Vm=()=>Qc(Lm),ra=t=>Wi(s=>t(s).fold(qr.serror,qr.svalue)),sh=(t,s)=>a1(a=>qr.fromResult(t(a)),s),Um=(t,s,a)=>{const i=s.extract([t],a);return qr.mapError(i,d=>({input:a,errors:d}))},Rs=(t,s,a)=>qr.toResult(Um(t,s,a)),Ql=t=>t.fold(s=>{throw new Error(eu(s))},At),Sc=(t,s,a)=>Ql(Rs(t,s,a)),eu=t=>`Errors: 
`+xv(t.errors).join(`
`)+`

Input object: `+Al(t.input),fi=(t,s)=>oh(t,on(s,ro)),l1=(t,s)=>c1(t,s),Ya=Xg,xc=n1,hp=t=>ra(s=>nn(t,s)?Bo.value(s):Bo.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Tt=t=>Ya(t,t,lc(),ei()),Oi=(t,s)=>Ya(t,t,lc(),s),kv=t=>Oi(t,Ur),aa=t=>Oi(t,Ea),zf=(t,s)=>Ya(t,t,lc(),hp(s)),ud=t=>Oi(t,ti),ba=t=>Oi(t,ar),Tv=(t,s)=>Ya(t,t,Jg(),Wi(a=>qr.serror("The field: "+t+" is forbidden. "+s))),cl=(t,s)=>Ya(t,t,lc(),ro(s)),tu=(t,s)=>Ya(t,t,lc(),al(s)),gi=(t,s)=>Ya(t,t,lc(),Qc(s)),Ns=t=>Ya(t,t,Jg(),ei()),Zi=(t,s)=>Ya(t,t,Jg(),s),zd=t=>Zi(t,Ur),Xa=t=>Zi(t,Ea),Vf=(t,s)=>Zi(t,hp(s)),Uf=t=>Zi(t,ar),Wf=(t,s)=>Zi(t,Qc(s)),hi=(t,s)=>Zi(t,ro(s)),pp=(t,s)=>Zi(t,Ka(s)),Ke=(t,s)=>Ya(t,t,ku(s),ei()),_a=(t,s,a)=>Ya(t,t,ku(s),a),u1=(t,s)=>_a(t,s,Ur),yr=(t,s)=>_a(t,s,Ea),il=(t,s,a)=>_a(t,s,hp(a)),Aa=(t,s)=>_a(t,s,ti),Oa=(t,s)=>_a(t,s,ar),C=(t,s)=>_a(t,s,i1),k=(t,s,a)=>_a(t,s,Qc(a)),I=(t,s,a)=>_a(t,s,ro(a)),V=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},dt={generate:t=>{if(!Tn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return R(t,(i,d)=>{const g=De(i);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],w=i[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Tn(w))throw new Error("case arguments must be an array");s.push(p),a[p]=(...T)=>{const A=T.length;if(A!==w.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+w.length+" ("+w+"), got "+A);return{fold:(...M)=>{if(M.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+M.length);return M[d].apply(null,T)},match:M=>{const U=De(M);if(s.length!==U.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+U.join(","));if(!H(s,le=>nn(U,le)))throw new Error("Not all branches were specified when using match. Specified: "+U.join(", ")+`
Required: `+s.join(", "));return M[p].apply(null,T)},log:M=>{console.log(M,{constructors:s,constructor:p,params:T})}}}}),a}};dt.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ht=t=>{const s=[],a=[];return R(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},xn=(t,s)=>{const a={};return Dt(t,(i,d)=>{nn(s,d)||(a[d]=i)}),a},Io=(t,s)=>({[t]:s}),jo=t=>{const s={};return R(t,a=>{s[a.key]=a.value}),s},cr=(t,s)=>xn(t,s),Us=(t,s)=>Io(t,s),Qs=t=>jo(t),ni=(t,s)=>t.length===0?Bo.value(s):Bo.value(hr(s,Lo.apply(void 0,t))),ll=t=>Bo.error(z(t)),Au=(t,s)=>{const a=Ht(t);return a.errors.length>0?ll(a.errors):ni(a.values,s)},dd=t=>qe(t)?t:Pe,rh=(t,s,a)=>{let i=t.dom;const d=dd(a);for(;i.parentNode;){i=i.parentNode;const g=Bt.fromDom(i),p=s(g);if(p.isSome())return p;if(d(g))break}return _.none()},md=(t,s,a)=>{const i=s(t),d=dd(a);return i.orThunk(()=>d(t)?_.none():rh(t,s,d))},Ou=(t,s)=>Hs(t.element,s.event.target),Wm={can:Ne,abort:Pe,run:oe},Du=t=>{if(!ks(t,"can")&&!ks(t,"abort")&&!ks(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Wm,...t}},pi=(t,s)=>(...a)=>ke(t,(i,d)=>i&&s(d).apply(void 0,a),!0),ah=(t,s)=>(...a)=>ke(t,(i,d)=>i||s(d).apply(void 0,a),!1),bp=t=>qe(t)?{can:Ne,abort:Pe,run:t}:t,Ev=t=>{const s=pi(t,d=>d.can),a=ah(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{R(t,g=>{g.run.apply(void 0,d)})}}},Eo=Y,er=Eo("touchstart"),Ha=Eo("touchmove"),Ic=Eo("touchend"),Ol=Eo("touchcancel"),Lc=Eo("mousedown"),Di=Eo("mousemove"),Ru=Eo("mouseout"),vp=Eo("mouseup"),Vd=Eo("mouseover"),Zm=Eo("focusin"),Gk=Eo("focusout"),jm=Eo("keydown"),qk=Eo("keyup"),Zf=Eo("input"),yp=Eo("change"),wp=Eo("click"),va=Eo("transitioncancel"),Ud=Eo("transitionend"),Kk=Eo("transitionstart"),d1=Eo("selectstart"),ea=t=>Y("alloy."+t),C2={tap:ea("tap")},Wd=ea("focus"),Cp=ea("blur.post"),_v=ea("paste.post"),nu=ea("receive"),ul=ea("execute"),Gm=ea("focus.item"),ch=C2.tap,m1=ea("longpress"),Sp=ea("sandbox.close"),jf=ea("typeahead.cancel"),f1=ea("system.init"),S2=ea("system.touchmove"),Yk=ea("system.touchend"),g1=ea("system.scroll"),xp=ea("system.resize"),fd=ea("system.attached"),ih=ea("system.detached"),Zd=ea("system.dismissRequested"),h1=ea("system.repositionRequested"),kp=ea("focusmanager.shifted"),Av=ea("slotcontainer.visibility"),p1=ea("change.tab"),x2=ea("dismiss.tab"),Ov=ea("highlight"),b1=ea("dehighlight"),zs=(t,s)=>{Gd(t,t.element,s,{})},po=(t,s,a)=>{Gd(t,t.element,s,a)},jd=t=>{zs(t,ul())},Dv=(t,s,a)=>{Gd(t,s,a,{})},Gd=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},v1=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},k2=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},ir=t=>Qs(t),T2=(t,s)=>({key:t,value:Du({abort:s})}),qd=(t,s)=>({key:t,value:Du({can:s})}),E2=t=>({key:t,value:Du({run:(s,a)=>{a.event.prevent()}})}),Pt=(t,s)=>({key:t,value:Du({run:s})}),gd=(t,s,a)=>({key:t,value:Du({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),lh=t=>s=>Pt(t,s),Tp=t=>s=>({key:t,value:Du({run:(a,i)=>{Ou(a,i)&&s(a,i)}})}),Xk=(t,s)=>Pt(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{k2(d,d.element,t,i)})}),Gf=(t,s,a)=>{const i=s.partUids[a];return Xk(t,i)},uh=(t,s)=>Pt(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>md(d.target,w=>a.getSystem().getByDom(w).toOptional(),Pe).getOr(a));s(a,g,i)}),dh=t=>Pt(t,(s,a)=>{a.cut()}),_2=t=>Pt(t,(s,a)=>{a.stop()}),Ja=(t,s)=>Tp(t)(s),Hr=Tp(fd()),Dl=Tp(ih()),Jk=Tp(f1()),dl=lh(ul()),oi=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Xs(Bt.fromDom(i))},Kd=t=>t.dom.innerHTML,qm=(t,s)=>{const i=fa(t).dom,d=Bt.fromDom(i.createDocumentFragment()),g=oi(s,i);ol(d,g),ad(t),Cc(t,d)},A2=t=>{const s=Bt.fromTag("div"),a=Bt.fromDom(t.dom.cloneNode(!0));return Cc(s,a),Kd(s)},kc=(t,s)=>Bt.fromDom(t.dom.cloneNode(s)),O2=t=>kc(t,!1),D2=t=>{if(pt(t))return"#shadow-root";{const s=O2(t);return A2(s)}},Km=t=>D2(t),Rv=(t,s,a)=>Hs(s,t.element)&&!Hs(s,a),Nu=ir([qd(Wd(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return Rv(t,i,d)?(console.warn(Wd()+` did not get interpreted by the desired target. 
Originator: `+Km(i)+`
Target: `+Km(d)+`
Check the `+Wd()+" event handlers"),!1):!0})]);var y1=Object.freeze({__proto__:null,events:Nu});let Nv=0;const Un=t=>{const a=new Date().getTime(),i=Math.floor(Math.random()*1e9);return Nv++,t+"_"+i+Nv+String(a)},Qk=Y("alloy-id-"),R2=Y("data-alloy-id"),w1=Qk(),mh=R2(),C1=(t,s)=>{const a=Un(w1+t);return fh(s,a),a},fh=(t,s)=>{Object.defineProperty(t.dom,mh,{value:s,writable:!0})},qf=t=>{const s=Ss(t)?t.dom[mh]:null;return _.from(s)},hd=t=>Un(t),Mv=At,Ym=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Km(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:Y("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Pe}},eT=Ym(),Yd=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),p=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Kf(p.slice(0,1).concat(p.slice(3)))}),t},Kf=t=>Ve(t,s=>ve(s,"/*")?s.substring(0,s.length-2):s),S1=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Kf(g)}),t},x1=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Kf(g.slice(1))}),t},Ep=Un("alloy-premade"),_p=t=>(Object.defineProperty(t.element.dom,Ep,{value:t.uid,writable:!0}),Us(Ep,t)),tT=t=>Vn(t.dom,Ep),Mu=t=>Ut(t,Ep),gh=t=>x1((s,...a)=>t(s.getApis(),s,...a),t),ou={init:()=>Ri({readState:Y("No State required")})},Ri=t=>t,Ap=(t,s)=>{const a=Ve(s,d=>hi(d.name(),[Tt("config"),Ke("state",ou)])),i=Rs("component.behaviours",ro(a),t.behaviours).fold(d=>{throw new Error(eu(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},At);return{list:s,data:on(i,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return Y(g)})}},pr=t=>t.list,nT=t=>t.data,N2=(t,s)=>{const a={};return Dt(t,(i,d)=>{Dt(i,(g,p)=>{const w=Ut(a,p).getOr([]);a[p]=w.concat([s(d,g)])})}),a},su=t=>({classes:yt(t.classes)?[]:t.classes,attributes:yt(t.attributes)?{}:t.attributes,styles:yt(t.styles)?{}:t.styles}),k1=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),M2=(t,s,a,i)=>{const d={...s};R(a,D=>{d[D.name()]=D.exhibit(t,i)});const g=N2(d,(D,M)=>({name:D,modification:M})),p=D=>We(D,(M,U)=>({...U.modification,...M}),{}),w=We(g.classes,(D,M)=>M.modification.concat(D),[]),T=p(g.attributes),A=p(g.styles);return su({classes:w,attributes:T,styles:A})},pd=(t,s,a,i)=>{try{const d=Jt(a,(g,p)=>{const w=g[s],T=p[s],A=i.indexOf(w),D=i.indexOf(T);if(A===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(i,null,2));return A<D?-1:D<A?1:0});return Bo.value(d)}catch(d){return Bo.error([d])}},uc=(t,s)=>({handler:t,purpose:s}),oT=(t,s)=>({cHandler:t,purpose:s}),Op=(t,s)=>oT(Nt.apply(void 0,[t.handler].concat(s)),t.purpose),Yf=t=>t.cHandler,hh=(t,s)=>({name:t,handler:s}),T1=(t,s)=>{const a={};return R(t,i=>{a[i.name()]=i.handlers(s)}),a},$2=(t,s,a)=>{const i={...a,...T1(s,t)};return N2(i,hh)},Hc=(t,s,a,i)=>{const d=$2(t,a,i);return U4(d,s)},z4=t=>{const s=bp(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},B2=(t,s)=>Bo.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ve(s,a=>a.name),null,2)]),V4=(t,s,a)=>{const i=s[a];return i?pd("Event: "+a,"name",t,i).map(d=>{const g=Ve(d,p=>p.handler);return Ev(g)}):B2(a,t)},U4=(t,s)=>{const a=Le(t,(i,d)=>(i.length===1?Bo.value(i[0].handler):V4(i,s,d)).map(p=>{const w=z4(p),T=i.length>1?xe(s[d],A=>ze(i,D=>D.name===A)).join(" > "):i[0].name;return Us(d,uc(w,T))}));return Au(a,{})},ml="alloy.base.behaviour",zc=ro([Ya("dom","dom",lc(),ro([Tt("tag"),Ke("styles",{}),Ke("classes",[]),Ke("attributes",{}),Ns("value"),Ns("innerHtml")])),Tt("components"),Tt("uid"),Ke("events",{}),Ke("apis",{}),Ya("eventOrder","eventOrder",s1({[ul()]:["disabling",ml,"toggling","typeaheadevents"],[Wd()]:[ml,"focusing","keying"],[f1()]:[ml,"disabling","toggling","representing"],[Zf()]:[ml,"representing","streaming","invalidating"],[ih()]:[ml,"representing","item-events","tooltipping"],[Lc()]:["focusing",ml,"item-type-events"],[er()]:["focusing",ml,"item-type-events"],[Vd()]:["item-type-events","tooltipping"],[nu()]:["receiving","reflecting","tooltipping"]}),ei()),Ns("domModification")]),bi=t=>Rs("custom.definition",zc,t),P2=t=>({...t.dom,uid:t.uid,domChildren:Ve(t.components,s=>s.element)}),sT=t=>t.domModification.fold(()=>su({}),su),Xm=t=>t.events,ph=(t,s)=>{const a=or(t,s);return a===void 0||a===""?[]:a.split(" ")},E1=(t,s,a)=>{const d=ph(t,s).concat([a]);return So(t,s,d.join(" ")),!0},Dp=(t,s,a)=>{const i=xe(ph(t,s),d=>d!==a);return i.length>0?So(t,s,i.join(" ")):de(t,s),!1},$u=t=>t.dom.classList!==void 0,Xf=t=>ph(t,"class"),bh=(t,s)=>E1(t,"class",s),vh=(t,s)=>Dp(t,"class",s),ya=(t,s)=>{$u(t)?t.dom.classList.add(s):bh(t,s)},Rp=t=>{($u(t)?t.dom.classList:Xf(t)).length===0&&de(t,"class")},ca=(t,s)=>{$u(t)?t.dom.classList.remove(s):vh(t,s),Rp(t)},ji=(t,s)=>$u(t)&&t.dom.classList.contains(s),Xd=(t,s)=>{R(s,a=>{ya(t,a)})},fl=(t,s)=>{R(s,a=>{ca(t,a)})},F2=(t,s)=>H(s,a=>ji(t,a)),rT=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},aT=t=>$u(t)?rT(t):Xf(t),gl=t=>t.dom.value,Jm=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},I2=(t,s,a)=>ga(t,s).map(d=>{if(a.exists(p=>!Hs(p,d))){const p=a.map(Go).getOr("span"),w=Bt.fromTag(p);return xu(d,w),w}else return d}),L2=(t,s,a)=>{a.fold(()=>Cc(t,s),i=>{Hs(i,s)||(xu(i,s),Kl(i))})},$v=(t,s,a)=>{const i=Ve(s,a),d=Xs(t);return R(d.slice(i.length),Kl),i},Bv=(t,s,a,i)=>{const d=ga(t,s),g=i(a,d),p=I2(t,s,d);return L2(t,g.element,p),g},Jf=(t,s,a)=>$v(t,s,(i,d)=>Bv(t,d,i,a)),Pv=(t,s)=>$v(t,s,(a,i)=>{const d=ga(t,i);return L2(t,a,d),a}),H2=(t,s)=>{const a=De(t),i=De(s),d=$e(i,a),g=xs(t,(p,w)=>!Vn(s,w)||p!==s[w]).t;return{toRemove:d,toSet:g}},z2=(t,s)=>{const{class:a,style:i,...d}=Xe(s),{toSet:g,toRemove:p}=H2(t.attributes,d),w=()=>{R(p,gn=>de(s,gn)),ls(s,g)},T=Vr(s),{toSet:A,toRemove:D}=H2(t.styles,T),M=()=>{R(D,gn=>$o(s,gn)),Fr(s,A)},U=aT(s),W=$e(U,t.classes),le=$e(t.classes,U),he=()=>{Xd(s,le),fl(s,W)},nt=gn=>{qm(s,gn)},Me=()=>{const gn=t.domChildren;Pv(s,gn)},ot=()=>{const gn=s,it=t.value.getOrUndefined();it!==gl(gn)&&Jm(gn,it!=null?it:"")};return w(),he(),M(),t.innerHtml.fold(Me,nt),ot(),s},V2=t=>{const s=Bt.fromTag(t.tag);ls(s,t.attributes),Xd(s,t.classes),Fr(s,t.styles),t.innerHtml.each(i=>qm(s,i));const a=t.domChildren;return ol(s,a),t.value.each(i=>{Jm(s,i)}),s},Qm=(t,s)=>{try{const a=z2(t,s);return _.some(a)}catch{return _.none()}},yh=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Qf=(t,s)=>{const a=d=>Go(d)===t.tag&&!yh(t)&&!tT(d),i=s.filter(a).bind(d=>Qm(t,d)).getOrThunk(()=>V2(t));return fh(i,t.uid),i},U2=t=>{const s=Ut(t,"behaviours").getOr({});return K(De(s),a=>{const i=s[a];return an(i)?[i.me]:[]})},cT=(t,s)=>Ap(t,s),Fv=t=>{const s=U2(t);return cT(t,s)},Np=(t,s,a)=>{const i=P2(t),d=sT(t),g={"alloy.base.modification":d},p=s.length>0?M2(a,g,s,i):d;return k1(i,p)},Mp=(t,s,a)=>{const i={"alloy.base.behaviour":Xm(t)};return Hc(a,t.eventOrder,s,i).getOrDie()},W2=(t,s)=>{const a=()=>gn,i=V(eT),d=Ql(bi(t)),g=Fv(t),p=pr(g),w=nT(g),T=Np(d,p,w),A=Qf(T,s),D=Mp(d,p,w),M=V(d.components),U=it=>{i.set(it)},W=()=>{i.set(Ym(a))},le=()=>{const it=Xs(A),yn=K(it,Hn=>i.get().getByDom(Hn).fold(()=>[],zt));M.set(yn)},he=it=>{const yn=w;return(qe(yn[it.name()])?yn[it.name()]:()=>{throw new Error("Could not find "+it.name()+" in "+JSON.stringify(t,null,2))})()},nt=it=>qe(w[it.name()]),Me=()=>d.apis,ot=it=>w[it]().map(yn=>yn.state.readState()).getOr("not enabled"),gn={uid:t.uid,getSystem:i.get,config:he,hasConfigured:nt,spec:t,readState:ot,getApis:Me,connect:U,disconnect:W,element:A,syncComponents:le,components:M.get,events:D};return gn},iT=(t,s)=>{const a=Ut(t,"components").getOr([]);return s.fold(()=>Ve(a,vi),i=>Ve(a,(d,g)=>A1(d,ga(i,g))))},Z2=(t,s)=>{const{events:a,...i}=Mv(t),d=iT(i,s),g={...i,events:{...y1,...a},components:d};return Bo.value(W2(g,s))},za=t=>{const s=Bt.fromText(t);return _1({element:s})},_1=t=>{const s=Sc("external.component",Ka([Tt("element"),Ns("uid")]),t),a=V(Ym()),i=w=>{a.set(w)},d=()=>{a.set(Ym(()=>p))},g=s.uid.getOrThunk(()=>hd("external"));fh(s.element,g);const p={uid:g,getSystem:a.get,config:_.none,hasConfigured:Pe,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:Y("No state"),syncComponents:oe,components:Y([]),events:{}};return _p(p)},$p=hd,ef=t=>Vn(t,"uid"),A1=(t,s)=>Mu(t).getOrThunk(()=>{const a=ef(t)?t:{uid:$p(""),...t};return Z2(a,s).getOrDie()}),vi=t=>A1(t,_.none()),hl=_p;var lT=(t,s,a,i,d)=>t(a,i)?_.some(a):qe(d)&&d(a)?_.none():s(a,i,d);const tf=(t,s,a)=>{let i=t.dom;const d=qe(a)?a:Pe;for(;i.parentNode;){i=i.parentNode;const g=Bt.fromDom(i);if(s(g))return _.some(g);if(d(g))break}return _.none()},j2=(t,s,a)=>lT((d,g)=>g(d),tf,t,s,a),wh=(t,s)=>{const a=d=>s(Bt.fromDom(d));return se(t.dom.childNodes,a).map(Bt.fromDom)},G2=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=Bt.fromDom(i.childNodes[d]);if(s(g))return _.some(g);const p=a(i.childNodes[d]);if(p.isSome())return p}return _.none()};return a(t.dom)},q2=(t,s,a)=>j2(t,s,a).isSome(),Jd=(t,s,a)=>tf(t,i=>Kc(i,s),a),uT=(t,s)=>wh(t,a=>Kc(a,s)),ia=(t,s)=>Ii(s,t),Rl=(t,s,a)=>lT((d,g)=>Kc(d,g),Jd,t,s,a),Ch="aria-controls",O1=t=>j2(t,a=>{if(!Ss(a))return!1;const i=or(a,"id");return i!==void 0&&i.indexOf(Ch)>-1}).bind(a=>{const i=or(a,"id"),d=qo(a);return ia(d,`[${Ch}="${i}"]`)}),D1=()=>{const t=Un(Ch);return{id:t,link:i=>{So(i,Ch,t)},unlink:i=>{de(i,Ch)}}},Bp=(t,s)=>O1(s).exists(a=>Qd(t,a)),Qd=(t,s)=>q2(s,a=>Hs(a,t.element),Pe)||Bp(t,s),R1="unknown";var Sh;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Sh||(Sh={}));const Iv=V({}),eg=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();nn(["mousemove","mouseover","mouseout",f1()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Ve(a,g=>nn(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Km(g.target)+")":g.outcome)})}}},em=(t,s,a)=>{switch(Ut(Iv.get(),t).orThunk(()=>{const d=De(Iv.get());return to(d,g=>t.indexOf(g)>-1?_.some(Iv.get()[g]):_.none())}).getOr(Sh.NORMAL)){case Sh.NORMAL:return a(dT());case Sh.LOGGING:{const d=eg(t,s),g=a(d);return d.write(),g}case Sh.STOP:return!0}},nf=["alloy/data/Fields","alloy/debugging/Debugging"],K2=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return se(s,a=>a.indexOf("alloy")>0&&!ze(nf,i=>a.indexOf(i)>-1)).getOr(R1)}else return R1},gt={logEventCut:oe,logEventStopped:oe,logNoParent:oe,logEventNoHandlers:oe,logEventResponse:oe,write:oe},xh=(t,s,a)=>em(t,s,a),dT=Y(gt),Lv=Y([Tt("menu"),Tt("selectedMenu")]),N1=Y([Tt("item"),Tt("selectedItem")]);Y(ro(N1().concat(Lv())));const wa=Y(ro(N1())),Y2=cl("initSize",[Tt("numColumns"),Tt("numRows")]),X2=()=>Oi("markers",wa()),Pp=()=>cl("markers",[Tt("backgroundMenu")].concat(Lv()).concat(N1())),tm=t=>cl("markers",Ve(t,Tt)),kh=(t,s,a)=>(K2(),Ya(s,s,a,ra(i=>Bo.value((...d)=>i.apply(void 0,d))))),us=t=>kh("onHandler",t,ku(oe)),Gi=t=>kh("onKeyboardHandler",t,ku(_.none)),of=t=>kh("onHandler",t,lc()),Hv=t=>kh("onKeyboardHandler",t,lc()),br=(t,s)=>xc(t,Y(s)),zv=t=>xc(t,At),Fp=Y(Y2),dc=(t,s,a,i,d,g,p,w=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:w}),Bu=dt.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ni=(t,s,a,i,d,g,p,w,T)=>t.fold(s,a,i,d,g,p,w,T),Ip=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),mT=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),Th=Bu.southeast,M1=Bu.southwest,$1=Bu.northeast,B1=Bu.northwest,J2=Bu.south,Vv=Bu.north,Q2=Bu.east,P1=Bu.west,tg=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},pl=(t,s,a)=>Math.min(Math.max(t,s),a),fT=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Qa=(t,s)=>Be(["left","right","top","bottom"],a=>Ut(s,a).map(i=>fT(t,i))),eC=(t,s,a)=>{const i=(T,A)=>s[T].map(D=>{const M=T==="top"||T==="bottom",U=M?a.top:a.left,le=(T==="left"||T==="top"?Math.max:Math.min)(D,A)+U;return M?pl(le,t.y,t.bottom):pl(le,t.x,t.right)}).getOr(A),d=i("left",t.x),g=i("top",t.y),p=i("right",t.right),w=i("bottom",t.bottom);return qn(d,g,p-d,w-g)},nm="layout",gT=t=>t.x,yi=(t,s)=>t.x+t.width/2-s.width/2,F1=(t,s)=>t.x+t.width-s.width,ru=(t,s)=>t.y-s.height,Uv=t=>t.y+t.height,tC=(t,s)=>t.y+t.height/2-s.height/2,hT=t=>t.x+t.width,pT=(t,s)=>t.x-s.width,Tc=(t,s,a)=>dc(gT(t),Uv(t),a.southeast(),Th(),"southeast",Qa(t,{left:1,top:3}),nm),Ec=(t,s,a)=>dc(F1(t,s),Uv(t),a.southwest(),M1(),"southwest",Qa(t,{right:0,top:3}),nm),si=(t,s,a)=>dc(gT(t),ru(t,s),a.northeast(),$1(),"northeast",Qa(t,{left:1,bottom:2}),nm),Vc=(t,s,a)=>dc(F1(t,s),ru(t,s),a.northwest(),B1(),"northwest",Qa(t,{right:0,bottom:2}),nm),qi=(t,s,a)=>dc(yi(t,s),ru(t,s),a.north(),Vv(),"north",Qa(t,{bottom:2}),nm),Va=(t,s,a)=>dc(yi(t,s),Uv(t),a.south(),J2(),"south",Qa(t,{top:3}),nm),I1=(t,s,a)=>dc(hT(t),tC(t,s),a.east(),Q2(),"east",Qa(t,{left:0}),nm),L1=(t,s,a)=>dc(pT(t,s),tC(t,s),a.west(),P1(),"west",Qa(t,{right:1}),nm),nC=()=>[Tc,Ec,si,Vc,Va,qi,I1,L1],H1=()=>[Ec,Tc,Vc,si,Va,qi,I1,L1],Pn=()=>[si,Vc,Tc,Ec,qi,Va],ng=()=>[Vc,si,Ec,Tc,qi,Va],z1=()=>[Tc,Ec,si,Vc,Va,qi],Wv=()=>[Ec,Tc,Vc,si,Va,qi],bT=(t,s)=>s.universal?t:xe(t,a=>nn(s.channels,a));var oC=Object.freeze({__proto__:null,events:t=>ir([Pt(nu(),(s,a)=>{const i=t.channels,d=De(i),g=a,p=bT(d,g);R(p,w=>{const T=i[w],A=T.schema,D=Sc("channel["+w+`] data
Receiver: `+Km(s.element),A,g.data);T.onReceive(s,D)})})])}),vT=[Oi("channels",sh(Bo.value,Ka([of("onReceive"),Ke("schema",ei())])))];const yT=(t,s,a)=>dl(i=>{a(i,t,s)}),V1=(t,s,a)=>Jk((i,d)=>{a(i,t,s)}),wT=(t,s,a,i,d,g)=>{const p=Ka(t),w=hi(s,[pp("config",t)]);return sC(p,w,s,a,i,d,g)},bl=(t,s,a,i,d,g)=>{const p=t,w=hi(s,[Zi("config",t)]);return sC(p,w,s,a,i,d,g)},Lp=(t,s,a)=>Yd((d,...g)=>{const p=[d].concat(g);return d.config({name:Y(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},w=>{const T=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,w.config,w.state].concat(T))})},a,s),CT=t=>({key:t,value:void 0}),sC=(t,s,a,i,d,g,p)=>{const w=M=>ks(M,a)?M[a]():_.none(),T=on(d,(M,U)=>Lp(a,M,U)),D={...on(g,(M,U)=>S1(M,U)),...T,revoke:Nt(CT,a),config:M=>{const U=Sc(a+"-config",t,M);return{key:a,value:{config:U,me:D,configAsRaw:Ir(()=>Sc(a+"-config",t,M)),initialConfig:M,state:p}}},schema:Y(s),exhibit:(M,U)=>vs(w(M),Ut(i,"exhibit"),(W,le)=>le(U,W.config,W.state)).getOrThunk(()=>su({})),name:Y(a),handlers:M=>w(M).map(U=>Ut(i,"events").getOr(()=>({}))(U.config,U.state)).getOr({})};return D},cn=t=>Qs(t),ST=Ka([Tt("fields"),Tt("name"),Ke("active",{}),Ke("apis",{}),Ke("state",ou),Ke("extra",{})]),mc=t=>{const s=Sc("Creating behaviour: "+t.name,ST,t);return wT(s.fields,s.name,s.active,s.apis,s.extra,s.state)},rC=Ka([Tt("branchKey"),Tt("branches"),Tt("name"),Ke("active",{}),Ke("apis",{}),Ke("state",ou),Ke("extra",{})]),Zv=t=>{const s=Sc("Creating behaviour: "+t.name,rC,t);return bl(fi(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},xT=Y(void 0),Nl=mc({fields:vT,name:"receiving",active:oC});var kT=Object.freeze({__proto__:null,exhibit:(t,s)=>su({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const om=t=>t.dom.focus(),aC=t=>t.dom.blur(),jv=t=>{const s=qo(t).dom;return t.dom===s.activeElement},Ki=(t=E())=>_.from(t.dom.activeElement).map(Bt.fromDom),Ml=t=>Ki(qo(t)).filter(s=>t.dom.contains(s.dom)),U1=(t,s)=>{const a=qo(s),i=Ki(a).bind(g=>{const p=w=>Hs(g,w);return p(s)?_.some(s):G2(s,p)}),d=t(s);return i.each(g=>{Ki(a).filter(p=>Hs(p,g)).fold(()=>{om(g)},oe)}),d},Pu=(t,s,a,i,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},cC=t=>({...t,position:_.some(t.position)}),Hp=(t,s)=>{fr(t,cC(s))},Ua=dt.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),iC=(t,s,a,i,d,g)=>{const p=s.rect,w=p.x-a,T=p.y-i,A=p.width,D=p.height,M=d-(w+A),U=g-(T+D),W=_.some(w),le=_.some(T),he=_.some(M),nt=_.some(U),Me=_.none();return Ni(s.direction,()=>Pu(t,W,le,Me,Me),()=>Pu(t,Me,le,he,Me),()=>Pu(t,W,Me,Me,nt),()=>Pu(t,Me,Me,he,nt),()=>Pu(t,W,le,Me,Me),()=>Pu(t,W,Me,Me,nt),()=>Pu(t,W,le,Me,Me),()=>Pu(t,Me,le,he,Me))},sf=(t,s)=>t.fold(()=>{const a=s.rect;return Pu("absolute",_.some(a.x),_.some(a.y),_.none(),_.none())},(a,i,d,g)=>iC("absolute",s,a,i,d,g),(a,i,d,g)=>iC("fixed",s,a,i,d,g)),W1=(t,s)=>{const a=Nt(yo,s),i=t.fold(a,a,()=>{const p=Ui();return yo(s).translate(-p.left,-p.top)}),d=nr(s),g=Bn(s);return qn(i.left,i.top,d,g)},lC=(t,s)=>s.fold(()=>t.fold(qa,qa,qn),a=>t.fold(a,a,()=>{const i=a(),d=Gv(t,i.x,i.y);return qn(d.left,d.top,i.width,i.height)})),Gv=(t,s,a)=>{const i=Ko(s,a),d=()=>{const g=Ui();return i.translate(-g.left,-g.top)};return t.fold(Y(i),Y(i),d)},TT=(t,s,a,i)=>t.fold(s,a,i);Ua.none;const ET=Ua.relative,qv=Ua.fixed,_T=(t,s)=>({anchorBox:t,origin:s}),og=(t,s)=>_T(t,s),zp="data-alloy-placement",Z1=(t,s)=>{So(t,zp,s)},Kv=t=>B(t,zp),sg=t=>de(t,zp),rg=dt.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Eh=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:w,right:T,bottom:A,width:D,height:M}=t,U=p>=a&&p<=d,W=w>=i&&w<=g,le=U&&W,he=T<=d&&T>=a,nt=A<=g&&A>=i,Me=he&&nt,ot=Math.min(D,p>=a?d-p:T-a),gn=Math.min(M,w>=i?g-w:A-i);return{originInBounds:le,sizeInBounds:Me,visibleW:ot,visibleH:gn}},Vp=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:w,width:T,height:A}=t,D=Math.max(a,d-T),M=Math.max(i,g-A),U=pl(p,a,D),W=pl(w,i,M),le=Math.min(U+T,d)-U,he=Math.min(W+A,g)-W;return qn(U,W,le,he)},AT=(t,s,a)=>{const i=Y(s.bottom-a.y),d=Y(a.bottom-s.y),g=Ip(t,d,d,i),p=Y(s.right-a.x),w=Y(a.right-s.x);return{maxWidth:mT(t,w,w,p),maxHeight:g}},uC=(t,s,a,i)=>{const d=t.bubble,g=d.offset,p=eC(i,t.restriction,g),w=t.x+g.left,T=t.y+g.top,A=qn(w,T,s,a),{originInBounds:D,sizeInBounds:M,visibleW:U,visibleH:W}=Eh(A,p),le=D&&M,he=le?A:Vp(A,p),nt=he.width>0&&he.height>0,{maxWidth:Me,maxHeight:ot}=AT(t.direction,he,i),gn={rect:he,maxHeight:ot,maxWidth:Me,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return le||t.alwaysFit?rg.fit(gn):rg.nofit(gn,U,W,nt)},Yv=(t,s,a,i,d,g)=>{const p=i.width,w=i.height,T=(D,M,U,W,le)=>{const he=D(a,i,d,t,g),nt=uC(he,p,w,g);return nt.fold(Y(nt),(Me,ot,gn,it)=>(le===it?gn>W||ot>U:!le&&it)?nt:rg.nofit(M,U,W,le))};return ke(s,(D,M)=>{const U=Nt(T,M);return D.fold(Y(D),U)},rg.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:Th(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(At,At)},Xv=t=>{const s=V(_.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(_.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:w=>{a(),s.set(_.some(w))}}},OT=()=>Xv(t=>t.destroy()),ag=()=>Xv(t=>t.unbind()),zr=()=>{const t=Xv(oe);return{...t,on:a=>t.get().each(a)}},Jv=Ne,ri=(t,s,a)=>Hd(t,s,Jv,a),Qv=(t,s,a)=>$f(t,s,Jv,a),ey=Nm,Up=["top","bottom","right","left"],j1="data-alloy-transition-timer",Wp=(t,s)=>F2(t,s.classes),dC=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),j4=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return tn(s,(i,d)=>{const g=t[d].map(a),p=i.map(a);return!da(g,p)}).isSome()},rf=t=>{const s=g=>{const w=_t(t,g).split(/\s*,\s*/);return xe(w,ht)},a=g=>{if(qt(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return ve(g,"ms")?p:p*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return ke(d,(g,p,w)=>{const T=a(i[w])+a(p);return Math.max(g,T)},0)},DT=(t,s)=>{const a=ag(),i=ag();let d;const g=A=>{var D;const M=(D=A.raw.pseudoElement)!==null&&D!==void 0?D:"";return Hs(A.target,t)&&In(M)&&nn(Up,A.raw.propertyName)},p=A=>{if(Rt(A)||g(A)){a.clear(),i.clear();const D=A==null?void 0:A.raw.type;(Rt(D)||D===Ud())&&(clearTimeout(d),de(t,j1),fl(t,s.classes))}},w=ri(t,Kk(),A=>{g(A)&&(w.unbind(),a.set(ri(t,Ud(),p)),i.set(ri(t,va(),p)))}),T=rf(t);requestAnimationFrame(()=>{d=setTimeout(p,T+17),So(t,j1,d)})},RT=(t,s)=>{Xd(t,s.classes),B(t,j1).each(a=>{clearTimeout(parseInt(a,10)),de(t,j1)}),DT(t,s)},NT=(t,s,a,i,d,g)=>{const p=dC(i,d,g);if(p||Wp(t,i)){$n(t,"position",a.position);const w=W1(s,t),T=sf(s,{...d,rect:w}),A=Be(Up,D=>T[D]);j4(a,A)&&(fr(t,A),p&&RT(t,i),te(t))}else fl(t,i.classes)},MT=t=>({width:nr(t),height:Bn(t)}),mC=(t,s,a,i)=>{$o(s,"max-height"),$o(s,"max-width");const d=MT(s);return Yv(s,i.preference,t,d,a,i.bounds)},ty=(t,s)=>{const a=s.classes;fl(t,a.off),Xd(t,a.on)},$T=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},BT=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},G1=(t,s,a)=>{const i=sf(a.origin,s);a.transition.each(d=>{NT(t,a.origin,i,d,s,a.lastPlacement)}),Hp(t,i)},PT=(t,s)=>{Z1(t,s.placement)},fC=(t,s)=>{Yn(t,Math.floor(s))},FT=Y((t,s)=>{fC(t,s),Fr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Zp=Y((t,s)=>{fC(t,s)}),ny=(t,s,a)=>t[s]===void 0?a:t[s],gC=(t,s,a,i,d,g,p,w)=>{const T=ny(p,"maxHeightFunction",FT()),A=ny(p,"maxWidthFunction",oe),D=t.anchorBox,M=t.origin,U={bounds:lC(M,g),origin:M,preference:i,maxHeightFunction:T,maxWidthFunction:A,lastPlacement:d,transition:w};return hC(D,s,a,U)},hC=(t,s,a,i)=>{const d=mC(t,s,a,i);return G1(s,d,i),PT(s,d),ty(s,d),$T(s,d,i),BT(s,d,i),{layout:d.layout,placement:d.placement}},pC=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],cg=(t,s,a,i=1)=>{const d=t*i,g=s*i,p=T=>Ut(a,T).getOr([]),w=(T,A,D)=>{const M=$e(pC,D);return{offset:Ko(T,A),classesOn:K(D,p),classesOff:K(M,p)}};return{southeast:()=>w(-t,s,["top","alignLeft"]),southwest:()=>w(t,s,["top","alignRight"]),south:()=>w(-t/2,s,["top","alignCentre"]),northeast:()=>w(-t,-s,["bottom","alignLeft"]),northwest:()=>w(t,-s,["bottom","alignRight"]),north:()=>w(-t/2,-s,["bottom","alignCentre"]),east:()=>w(t,-s/2,["valignCentre","left"]),west:()=>w(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>w(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>w(-d,g,["top","alignRight","inset"]),insetNorth:()=>w(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>w(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>w(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>w(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>w(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>w(d,-g/2,["valignCentre","left","inset"])}},ig=()=>cg(0,0,{}),af=At,_h=(t,s)=>a=>bC(a)==="rtl"?s:t,bC=t=>_t(t,"direction")==="rtl"?"rtl":"ltr";var sm;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(sm||(sm={}));const oy="data-alloy-vertical-dir",IT=t=>q2(t,s=>Ss(s)&&or(s,"data-alloy-vertical-dir")===sm.BottomToTop),cf=()=>hi("layouts",[Tt("onLtr"),Tt("onRtl"),Ns("onBottomLtr"),Ns("onBottomRtl")]),q1=(t,s,a,i,d,g,p)=>{const w=p.map(IT).getOr(!1),T=s.layouts.map(W=>W.onLtr(t)),A=s.layouts.map(W=>W.onRtl(t)),D=w?s.layouts.bind(W=>W.onBottomLtr.map(le=>le(t))).or(T).getOr(d):T.getOr(a),M=w?s.layouts.bind(W=>W.onBottomRtl.map(le=>le(t))).or(A).getOr(g):A.getOr(i);return _h(D,M)(t)},LT=(t,s,a)=>{const i=s.hotspot,d=W1(a,i.element),g=q1(t.element,s,z1(),Wv(),Pn(),ng(),_.some(s.hotspot.element));return _.some(af({anchorBox:d,bubble:s.bubble.getOr(ig()),overrides:s.overrides,layouts:g,placer:_.none()}))};var sy=[Tt("hotspot"),Ns("bubble"),Ke("overrides",{}),cf(),br("placement",LT)];const HT=(t,s,a)=>{const i=Gv(a,s.x,s.y),d=qn(i.left,i.top,s.width,s.height),g=q1(t.element,s,nC(),H1(),nC(),H1(),_.none());return _.some(af({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g,placer:_.none()}))};var zT=[Tt("x"),Tt("y"),Ke("height",0),Ke("width",0),Ke("bubble",ig()),Ke("overrides",{}),cf(),br("placement",HT)];const ry=dt.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),vC=t=>t.fold(At,(s,a,i)=>s.translate(-a,-i)),yC=t=>t.fold(At,At),ay=t=>ke(t,(s,a)=>s.translate(a.left,a.top),Ko(0,0)),wC=t=>{const s=Ve(t,vC);return ay(s)},CC=t=>{const s=Ve(t,yC);return ay(s)},VT=ry.screen,K1=ry.absolute,SC=(t,s,a)=>{const i=Bc(a.root).dom,d=g=>{const p=fa(g),w=fa(t.element);return Hs(p,w)};return _.from(i.frameElement).map(Bt.fromDom).filter(d).map(Os)},Y1=(t,s,a)=>{const i=fa(t.element),d=Ui(i),g=SC(t,s,a).getOr(d);return K1(g,d.left,d.top)},bd=(t,s,a,i)=>{const d=VT(Ko(t,s));return _.some(ts(d,a,i))},cy=(t,s,a,i,d)=>t.map(g=>{const p=[s,g.point],w=TT(i,()=>CC(p),()=>CC(p),()=>wC(p)),T=Zo(w.left,w.top,g.width,g.height),A=a.showAbove?Pn():z1(),D=a.showAbove?ng():Wv(),M=q1(d,a,A,D,A,D,_.none());return af({anchorBox:T,bubble:a.bubble.getOr(ig()),overrides:a.overrides,layouts:M,placer:_.none()})}),iy=(t,s,a)=>{const i=Y1(t,a,s);return s.node.filter(jr).bind(d=>{const g=d.dom.getBoundingClientRect(),p=bd(g.left,g.top,g.width,g.height),w=s.node.getOr(t.element);return cy(p,i,s,a,w)})};var xC=[Tt("node"),Tt("root"),Ns("bubble"),cf(),Ke("overrides",{}),Ke("showAbove",!1),br("placement",iy)];const kC="\uFEFF",ly="\xA0",X1={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},jp=dt.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Gp=(t,s,a,i)=>t.fold(s,a,i),lg=t=>t.fold(At,At,At),UT=jp.before,uy=jp.on,WT=jp.after,J1={before:UT,on:uy,after:WT,cata:Gp,getStart:lg},qp=dt.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),TC=t=>qp.exact(t.start,t.soffset,t.finish,t.foffset),ZT=t=>t.match({domRange:s=>Bt.fromDom(s.startContainer),relative:(s,a)=>J1.getStart(s),exact:(s,a,i,d)=>s}),jT=qp.domRange,GT=qp.relative,ec=qp.exact,Ah=t=>{const s=ZT(t);return Bc(s)},rm=X1.create,am={domRange:jT,relative:GT,exact:ec,exactFromRange:TC,getWin:Ah,range:rm},qT=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},lf=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},Fu=(t,s,a)=>{const i=t.document.createRange();return qT(i,s),lf(i,a),i},Q1=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},e0=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),dy=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?_.some(a).map(e0):_.none()},EC=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?_.some(s).map(e0):_.none()},cm=dt.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),vd=(t,s,a)=>s(Bt.fromDom(a.startContainer),a.startOffset,Bt.fromDom(a.endContainer),a.endOffset),t0=(t,s)=>s.match({domRange:a=>({ltr:Y(a),rtl:_.none}),relative:(a,i)=>({ltr:Ir(()=>Fu(t,a,i)),rtl:Ir(()=>_.some(Fu(t,i,a)))}),exact:(a,i,d,g)=>({ltr:Ir(()=>Q1(t,a,i,d,g)),rtl:Ir(()=>_.some(Q1(t,d,g,a,i)))})}),_C=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>cm.rtl(Bt.fromDom(d.endContainer),d.endOffset,Bt.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>vd(t,cm.ltr,a)):vd(t,cm.ltr,a)},Kp=(t,s)=>{const a=t0(t,s);return _C(t,a)},Oh=(t,s)=>Kp(t,s).match({ltr:(i,d,g,p)=>{const w=t.document.createRange();return w.setStart(i.dom,d),w.setEnd(g.dom,p),w},rtl:(i,d,g,p)=>{const w=t.document.createRange();return w.setStart(g.dom,p),w.setEnd(i.dom,d),w}});cm.ltr,cm.rtl;const Uc=(t,s)=>Yc(s,t),AC=(t,s,a,i)=>{const g=fa(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},uf=(t,s,a,i)=>{const d=AC(t,s,a,i),g=Hs(t,a)&&s===i;return d.collapsed&&!g},_c=t=>_.from(t.getSelection()),my=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return _.some(X1.create(Bt.fromDom(s.startContainer),s.startOffset,Bt.fromDom(a.endContainer),a.endOffset))}else return _.none()},Iu=t=>{if(t.anchorNode===null||t.focusNode===null)return my(t);{const s=Bt.fromDom(t.anchorNode),a=Bt.fromDom(t.focusNode);return uf(s,t.anchorOffset,a,t.focusOffset)?_.some(X1.create(s,t.anchorOffset,a,t.focusOffset)):my(t)}},Yp=t=>_c(t).filter(s=>s.rangeCount>0).bind(Iu),n0=(t,s)=>{const a=Oh(t,s);return dy(a)},ug=(t,s)=>{const a=Oh(t,s);return EC(a)},Dh=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?_.from(g.dom.nodeValue):_.none();return{get:a,getOption:i,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(Pr,"text"),OC=t=>Dh.get(t),yd=(t,s)=>({element:t,offset:s}),Rh=(t,s)=>{const a=Xs(t);if(a.length===0)return yd(t,s);if(s<a.length)return yd(a[s],0);{const i=a[a.length-1],d=Pr(i)?OC(i).length:Xs(i).length;return yd(i,d)}},DC=(t,s)=>Pr(t)?yd(t,s):Rh(t,s),Xp=(t,s)=>s.getSelection.getOrThunk(()=>()=>Yp(t))().map(i=>{const d=DC(i.start,i.soffset),g=DC(i.finish,i.foffset);return am.range(d.element,d.offset,g.element,g.offset)}),im=(t,s,a)=>{const i=Bc(s.root).dom,d=Y1(t,a,s),g=Xp(i,s).bind(T=>ug(i,am.exactFromRange(T)).orThunk(()=>{const D=Bt.fromText(kC);xu(T.start,D);const M=n0(i,am.exact(D,0,D,1));return Kl(D),M}).bind(D=>bd(D.left,D.top,D.width,D.height))),w=Xp(i,s).bind(T=>Ss(T.start)?_.some(T.start):Ti(T.start)).getOr(t.element);return cy(g,d,s,a,w)};var q4=[Ns("getSelection"),Tt("root"),Ns("bubble"),cf(),Ke("overrides",{}),Ke("showAbove",!1),br("placement",im)];const Jp="link-layout",Qp=t=>t.x+t.width,fy=(t,s)=>t.x-s.width,gy=(t,s)=>t.y-s.height+t.height,hy=t=>t.y,RC=(t,s,a)=>dc(Qp(t),hy(t),a.southeast(),Th(),"southeast",Qa(t,{left:0,top:2}),Jp),vl=(t,s,a)=>dc(fy(t,s),hy(t),a.southwest(),M1(),"southwest",Qa(t,{right:1,top:2}),Jp),Nh=(t,s,a)=>dc(Qp(t),gy(t,s),a.northeast(),$1(),"northeast",Qa(t,{left:0,bottom:3}),Jp),o0=(t,s,a)=>dc(fy(t,s),gy(t,s),a.northwest(),B1(),"northwest",Qa(t,{right:1,bottom:3}),Jp),wd=()=>[RC,vl,Nh,o0],wi=()=>[vl,RC,o0,Nh],yl=(t,s,a)=>{const i=W1(a,s.item.element),d=q1(t.element,s,wd(),wi(),wd(),wi(),_.none());return _.some(af({anchorBox:i,bubble:ig(),overrides:s.overrides,layouts:d,placer:_.none()}))};var Mi=[Tt("item"),cf(),Ke("overrides",{}),br("placement",yl)],Cd=fi("type",{selection:q4,node:xC,hotspot:sy,submenu:Mi,makeshift:zT});const py=[gi("classes",Ea),il("mode","all",["all","layout","placement"])],wl=[Ke("useFixed",Pe),Ns("getBounds")],dg=[Oi("anchor",Cd),hi("transition",py)],YT=()=>{const t=document.documentElement;return qv(0,0,t.clientWidth,t.clientHeight)},K4=t=>{const s=Os(t.element),a=t.element.dom.getBoundingClientRect();return ET(s.left,s.top,a.width,a.height)},Y4=(t,s,a,i,d,g,p)=>{const w=og(a.anchorBox,s);return gC(w,d.element,a.bubble,a.layouts,g,i,a.overrides,p)},mg=(t,s,a,i,d)=>{by(t,s,a,i,d,_.none())},by=(t,s,a,i,d,g)=>{const p=g.map(ns);return eb(t,s,a,i,d,p)},eb=(t,s,a,i,d,g)=>{const p=Sc("placement.info",ro(dg),d),w=p.anchor,T=i.element,A=a.get(i.uid);U1(()=>{$n(T,"position","fixed");const D=Js(T,"visibility");$n(T,"visibility","hidden");const M=s.useFixed()?YT():K4(t),U=w.placement,W=g.map(Y).or(s.getBounds);U(t,w,M).each(le=>{const nt=le.placer.getOr(Y4)(t,M,le,W,i,A,p.transition);a.set(i.uid,nt)}),D.fold(()=>{$o(T,"visibility")},le=>{$n(T,"visibility",le)}),Js(T,"left").isNone()&&Js(T,"top").isNone()&&Js(T,"right").isNone()&&Js(T,"bottom").isNone()&&kr(Js(T,"position"),"fixed")&&$o(T,"position")},T)};var vy=Object.freeze({__proto__:null,position:mg,positionWithin:by,positionWithinBounds:eb,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;R(["position","left","right","top","bottom"],g=>$o(d,g)),sg(d),a.clear(i.uid)}}),JT=Object.freeze({__proto__:null,init:()=>{let t={};return Ri({readState:()=>t,clear:d=>{an(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>Ut(t,d)})}});const ai=mc({fields:wl,name:"positioning",active:kT,apis:vy,state:JT}),s0=t=>t.getSystem().isConnected(),fg=t=>{zs(t,ih());const s=t.components();R(s,fg)},lm=t=>{const s=t.components();R(s,lm),zs(t,fd())},tb=(t,s)=>{t.getSystem().addToWorld(s),jr(t.element)&&lm(s)},r0=t=>{fg(t),t.getSystem().removeFromWorld(t)},MC=(t,s)=>{Cc(t.element,s.element)},QT=t=>{R(t.components(),s=>Kl(s.element)),ad(t.element),t.syncComponents()},eE=(t,s,a)=>{const i=t.components();QT(t);const d=a(s),g=$e(i,d);R(g,p=>{fg(p),t.getSystem().removeFromWorld(p)}),R(d,p=>{s0(p)?MC(t,p):(t.getSystem().addToWorld(p),MC(t,p),jr(t.element)&&lm(p))}),t.syncComponents()},a0=(t,s,a)=>{const i=t.components(),d=K(s,w=>Mu(w).toArray());R(i,w=>{nn(d,w)||r0(w)});const g=a(s),p=$e(i,g);R(p,w=>{s0(w)&&r0(w)}),R(g,w=>{s0(w)||tb(t,w)}),t.syncComponents()},Ac=(t,s)=>{$C(t,s,Cc)},$C=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),jr(t.element)&&lm(s),t.syncComponents()},Mh=t=>{fg(t),Kl(t.element),t.getSystem().removeFromWorld(t)},Oc=t=>{const s=oa(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Mh(t),s.each(a=>{a.syncComponents()})},c0=t=>{const s=t.components();R(s,Mh),ad(t.element),t.syncComponents()},au=(t,s)=>{wy(t,s,Cc)},yy=(t,s)=>{wy(t,s,jg)},wy=(t,s,a)=>{a(t,s.element);const i=Xs(s.element);R(i,d=>{s.getByDom(d).each(lm)})},tE=t=>{const s=Xs(t.element);R(s,a=>{t.getByDom(a).each(fg)}),Kl(t.element)},nE=(t,s,a,i)=>{a.get().each(p=>{c0(t)});const d=s.getAttachPoint(t);Ac(d,t);const g=t.getSystem().build(i);return Ac(t,g),a.set(g),g},Cy=(t,s,a,i)=>{const d=nE(t,s,a,i);return s.onOpen(t,d),d},BC=(t,s,a,i)=>a.get().map(()=>nE(t,s,a,i)),oE=(t,s,a,i,d)=>{xy(t,s),Cy(t,s,a,i),d(),gg(t,s)},nb=(t,s,a)=>{a.get().each(i=>{c0(t),Oc(t),s.onClose(t,i),a.clear()})},$h=(t,s,a)=>a.isOpen(),sE=(t,s,a,i)=>$h(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),PC=(t,s,a)=>a.get(),Sy=(t,s,a,i)=>{Js(t.element,s).fold(()=>{de(t.element,a)},d=>{So(t.element,a,d)}),$n(t.element,s,i)},rE=(t,s,a)=>{B(t.element,a).fold(()=>$o(t.element,s),i=>$n(t.element,s,i))},xy=(t,s,a)=>{const i=s.getAttachPoint(t);$n(t.element,"position",ai.getMode(i)),Sy(t,"visibility",s.cloakVisibilityAttr,"hidden")},df=t=>ze(["top","left","right","bottom"],s=>Js(t,s).isSome()),gg=(t,s,a)=>{df(t.element)||$o(t.element,"position"),rE(t,"visibility",s.cloakVisibilityAttr)};var FC=Object.freeze({__proto__:null,cloak:xy,decloak:gg,open:Cy,openWhileCloaked:oE,close:nb,isOpen:$h,isPartOf:sE,getState:PC,setContent:BC}),IC=Object.freeze({__proto__:null,events:(t,s)=>ir([Pt(Sp(),(a,i)=>{nb(a,t,s)})])}),ky=[us("onOpen"),us("onClose"),Tt("isPartOf"),Tt("getAttachPoint"),Ke("cloakVisibilityAttr","data-precloak-visibility")],i0=Object.freeze({__proto__:null,init:()=>{const t=zr(),s=Y("not-implemented");return Ri({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const ds=mc({fields:ky,name:"sandboxing",active:IC,apis:FC,state:i0}),Sd=Y("dismiss.popups"),mf=Y("reposition.popups"),ff=Y("mouse.released"),Ey=Ka([Ke("isExtraPart",Pe),hi("fireEventInstead",[Ke("event",Zd())])]),Bh=t=>{const s=Sc("Dismissal",Ey,t);return{[Sd()]:{schema:Ka([Tt("target")]),onReceive:(a,i)=>{ds.isOpen(a)&&(ds.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>ds.close(a),g=>zs(a,g.event)))}}}},gf=Ka([hi("fireEventInstead",[Ke("event",h1())]),ba("doReposition")]),l0=t=>{const s=Sc("Reposition",gf,t);return{[mf()]:{onReceive:a=>{ds.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>zs(a,i.event))}}}},u0=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},d0=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var m0=Object.freeze({__proto__:null,onLoad:u0,onUnload:d0,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),LC=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Hr((i,d)=>{u0(i,t,s)}),Dl((i,d)=>{d0(i,t,s)})]:[V1(t,s,u0)];return ir(a)}});const um=()=>{const t=V(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Ri({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},_y=()=>Ri({readState:oe}),bg=()=>{const t=V({}),s=V({});return Ri({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>Ut(t.get(),p).orThunk(()=>Ut(s.get(),p)),update:p=>{const w=t.get(),T=s.get(),A={},D={};R(p,M=>{A[M.value]=M,Ut(M,"meta").each(U=>{Ut(U,"text").each(W=>{D[W]=M})})}),t.set({...w,...A}),s.set({...T,...D})},clear:()=>{t.set({}),s.set({})}})};var HC=Object.freeze({__proto__:null,memory:um,dataset:bg,manual:_y,init:t=>t.store.manager.state(t)});const sb=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},Oy=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},aE=(t,s,a)=>{s.store.initialValue.each(d=>{sb(t,s,a,d)})},cE=(t,s,a)=>{a.clear()};var xd=[Ns("initialValue"),Tt("getFallbackEntry"),Tt("getDataKey"),Tt("setValue"),br("manager",{setValue:sb,getValue:Oy,onLoad:aE,onUnload:cE,state:bg})];const Ph=(t,s,a)=>s.store.getValue(t),iE=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},$l=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var tc=[Tt("getValue"),Ke("setValue",oe),Ns("initialValue"),br("manager",{setValue:iE,getValue:Ph,onLoad:$l,onUnload:oe,state:ou.init})];const lE=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},Fh=(t,s,a)=>a.get(),Ih=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},zC=(t,s,a)=>{a.clear()};var VC=[Ns("initialValue"),br("manager",{setValue:lE,getValue:Fh,onLoad:Ih,onUnload:zC,state:um})],uE=[_a("store",{mode:"memory"},fi("mode",{memory:VC,manual:tc,dataset:xd})),us("onSetValue"),Ke("resetOnDom",!1)];const vn=mc({fields:uE,name:"representing",active:LC,apis:m0,extra:{setValueFrom:(t,s)=>{const a=vn.getValue(s);vn.setValue(t,a)}},state:HC}),Da=(t,s)=>I(t,{},Ve(s,a=>Tv(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([xc("dump",At)])),vg=t=>t.dump,fc=(t,s)=>({...cn(s),...t.dump}),Bl={field:Da,augment:fc,get:vg},f0="placeholder",Lh=dt.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),rb=t=>Vn(t,"uiType"),UC=(t,s,a,i)=>t.exists(d=>d!==a.owner)?Lh.single(!0,Y(a)):Ut(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+De(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),ab=(t,s,a,i)=>rb(a)&&a.uiType===f0?UC(t,s,a,i):Lh.single(!1,Y(a)),Dy=(t,s,a,i)=>ab(t,s,a,i).fold((g,p)=>{const w=rb(a)?p(s,a.config,a.validated):p(s),T=Ut(w,"components").getOr([]),A=K(T,D=>Dy(t,s,D,i));return[{...w,components:A}]},(g,p)=>{if(rb(a)){const w=p(s,a.config,a.validated);return a.validated.preprocess.getOr(At)(w)}else return p(s)}),hf=(t,s,a,i)=>K(a,d=>Dy(t,s,d,i)),cb=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,w)=>p,(p,w)=>p);return{name:Y(t),required:g,used:i,replace:d}},dE=(t,s,a,i)=>{const d=on(i,(p,w)=>cb(w,p)),g=hf(t,s,a,d);return Dt(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},WC=Lh.single,Ry=Lh.multiple,yg=Y(f0),ib=dt.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),g0=Ke("factory",{sketch:At}),h0=Ke("schema",[]),Hh=Tt("name"),Ny=Ya("pname","pname",Xl(t=>"<alloy."+Un(t.name)+">"),ei()),ZC=xc("schema",()=>[Ns("preprocess")]),Lu=Ke("defaults",Y({})),lb=Ke("overrides",Y({})),mE=ro([g0,h0,Hh,Ny,Lu,lb]),fE=ro([g0,h0,Hh,Lu,lb]),dm=ro([g0,h0,Hh,Ny,Lu,lb]),gE=ro([g0,ZC,Hh,Tt("unit"),Ny,Lu,lb]),jC=t=>t.fold(_.some,_.none,_.some,_.some),p0=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},hE=t=>t.fold(At,At,At,At),b0=(t,s)=>a=>{const i=Sc("Converting part type",s,a);return t(i)},Wc=b0(ib.required,mE),Hu=b0(ib.external,fE),cu=b0(ib.optional,dm),ub=b0(ib.group,gE),v0=Y("entirety");var GC=Object.freeze({__proto__:null,required:Wc,external:Hu,optional:cu,group:ub,asNamedPart:jC,name:p0,asCommon:hE,original:v0});const My=(t,s,a,i)=>hr(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),qC=(t,s,a)=>{const i={},d={};return R(a,g=>{g.fold(p=>{i[p.pname]=WC(!0,(w,T,A)=>p.factory.sketch(My(w,p,T,A)))},p=>{const w=s.parts[p.name];d[p.name]=Y(p.factory.sketch(My(s,p,w[v0()]),w))},p=>{i[p.pname]=WC(!1,(w,T,A)=>p.factory.sketch(My(w,p,T,A)))},p=>{i[p.pname]=Ry(!0,(w,T,A)=>{const D=w[p.name];return Ve(D,M=>p.factory.sketch(hr(p.defaults(w,M,A),M,p.overrides(w,M))))})})}),{internals:Y(i),externals:Y(d)}},$y=(t,s)=>{const a={};return R(s,i=>{jC(i).each(d=>{const g=KC(t,d.pname);a[d.name]=p=>{const w=Sc("Part: "+d.name+" in "+t,ro(d.schema),p);return{...g,config:p,validated:w}}})}),a},KC=(t,s)=>({uiType:yg(),owner:t,name:s}),By=(t,s,a)=>({uiType:yg(),owner:t,name:s,config:a,validated:{}}),YC=t=>K(t,s=>s.fold(_.none,_.some,_.none,_.none).map(a=>cl(a.name,a.schema.concat([zv(v0())]))).toArray()),XC=t=>Ve(t,p0),y0=(t,s,a)=>qC(t,s,a),Py=(t,s,a)=>dE(_.some(t),s,s.components,a),sr=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Fn=(t,s,a)=>sr(t,s,a).getOrDie("Could not find part: "+a),pf=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return R(a,p=>{i[p]=Y(g.getByUid(d[p]))}),i},JC=(t,s)=>{const a=t.getSystem();return on(s.partUids,(i,d)=>Y(a.getByUid(i)))},bf=t=>De(t.partUids),kd=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return R(a,p=>{i[p]=Y(g.getByUid(d[p]).getOrDie())}),i},zh=(t,s)=>{const a=XC(s);return Qs(Ve(a,i=>({key:i,value:t+"-"+i})))},Fy=t=>Ya("partUids","partUids",Pm(s=>zh(s.uid,t)),ei());var Pl=Object.freeze({__proto__:null,generate:$y,generateOne:By,schemas:YC,names:XC,substitutes:y0,components:Py,defaultUids:zh,defaultUidsSchema:Fy,getAllParts:JC,getAllPartNames:bf,getPart:sr,getPartOrDie:Fn,getParts:pf,getPartsOrDie:kd});const wg=(t,s)=>(t.length>0?[cl("parts",t)]:[]).concat([Tt("uid"),Ke("dom",{}),Ke("components",[]),zv("originalSpec"),Ke("debug.sketcher",{})]).concat(s),QC=(t,s,a,i,d)=>{const g=wg(i,d);return Sc(t+" [SpecSchema]",Ka(g.concat(s)),a)},Vh=(t,s,a,i)=>{const d=Iy(i),g=QC(t,s,d,[],[]);return a(g,d)},db=(t,s,a,i,d)=>{const g=Iy(d),p=YC(a),w=Fy(a),T=QC(t,s,g,p,[w]),A=y0(t,T,a),D=Py(t,T,A.internals());return i(T,D,g,A.externals())},mb=t=>Vn(t,"uid"),Iy=t=>mb(t)?t:{...t,uid:hd("uid")},pE=t=>t.uid!==void 0,bE=Ka([Tt("name"),Tt("factory"),Tt("configFields"),Ke("apis",{}),Ke("extraApis",{})]),vE=Ka([Tt("name"),Tt("factory"),Tt("configFields"),Tt("partFields"),Ke("apis",{}),Ke("extraApis",{})]),Fl=t=>{const s=Sc("Sketcher for "+t.name,bE,t),a=g=>Vh(s.name,s.configFields,s.factory,g),i=on(s.apis,gh),d=on(s.extraApis,(g,p)=>S1(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},Zc=t=>{const s=Sc("Sketcher for "+t.name,vE,t),a=p=>db(s.name,s.configFields,s.partFields,s.factory,p),i=$y(s.name,s.partFields),d=on(s.apis,gh),g=on(s.extraApis,(p,w)=>S1(p,w));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},vf=t=>Pa("input")(t)&&or(t,"type")!=="radio"||Pa("textarea")(t);var yE=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const wE=[Tt("find")],os=mc({fields:wE,name:"composing",apis:yE}),CE=["input","button","textarea","select"],eS=(t,s,a)=>{(s.disabled()?nS:oS)(t,s)},Ly=(t,s)=>s.useNative===!0&&nn(CE,Go(t.element)),tS=t=>J(t.element,"disabled"),tO=t=>{So(t.element,"disabled","disabled")},Td=t=>{de(t.element,"disabled")},w0=t=>or(t.element,"aria-disabled")==="true",nO=t=>{So(t.element,"aria-disabled","true")},oO=t=>{So(t.element,"aria-disabled","false")},nS=(t,s,a)=>{s.disableClass.each(d=>{ya(t.element,d)}),(Ly(t,s)?tO:nO)(t),s.onDisabled(t)},oS=(t,s,a)=>{s.disableClass.each(d=>{ca(t.element,d)}),(Ly(t,s)?Td:oO)(t),s.onEnabled(t)},sS=(t,s)=>Ly(t,s)?tS(t):w0(t);var rO=Object.freeze({__proto__:null,enable:oS,disable:nS,isDisabled:sS,onLoad:eS,set:(t,s,a,i)=>{(i?nS:oS)(t,s)}}),SE=Object.freeze({__proto__:null,exhibit:(t,s)=>su({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>ir([T2(ul(),(a,i)=>sS(a,t)),V1(t,s,eS)])}),rS=[Oa("disabled",Pe),Ke("useNative",!0),Ns("disableClass"),us("onDisabled"),us("onEnabled")];const xo=mc({fields:rS,name:"disabling",active:SE,apis:rO}),Uh=(t,s,a,i)=>{const d=Uc(t.element,"."+s.highlightClass);R(d,g=>{ze(i,w=>Hs(w.element,g))||(ca(g,s.highlightClass),t.getSystem().getByDom(g).each(w=>{s.onDehighlight(t,w),zs(w,b1())}))})},aS=(t,s,a)=>Uh(t,s,a,[]),cS=(t,s,a,i)=>{Vy(t,s,a,i)&&(ca(i.element,s.highlightClass),s.onDehighlight(t,i),zs(i,b1()))},Cg=(t,s,a,i)=>{Uh(t,s,a,[i]),Vy(t,s,a,i)||(ya(i.element,s.highlightClass),s.onHighlight(t,i),zs(i,Ov()))},zy=(t,s,a)=>{S0(t,s).each(i=>{Cg(t,s,a,i)})},xE=(t,s,a)=>{fb(t,s).each(i=>{Cg(t,s,a,i)})},C0=(t,s,a,i)=>{kE(t,s,a,i).fold(d=>{throw d},d=>{Cg(t,s,a,d)})},iS=(t,s,a,i)=>{const d=gb(t,s);se(d,i).each(p=>{Cg(t,s,a,p)})},Vy=(t,s,a,i)=>ji(i.element,s.highlightClass),lS=(t,s,a)=>ia(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),kE=(t,s,a,i)=>{const d=Uc(t.element,"."+s.itemClass);return _.from(d[i]).fold(()=>Bo.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},S0=(t,s,a)=>ia(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),fb=(t,s,a)=>{const i=Uc(t.element,"."+s.itemClass);return(i.length>0?_.some(i[i.length-1]):_.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Uy=(t,s,a,i)=>{const d=Uc(t.element,"."+s.itemClass);return re(d,p=>ji(p,s.highlightClass)).bind(p=>{const w=tg(p,i,0,d.length-1);return t.getSystem().getByDom(d[w]).toOptional()})},x0=(t,s,a)=>Uy(t,s,a,-1),k0=(t,s,a)=>Uy(t,s,a,1),gb=(t,s,a)=>{const i=Uc(t.element,"."+s.itemClass);return ps(Ve(i,d=>t.getSystem().getByDom(d).toOptional()))};var Sg=Object.freeze({__proto__:null,dehighlightAll:aS,dehighlight:cS,highlight:Cg,highlightFirst:zy,highlightLast:xE,highlightAt:C0,highlightBy:iS,isHighlighted:Vy,getHighlighted:lS,getFirst:S0,getLast:fb,getPrevious:x0,getNext:k0,getCandidates:gb}),aO=[Tt("highlightClass"),Tt("itemClass"),us("onHighlight"),us("onDehighlight")];const Ls=mc({fields:aO,name:"highlighting",apis:Sg}),TE=[8],wf=[9],Ed=[13],Wy=[27],Yi=[32],Zy=[37],hb=[38],T0=[39],mm=[40],jy=(t,s,a)=>{const i=Z(t.slice(0,s)),d=Z(t.slice(s+1));return se(i.concat(d),a)},EE=(t,s,a)=>{const i=Z(t.slice(0,s));return se(i,a)},_E=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return se(d.concat(i),a)},uS=(t,s,a)=>{const i=t.slice(s+1);return se(i,a)},Cs=t=>s=>{const a=s.raw;return nn(t,a.which)},zu=t=>s=>H(t,a=>a(s)),xg=t=>t.raw.shiftKey===!0,l=t=>t.raw.ctrlKey===!0,m=we(xg),h=(t,s)=>({matches:t,classification:s}),v=(t,s)=>se(t,i=>i.matches(s)).map(i=>i.classification),S=(t,s,a)=>{s.exists(d=>a.exists(g=>Hs(g,d)))||po(t,kp(),{prevFocus:s,newFocus:a})},O=()=>{const t=a=>Ml(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);S(a,d,g)}}},F=()=>{const t=a=>Ls.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(oe,p=>{Ls.highlight(a,p)});const g=t(a);S(a,d,g)}}};var G;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(G||(G={}));const ne=(t,s,a,i,d)=>{const g=()=>t.concat([Ke("focusManager",O()),_a("focusInside","onFocus",ra(A=>nn(["onFocus","onEnterOrSpace","onApi"],A)?Bo.value(A):Bo.error("Invalid value for focusInside"))),br("handler",T),br("state",s),br("sendFocusIn",d)]),p=(A,D,M,U,W)=>{const le=M(A,D,U,W);return v(le,D.event).bind(he=>he(A,D,U,W))},T={schema:g,processKey:p,toEvents:(A,D)=>{const M=A.focusInside!==G.OnFocusMode?_.none():d(A).map(le=>Pt(Wd(),(he,nt)=>{le(he,A,D),nt.stop()})),U=(le,he)=>{const nt=Cs(Yi.concat(Ed))(he.event);A.focusInside===G.OnEnterOrSpaceMode&&nt&&Ou(le,he)&&d(A).each(Me=>{Me(le,A,D),he.stop()})},W=[Pt(jm(),(le,he)=>{p(le,he,a,A,D).fold(()=>{U(le,he)},nt=>{he.stop()})}),Pt(qk(),(le,he)=>{p(le,he,i,A,D).each(nt=>{he.stop()})})];return ir(M.toArray().concat(W))}};return T},ye=t=>{const s=[Ns("onEscape"),Ns("onEnter"),Ke("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Ke("firstTabstop",0),Ke("useTabstopAt",Ne),Ns("visibilitySelector")].concat([t]),a=(he,nt)=>{const Me=he.visibilitySelector.bind(ot=>Rl(nt,ot)).getOr(nt);return ut(Me)>0},i=(he,nt)=>{const Me=Uc(he.element,nt.selector),ot=xe(Me,gn=>a(nt,gn));return _.from(ot[nt.firstTabstop])},d=(he,nt)=>nt.focusManager.get(he).bind(Me=>Rl(Me,nt.selector)),g=(he,nt)=>a(he,nt)&&he.useTabstopAt(nt),p=(he,nt,Me)=>{i(he,nt).each(ot=>{nt.focusManager.set(he,ot)})},w=(he,nt,Me,ot,gn)=>gn(nt,Me,it=>g(ot,it)).fold(()=>ot.cyclic?_.some(!0):_.none(),it=>(ot.focusManager.set(he,it),_.some(!0))),T=(he,nt,Me,ot)=>{const gn=Uc(he.element,Me.selector);return d(he,Me).bind(it=>re(gn,Nt(Hs,it)).bind(Hn=>w(he,gn,Hn,Me,ot)))},A=(he,nt,Me)=>{const ot=Me.cyclic?jy:EE;return T(he,nt,Me,ot)},D=(he,nt,Me)=>{const ot=Me.cyclic?_E:uS;return T(he,nt,Me,ot)},M=(he,nt,Me)=>Me.onEnter.bind(ot=>ot(he,nt)),U=(he,nt,Me)=>Me.onEscape.bind(ot=>ot(he,nt)),W=Y([h(zu([xg,Cs(wf)]),A),h(Cs(wf),D),h(zu([m,Cs(Ed)]),M)]),le=Y([h(Cs(Wy),U)]);return ne(s,ou.init,W,le,()=>_.some(p))};var Ze=ye(xc("cyclic",Pe)),Mt=ye(xc("cyclic",Ne));const ln=(t,s,a)=>(Dv(t,a,ul()),_.some(!0)),Yt=(t,s,a)=>vf(a)&&Cs(Yi)(s.event)?_.none():ln(t,s,a),vt=(t,s)=>_.some(!0),fn=[Ke("execute",Yt),Ke("useSpace",!1),Ke("useEnter",!0),Ke("useControlEnter",!1),Ke("useDown",!1)],St=(t,s,a)=>a.execute(t,s,t.element),Wn=(t,s,a,i)=>{const d=a.useSpace&&!vf(t.element)?Yi:[],g=a.useEnter?Ed:[],p=a.useDown?mm:[],w=d.concat(g).concat(p);return[h(Cs(w),St)].concat(a.useControlEnter?[h(zu([l,Cs(Ed)]),St)]:[])},To=(t,s,a,i)=>a.useSpace&&!vf(t.element)?[h(Cs(Yi),vt)]:[];var zo=ne(fn,ou.init,Wn,To,()=>_.none());const Ar=()=>{const t=zr();return Ri({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var la=Object.freeze({__proto__:null,flatgrid:Ar,init:t=>t.state(t)});const $i=t=>(s,a,i,d)=>{const g=t(s.element);return _0(g,s,a,i,d)},Cf=(t,s)=>{const a=_h(t,s);return $i(a)},pb=(t,s)=>{const a=_h(s,t);return $i(a)},E0=t=>(s,a,i,d)=>_0(t,s,a,i,d),_0=(t,s,a,i,d)=>i.focusManager.get(s).bind(p=>t(s.element,p,i,d)).map(p=>(i.focusManager.set(s,p),!0)),qs=E0,Dc=E0,Rc=E0,Vu=t=>t.offsetWidth<=0&&t.offsetHeight<=0,Xi=t=>!Vu(t.dom),Wh=(t,s)=>re(t,s).map(a=>({index:a,candidates:t})),ci=(t,s,a)=>{const i=p=>Hs(p,s),d=Uc(t,a),g=xe(d,Xi);return Wh(g,i)},Bi=(t,s)=>re(t,a=>Hs(s,a)),Zh=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(p=>{const w=p.row*a+p.column;return w>=0&&w<t.length?_.some(t[w]):_.none()})},Uu=(t,s,a,i,d)=>Zh(t,s,i,(g,p)=>{const T=g===a-1?t.length-g*i:i,A=tg(p,d,0,T-1);return _.some({row:g,column:A})}),Nc=(t,s,a,i,d)=>Zh(t,s,i,(g,p)=>{const w=tg(g,d,0,a-1),A=w===a-1?t.length-w*i:i,D=pl(p,0,A-1);return _.some({row:w,column:D})}),AE=(t,s,a,i)=>Uu(t,s,a,i,1),OE=(t,s,a,i)=>Uu(t,s,a,i,-1),jh=(t,s,a,i)=>Nc(t,s,a,i,-1),Gy=(t,s,a,i)=>Nc(t,s,a,i,1),DE=[Tt("selector"),Ke("execute",Yt),Gi("onEscape"),Ke("captureTab",!1),Fp()],qy=(t,s,a)=>{ia(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},A0=(t,s)=>s.focusManager.get(t).bind(a=>Rl(a,s.selector)),bb=(t,s,a,i)=>A0(t,a).bind(d=>a.execute(t,s,d)),dS=t=>(s,a,i,d)=>ci(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),cO=(t,s,a)=>a.captureTab?_.some(!0):_.none(),tF=(t,s,a)=>a.onEscape(t,s),iO=dS(OE),lO=dS(AE),nF=dS(jh),uO=dS(Gy),RE=Y([h(Cs(Zy),Cf(iO,lO)),h(Cs(T0),pb(iO,lO)),h(Cs(hb),qs(nF)),h(Cs(mm),Dc(uO)),h(zu([xg,Cs(wf)]),cO),h(zu([m,Cs(wf)]),cO),h(Cs(Yi.concat(Ed)),bb)]),oF=Y([h(Cs(Wy),tF),h(Cs(Yi),vt)]);var sF=ne(DE,Ar,RE,oF,()=>_.some(qy));const mS=(t,s,a,i)=>{const d=p=>Go(p)==="button"&&or(p,"disabled")==="disabled",g=(p,w,T)=>{const A=tg(w,i,0,T.length-1);return A===p?_.none():d(T[A])?g(p,A,T):_.from(T[A])};return ci(t,a,s).bind(p=>{const w=p.index,T=p.candidates;return g(w,w,T)})},rF=[Tt("selector"),Ke("getInitial",_.none),Ke("execute",Yt),Gi("onEscape"),Ke("executeOnMove",!1),Ke("allowVertical",!0)],vb=(t,s)=>s.focusManager.get(t).bind(a=>Rl(a,s.selector)),NE=(t,s,a)=>vb(t,a).bind(i=>a.execute(t,s,i)),aF=(t,s,a)=>{s.getInitial(t).orThunk(()=>ia(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},fS=(t,s,a)=>mS(t,a.selector,s,-1),dO=(t,s,a)=>mS(t,a.selector,s,1),ME=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?NE(s,a,i):_.some(!0)),mO=(t,s,a)=>a.onEscape(t,s),fO=(t,s,a,i)=>{const d=Zy.concat(a.allowVertical?hb:[]),g=T0.concat(a.allowVertical?mm:[]);return[h(Cs(d),ME(Cf(fS,dO))),h(Cs(g),ME(pb(fS,dO))),h(Cs(Ed),NE),h(Cs(Yi),NE)]},gO=Y([h(Cs(Yi),vt),h(Cs(Wy),mO)]);var cF=ne(rF,ou.init,fO,gO,()=>_.some(aF));const gS=(t,s,a)=>_.from(t[s]).bind(i=>_.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),hO=(t,s,a,i)=>{const g=t[s].length,p=tg(a,i,0,g-1);return gS(t,s,p)},hS=(t,s,a,i)=>{const d=tg(a,i,0,t.length-1),g=t[d].length,p=pl(s,0,g-1);return gS(t,d,p)},pO=(t,s,a,i)=>{const g=t[s].length,p=pl(a+i,0,g-1);return gS(t,s,p)},bO=(t,s,a,i)=>{const d=pl(a+i,0,t.length-1),g=t[d].length,p=pl(s,0,g-1);return gS(t,d,p)},iF=(t,s,a)=>hO(t,s,a,1),vO=(t,s,a)=>hO(t,s,a,-1),lF=(t,s,a)=>hS(t,a,s,-1),uF=(t,s,a)=>hS(t,a,s,1),dF=(t,s,a)=>pO(t,s,a,-1),yO=(t,s,a)=>pO(t,s,a,1),mF=(t,s,a)=>bO(t,a,s,-1),fF=(t,s,a)=>bO(t,a,s,1),wO=[cl("selectors",[Tt("row"),Tt("cell")]),Ke("cycles",!0),Ke("previousSelector",_.none),Ke("execute",Yt)],gF=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return ia(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},hF=(t,s,a)=>Ml(t.element).bind(i=>a.execute(t,s,i)),pS=(t,s)=>Ve(t,a=>Uc(a,s.selectors.cell)),bS=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return Rl(i,d.selectors.row).bind(p=>{const w=Uc(p,d.selectors.cell);return Bi(w,i).bind(T=>{const A=Uc(a,d.selectors.row);return Bi(A,p).bind(D=>{const M=pS(A,d);return g(M,D,T).map(U=>U.cell)})})})},$E=bS(vO,dF),Ji=bS(iF,yO),pF=bS(lF,mF),CO=bS(uF,fF),bF=Y([h(Cs(Zy),Cf($E,Ji)),h(Cs(T0),pb($E,Ji)),h(Cs(hb),qs(pF)),h(Cs(mm),Dc(CO)),h(Cs(Yi.concat(Ed)),hF)]),vF=Y([h(Cs(Yi),vt)]);var SO=ne(wO,ou.init,bF,vF,()=>_.some(gF));const yF=[Tt("selector"),Ke("execute",Yt),Ke("moveOnTab",!1)],BE=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),xO=(t,s,a)=>{ia(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},kO=(t,s,a)=>mS(t,a.selector,s,-1),TO=(t,s,a)=>mS(t,a.selector,s,1),wF=(t,s,a,i)=>a.moveOnTab?Rc(kO)(t,s,a,i):_.none(),CF=(t,s,a,i)=>a.moveOnTab?Rc(TO)(t,s,a,i):_.none(),EO=Y([h(Cs(hb),Rc(kO)),h(Cs(mm),Rc(TO)),h(zu([xg,Cs(wf)]),wF),h(zu([m,Cs(wf)]),CF),h(Cs(Ed),BE),h(Cs(Yi),BE)]),_O=Y([h(Cs(Yi),vt)]);var Gh=ne(yF,ou.init,EO,_O,()=>_.some(xO));const AO=[Gi("onSpace"),Gi("onEnter"),Gi("onShiftEnter"),Gi("onLeft"),Gi("onRight"),Gi("onTab"),Gi("onShiftTab"),Gi("onUp"),Gi("onDown"),Gi("onEscape"),Ke("stopSpaceKeyup",!1),Ns("focusIn")],OO=(t,s,a)=>[h(Cs(Yi),a.onSpace),h(zu([m,Cs(Ed)]),a.onEnter),h(zu([xg,Cs(Ed)]),a.onShiftEnter),h(zu([xg,Cs(wf)]),a.onShiftTab),h(zu([m,Cs(wf)]),a.onTab),h(Cs(hb),a.onUp),h(Cs(mm),a.onDown),h(Cs(Zy),a.onLeft),h(Cs(T0),a.onRight),h(Cs(Yi),a.onSpace)],PE=(t,s,a)=>[...a.stopSpaceKeyup?[h(Cs(Yi),vt)]:[],h(Cs(Wy),a.onEscape)];var SF=ne(AO,ou.init,OO,PE,t=>t.focusIn);const xF=Ze.schema(),kF=Mt.schema(),TF=cF.schema(),DO=sF.schema(),FE=SO.schema(),IE=zo.schema(),EF=Gh.schema(),qh=SF.schema();var RO=Object.freeze({__proto__:null,acyclic:xF,cyclic:kF,flow:TF,flatgrid:DO,matrix:FE,execution:IE,menu:EF,special:qh});const NO=t=>ks(t,"setGridSize"),fo=Zv({branchKey:"mode",branches:RO,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{NO(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:la}),MO=(t,s)=>{U1(()=>{eE(t,s,()=>Ve(s,t.getSystem().build))},t.element)},O0=(t,s)=>{U1(()=>{a0(t,s,()=>Jf(t.element,s,t.getSystem().buildOrPatch))},t.element)},Ky=(t,s,a,i)=>{r0(s);const d=Bv(t.element,a,i,t.getSystem().buildOrPatch);tb(t,d),t.syncComponents()},vS=(t,s,a)=>{const i=t.getSystem().build(a);$C(t,i,s)},$O=(t,s,a,i)=>{Oc(s),vS(t,(d,g)=>Gg(d,g,a),i)},Kh=(t,s,a,i)=>(s.reuseDom?O0:MO)(t,i),Yh=(t,s,a,i)=>{vS(t,Cc,i)},_F=(t,s,a,i)=>{vS(t,$m,i)},AF=(t,s,a,i)=>{const d=Yy(t);se(d,p=>Hs(i.element,p.element)).each(Oc)},Yy=(t,s)=>t.components(),Sf=(t,s,a,i,d)=>{const g=Yy(t);return _.from(g[i]).map(p=>(d.fold(()=>Oc(p),w=>{(s.reuseDom?Ky:$O)(t,p,i,w)}),p))};var PO=Object.freeze({__proto__:null,append:Yh,prepend:_F,remove:AF,replaceAt:Sf,replaceBy:(t,s,a,i,d)=>{const g=Yy(t);return re(g,i).bind(p=>Sf(t,s,a,p,d))},set:Kh,contents:Yy});const Ho=mc({fields:[Aa("reuseDom",!0)],name:"replacing",apis:PO}),FO=(t,s)=>{const a=ir(s);return mc({fields:[Tt("enabled")],name:t,active:{events:Y(a)}})},ms=(t,s)=>{const a=FO(t,s);return{key:t,value:{config:{},me:a,configAsRaw:Y({}),initialConfig:{},state:ou}}},LE=(t,s)=>{s.ignore||(om(t.element),s.onFocus(t))};var OF=Object.freeze({__proto__:null,focus:LE,blur:(t,s)=>{s.ignore||aC(t.element)},isFocused:t=>jv(t.element)}),zE=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return su(a)},events:t=>ir([Pt(Wd(),(s,a)=>{LE(s,t),a.stop()})].concat(t.stopMousedown?[Pt(Lc(),(s,a)=>{a.event.prevent()})]:[]))}),DF=[us("onFocus"),Ke("stopMousedown",!1),Ke("ignore",!1)];const _o=mc({fields:DF,name:"focusing",active:zE,apis:OF}),LO=t=>({init:()=>{const a=V(t);return{get:()=>a.get(),set:w=>a.set(w),clear:()=>a.set(t),readState:()=>a.get()}}}),HO=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},zO=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?ya(t.element,i):ca(t.element,i)})},D0=(t,s,a,i)=>{const d=a.get();a.set(i),zO(t,s,a),HO(t,s,a),d!==i&&s.onToggled(t,i)},VO=(t,s,a)=>{D0(t,s,a,!a.get())},VE=(t,s,a)=>{D0(t,s,a,!0)},RF=(t,s,a)=>{D0(t,s,a,!1)},NF=(t,s,a)=>a.get(),UO=(t,s,a)=>{D0(t,s,a,s.selected)};var MF=Object.freeze({__proto__:null,onLoad:UO,toggle:VO,isOn:NF,on:VE,off:RF,set:D0}),BF=Object.freeze({__proto__:null,exhibit:()=>su({}),events:(t,s)=>{const a=yT(t,s,VO),i=V1(t,s,UO);return ir(z([t.toggleOnExecute?[a]:[],[i]]))}});const PF=(t,s,a)=>{So(t.element,"aria-pressed",a),s.syncWithExpanded&&R0(t,s,a)},Xy=(t,s,a)=>{So(t.element,"aria-selected",a)},FF=(t,s,a)=>{So(t.element,"aria-checked",a)},R0=(t,s,a)=>{So(t.element,"aria-expanded",a)};var UE=[Ke("selected",!1),Ns("toggleClass"),Ke("toggleOnExecute",!0),us("onToggled"),_a("aria",{mode:"none"},fi("mode",{pressed:[Ke("syncWithExpanded",!1),br("update",PF)],checked:[br("update",FF)],expanded:[br("update",R0)],selected:[br("update",Xy)],none:[br("update",oe)]}))];const Ts=mc({fields:UE,name:"toggling",active:BF,apis:MF,state:LO(!1)}),WE=()=>{const t=(s,a)=>{a.stop(),jd(s)};return[Pt(wp(),t),Pt(ch(),t),dh(er()),dh(Lc())]},yS=t=>{const s=a=>dl((i,d)=>{a(i),d.stop()});return ir(z([t.map(s).toArray(),WE()]))},WO="alloy.item-hover",ZE="alloy.item-focus",ZO="alloy.item-toggled",jE=t=>{(Ml(t.element).isNone()||_o.isFocused(t))&&(_o.isFocused(t)||_o.focus(t),po(t,WO,{item:t}))},jO=t=>{po(t,ZE,{item:t})},IF=(t,s)=>{po(t,ZO,{item:t,state:s})},GE=Y(WO),wS=Y(ZE),qE=Y(ZO),KE=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),LF=t=>({aria:{mode:"checked"},...Ge(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{qe(t.onToggled)&&t.onToggled(s,a),IF(s,a)}}),HF=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:KE(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Bl.augment(t.itemBehaviours,[t.toggling.fold(Ts.revoke,s=>Ts.config(LF(s))),_o.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{jO(s)}}),fo.config({mode:"execution"}),vn.config({store:{mode:"memory",initialValue:t.data}}),ms("item-type-events",[...WE(),Pt(Vd(),jE),Pt(Gm(),_o.focus)])]),components:t.components,eventOrder:t.eventOrder}),zF=[Tt("data"),Tt("components"),Tt("dom"),Ke("hasSubmenu",!1),Ns("toggling"),Bl.field("itemBehaviours",[Ts,_o,fo,vn]),Ke("ignoreFocus",!1),Ke("domModification",{}),br("builder",HF),Ke("eventOrder",{})],VF=t=>({dom:t.dom,components:t.components,events:ir([_2(Gm())])}),GO=[Tt("dom"),Tt("components"),br("builder",VF)],CS=Y("item-widget"),YE=Y([Wc({name:"widget",overrides:t=>({behaviours:cn([vn.config({store:{mode:"manual",getValue:s=>t.data,setValue:oe}})])})})]),UF=t=>{const s=y0(CS(),t,YE()),a=Py(CS(),t,s.internals()),i=g=>sr(g,t,"widget").map(p=>(fo.focusIn(p),p)),d=(g,p)=>vf(p.event.target)?_.none():(()=>(t.autofocus&&p.setSource(g.element),_.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:ir([dl((g,p)=>{i(g).each(w=>{p.stop()})}),Pt(Vd(),jE),Pt(Gm(),(g,p)=>{t.autofocus?i(g):_o.focus(g)})]),behaviours:Bl.augment(t.widgetBehaviours,[vn.config({store:{mode:"memory",initialValue:t.data}}),_o.config({ignore:t.ignoreFocus,onFocus:g=>{jO(g)}}),fo.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:xT(),onLeft:d,onRight:d,onEscape:(g,p)=>!_o.isFocused(g)&&!t.autofocus?(_o.focus(g),_.some(!0)):(t.autofocus&&p.setSource(g.element),_.none())})])}},WF=[Tt("uid"),Tt("data"),Tt("components"),Tt("dom"),Ke("autofocus",!1),Ke("ignoreFocus",!1),Bl.field("widgetBehaviours",[vn,_o,fo]),Ke("domModification",{}),Fy(YE()),br("builder",UF)],ZF=fi("type",{widget:WF,item:zF,separator:GO}),jF=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),GF=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),qO=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),qF=Y([ub({factory:{sketch:t=>{const s=Sc("menu.spec item",ZF,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Vn(s,"uid")?s:{...s,uid:hd("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),KF=Y([Tt("value"),Tt("items"),Tt("dom"),Tt("components"),Ke("eventOrder",{}),Da("menuBehaviours",[Ls,vn,os,fo]),_a("movement",{mode:"menu",moveOnTab:!0},fi("mode",{grid:[Fp(),br("config",jF)],matrix:[br("config",GF),Tt("rowSelector"),Ke("previousSelector",_.none)],menu:[Ke("moveOnTab",!0),br("config",qO)]})),X2(),Ke("fakeFocus",!1),Ke("focusManager",O()),us("onHighlight"),us("onDehighlight")]),KO=Y("alloy.menu-focus"),YF=(t,s)=>{const a=Uc(t.element,'[role="menuitemradio"][aria-checked="true"]');R(a,i=>{Hs(i,s.element)||t.getSystem().getByDom(i).each(d=>{Ts.off(d)})})},XF=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:fc(t.menuBehaviours,[Ls.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),vn.config({store:{mode:"memory",initialValue:t.value}}),os.config({find:_.some}),fo.config(t.movement.config(t,t.movement))]),events:ir([Pt(wS(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(w=>{Ls.highlight(d,w),g.stop(),po(d,KO(),{menu:d,item:w})})}),Pt(GE(),(d,g)=>{const p=g.event.item;Ls.highlight(d,p)}),Pt(qE(),(d,g)=>{const{item:p,state:w}=g.event;w&&or(p.element,"role")==="menuitemradio"&&YF(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),Wu=Zc({name:"Menu",configFields:KF(),partFields:qF(),factory:XF}),JF=t=>wn(t,(s,a)=>({k:s,v:a})),YO=(t,s,a,i)=>Ut(a,i).bind(d=>Ut(t,d).bind(g=>{const p=YO(t,s,a,g);return _.some([g].concat(p))})).getOr([]),yb=(t,s)=>{const a={};Dt(t,(p,w)=>{R(p,T=>{a[T]=w})});const i=s,d=JF(s),g=on(d,(p,w)=>[w].concat(YO(a,i,d,w)));return on(a,p=>Ut(g,p).getOr([p]))},QF=()=>{const t=V({}),s=V({}),a=V({}),i=zr(),d=V({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},p=()=>i.get().isNone(),w=(yn,Hn)=>{s.set({...s.get(),[yn]:{type:"prepared",menu:Hn}})},T=(yn,Hn,Nn,ho)=>{i.set(yn),t.set(Nn),s.set(Hn),d.set(ho);const bo=yb(ho,Nn);a.set(bo)},A=yn=>tn(t.get(),(Hn,Nn)=>Hn===yn),D=(yn,Hn,Nn)=>he(yn).bind(ho=>A(yn).bind(bo=>Hn(bo).map(Wo=>({triggeredMenu:ho,triggeringItem:Wo,triggeringPath:Nn})))),M=(yn,Hn)=>{const Nn=xe(Me(yn).toArray(),ho=>he(ho).isSome());return Ut(a.get(),yn).bind(ho=>{const bo=Z(Nn.concat(ho)),Wo=K(bo,(ys,oo)=>D(ys,Hn,bo.slice(0,oo+1)).fold(()=>kr(i.get(),ys)?[]:[_.none()],Xo=>[_.some(Xo)]));return bc(Wo)})},U=yn=>Ut(t.get(),yn).map(Hn=>{const Nn=Ut(a.get(),yn).getOr([]);return[Hn].concat(Nn)}),W=yn=>Ut(a.get(),yn).bind(Hn=>Hn.length>1?_.some(Hn.slice(1)):_.none()),le=yn=>Ut(a.get(),yn),he=yn=>nt(yn).bind(XO),nt=yn=>Ut(s.get(),yn),Me=yn=>Ut(t.get(),yn);return{setMenuBuilt:w,setContents:T,expand:U,refresh:le,collapse:W,lookupMenu:nt,lookupItem:Me,otherMenus:yn=>{const Hn=d.get();return $e(De(Hn),yn)},getPrimary:()=>i.get().bind(he),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:M}},XO=t=>t.type==="prepared"?_.some(t.menu):_.none(),kg={init:QF,extractPreparedMenu:XO},JO=Un("tiered-menu-item-highlight"),QO=Un("tiered-menu-item-dehighlight");var ta;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ta||(ta={}));const eD=(t,s)=>{const a=zr(),i=(sn,Dn,Mo)=>on(Mo,(Qo,Zs)=>{const _s=()=>Wu.sketch({...Qo,value:Zs,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Gc,Dr)=>{po(Gc,JO,{menuComp:Gc,itemComp:Dr})},onDehighlight:(Gc,Dr)=>{po(Gc,QO,{menuComp:Gc,itemComp:Dr})},focusManager:t.fakeFocus?F():O()});return Zs===Dn?{type:"prepared",menu:sn.getSystem().build(_s())}:{type:"notbuilt",nbMenu:_s}}),d=kg.init(),g=sn=>{const Dn=i(sn,t.data.primary,t.data.menus),Mo=T();return d.setContents(t.data.primary,Dn,t.data.expansions,Mo),d.getPrimary()},p=sn=>vn.getValue(sn).value,w=(sn,Dn,Mo)=>to(Dn,Qo=>{if(!Qo.getSystem().isConnected())return _.none();const Zs=Ls.getCandidates(Qo);return se(Zs,_s=>p(_s)===Mo)}),T=sn=>on(t.data.menus,(Dn,Mo)=>K(Dn.items,Qo=>Qo.type==="separator"?[]:[Qo.data.value])),A=Ls.highlight,D=(sn,Dn)=>{A(sn,Dn),Ls.getHighlighted(Dn).orThunk(()=>Ls.getFirst(Dn)).each(Mo=>{t.fakeFocus?Ls.highlight(Dn,Mo):Dv(sn,Mo.element,Gm())})},M=(sn,Dn)=>ps(Ve(Dn,Mo=>sn.lookupMenu(Mo).bind(Qo=>Qo.type==="prepared"?_.some(Qo.menu):_.none()))),U=(sn,Dn,Mo)=>{const Qo=M(Dn,Dn.otherMenus(Mo));R(Qo,Zs=>{fl(Zs.element,[t.markers.backgroundMenu]),t.stayInDom||Ho.remove(sn,Zs)})},W=sn=>a.get().getOrThunk(()=>{const Dn={},Mo=Uc(sn.element,`.${t.markers.item}`),Qo=xe(Mo,Zs=>or(Zs,"aria-haspopup")==="true");return R(Qo,Zs=>{sn.getSystem().getByDom(Zs).each(_s=>{const Gc=p(_s);Dn[Gc]=_s})}),a.set(Dn),Dn}),le=(sn,Dn)=>{const Mo=W(sn);Dt(Mo,(Qo,Zs)=>{const _s=nn(Dn,Zs);So(Qo.element,"aria-expanded",_s)})},he=(sn,Dn,Mo)=>_.from(Mo[0]).bind(Qo=>Dn.lookupMenu(Qo).bind(Zs=>{if(Zs.type==="notbuilt")return _.none();{const _s=Zs.menu,Gc=M(Dn,Mo.slice(1));return R(Gc,Dr=>{ya(Dr.element,t.markers.backgroundMenu)}),jr(_s.element)||Ho.append(sn,hl(_s)),fl(_s.element,[t.markers.backgroundMenu]),D(sn,_s),U(sn,Dn,Mo),_.some(_s)}}));let nt;(function(sn){sn[sn.HighlightSubmenu=0]="HighlightSubmenu",sn[sn.HighlightParent=1]="HighlightParent"})(nt||(nt={}));const Me=(sn,Dn,Mo)=>{if(Mo.type==="notbuilt"){const Qo=sn.getSystem().build(Mo.nbMenu());return d.setMenuBuilt(Dn,Qo),Qo}else return Mo.menu},ot=(sn,Dn,Mo=nt.HighlightSubmenu)=>{if(Dn.hasConfigured(xo)&&xo.isDisabled(Dn))return _.some(Dn);{const Qo=p(Dn);return d.expand(Qo).bind(Zs=>(le(sn,Zs),_.from(Zs[0]).bind(_s=>d.lookupMenu(_s).bind(Gc=>{const Dr=Me(sn,_s,Gc);return jr(Dr.element)||Ho.append(sn,hl(Dr)),t.onOpenSubmenu(sn,Dn,Dr,Z(Zs)),Mo===nt.HighlightSubmenu?(Ls.highlightFirst(Dr),he(sn,d,Zs)):(Ls.dehighlightAll(Dr),_.some(Dn))}))))}},gn=(sn,Dn)=>{const Mo=p(Dn);return d.collapse(Mo).bind(Qo=>(le(sn,Qo),he(sn,d,Qo).map(Zs=>(t.onCollapseMenu(sn,Dn,Zs),Zs))))},it=(sn,Dn)=>{const Mo=p(Dn);return d.refresh(Mo).bind(Qo=>(le(sn,Qo),he(sn,d,Qo)))},yn=(sn,Dn)=>vf(Dn.element)?_.none():ot(sn,Dn,nt.HighlightSubmenu),Hn=(sn,Dn)=>vf(Dn.element)?_.none():gn(sn,Dn),Nn=(sn,Dn)=>gn(sn,Dn).orThunk(()=>t.onEscape(sn,Dn).map(()=>sn)),ho=sn=>(Dn,Mo)=>Rl(Mo.getSource(),`.${t.markers.item}`).bind(Qo=>Dn.getSystem().getByDom(Qo).toOptional().bind(Zs=>sn(Dn,Zs).map(Ne))),bo=ir([Pt(KO(),(sn,Dn)=>{const Mo=Dn.event.item;d.lookupItem(p(Mo)).each(()=>{const Qo=Dn.event.menu;Ls.highlight(sn,Qo);const Zs=p(Dn.event.item);d.refresh(Zs).each(_s=>U(sn,d,_s))})}),dl((sn,Dn)=>{const Mo=Dn.event.target;sn.getSystem().getByDom(Mo).each(Qo=>{p(Qo).indexOf("collapse-item")===0&&gn(sn,Qo),ot(sn,Qo,nt.HighlightSubmenu).fold(()=>{t.onExecute(sn,Qo)},oe)})}),Hr((sn,Dn)=>{g(sn).each(Mo=>{Ho.append(sn,hl(Mo)),t.onOpenMenu(sn,Mo),t.highlightOnOpen===ta.HighlightMenuAndItem?D(sn,Mo):t.highlightOnOpen===ta.HighlightJustMenu&&A(sn,Mo)})}),Pt(JO,(sn,Dn)=>{t.onHighlightItem(sn,Dn.event.menuComp,Dn.event.itemComp)}),Pt(QO,(sn,Dn)=>{t.onDehighlightItem(sn,Dn.event.menuComp,Dn.event.itemComp)}),...t.navigateOnHover?[Pt(GE(),(sn,Dn)=>{const Mo=Dn.event.item;it(sn,Mo),ot(sn,Mo,nt.HighlightParent),t.onHover(sn,Mo)})]:[]]),Wo=sn=>Ls.getHighlighted(sn).bind(Ls.getHighlighted),ys=sn=>{Wo(sn).each(Dn=>{gn(sn,Dn)})},oo=sn=>{d.getPrimary().each(Dn=>{D(sn,Dn)})},Xo=sn=>_.from(sn.components()[0]).filter(Dn=>or(Dn.element,"role")==="menu"),gs={collapseMenu:ys,highlightPrimary:oo,repositionMenus:sn=>{d.getPrimary().bind(Mo=>Wo(sn).bind(Qo=>{const Zs=p(Qo),_s=en(d.getMenus()),Gc=ps(Ve(_s,kg.extractPreparedMenu));return d.getTriggeringPath(Zs,Dr=>w(sn,Gc,Dr))}).map(Qo=>({primary:Mo,triggeringPath:Qo}))).fold(()=>{Xo(sn).each(Mo=>{t.onRepositionMenu(sn,Mo,[])})},({primary:Mo,triggeringPath:Qo})=>{t.onRepositionMenu(sn,Mo,Qo)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:fc(t.tmenuBehaviours,[fo.config({mode:"special",onRight:ho(yn),onLeft:ho(Hn),onEscape:ho(Nn),focusIn:(sn,Dn)=>{d.getPrimary().each(Mo=>{Dv(sn,Mo.element,Gm())})}}),Ls.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),os.config({find:sn=>Ls.getHighlighted(sn)}),Ho.config({})]),eventOrder:t.eventOrder,apis:gs,events:bo}},tD=Y("collapse-item"),nD=(t,s,a)=>({primary:t,menus:s,expansions:a}),e5=(t,s)=>({primary:t,menus:Us(t,s),expansions:{}}),oD=t=>({value:Un(tD()),meta:{text:t}}),wb=Fl({name:"TieredMenu",configFields:[Hv("onExecute"),Hv("onEscape"),of("onOpenMenu"),of("onOpenSubmenu"),us("onRepositionMenu"),us("onCollapseMenu"),Ke("highlightOnOpen",ta.HighlightMenuAndItem),cl("data",[Tt("primary"),Tt("menus"),Tt("expansions")]),Ke("fakeFocus",!1),us("onHighlightItem"),us("onDehighlightItem"),us("onHover"),Pp(),Tt("dom"),Ke("navigateOnHover",!0),Ke("stayInDom",!1),Da("tmenuBehaviours",[fo,Ls,os,Ho]),Ke("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:eD,extraApis:{tieredData:nD,singleData:e5,collapseItem:oD}}),t5=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),p=i.type==="horizontal"?{layouts:{onLtr:()=>z1(),onRtl:()=>Wv()}}:{},w=A=>A.length===2,T=A=>w(A)?p:{};return wb.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(ds.close(s),t.onEscape.map(A=>A(s)),_.some(!0)),onExecute:()=>_.some(!0),onOpenMenu:(A,D)=>{ai.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(A,D,M,U)=>{const W=g().getOrDie();ai.position(W,M,{anchor:{type:"submenu",item:D,...T(U)}})},onRepositionMenu:(A,D,M)=>{const U=g().getOrDie();ai.positionWithinBounds(U,D,a,d()),R(M,W=>{const le=T(W.triggeringPath);ai.position(U,W.triggeredMenu,{anchor:{type:"submenu",item:W.triggeringItem,...le}})})}})},n5=(t,s)=>{const a=(W,le)=>t.getRelated(W).exists(nt=>Qd(nt,le)),i=(W,le)=>{ds.setContent(W,le)},d=(W,le,he)=>{g(W,le,he,_.none())},g=(W,le,he,nt)=>{p(W,le,he,()=>nt.map(Me=>ns(Me)))},p=(W,le,he,nt)=>{const Me=t.lazySink(W).getOrDie();ds.openWhileCloaked(W,le,()=>ai.positionWithinBounds(Me,W,he,nt())),vn.setValue(W,_.some({mode:"position",config:he,getBounds:nt}))},w=(W,le,he)=>{T(W,le,he,_.none)},T=(W,le,he,nt)=>{const Me=t5(t,W,le,he,nt);ds.open(W,Me),vn.setValue(W,_.some({mode:"menu",menu:Me}))},A=W=>{ds.isOpen(W)&&(vn.setValue(W,_.none()),ds.close(W))},D=W=>ds.getState(W),M=W=>{ds.isOpen(W)&&vn.getValue(W).each(le=>{switch(le.mode){case"menu":ds.getState(W).each(wb.repositionMenus);break;case"position":const he=t.lazySink(W).getOrDie();ai.positionWithinBounds(he,W,le.config,le.getBounds());break}})},U={setContent:i,showAt:d,showWithin:g,showWithinBounds:p,showMenuAt:w,showMenuWithinBounds:T,hide:A,getContent:D,reposition:M,isOpen:ds.isOpen};return{uid:t.uid,dom:t.dom,behaviours:fc(t.inlineBehaviours,[ds.config({isPartOf:(W,le,he)=>Qd(le,he)||a(W,he),getAttachPoint:W=>t.lazySink(W).getOrDie(),onOpen:W=>{t.onShow(W)},onClose:W=>{t.onHide(W)}}),vn.config({store:{mode:"memory",initialValue:_.none()}}),Nl.config({channels:{...Bh({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(W=>({fireEventInstead:{event:W.event}})).getOr({})}),...l0({...t.fireRepositionEventInstead.map(W=>({fireEventInstead:{event:W.event}})).getOr({}),doReposition:M})}})]),eventOrder:t.eventOrder,apis:U}},Kr=Fl({name:"InlineView",configFields:[Tt("lazySink"),us("onShow"),us("onHide"),Uf("onEscape"),Da("inlineBehaviours",[ds,vn,Nl]),hi("fireDismissalEventInstead",[Ke("event",Zd())]),hi("fireRepositionEventInstead",[Ke("event",h1())]),Ke("getRelated",_.none),Ke("isExtraPart",Pe),Ke("eventOrder",_.none)],factory:n5,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithin:(t,s,a,i,d)=>{t.showWithin(s,a,i,d)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var N0=tinymce.util.Tools.resolve("tinymce.util.Delay");const Qi=Fl({name:"Button",factory:t=>{const s=yS(t.action),a=t.dom.tag,i=g=>Ut(t.dom,"attributes").bind(p=>Ut(p,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),p=i("role").map(w=>({role:w})).getOr({});return{type:g,...p}}else return{role:i("role").getOr("button")}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Bl.augment(t.buttonBehaviours,[_o.config({}),fo.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Ke("uid",void 0),Tt("dom"),Ke("components",[]),Bl.field("buttonBehaviours",[_o,fo]),Ns("action"),Ns("role"),Ke("eventOrder",{})]}),wr=t=>{const s=pE(t)&&ks(t,"uid")?t.uid:hd("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var _d=tinymce.util.Tools.resolve("tinymce.util.I18n");const XE={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},sD="temporary-placeholder",Jy=t=>()=>Ut(t,sD).getOr("!not found!"),JE=(t,s)=>{const a=t.toLowerCase();if(_d.isRtl()){const i=sc(a,"-rtl");return Vn(s,i)?i:a}else return a},M0=(t,s)=>Ut(s,JE(t,s)),Qy=(t,s)=>{const a=s();return M0(t,a).getOrThunk(Jy(a))},rD=(t,s,a)=>{const i=s();return M0(t,i).or(a).getOrThunk(Jy(i))},aD=t=>_d.isRtl()?Vn(XE,t):!1,QE=()=>ms("add-focusable",[Hr(t=>{uT(t.element,"svg").each(s=>So(s,"focusable","false"))})]),cD=(t,s,a,i)=>{var d,g;const p=aD(s)?["tox-icon--flip"]:[],w=Ut(a,JE(s,a)).or(i).getOrThunk(Jy(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:w},behaviours:cn([...(g=t.behaviours)!==null&&g!==void 0?g:[],QE()])}},fm=(t,s,a,i=_.none())=>cD(s,t,a(),i),o5=(t,s,a)=>{const i=a(),d=se(t,g=>Vn(i,JE(g,i)));return cD(s,d.getOr(sD),i,_.none())},e_={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},SS=Fl({name:"Notification",factory:t=>{const s=wr({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:cn([Ho.config({})])}),a=W=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${W}%`}}}),i=W=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${W}%`}}),d=wr({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},i(0)],behaviours:cn([Ho.config({})])}),w={updateProgress:(W,le)=>{W.getSystem().isConnected()&&d.getOpt(W).each(he=>{Ho.set(he,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(le)]},i(le)])})},updateText:(W,le)=>{if(W.getSystem().isConnected()){const he=s.get(W);Ho.set(he,[za(le)])}}},T=z([t.icon.toArray(),t.level.toArray(),t.level.bind(W=>_.from(e_[W])).toArray()]),A=wr(Qi.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[fm("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:W=>{t.onAction(W)}})),D=o5(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),M={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:cn([Ho.config({})])},U=[D,M];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(W=>["tox-notification","tox-notification--in",`tox-notification--${W}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:cn([_o.config({}),ms("notification-events",[Pt(Zm(),W=>{A.getOpt(W).each(_o.focus)})])]),components:U.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[A.asSpec()]:[]),apis:w}},configFields:[Ns("level"),Tt("progress"),Ns("icon"),Tt("onAction"),Tt("text"),Tt("iconProvider"),Tt("translationProvider"),Aa("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var t_=(t,s,a)=>{const i=s.backstage.shared,d=()=>{const T=ns(Bt.fromDom(t.getContentAreaContainer())),A=qa(),D=pl(A.x,T.x,T.right),M=pl(A.y,T.y,T.bottom),U=Math.max(T.right,A.right),W=Math.max(T.bottom,A.bottom);return _.some(qn(D,M,U-D,W-M))};return{open:(T,A)=>{const D=()=>{A(),Kr.hide(U)},M=vi(SS.sketch({text:T.text,level:nn(["success","error","warning","warn","info"],T.type)?T.type:void 0,progress:T.progressBar===!0,icon:T.icon,closeButton:T.closeButton,onAction:D,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),U=vi(Kr.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(U),rt(T.timeout)&&T.timeout>0&&N0.setEditorTimeout(t,()=>{D()},T.timeout);const le={close:D,reposition:()=>{const he=hl(M),nt={maxHeightFunction:Zp()},Me=t.notificationManager.getNotifications();if(Me[0]===le){const ot={...i.anchors.banner(),overrides:nt};Kr.showWithinBounds(U,he,{anchor:ot},d)}else jt(Me,le).each(ot=>{const gn=Me[ot-1].getEl(),it={type:"node",root:Jr(),node:_.some(Bt.fromDom(gn)),overrides:nt,layouts:{onRtl:()=>[Va],onLtr:()=>[Va]}};Kr.showWithinBounds(U,he,{anchor:it},d)})},text:he=>{SS.updateText(M,he)},settings:T,getEl:()=>M.element.dom,progressBar:{value:he=>{SS.updateProgress(M,he)}}};return le},close:T=>{T.close()},getArgs:T=>T.settings}},ew=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),iD=tinymce.util.Tools.resolve("tinymce.EditorManager"),$0=tinymce.util.Tools.resolve("tinymce.Env"),Zu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Zu||(Zu={}));var tw;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(tw||(tw={}));const Cr=t=>s=>s.options.get(t),nw=t=>s=>_.from(t(s)),lD=t=>{const s=$0.deviceType.isPhone(),a=$0.deviceType.isTablet()||s,i=t.options.register,d=p=>qt(p)||p===!1,g=p=>qt(p)||rt(p);i("skin",{processor:p=>qt(p)||p===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:ew.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:p=>qt(p)||Zt(p),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:p=>Zt(p)||qt(p)||Tn(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),It(9,p=>{i("toolbar"+(p+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:tw.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:p=>p==="both"||Zt(p),default:!$0.deviceType.isTouch()}),i("sidebar_show",{processor:"string"})},xS=Cr("readonly"),kS=Cr("height"),TS=Cr("width"),n_=nw(Cr("min_width")),ow=nw(Cr("min_height")),ES=nw(Cr("max_width")),o_=nw(Cr("max_height")),uD=nw(Cr("style_formats")),dD=Cr("style_formats_merge"),mD=Cr("style_formats_autohide"),s_=Cr("content_langs"),_S=Cr("removed_menuitems"),B0=Cr("toolbar_mode"),sw=Cr("toolbar_groups"),r_=Cr("toolbar_location"),r5=Cr("fixed_toolbar_container"),a5=Cr("fixed_toolbar_container_target"),fD=Cr("toolbar_persist"),gD=Cr("toolbar_sticky_offset"),hD=Cr("menubar"),rw=Cr("toolbar"),pD=Cr("file_picker_callback"),bD=Cr("file_picker_validator_handler"),AS=Cr("file_picker_types"),Xh=Cr("typeahead_urls"),vD=Cr("anchor_top"),yD=Cr("anchor_bottom"),OS=Cr("draggable_modal"),wD=Cr("statusbar"),a_=Cr("elementpath"),CD=Cr("branding"),c_=Cr("resize"),i_=Cr("paste_as_text"),DS=Cr("sidebar_show"),SD=Cr("promotion"),RS=t=>t.options.get("skin")===!1,NS=t=>t.options.get("menubar")!==!1,P0=t=>{const s=t.options.get("skin_url");if(RS(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return iD.baseURL+"/skins/ui/"+a}},xD=t=>t.options.get("line_height_formats").split(" "),F0=t=>{const s=rw(t),a=qt(s),i=Tn(s)&&s.length>0;return!cw(t)&&(i||a||s===!0)},aw=t=>{const s=It(9,i=>t.options.get("toolbar"+(i+1))),a=xe(s,qt);return dr(a.length>0,a)},cw=t=>aw(t).fold(()=>{const s=rw(t);return Oe(s,qt)&&s.length>0},Ne),MS=t=>r_(t)===tw.bottom,kD=t=>{var s;if(!t.inline)return _.none();const a=(s=r5(t))!==null&&s!==void 0?s:"";if(a.length>0)return ia(Jr(),a);const i=a5(t);return an(i)?_.some(Bt.fromDom(i)):_.none()},iw=t=>t.inline&&kD(t).isSome(),lw=t=>kD(t).getOrThunk(()=>Tr(qo(Bt.fromDom(t.getElement())))),l_=t=>t.inline&&!NS(t)&&!F0(t)&&!cw(t),uw=t=>(t.options.get("toolbar_sticky")||t.inline)&&!iw(t)&&!l_(t),TD=t=>{const s=t.options.get("menu");return on(s,a=>({...a,items:a.items}))};var c5=Object.freeze({__proto__:null,get ToolbarMode(){return Zu},get ToolbarLocation(){return tw},register:lD,getSkinUrl:P0,isReadOnly:xS,isSkinDisabled:RS,getHeightOption:kS,getWidthOption:TS,getMinWidthOption:n_,getMinHeightOption:ow,getMaxWidthOption:ES,getMaxHeightOption:o_,getUserStyleFormats:uD,shouldMergeStyleFormats:dD,shouldAutoHideStyleFormats:mD,getLineHeightFormats:xD,getContentLanguages:s_,getRemovedMenuItems:_S,isMenubarEnabled:NS,isMultipleToolbars:cw,isToolbarEnabled:F0,isToolbarPersist:fD,getMultipleToolbarsOption:aw,getUiContainer:lw,useFixedContainer:iw,getToolbarMode:B0,isDraggableModal:OS,isDistractionFree:l_,isStickyToolbar:uw,getStickyToolbarOffset:gD,getToolbarLocation:r_,isToolbarLocationBottom:MS,getToolbarGroups:sw,getMenus:TD,getMenubar:hD,getToolbar:rw,getFilePickerCallback:pD,getFilePickerTypes:AS,useTypeaheadUrls:Xh,getAnchorTop:vD,getAnchorBottom:yD,getFilePickerValidatorHandler:bD,useStatusBar:wD,useElementPath:a_,promotionEnabled:SD,useBranding:CD,getResize:c_,getPasteAsText:i_,getSidebarShow:DS});const ED="[data-mce-autocompleter]",_D=t=>Rl(t,ED),i5=t=>ia(t,ED),l5={setup:(t,s)=>{const a=(d,g)=>{po(d,jm(),{raw:g})},i=()=>t.getMenu().bind(Ls.getHighlighted);s.on("keydown",d=>{const g=d.which;!t.isActive()||(t.isMenuOpen()?g===13?(i().each(jd),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(Ls.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&_D(Bt.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var u_;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(u_||(u_={}));var gm=u_;const d_="tox-menu-nav__js",I0="tox-collection__item",m_="tox-swatch",u5={normal:d_,color:m_},AD="tox-collection__item--enabled",OD="tox-collection__group-heading",DD="tox-collection__item-icon",f_="tox-collection__item-label",d5="tox-collection__item-accessory",RD="tox-collection__item-caret",m5="tox-collection__item-checkmark",dw="tox-collection__item--active",$S="tox-collection__item-container",f5="tox-collection__item-container--column",ND="tox-collection__item-container--row",g5="tox-collection__item-container--align-right",h5="tox-collection__item-container--align-left",p5="tox-collection__item-container--valign-top",b5="tox-collection__item-container--valign-middle",v5="tox-collection__item-container--valign-bottom",MD=t=>Ut(u5,t).getOr(d_),y5=t=>t==="color"?"tox-swatches":"tox-menu",g_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:y5(t),tieredMenu:"tox-tiered-menu"}),Cb=t=>{const s=g_(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:MD(t)}},BS=(t,s,a)=>{const i=g_(a);return{tag:"div",classes:z([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},w5=[Wu.parts.items({})],L0=(t,s,a)=>{const i=g_(a);return{dom:{tag:"div",classes:z([[i.tieredMenu]])},markers:Cb(a)}},$D=Y([Ns("data"),Ke("inputAttributes",{}),Ke("inputStyles",{}),Ke("tag","input"),Ke("inputClasses",[]),us("onSetValue"),Ke("styles",{}),Ke("eventOrder",{}),Da("inputBehaviours",[vn,_o]),Ke("selectOnFocus",!0)]),BD=t=>cn([_o.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=gl(a);a.dom.setSelectionRange(0,i.length)}:oe})]),C5=t=>({...BD(t),...fc(t.inputBehaviours,[vn.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>gl(s.element),setValue:(s,a)=>{gl(s.element)!==a&&Jm(s.element,a)}},onSetValue:t.onSetValue})])}),PD=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),FD=(t,s)=>({uid:t.uid,dom:PD(t),components:[],behaviours:C5(t),eventOrder:t.eventOrder}),H0=Fl({name:"Input",configFields:$D(),factory:FD}),PS=Un("refetch-trigger-event"),FS=Un("redirect-menu-item-interaction"),h_="tox-menu__searcher",z0=t=>ia(t.element,`.${h_}`).bind(s=>t.getSystem().getByDom(s).toOptional()),mw=z0,ID=(t,s)=>{vn.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},hm=t=>{const s=vn.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},p_=(t,s)=>{B(s.element,"id").each(a=>So(t.element,"aria-activedescendant",a))},S5=t=>{const s=(d,g)=>(g.cut(),_.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return po(d,FS,p),_.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[I0]},components:[H0.sketch({inputClasses:[h_,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:cn([ms(i,[Pt(Zf(),d=>{zs(d,PS)}),Pt(jm(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),fo.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,fo.name()]}})]}},IS="tox-collection--results__js",LD=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Un("aria-item-search-result-id"),"aria-selected":"false"}}}:t},b_=(t,s)=>a=>{const i=Et(a,s);return Ve(i,d=>({dom:t,components:d}))},V0=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Wu.parts.items({preprocess:t!=="auto"?b_({tag:"div",classes:["tox-swatches__row"]},t):At})]}]}),x5=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Wu.parts.items({preprocess:b_({tag:"div",classes:["tox-collection__group"]},t)})]}),HD=(t,s)=>{const a=[];let i=[];return R(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(Vn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Ve(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},LS=(t,s,a)=>Wu.parts.items({preprocess:i=>{const d=Ve(i,a);return t!=="auto"&&t>1?b_({tag:"div",classes:["tox-collection__group"]},t)(d):HD(d,(g,p)=>s[p].type==="separator")}}),v_=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[LS(t,s,At)]}),y_=(t,s,a=!0)=>{const i=Un("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",IS].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[LS(t,s,LD)]}},k5=(t,s,a)=>{const i=Un("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[S5({i18n:_d.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],IS],attributes:{id:i}},components:[LS(t,s,LD)]}]}},w_=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Wu.parts.items({preprocess:a=>HD(a,(i,d)=>t[d].type==="separator")})]}),U0=t=>ze(t,s=>"icon"in s&&s.icon!==void 0),Tg=t=>(console.error(eu(t)),console.log(t),_.none()),zD=(t,s,a,i,d)=>{const g=w_(a);return{value:t,dom:g.dom,components:g.components,items:a}},HS=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?v_(i,a):d.searchMode.searchMode==="search-with-field"?k5(i,a,d.searchMode):y_(i,a);if(d.menuType==="color"){const p=V0(i);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const p=v_(i,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const p=x5(i);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:BS(s,i,d.menuType),components:w5,items:a}},Ra=aa("type"),C_=aa("name"),S_=aa("label"),Eg=aa("text"),T5=aa("title"),VD=aa("icon"),fw=aa("value"),E5=ba("fetch"),gw=ba("getSubmenuItems"),Sb=ba("onAction"),_5=ba("onItemAction"),xb=Oa("onSetup",()=>oe),UD=Xa("name"),W0=Xa("text"),pm=Xa("icon"),hw=Xa("tooltip"),zS=Xa("label"),WD=Xa("shortcut"),ZD=Uf("select"),VS=Aa("active",!1),A5=Aa("borderless",!1),ju=Aa("enabled",!0),Z0=Aa("primary",!1),US=t=>Ke("columns",t),WS=Ke("meta",{}),ZS=Oa("onAction",oe),Jh=t=>yr("type",t),x_=t=>Ya("name","name",Xl(()=>Un(`${t}-name`)),Ea),k_=t=>Ya("value","value",Xl(()=>Un(`${t}-value`)),ei()),jD=ro([Ra,W0]),GD=t=>Rs("separatormenuitem",jD,t),qD=ro([Jh("autocompleteitem"),VS,ju,WS,fw,W0,pm]),kb=t=>Rs("Autocompleter.Separator",jD,t),O5=t=>Rs("Autocompleter.Item",qD,t),Tb=[ju,hw,pm,W0,xb],jS=ro([Ra,Sb].concat(Tb)),KD=t=>Rs("toolbarbutton",jS,t),GS=[VS].concat(Tb),YD=ro(GS.concat([Ra,Sb])),T_=t=>Rs("ToggleButton",YD,t),qS=[Oa("predicate",Pe),il("scope","node",["node","editor"]),il("position","selection",["node","selection","line"])],XD=Tb.concat([Jh("contextformbutton"),Z0,Sb,xc("original",At)]),D5=GS.concat([Jh("contextformbutton"),Z0,Sb,xc("original",At)]),JD=Tb.concat([Jh("contextformbutton")]),QD=GS.concat([Jh("contextformtogglebutton")]),eR=fi("type",{contextformbutton:XD,contextformtogglebutton:D5}),tR=ro([Jh("contextform"),Oa("initValue",Y("")),zS,gi("commands",eR),Zi("launch",fi("type",{contextformbutton:JD,contextformtogglebutton:QD}))].concat(qS)),R5=t=>Rs("ContextForm",tR,t),nR=ro([Jh("contexttoolbar"),aa("items")].concat(qS)),pw=t=>Rs("ContextToolbar",nR,t),N5=[Ra,aa("src"),Xa("alt"),k("classes",[],Ea)],M5=ro(N5),$5=[Ra,Eg,UD,k("classes",["tox-collection__item-label"],Ea)],oR=ro($5),E_=Eu(()=>oh("type",{cardimage:M5,cardtext:oR,cardcontainer:B5})),B5=ro([Ra,yr("direction","horizontal"),yr("align","left"),yr("valign","middle"),gi("items",E_)]),j0=[ju,W0,WD,k_("menuitem"),WS],P5=ro([Ra,zS,gi("items",E_),xb,ZS].concat(j0)),F5=t=>Rs("cardmenuitem",P5,t),I5=ro([Ra,VS,pm].concat(j0)),KS=t=>Rs("choicemenuitem",I5,t),sR=[Ra,aa("fancytype"),ZS],rR=[Ke("initData",{})].concat(sR),aR=[I("initData",{},[Aa("allowCustomColors",!0),yr("storageKey","default"),Wf("colors",ei())])].concat(sR),cR=fi("fancytype",{inserttable:rR,colorswatch:aR}),L5=t=>Rs("fancymenuitem",cR,t),iR=ro([Ra,xb,ZS,pm].concat(j0)),lR=t=>Rs("menuitem",iR,t),uR=ro([Ra,gw,xb,pm].concat(j0)),dR=t=>Rs("nestedmenuitem",uR,t),H5=ro([Ra,pm,VS,xb,Sb].concat(j0)),z5=t=>Rs("togglemenuitem",H5,t),__=(t,s,a)=>{const i=Uc(t.element,"."+a);if(i.length>0){const d=re(i,g=>{const p=g.dom.getBoundingClientRect().top,w=i[0].dom.getBoundingClientRect().top;return Math.abs(p-w)>s}).getOr(i.length);return _.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return _.none()},mR=(t,s)=>cn([ms(t,s)]),Eb={namedEvents:mR,unnamedEvents:t=>mR(Un("unnamed-events"),t)},fR=Un("tooltip.exclusive"),Qh=Un("tooltip.show"),Il=Un("tooltip.hide"),gR=(t,s,a)=>{t.getSystem().broadcastOn([fR],{})};var V5=Object.freeze({__proto__:null,hideAllExclusive:gR,setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Ho.set(d,i)})}}),U5=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{Oc(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},i=d=>{if(!s.isShowing()){gR(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ir(t.mode==="normal"?[Pt(Vd(),w=>{zs(d,Qh)}),Pt(Ru(),w=>{zs(d,Il)})]:[]),behaviours:cn([Ho.config({})])});s.setTooltip(p),Ac(g,p),t.onShow(d,p),ai.position(g,p,{anchor:t.anchor(d)})}};return ir(z([[Pt(Qh,d=>{s.resetTimer(()=>{i(d)},t.delay)}),Pt(Il,d=>{s.resetTimer(()=>{a(d)},t.delay)}),Pt(nu(),(d,g)=>{const p=g;p.universal||nn(p.channels,fR)&&a(d)}),Dl(d=>{a(d)})],t.mode==="normal"?[Pt(Zm(),d=>{zs(d,Qh)}),Pt(Cp(),d=>{zs(d,Il)}),Pt(Vd(),d=>{zs(d,Qh)}),Pt(Ru(),d=>{zs(d,Il)})]:[Pt(Ov(),(d,g)=>{zs(d,Qh)}),Pt(b1(),d=>{zs(d,Il)})]]))}}),W5=[Tt("lazySink"),Tt("tooltipDom"),Ke("exclusive",!0),Ke("tooltipComponents",[]),Ke("delay",300),il("mode","normal",["normal","follow-highlight"]),Ke("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:Y([Va,qi,Tc,si,Ec,Vc]),onRtl:Y([Va,qi,Tc,si,Ec,Vc])}})),us("onHide"),us("onShow")],j5=Object.freeze({__proto__:null,init:()=>{const t=zr(),s=zr(),a=()=>{t.on(clearTimeout)},i=(g,p)=>{a(),t.set(setTimeout(g,p))},d=Y("not-implemented");return Ri({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:i,readState:d})}});const pR=mc({fields:W5,name:"tooltipping",active:U5,state:j5,apis:V5}),G5=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Cl="silver.readonly",xf=ro([ud("readonly")]),YS=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&R(d,g=>{g.broadcastOn([Sd()],{target:i})}),R(d,g=>{g.broadcastOn([Cl],{readonly:s})})},A_=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&YS(s,!0)}),t.on("SwitchMode",()=>YS(s,t.mode.isReadOnly())),xS(t)&&t.mode.set("readonly")},Ca=()=>Nl.config({channels:{[Cl]:{schema:xf,onReceive:(t,s)=>{xo.set(t,s.readonly)}}}}),Ll={item:t=>xo.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>xo.config({disabled:t}),splitButton:t=>xo.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>xo.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},JS=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},Ad=(t,s)=>Hr(a=>{JS(t,a)(d=>{const g=t.onSetup(d);qe(g)&&s.set(g)})}),bw=(t,s)=>Dl(a=>JS(t,a)(s.get())),q5=(t,s)=>dl((a,i)=>{JS(t,a)(t.onAction),!t.triggersSubmenu&&s===gm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&zs(a,Sp()),i.stop())}),Hl={[ul()]:["disabling","alloy.base.behaviour","toggling","item-events"]},_b=ps,Sl=(t,s,a,i)=>{const d=V(oe);return{type:"item",dom:s.dom,components:_b(s.optComponents),data:t.data,eventOrder:Hl,hasSubmenu:t.triggersSubmenu,itemBehaviours:cn([ms("item-events",[q5(t,a),Ad(t,d),bw(t,d)]),Ll.item(()=>!t.enabled||i.isDisabled()),Ca(),Ho.config({})].concat(t.itemBehaviours))}},q0=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),lr=t=>{const s=$0.os.isMacOS()||$0.os.isiOS(),d=s?{alt:"\u2325",ctrl:"\u2303",shift:"\u21E7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=Ve(g,w=>{const T=w.toLowerCase().trim();return Vn(d,T)?d[T]:w});return s?p.join(""):p.join("+")},_g=(t,s,a=[DD])=>fm(t,{tag:"div",classes:a},s),vw=t=>({dom:{tag:"div",classes:[f_]},components:[za(_d.translate(t))]}),O_=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),D_=(t,s)=>({dom:{tag:"div",classes:[f_]},components:[{dom:{tag:t.tag,styles:t.styles},components:[za(_d.translate(s))]}]}),R_=t=>({dom:{tag:"div",classes:[d5]},components:[za(lr(t))]}),vR=t=>_g("checkmark",t,[m5]),N_=t=>_g("chevron-right",t,[RD]),K5=t=>_g("chevron-down",t,[RD]),yR=(t,s)=>{const a=t.direction==="vertical"?f5:ND,i=t.align==="left"?h5:g5;return{dom:{tag:"div",classes:[$S,a,i,(()=>{switch(t.valign){case"top":return p5;case"middle":return b5;case"bottom":return v5}})()]},components:s}},wR=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),M_=(t,s,a)=>{const i="custom",d="remove",g=t.ariaLabel,p=t.value,w=t.iconContent.map(A=>rD(A,s.icons,a));return{dom:(()=>{const A=m_,D=w.getOr(""),U={tag:"div",attributes:g.map(W=>({title:s.translate(W)})).getOr({}),classes:[A]};return p===i?{...U,tag:"button",classes:[...U.classes,"tox-swatches__picker-btn"],innerHtml:D}:p===d?{...U,classes:[...U.classes,"tox-swatch--remove"],innerHtml:D}:an(p)?{...U,attributes:{...U.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:D}:U})(),optComponents:[]}},$_=t=>{const s=t.map(a=>({attributes:{title:_d.translate(a)}})).getOr({});return{tag:"div",classes:[d_,I0],...s}},QS=(t,s,a,i)=>{const d={tag:"div",classes:[DD]},g=U=>fm(U,d,s.icons,i),p=()=>_.some({dom:d}),w=a?t.iconContent.map(g).orThunk(p):_.none(),T=t.checkMark,A=_.from(t.meta).fold(()=>vw,U=>Vn(U,"style")?Nt(D_,U.style):vw),D=t.htmlContent.fold(()=>t.textContent.map(A),U=>_.some(O_(U,[f_])));return{dom:$_(t.ariaLabel),optComponents:[w,D,t.shortcutContent.map(R_),T,t.caret]}},yw=(t,s,a,i=_.none())=>t.presets==="color"?M_(t,s,i):QS(t,s,a,i),CR=(t,s)=>Ut(t,"tooltipWorker").map(a=>[pR.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:i=>({type:"submenu",item:i,overrides:{maxHeightFunction:Zp}}),mode:"follow-highlight",onShow:(i,d)=>{a(g=>{pR.setComponents(i,[_1({element:Bt.fromDom(g)})])})}})]).getOr([]),Y5=t=>ew.DOM.encode(t),SR=(t,s)=>{const a=_d.translate(t),i=Y5(a);if(s.length>0){const d=new RegExp(G5(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},X5=(t,s,a,i,d,g,p,w=!0)=>{const T=yw({presets:i,textContent:_.none(),htmlContent:a?t.text.map(A=>SR(A,s)):_.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:_.none(),checkMark:_.none(),caret:_.none(),value:t.value},p.providers,w,t.icon);return Sl({data:q0(t),enabled:t.enabled,getApi:Y({}),onAction:A=>d(t.value,t.meta),onSetup:Y(oe),triggersSubmenu:!1,itemBehaviours:CR(t.meta,p)},T,g,p.providers)},xR=(t,s)=>Ve(t,a=>{switch(a.type){case"cardcontainer":return yR(a,xR(a.items,s));case"cardimage":return wR(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>nn(s.cardText.highlightOn,g))?_.from(s.cardText.matchText).getOr(""):"";return O_(SR(a.text,d),a.classes)}}),J5=(t,s,a,i)=>{const d=p=>({isEnabled:()=>!xo.isDisabled(p),setEnabled:w=>{xo.set(p,!w),R(Uc(p.element,"*"),T=>{p.getSystem().getByDom(T).each(A=>{A.hasConfigured(xo)&&xo.set(A,!w)})})}}),g={dom:$_(t.label),optComponents:[_.some({dom:{tag:"div",classes:[$S,ND]},components:xR(t.items,i)})]};return Sl({data:q0({text:_.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:_.from(i.itemBehaviours).getOr([])},g,s,a.providers)},Q5=(t,s,a,i,d,g,p,w=!0)=>{const T=D=>({setActive:M=>{Ts.set(D,M)},isActive:()=>Ts.isOn(D),isEnabled:()=>!xo.isDisabled(D),setEnabled:M=>xo.set(D,!M)}),A=yw({presets:a,textContent:s?t.text:_.none(),htmlContent:_.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:_.none(),checkMark:s?_.some(vR(p.icons)):_.none(),caret:_.none(),value:t.value},p,w);return hr(Sl({data:q0(t),enabled:t.enabled,getApi:T,onAction:D=>i(t.value),onSetup:D=>(D.setActive(d),oe),triggersSubmenu:!1,itemBehaviours:[]},A,g,p),{toggling:{toggleClass:AD,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},kR=$y(CS(),YE()),TR=t=>({value:t}),B_=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ER=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,P_=t=>B_.test(t)||ER.test(t),_R=t=>Zr(t,"#").toUpperCase(),eI=t=>P_(t)?_.some({value:_R(t)}):_.none(),tI=t=>({value:t.value.replace(B_,(a,i,d,g)=>i+i+d+d+g+g)}),nI=t=>{const s=tI(t),a=ER.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},F_=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},ww=t=>{const s=F_(t.red)+F_(t.green)+F_(t.blue);return TR(s)},AR=Math.min,OR=Math.max,K0=Math.round,DR=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,oI=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ep=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),ex=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},RR=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=OR(0,AR(g,1)),p=OR(0,AR(p,1)),g===0)return s=a=i=K0(255*p),ep(s,a,i,1);const w=d/60,T=p*g,A=T*(1-Math.abs(w%2-1)),D=p-T;switch(Math.floor(w)){case 0:s=T,a=A,i=0;break;case 1:s=A,a=T,i=0;break;case 2:s=0,a=T,i=A;break;case 3:s=0,a=A,i=T;break;case 4:s=A,a=0,i=T;break;case 5:s=T,a=0,i=A;break;default:s=a=i=0}return s=K0(255*(s+D)),a=K0(255*(a+D)),i=K0(255*(i+D)),ep(s,a,i,1)},Cw=t=>{const s=nI(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return ep(a,i,d,1)},I_=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),w=parseFloat(i);return ep(d,g,p,w)},L_=t=>{if(t==="transparent")return _.some(ep(0,0,0,0));const s=DR.exec(t);if(s!==null)return _.some(I_(s[1],s[2],s[3],"1"));const a=oI.exec(t);return a!==null?_.some(I_(a[1],a[2],a[3],a[4])):_.none()},H_=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,NR=ep(255,0,0,1),sI=t=>{t.dispatch("SkinLoaded")},rI=(t,s)=>{t.dispatch("SkinLoadError",s)},aI=t=>{t.dispatch("ResizeEditor")},z_=(t,s)=>{t.dispatch("ResizeContent",s)},MR=(t,s)=>{t.dispatch("ScrollContent",s)},cI=(t,s)=>{t.dispatch("TextColorChange",s)},iI=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},lI=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),uI=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})};var Ab=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const $R={},BR=(t,s=10)=>{const a=Ab.getItem(t),i=qt(a)?JSON.parse(a):[],g=(A=>s-A.length<0?A.slice(0,s):A)(i),p=A=>{jt(g,A).each(w),g.unshift(A),g.length>s&&g.pop(),Ab.setItem(t,JSON.stringify(g))},w=A=>{g.splice(A,1)};return{add:p,state:()=>g.slice(0)}},Od=t=>Ut($R,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Ab.getItem(s);if(Rt(a)){const d=Ab.getItem("tinymce-custom-colors");Ab.setItem(s,an(d)?d:"[]")}const i=BR(s,10);return $R[t]=i,i}),PR=t=>Ve(Od(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),V_=(t,s)=>{Od(t).add(s)},Sw=(t,s,a)=>({hue:t,saturation:s,value:a}),U_=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,p=t.blue/255,w=Math.min(d,Math.min(g,p)),T=Math.max(d,Math.max(g,p));if(w===T)return i=w,Sw(0,0,i*100);const A=d===w?g-p:p===w?d-g:p-d;return s=d===w?3:p===w?1:5,s=60*(s-A/(T-w)),a=(T-w)/T,i=T,Sw(Math.round(s),Math.round(a*100),Math.round(i*100))},W_=t=>U_(Cw(t)),FR=t=>ww(RR(t)),dI=t=>eI(t).orThunk(()=>L_(t).map(ww)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],p=i[2],w=i[3];return ww(ep(d,g,p,w))}),tx="forecolor",Z_="hilitecolor",j_=t=>Math.max(5,Math.ceil(Math.sqrt(t))),mI=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+dI(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},iu=t=>s=>s.options.get(t),G_="#000000",IR=t=>{const s=t.options.register,a=i=>Oe(i,qt)?{value:mI(i),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:j_(Ob(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:j_(Ob(t,tx).length)}),s("color_cols_background",{processor:"number",default:j_(Ob(t,Z_).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:G_}),s("color_default_background",{processor:"string",default:G_})},q_=(t,s)=>s===tx?iu("color_cols_foreground")(t):s===Z_?iu("color_cols_background")(t):iu("color_cols")(t),K_=iu("custom_colors"),Ob=(t,s)=>s===tx&&t.options.isSet("color_map_foreground")?iu("color_map_foreground")(t):s===Z_&&t.options.isSet("color_map_background")?iu("color_map_background")(t):iu("color_map")(t),Y_=iu("color_default_foreground"),X_=iu("color_default_background"),J_=(t,s)=>{const a=_t(Bt.fromDom(t.selection.getStart()),s==="hilitecolor"?"background-color":"color");return L_(a).map(i=>"#"+ww(i).value)},fI=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},LR=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},gI=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{fI(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{LR(t,s)})},HR=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},Q_=(t,s,a,i)=>{a==="custom"?UR(t)(g=>{g.each(p=>{V_(s,p),t.execCommand("mceApplyTextcolor",s,p),i(p)})},J_(t,s).getOr(G_)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},eA=(t,s,a)=>t.concat(PR(s).concat(HR(a))),tA=(t,s,a)=>i=>{i(eA(t,s,a))},nA=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},zR=(t,s,a,i,d)=>{t.ui.registry.addSplitButton(s,{tooltip:i,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:g=>{const p=J_(t,a);return kr(p,g.toUpperCase())},columns:q_(t,a),fetch:tA(Ob(t,a),a,K_(t)),onAction:g=>{Q_(t,a,d.get(),oe)},onItemAction:(g,p)=>{Q_(t,a,p,w=>{d.set(w),cI(t,{name:s,color:w})})},onSetup:g=>{nA(g,s,d.get());const p=w=>{w.name===s&&nA(g,w.name,w.color)};return t.on("TextColorChange",p),()=>{t.off("TextColorChange",p)}}})},VR=(t,s,a,i)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",initData:{storageKey:a},onAction:d=>{Q_(t,a,d.value,oe)}}]})},UR=t=>(s,a)=>{let i=!1;const d=w=>{const A=w.getData().colorpicker;i?(s(_.from(A)),w.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",A]))},g=(w,T)=>{T.name==="hex-valid"&&(i=T.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:oe,onCancel:()=>{s(_.none())}})},hI=t=>{gI(t);const s=Y_(t),a=X_(t),i=V(s),d=V(a);zR(t,"forecolor","forecolor","Text color",i),zR(t,"backcolor","hilitecolor","Background color",d),VR(t,"forecolor","forecolor","Text color"),VR(t,"backcolor","hilitecolor","Background color")},oA=(t,s,a,i,d,g,p,w)=>{const T=U0(s),D=pI(s,a,i,d!=="color"?"normal":"color",g,p,w);return HS(t,T,D,i,{menuType:d})},pI=(t,s,a,i,d,g,p)=>ps(Ve(t,w=>w.type==="choiceitem"?KS(w).fold(Tg,T=>_.some(Q5(T,a===1,i,s,g(T.value),d,p,U0(t)))):_.none())),nx=(t,s)=>{const a=Cb(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?ia(d.element,"[aria-checked=true]"):_.none()}},bI=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${m_}`:`.${I0}`}},vI=(t,s)=>{const a=yI(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...oA(Un("menu-value"),a,w=>{t.onAction({value:w})},i,d,gm.CLOSE_ON_EXECUTE,Pe,s.shared.providers),markers:Cb(d),movement:nx(i,d)};return{type:"widget",data:{value:Un("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[kR.widget(Wu.sketch(p))]}},yI=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>eA(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(HR(a)))},WR=Un("cell-over"),sA=Un("cell-execute"),wI=(t,s,a)=>{const i=p=>po(p,WR,{row:t,col:s}),d=p=>po(p,sA,{row:t,col:s}),g=(p,w)=>{w.stop(),d(p)};return vi({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:a}},behaviours:cn([ms("insert-table-picker-cell",[Pt(Vd(),_o.focus),Pt(ul(),d),Pt(wp(),g),Pt(ch(),g)]),Ts.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),_o.config({onFocus:i})])})},CI=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(wI(d,p,t));i.push(g)}return i},SI=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let p=0;p<d;p++)Ts.set(t[g][p],g<=s&&p<=a)},xI=t=>K(t,s=>Ve(s,hl)),ZR=(t,s)=>za(`${s}x${t}`),jR={inserttable:t=>{const i=Un("size-label"),d=CI(i,10,10),g=ZR(0,0),p=wr({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:i}},components:[g],behaviours:cn([Ho.config({})])});return{type:"widget",data:{value:Un("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[kR.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:xI(d).concat(p.asSpec()),behaviours:cn([ms("insert-table-picker",[Hr(w=>{Ho.set(p.get(w),[g])}),uh(WR,(w,T,A)=>{const{row:D,col:M}=A.event;SI(d,D,M,10,10),Ho.set(p.get(w),[ZR(D+1,M+1)])}),uh(sA,(w,T,A)=>{const{row:D,col:M}=A.event;t.onAction({numRows:D+1,numColumns:M+1}),zs(w,Sp())})]),fo.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:vI},kI=(t,s)=>Ut(jR,t.fancytype).map(a=>a(t,s)),TI=(t,s,a,i=!0,d=!1)=>{const g=d?K5(a.icons):N_(a.icons),p=T=>({isEnabled:()=>!xo.isDisabled(T),setEnabled:A=>xo.set(T,!A)}),w=yw({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,caret:_.some(g),checkMark:_.none(),shortcutContent:t.shortcut},a,i);return Sl({data:q0(t),getApi:p,enabled:t.enabled,onAction:oe,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},w,s,a)},EI=(t,s,a,i=!0)=>{const d=p=>({isEnabled:()=>!xo.isDisabled(p),setEnabled:w=>xo.set(p,!w)}),g=yw({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,caret:_.none(),checkMark:_.none(),shortcutContent:t.shortcut},a,i);return Sl({data:q0(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},_I=t=>({type:"separator",dom:{tag:"div",classes:[I0,OD]},components:t.text.map(za).toArray()}),AI=(t,s,a,i=!0)=>{const d=p=>({setActive:w=>{Ts.set(p,w)},isActive:()=>Ts.isOn(p),isEnabled:()=>!xo.isDisabled(p),setEnabled:w=>xo.set(p,!w)}),g=yw({iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,checkMark:_.some(vR(a.icons)),caret:_.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return hr(Sl({data:q0(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:AD,toggleOnExecute:!1,selected:t.active}})},OI=X5,ox=_I,GR=EI,qR=TI,DI=AI,KR=kI,RI=J5;var NI=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),MI=[Oi("others",sh(Bo.value,ei()))],$I=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(De(g.others).length===0)throw new Error("Cannot find any known coupled components");return Ut(t,p)},a=(g,p,w)=>s(p,w).getOrThunk(()=>{const A=Ut(p.others,w).getOrDie("No information found for coupled component: "+w)(g),D=g.getSystem().build(A);return t[w]=D,D}),i=(g,p,w)=>s(p,w).orThunk(()=>(Ut(p.others,w).getOrDie("No information found for coupled component: "+w),_.none())),d=Y({});return Ri({readState:d,getExisting:i,getOrCreate:a})}});const na=mc({fields:MI,name:"coupling",apis:NI,state:$I}),aA=t=>{let s=_.none(),a=[];const i=A=>aA(D=>{d(M=>{D(A(M))})}),d=A=>{p()?T(A):a.push(A)},g=A=>{p()||(s=_.some(A),w(a),a=[])},p=()=>s.isSome(),w=A=>{R(A,T)},T=A=>{s.each(D=>{setTimeout(()=>{A(D)},0)})};return t(g),{get:d,map:i,isReady:p}},sx={nu:aA,pure:t=>aA(s=>{s(t)})},cA=t=>{setTimeout(()=>{throw t},0)},tp=t=>{const s=T=>{t().then(T,cA)};return{map:T=>tp(()=>t().then(T)),bind:T=>tp(()=>t().then(A=>T(A).toPromise())),anonBind:T=>tp(()=>t().then(()=>T.toPromise())),toLazy:()=>sx.nu(s),toCached:()=>{let T=null;return tp(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},ii={nu:t=>tp(()=>new Promise(t)),pure:t=>tp(()=>Promise.resolve(t))},rx=Y("sink"),ax=Y(cu({name:rx(),overrides:Y({dom:{tag:"div"},behaviours:cn([ai.config({useFixed:Ne})]),events:ir([dh(jm()),dh(Lc()),dh(wp())])})})),xw=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},YR=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},PI=(t,s,a,i,d,g,p)=>{const w=YR(t,s,i),T=XR(i,t);return w.map(A=>A.bind(D=>_.from(wb.sketch({...g.menu(),uid:hd(""),data:D,highlightOnOpen:p,onOpenMenu:(M,U)=>{const W=T().getOrDie();ai.position(W,U,{anchor:a}),ds.decloak(d)},onOpenSubmenu:(M,U,W)=>{const le=T().getOrDie();ai.position(le,W,{anchor:{type:"submenu",item:U}}),ds.decloak(d)},onRepositionMenu:(M,U,W)=>{const le=T().getOrDie();ai.position(le,U,{anchor:a}),R(W,he=>{ai.position(le,he.triggeredMenu,{anchor:{type:"submenu",item:he.triggeringItem}})})},onEscape:()=>(_o.focus(i),ds.close(d),_.some(!0))}))))},cx=(t,s,a,i,d,g,p)=>{const w=xw(t,a);return PI(t,s,w,a,i,d,p).map(A=>(A.fold(()=>{ds.isOpen(i)&&ds.close(i)},D=>{ds.cloak(i),ds.open(i,D),g(i)}),i))},FI=(t,s,a,i,d,g,p)=>(ds.close(i),ii.pure(i)),iA=(t,s,a,i,d,g)=>{const p=na.getCoupled(a,"sandbox");return(ds.isOpen(p)?FI:cx)(t,s,a,p,i,d,g)},II=(t,s,a)=>{const i=os.getCurrent(s).getOr(s),d=gr(t.element);a?$n(i.element,"min-width",d+"px"):zi(i.element,d)},XR=(t,s)=>t.getSystem().getByUid(s.uid+"-"+rx()).map(a=>()=>Bo.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Bo.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),JR=t=>{ds.getState(t).each(s=>{wb.repositionMenus(s)})},lA=(t,s,a)=>{const i=D1(),d=(w,T)=>{const A=xw(t,s);i.link(s.element),t.matchWidth&&II(A.hotspot,T,t.useMinWidth),t.onOpen(A,w,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(w,T)},g=(w,T)=>{i.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(w,T)},p=XR(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:Bl.augment(t.sandboxBehaviours,[vn.config({store:{mode:"memory",initialValue:s}}),ds.config({onOpen:d,onClose:g,isPartOf:(w,T,A)=>Qd(T,A)||Qd(s,A),getAttachPoint:()=>p().getOrDie()}),os.config({find:w=>ds.getState(w).bind(T=>os.getCurrent(T))}),Nl.config({channels:{...Bh({isExtraPart:Pe}),...l0({doReposition:JR})}})])}},QR=t=>{const s=na.getCoupled(t,"sandbox");JR(s)},uA=()=>[Ke("sandboxClasses",[]),Bl.field("sandboxBehaviours",[os,Nl,ds,vn])],LI=Y([Tt("dom"),Tt("fetch"),us("onOpen"),Gi("onExecute"),Ke("getHotspot",_.some),Ke("getAnchorOverrides",Y({})),cf(),Da("dropdownBehaviours",[Ts,na,fo,_o]),Tt("toggleClass"),Ke("eventOrder",{}),Ns("lazySink"),Ke("matchWidth",!1),Ke("useMinWidth",!1),Ns("role")].concat(uA())),HI=Y([Hu({schema:[Pp(),Ke("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),ax()]),zI=(t,s,a,i)=>{const d=D=>Ut(t.dom,"attributes").bind(M=>Ut(M,D)),g=D=>{ds.getState(D).each(M=>{wb.highlightPrimary(M)})},p=(D,M,U)=>iA(t,At,D,i,M,U),w=D=>{p(D,g,ta.HighlightMenuAndItem).get(oe)},T={expand:D=>{Ts.isOn(D)||p(D,oe,ta.HighlightNone).get(oe)},open:D=>{Ts.isOn(D)||p(D,oe,ta.HighlightMenuAndItem).get(oe)},refetch:D=>na.getExistingCoupled(D,"sandbox").fold(()=>p(D,oe,ta.HighlightMenuAndItem).map(oe),U=>cx(t,At,D,U,i,oe,ta.HighlightMenuAndItem).map(oe)),isOpen:Ts.isOn,close:D=>{Ts.isOn(D)&&p(D,oe,ta.HighlightMenuAndItem).get(oe)},repositionMenus:D=>{Ts.isOn(D)&&QR(D)}},A=(D,M)=>(jd(D),_.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:fc(t.dropdownBehaviours,[Ts.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),na.config({others:{sandbox:D=>lA(t,D,{onOpen:()=>Ts.on(D),onClose:()=>Ts.off(D)})}}),fo.config({mode:"special",onSpace:A,onEnter:A,onDown:(D,M)=>{if(lu.isOpen(D)){const U=na.getCoupled(D,"sandbox");g(U)}else lu.open(D);return _.some(!0)},onEscape:(D,M)=>lu.isOpen(D)?(lu.close(D),_.some(!0)):_.none()}),_o.config({})]),events:yS(_.some(w)),eventOrder:{...t.eventOrder,[ul()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},lu=Zc({name:"Dropdown",configFields:LI(),partFields:HI(),factory:zI,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),VI=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},UI=t=>{const s=vn.getValue(t),a=z0(t).map(hm);lu.refetch(s).get(()=>{const i=na.getCoupled(s,"sandbox");a.each(d=>z0(i).each(g=>ID(g,d)))})},kf=(t,s)=>{WI(t).each(a=>{v1(t,a.element,s.event.eventType,s.event.interactionEvent)})},WI=t=>ds.getState(t).bind(Ls.getHighlighted).bind(Ls.getHighlighted),ZI=t=>ji(t.element,IS)?_.some(t.element):ia(t.element,"."+IS),ix=(t,s,a)=>{mw(t).each(i=>{p_(i,a),ZI(s).each(g=>{B(g,"id").each(p=>So(i.element,"aria-controls",p))})}),So(a.element,"aria-selected","true")},Wa=(t,s,a)=>{So(a.element,"aria-selected","false")},jI=t=>{mw(t).each(s=>_o.focus(s))},GI=t=>na.getExistingCoupled(t,"sandbox").bind(z0).map(hm).map(a=>a.fetchPattern).getOr("");var lx;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(lx||(lx={}));const qI=(t,s,a,i,d)=>{const g=a.shared.providers,p=w=>d?{...w,shortcut:_.none(),icon:w.text.isSome()?_.none():w.icon}:w;switch(t.type){case"menuitem":return lR(t).fold(Tg,w=>_.some(GR(p(w),s,g,i)));case"nestedmenuitem":return dR(t).fold(Tg,w=>_.some(qR(p(w),s,g,i,d)));case"togglemenuitem":return z5(t).fold(Tg,w=>_.some(DI(p(w),s,g,i)));case"separator":return GD(t).fold(Tg,w=>_.some(ox(w)));case"fancymenuitem":return L5(t).fold(Tg,w=>KR(w,a));default:return console.error("Unknown item in general menu",t),_.none()}},KI=(t,s,a,i,d,g,p)=>{const w=i===1,T=!w||U0(t);return ps(Ve(t,A=>{switch(A.type){case"separator":return kb(A).fold(Tg,D=>_.some(ox(D)));case"cardmenuitem":return F5(A).fold(Tg,D=>_.some(RI({...D,onAction:M=>{D.onAction(M),a(D.value,D.meta)}},d,g,{itemBehaviours:CR(D.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return O5(A).fold(Tg,D=>_.some(OI(D,s,w,"normal",a,d,g,T)))}}))},eN=(t,s,a,i,d,g)=>{const p=U0(s),w=ps(Ve(s,D=>{const M=W=>d?!Vn(W,"text"):p,U=W=>qI(W,a,i,M(W),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?U({...D,enabled:!1}):U(D)})),T=VI(g);return(d?zD:HS)(t,p,w,1,T)},dA=t=>wb.singleData(t.value,t),YI=(t,s,a,i)=>{const d=nx(s,i),g=Cb(i);return{data:dA({...t,movement:d,menuBehaviours:Eb.unnamedEvents(s!=="auto"?[]:[Hr((p,w)=>{__(p,4,g.item).each(({numColumns:T,numRows:A})=>{fo.setGridSize(p,A,T)})})])}),menu:{markers:Cb(i),fakeFocus:a===lx.ContentFocus}}},XI=(t,s)=>_D(Bt.fromDom(s.startContainer)).map(a=>{const i=t.createRng();return i.selectNode(a.dom),i}),JI={register:(t,s)=>{const a=V(!1),i=V(!1),d=vi(Kr.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:cn([ms("dismissAutocompleter",[Pt(Zd(),()=>A())])]),lazySink:s.getSink})),g=()=>Kr.isOpen(d),p=i.get,w=()=>{g()&&Kr.hide(d)},T=()=>Kr.getContent(d).bind(le=>eo(le.components(),0)),A=()=>t.execCommand("mceAutocompleterClose"),D=le=>{const he=to(le,nt=>_.from(nt.columns)).getOr(1);return K(le,nt=>{const Me=nt.items;return KI(Me,nt.matchText,(ot,gn)=>{const it=t.selection.getRng();XI(t.dom,it).each(yn=>{const Hn={hide:()=>A(),reload:Nn=>{w(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Nn})}};a.set(!0),nt.onAction(Hn,yn,ot,gn),a.set(!1)})},he,gm.BUBBLE_TO_SANDBOX,s,nt.highlightOn)})},M=(le,he)=>{i5(Bt.fromDom(t.getBody())).each(nt=>{const Me=to(le,ot=>_.from(ot.columns)).getOr(1);Kr.showMenuAt(d,{anchor:{type:"node",root:Bt.fromDom(t.getBody()),node:_.from(nt)}},YI(HS("autocompleter-value",!0,he,Me,{menuType:"normal"}),Me,lx.ContentFocus,"normal"))}),T().each(Ls.highlightFirst)},U=le=>{const he=D(le);he.length>0?M(le,he):w()};t.on("AutocompleterStart",({lookupData:le})=>{i.set(!0),a.set(!1),U(le)}),t.on("AutocompleterUpdate",({lookupData:le})=>U(le)),t.on("AutocompleterEnd",()=>{w(),i.set(!1),a.set(!1)});const W={cancelIfNecessary:A,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:T};l5.setup(W,t)}},kw=(t,s,a)=>Rl(t,s,a).isSome(),tN=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},nN=5,QI=400,oN=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?_.none():_.some(s.touches[0])},e6=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>nN||i>nN},t6=t=>{const s=zr(),a=V(!1),i=tN(A=>{t.triggerEvent(m1(),A),a.set(!0)},QI),d=A=>(oN(A).each(D=>{i.cancel();const M={x:D.clientX,y:D.clientY,target:A.target};i.schedule(A),a.set(!1),s.set(M)}),_.none()),g=A=>(i.cancel(),oN(A).each(D=>{s.on(M=>{e6(D,M)&&s.clear()})}),_.none()),p=A=>{i.cancel();const D=M=>Hs(M.target,A.target);return s.get().filter(D).map(M=>a.get()?(A.prevent(),!1):t.triggerEvent(ch(),A))},w=Qs([{key:er(),value:d},{key:Ha(),value:g},{key:Ic(),value:p}]);return{fireIfReady:(A,D)=>Ut(w,D).bind(M=>M(A))}},n6=t=>t.raw.which===TE[0]&&!nn(["input","textarea"],Go(t.target))&&!kw(t.target,'[contenteditable="true"]'),o6=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=t6(a),g=Ve(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),W=>ri(t,W,le=>{d.fireIfReady(le,W).each(nt=>{nt&&le.kill()}),a.triggerEvent(W,le)&&le.kill()})),p=zr(),w=ri(t,"paste",W=>{d.fireIfReady(W,"paste").each(he=>{he&&W.kill()}),a.triggerEvent("paste",W)&&W.kill(),p.set(setTimeout(()=>{a.triggerEvent(_v(),W)},0))}),T=ri(t,"keydown",W=>{a.triggerEvent("keydown",W)?W.kill():a.stopBackspace&&n6(W)&&W.prevent()}),A=ri(t,"focusin",W=>{a.triggerEvent("focusin",W)&&W.kill()}),D=zr(),M=ri(t,"focusout",W=>{a.triggerEvent("focusout",W)&&W.kill(),D.set(setTimeout(()=>{a.triggerEvent(Cp(),W)},0))});return{unbind:()=>{R(g,W=>{W.unbind()}),T.unbind(),A.unbind(),M.unbind(),w.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},sN=(t,s)=>{const a=Ut(t,"target").getOr(s);return V(a)},s6=(t,s)=>{const a=V(!1),i=V(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},r6=t=>{const s=V(!1);return{stop:()=>{s.set(!0)},cut:oe,isStopped:s.get,isCut:Pe,event:t,setSource:Q("Cannot set source of a broadcasted event"),getSource:Q("Cannot get source of a broadcasted event")}},Tw=dt.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),rN=(t,s,a,i,d,g)=>{const p=t(s,i),w=s6(a,d);return p.fold(()=>(g.logEventNoHandlers(s,i),Tw.complete()),T=>{const A=T.descHandler;return Yf(A)(w),w.isStopped()?(g.logEventStopped(s,T.element,A.purpose),Tw.stopped()):w.isCut()?(g.logEventCut(s,T.element,A.purpose),Tw.complete()):oa(T.element).fold(()=>(g.logNoParent(s,T.element,A.purpose),Tw.complete()),M=>(g.logEventResponse(s,T.element,A.purpose),Tw.resume(M)))})},mA=(t,s,a,i,d,g)=>rN(t,s,a,i,d,g).fold(Ne,p=>mA(t,s,a,p,d,g),Pe),a6=(t,s,a,i,d)=>{const g=sN(a,i);return rN(t,s,a,i,g,d)},c6=(t,s,a)=>{const i=r6(s);return R(t,d=>{const g=d.descHandler;Yf(g)(i)}),i.isStopped()},i6=(t,s,a,i)=>fA(t,s,a,a.target,i),fA=(t,s,a,i,d)=>{const g=sN(a,i);return mA(t,s,a,i,g,d)},l6=(t,s)=>({element:t,descHandler:s}),u6=(t,s)=>({id:t,descHandler:s}),d6=()=>{const t={},s=(p,w,T)=>{Dt(T,(A,D)=>{const M=t[D]!==void 0?t[D]:{};M[w]=Op(A,p),t[D]=M})},a=(p,w)=>qf(w).bind(T=>Ut(p,T)).map(T=>l6(w,T));return{registerId:s,unregisterId:p=>{Dt(t,(w,T)=>{Vn(w,p)&&delete w[p]})},filterByType:p=>Ut(t,p).map(w=>Le(w,(T,A)=>u6(A,T))).getOr([]),find:(p,w,T)=>Ut(t,w).bind(A=>md(T,D=>a(A,D),p))}},aN=()=>{const t=d6(),s={},a=A=>{const D=A.element;return qf(D).getOrThunk(()=>C1("uid-",A.element))},i=(A,D)=>{const M=s[D];if(M===A)g(A);else throw new Error('The tagId "'+D+'" is already used by: '+Km(M.element)+`
Cannot use it for: `+Km(A.element)+`
The conflicting element is`+(jr(M.element)?" ":" not ")+"already in the DOM")},d=A=>{const D=a(A);ks(s,D)&&i(A,D);const M=[A];t.registerId(M,D,A.events),s[D]=A},g=A=>{qf(A.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(A,D,M)=>t.find(A,D,M),filter:A=>t.filterByType(A),register:d,unregister:g,getById:A=>Ut(s,A)}},bm=Fl({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:vg(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Ke("components",[]),Da("containerBehaviours",[]),Ke("events",{}),Ke("domModification",{}),Ke("eventOrder",{})]}),cN=t=>{const s=Me=>oa(t.element).fold(Ne,ot=>Hs(Me,ot)),a=aN(),i=(Me,ot)=>a.find(s,Me,ot),d=o6(t.element,{triggerEvent:(Me,ot)=>xh(Me,ot.target,gn=>i6(i,Me,ot,gn))}),g={debugInfo:Y("real"),triggerEvent:(Me,ot,gn)=>{xh(Me,ot,it=>fA(i,Me,gn,ot,it))},triggerFocus:(Me,ot)=>{qf(Me).fold(()=>{om(Me)},gn=>{xh(Wd(),Me,it=>(a6(i,Wd(),{originator:ot,kill:oe,prevent:oe,target:Me},Me,it),!1))})},triggerEscape:(Me,ot)=>{g.triggerEvent("keydown",Me.element,ot.event)},getByUid:Me=>he(Me),getByDom:Me=>nt(Me),build:vi,buildOrPatch:A1,addToGui:Me=>{T(Me)},removeFromGui:Me=>{A(Me)},addToWorld:Me=>{p(Me)},removeFromWorld:Me=>{w(Me)},broadcast:Me=>{U(Me)},broadcastOn:(Me,ot)=>{W(Me,ot)},broadcastEvent:(Me,ot)=>{le(Me,ot)},isConnected:Ne},p=Me=>{Me.connect(g),Pr(Me.element)||(a.register(Me),R(Me.components(),p),g.triggerEvent(f1(),Me.element,{target:Me.element}))},w=Me=>{Pr(Me.element)||(R(Me.components(),w),a.unregister(Me)),Me.disconnect()},T=Me=>{Ac(t,Me)},A=Me=>{Oc(Me)},D=()=>{d.unbind(),Kl(t.element)},M=Me=>{const ot=a.filter(nu());R(ot,gn=>{const it=gn.descHandler;Yf(it)(Me)})},U=Me=>{M({universal:!0,data:Me})},W=(Me,ot)=>{M({universal:!1,channels:Me,data:ot})},le=(Me,ot)=>{const gn=a.filter(Me);return c6(gn,ot)},he=Me=>a.getById(Me).fold(()=>Bo.error(new Error('Could not find component with uid: "'+Me+'" in system.')),Bo.value),nt=Me=>{const ot=qf(Me).getOr("not found");return he(ot)};return p(t),{root:t,element:t.element,destroy:D,add:T,remove:A,getByUid:he,getByDom:nt,addToWorld:p,removeFromWorld:w,broadcast:U,broadcastOn:W,broadcastEvent:le}},m6=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ve(t.items,s.interpreter)}),iN=Y([Ke("prefix","form-field"),Da("fieldBehaviours",[os,vn])]),f6=Y([cu({schema:[Tt("dom")],name:"label"}),cu({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Tt("text")],name:"aria-descriptor"}),Wc({factory:{sketch:t=>{const s=cr(t,["factory"]);return t.factory.sketch(s)}},schema:[Tt("factory")],name:"field"})]),lN=(t,s,a,i)=>{const d=fc(t.fieldBehaviours,[os.config({find:w=>sr(w,t,"field")}),vn.config({store:{mode:"manual",getValue:w=>os.getCurrent(w).bind(vn.getValue),setValue:(w,T)=>{os.getCurrent(w).each(A=>{vn.setValue(A,T)})}}})]),g=ir([Hr((w,T)=>{const A=pf(w,t,["label","field","aria-descriptor"]);A.field().each(D=>{const M=Un(t.prefix);A.label().each(U=>{So(U.element,"for",M),So(D.element,"id",M)}),A["aria-descriptor"]().each(U=>{const W=Un(t.prefix);So(U.element,"id",W),So(D.element,"aria-describedby",W)})})})]),p={getField:w=>sr(w,t,"field"),getLabel:w=>sr(w,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},Vs=Zc({name:"FormField",configFields:iN(),partFields:f6(),factory:lN,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var h6=Object.freeze({__proto__:null,exhibit:(t,s)=>su({attributes:Qs([{key:s.tabAttr,value:"true"}])})}),p6=[Ke("tabAttr","data-alloy-tabstop")];const Sa=mc({fields:p6,name:"tabstopping",active:h6});var b6=tinymce.util.Tools.resolve("tinymce.html.Entities");const Ew=(t,s,a,i)=>{const d=y6(t,s,a,i);return Vs.sketch(d)},v6=(t,s)=>Ew(t,s,[],[]),y6=(t,s,a,i)=>({dom:uN(a),components:t.toArray().concat([s]),fieldBehaviours:cn(i)}),w6=()=>uN([]),uN=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),np=(t,s)=>Vs.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[za(s.translate(t))]}),zl=Un("form-component-change"),_w=Un("form-close"),op=Un("form-cancel"),Ag=Un("form-action"),Aw=Un("form-submit"),gA=Un("form-block"),hA=Un("form-unblock"),dN=Un("form-tabchange"),ux=Un("form-resize"),C6=(t,s,a)=>{const i=t.label.map(M=>np(M,s)),d=M=>(U,W)=>{Rl(W.event.target,"[data-collection-item-value]").each(le=>{M(U,W,le,or(le,"data-collection-item-value"))})},g=(M,U)=>{const W=Ve(U,nt=>{const Me=_d.translate(nt.text),ot=t.columns===1?`<div class="tox-collection__item-label">${Me}</div>`:"",gn=`<div class="tox-collection__item-icon">${nt.icon}</div>`,it={_:" "," - ":" ","-":" "},yn=Me.replace(/\_| \- |\-/g,Nn=>it[Nn]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${b6.encodeAllRaw(nt.value)}" title="${yn}" aria-label="${yn}">${gn}${ot}</div>`}),le=t.columns!=="auto"&&t.columns>1?Et(W,t.columns):[W],he=Ve(le,nt=>`<div class="tox-collection__group">${nt.join("")}</div>`);qm(M.element,he.join(""))},p=d((M,U,W,le)=>{U.stop(),s.isDisabled()||po(M,Ag,{name:t.name,value:le})}),w=[Pt(Vd(),d((M,U,W)=>{om(W)})),Pt(wp(),p),Pt(ch(),p),Pt(Zm(),d((M,U,W)=>{ia(M.element,"."+dw).each(le=>{ca(le,dw)}),ya(W,dw)})),Pt(Gk(),d(M=>{ia(M.element,"."+dw).each(U=>{ca(U,dw)})})),dl(d((M,U,W,le)=>{po(M,Ag,{name:t.name,value:le})}))],T=(M,U)=>Ve(Uc(M.element,".tox-collection__item"),U),A=Vs.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:At},behaviours:cn([xo.config({disabled:s.isDisabled,onDisabled:M=>{T(M,U=>{ya(U,"tox-collection__item--state-disabled"),So(U,"aria-disabled",!0)})},onEnabled:M=>{T(M,U=>{ca(U,"tox-collection__item--state-disabled"),de(U,"aria-disabled")})}}),Ca(),Ho.config({}),vn.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(M,U)=>{g(M,U),t.columns==="auto"&&__(M,5,"tox-collection__item").each(({numRows:W,numColumns:le})=>{fo.setGridSize(M,W,le)}),zs(M,ux)}}),Sa.config({}),fo.config(bI(t.columns,"normal")),ms("collection-events",w)]),eventOrder:{[ul()]:["disabling","alloy.base.behaviour","collection-events"]}});return Ew(i,A,["tox-form__group--collection"],[])},S6=["input","textarea"],mN=t=>{const s=Go(t);return nn(S6,s)},fN=(t,s)=>{const a=s.getRoot(t).getOr(t.element);ca(a,s.invalidClass),s.notify.each(i=>{mN(t.element)&&So(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{qm(d,i.validHtml)}),i.onValid(t)})},gN=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);ya(d,s.invalidClass),s.notify.each(g=>{mN(t.element)&&So(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{qm(p,i)}),g.onInvalid(t,i)})},hN=(t,s,a)=>s.validator.fold(()=>ii.pure(Bo.value(!0)),i=>i.validate(t)),Y0=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),hN(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(gN(t,s,a,d),Bo.error(d)),d=>(fN(t,s),Bo.value(d))):Bo.error("No longer in system")));var dx=Object.freeze({__proto__:null,markValid:fN,markInvalid:gN,query:hN,run:Y0,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return ji(a,s.invalidClass)}}),x6=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>ir([Pt(a.onEvent,i=>{Y0(i,t,s).get(At)})].concat(a.validateOnLoad?[Hr(i=>{Y0(i,t,s).get(oe)})]:[]))).getOr({})}),k6=[Tt("invalidClass"),Ke("getRoot",_.none),hi("notify",[Ke("aria","alert"),Ke("getContainer",_.none),Ke("validHtml",""),us("onValid"),us("onInvalid"),us("onValidate")]),hi("validator",[Tt("validate"),Ke("onEvent","input"),Ke("validateOnLoad",!0)])];const Tf=mc({fields:k6,name:"invalidating",active:x6,apis:dx,extra:{validation:t=>s=>{const a=vn.getValue(s);return ii.pure(t(a))}}});var X0=Object.freeze({__proto__:null,events:()=>ir([T2(d1(),Ne)]),exhibit:()=>su({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const J0=mc({fields:[],name:"unselecting",active:X0}),pN=(t,s)=>lu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:cn([Ll.button(s.providers.isDisabled),Ca(),J0.config({}),Sa.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>ii.nu(i=>t.fetch(i)).map(i=>_.from(dA(hr(oA(Un("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,gm.CLOSE_ON_EXECUTE,Pe,s.providers),{movement:nx(t.columns,t.presets)})))),parts:{menu:L0(!1,1,t.presets)}}),bN=Un("color-input-change"),vN=Un("color-swatch-change"),yN=Un("color-picker-cancel"),T6=(t,s,a,i)=>{const d=Vs.parts.field({factory:H0,inputClasses:["tox-textfield"],data:i,onSetValue:A=>Tf.run(A).get(oe),inputBehaviours:cn([xo.config({disabled:s.providers.isDisabled}),Ca(),Sa.config({}),Tf.config({invalidClass:"tox-textbox-field-invalid",getRoot:A=>Ti(A.element),notify:{onValid:A=>{const D=vn.getValue(A);po(A,bN,{color:D})}},validator:{validateOnLoad:!1,validate:A=>{const D=vn.getValue(A);if(D.length===0)return ii.pure(Bo.value(!0));{const M=Bt.fromTag("span");$n(M,"background-color",D);const U=Js(M,"background-color").fold(()=>Bo.error("blah"),W=>Bo.value(D));return ii.pure(U)}}}})]),selectOnFocus:!1}),g=t.label.map(A=>np(A,s.providers)),p=(A,D)=>{po(A,vN,{value:D})},w=(A,D)=>{T.getOpt(A).each(M=>{D==="custom"?a.colorPicker(U=>{U.fold(()=>zs(M,yN),W=>{p(M,W),V_(t.storageKey,W)})},"#ffffff"):D==="remove"?p(M,""):p(M,D)})},T=wr(pN({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Ec,Tc,Va],onLtr:()=>[Tc,Ec,Va]},components:[],fetch:tA(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:w},s));return Vs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:cn([ms("form-field-events",[Pt(bN,(A,D)=>{T.getOpt(A).each(M=>{$n(M.element,"background-color",D.event.color)}),po(A,zl,{name:t.name})}),Pt(vN,(A,D)=>{Vs.getField(A).each(M=>{vn.setValue(M,D.event.value),os.getCurrent(A).each(_o.focus)})}),Pt(yN,(A,D)=>{Vs.getField(A).each(M=>{os.getCurrent(A).each(_o.focus)})})])])})},E6=cu({schema:[Tt("dom")],name:"label"}),sp=t=>cu({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:ir([gd(er(),(d,g,p)=>i(d,p),[s]),gd(Lc(),(d,g,p)=>i(d,p),[s]),gd(Di(),(d,g,p)=>{p.mouseIsDown.get()&&i(d,p)},[s])])}))}),_6=sp("top-left"),A6=sp("top"),O6=sp("top-right"),D6=sp("right"),R6=sp("bottom-right"),wN=sp("bottom"),Q0=sp("bottom-left"),Db=sp("left"),N6=Wc({name:"thumb",defaults:Y({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ir([Gf(er(),t,"spectrum"),Gf(Ha(),t,"spectrum"),Gf(Ic(),t,"spectrum"),Gf(Lc(),t,"spectrum"),Gf(Di(),t,"spectrum"),Gf(vp(),t,"spectrum")])})}),CN=Wc({schema:[xc("mouseIsDown",()=>V(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:cn([fo.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),_o.config({})]),events:ir([Pt(er(),i),Pt(Ha(),i),Pt(Lc(),i),Pt(Di(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var SN=[E6,Db,D6,A6,wN,_6,O6,Q0,R6,N6,CN];const Ow=Y("slider.change.value"),Dw=t=>t.type.indexOf("touch")!==-1,Rb=t=>{const s=t.event.raw;if(Dw(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?_.some(a.touches[0]).map(i=>Ko(i.clientX,i.clientY)):_.none()}else{const a=s;return a.clientX!==void 0?_.some(a).map(i=>Ko(i.clientX,i.clientY)):_.none()}},M6="top",$6="right",B6="bottom",P6="left",Nb=t=>t.model.minX,Mb=t=>t.model.minY,$b=t=>t.model.minX-1,mx=t=>t.model.minY-1,Bb=t=>t.model.maxX,Pb=t=>t.model.maxY,Rw=t=>t.model.maxX+1,fx=t=>t.model.maxY+1,xN=(t,s,a)=>s(t)-a(t),vA=t=>xN(t,Bb,Nb),yA=t=>xN(t,Pb,Mb),kN=t=>vA(t)/2,wA=t=>yA(t)/2,ev=t=>t.stepSize,TN=t=>t.snapToGrid,EN=t=>t.snapStart,_N=t=>t.rounded,gx=(t,s)=>t[s+"-edge"]!==void 0,CA=t=>gx(t,P6),SA=t=>gx(t,$6),AN=t=>gx(t,M6),ON=t=>gx(t,B6),Og=t=>t.model.value.get(),Dg=(t,s)=>({x:t,y:s}),el=(t,s)=>{po(t,Ow(),{value:s})},F6=(t,s)=>{el(t,Dg($b(s),mx(s)))},I6=(t,s)=>{el(t,mx(s))},L6=(t,s)=>{el(t,Dg(kN(s),mx(s)))},hx=(t,s)=>{el(t,Dg(Rw(s),mx(s)))},Gu=(t,s)=>{el(t,Rw(s))},xA=(t,s)=>{el(t,Dg(Rw(s),wA(s)))},DN=(t,s)=>{el(t,Dg(Rw(s),fx(s)))},H6=(t,s)=>{el(t,fx(s))},z6=(t,s)=>{el(t,Dg(kN(s),fx(s)))},V6=(t,s)=>{el(t,Dg($b(s),fx(s)))},U6=(t,s)=>{el(t,$b(s))},RN=(t,s)=>{el(t,Dg($b(s),wA(s)))},px=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),kA=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),NN=(t,s,a)=>Math.max(s,Math.min(a,t)),MN=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/i)*i;return NN(s+p,s-1,a+1)},g=>{const p=(t-g)%i,w=Math.round(p/i),T=Math.floor((t-g)/i),A=Math.floor((a-g)/i),D=Math.min(A,T+w),M=g+D*i;return Math.max(g,M)}),W6=(t,s,a)=>Math.min(a,Math.max(t,s))-s,TA=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:p,snapStart:w,rounded:T,hasMinEdge:A,hasMaxEdge:D,minBound:M,maxBound:U,screenRange:W}=t,le=A?s-1:s,he=D?a+1:a;if(d<M)return le;if(d>U)return he;{const nt=W6(d,M,U),Me=NN(nt/W*i+s,le,he);return p&&Me>=s&&Me<=a?MN(Me,s,a,g,w):T?Math.round(Me):Me}},EA=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:w,maxOffset:T,centerMinEdge:A,centerMaxEdge:D}=t;return d<s?g?0:A:d>a?p?w:D:(d-s)/i*T},bx="top",$N="right",BN="bottom",_A="left",Z6="width",j6="height",Ef=t=>t.element.dom.getBoundingClientRect(),uu=(t,s)=>t[s],vx=t=>{const s=Ef(t);return uu(s,_A)},AA=t=>{const s=Ef(t);return uu(s,$N)},yx=t=>{const s=Ef(t);return uu(s,bx)},PN=t=>{const s=Ef(t);return uu(s,BN)},FN=t=>{const s=Ef(t);return uu(s,Z6)},IN=t=>{const s=Ef(t);return uu(s,j6)},LN=(t,s,a)=>(t+s)/2-a,HN=(t,s)=>{const a=Ef(t),i=Ef(s),d=uu(a,_A),g=uu(a,$N),p=uu(i,_A);return LN(d,g,p)},zN=(t,s)=>{const a=Ef(t),i=Ef(s),d=uu(a,bx),g=uu(a,BN),p=uu(i,bx);return LN(d,g,p)},Nw=(t,s)=>{po(t,Ow(),{value:s})},wx=(t,s,a)=>{const i={min:Nb(s),max:Bb(s),range:vA(s),value:a,step:ev(s),snap:TN(s),snapStart:EN(s),rounded:_N(s),hasMinEdge:CA(s),hasMaxEdge:SA(s),minBound:vx(t),maxBound:AA(t),screenRange:FN(t)};return TA(i)},G6=(t,s,a)=>{const i=wx(t,s,a);return Nw(t,i),i},q6=(t,s)=>{const a=Nb(s);Nw(t,a)},K6=(t,s)=>{const a=Bb(s);Nw(t,a)},Y6=(t,s,a)=>{const d=(t>0?kA:px)(Og(a),Nb(a),Bb(a),ev(a));return Nw(s,d),_.some(d)},VN=t=>(s,a)=>Y6(t,s,a).map(Ne),UN=t=>Rb(t).map(a=>a.left),WN=(t,s,a,i,d)=>{const p=FN(t),w=i.bind(D=>_.some(HN(D,t))).getOr(0),T=d.bind(D=>_.some(HN(D,t))).getOr(p),A={min:Nb(s),max:Bb(s),range:vA(s),value:a,hasMinEdge:CA(s),hasMaxEdge:SA(s),minBound:vx(t),minOffset:0,maxBound:AA(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:T};return EA(A)},Cx=(t,s,a,i,d,g)=>{const p=WN(s,g,a,i,d);return vx(s)-vx(t)+p},OA=(t,s,a,i)=>{const d=Og(a),g=Cx(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),p=gr(s.element)/2;$n(s.element,"left",g-p+"px")},X6=VN(-1),ZN=VN(1),J6=_.none,Q6=_.none,e8={"top-left":_.none(),top:_.none(),"top-right":_.none(),right:_.some(Gu),"bottom-right":_.none(),bottom:_.none(),"bottom-left":_.none(),left:_.some(U6)};var t8=Object.freeze({__proto__:null,setValueFrom:G6,setToMin:q6,setToMax:K6,findValueOfOffset:wx,getValueFromEvent:UN,findPositionOfValue:Cx,setPositionFromValue:OA,onLeft:X6,onRight:ZN,onUp:J6,onDown:Q6,edgeActions:e8});const tv=(t,s)=>{po(t,Ow(),{value:s})},vm=(t,s,a)=>{const i={min:Mb(s),max:Pb(s),range:yA(s),value:a,step:ev(s),snap:TN(s),snapStart:EN(s),rounded:_N(s),hasMinEdge:AN(s),hasMaxEdge:ON(s),minBound:yx(t),maxBound:PN(t),screenRange:IN(t)};return TA(i)},n8=(t,s,a)=>{const i=vm(t,s,a);return tv(t,i),i},Mw=(t,s)=>{const a=Mb(s);tv(t,a)},o8=(t,s)=>{const a=Pb(s);tv(t,a)},DA=(t,s,a)=>{const d=(t>0?kA:px)(Og(a),Mb(a),Pb(a),ev(a));return tv(s,d),_.some(d)},jN=t=>(s,a)=>DA(t,s,a).map(Ne),s8=t=>Rb(t).map(a=>a.top),r8=(t,s,a,i,d)=>{const p=IN(t),w=i.bind(D=>_.some(zN(D,t))).getOr(0),T=d.bind(D=>_.some(zN(D,t))).getOr(p),A={min:Mb(s),max:Pb(s),range:yA(s),value:a,hasMinEdge:AN(s),hasMaxEdge:ON(s),minBound:yx(t),minOffset:0,maxBound:PN(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:T};return EA(A)},Sx=(t,s,a,i,d,g)=>{const p=r8(s,g,a,i,d);return yx(s)-yx(t)+p},a8=(t,s,a,i)=>{const d=Og(a),g=Sx(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),p=ut(s.element)/2;$n(s.element,"top",g-p+"px")},RA=_.none,NA=_.none,MA=jN(-1),c8=jN(1),du={"top-left":_.none(),top:_.some(I6),"top-right":_.none(),right:_.none(),"bottom-right":_.none(),bottom:_.some(H6),"bottom-left":_.none(),left:_.none()};var i8=Object.freeze({__proto__:null,setValueFrom:n8,setToMin:Mw,setToMax:o8,findValueOfOffset:vm,getValueFromEvent:s8,findPositionOfValue:Sx,setPositionFromValue:a8,onLeft:RA,onRight:NA,onUp:MA,onDown:c8,edgeActions:du});const xx=(t,s)=>{po(t,Ow(),{value:s})},$w=(t,s)=>({x:t,y:s}),GN=(t,s,a)=>{const i=wx(t,s,a.left),d=vm(t,s,a.top),g=$w(i,d);return xx(t,g),g},l8=(t,s,a,i)=>{const d=t>0?kA:px,g=s?Og(i).x:d(Og(i).x,Nb(i),Bb(i),ev(i)),p=s?d(Og(i).y,Mb(i),Pb(i),ev(i)):Og(i).y;return xx(a,$w(g,p)),_.some(g)},kx=(t,s)=>(a,i)=>l8(t,s,a,i).map(Ne),u8=(t,s)=>{const a=Nb(s),i=Mb(s);xx(t,$w(a,i))},d8=(t,s)=>{const a=Bb(s),i=Pb(s);xx(t,$w(a,i))},m8=t=>Rb(t),f8=(t,s,a,i)=>{const d=Og(a),g=Cx(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),p=Sx(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),w=gr(s.element)/2,T=ut(s.element)/2;$n(s.element,"left",g-w+"px"),$n(s.element,"top",p-T+"px")},g8=kx(-1,!1),qN=kx(1,!1),h8=kx(-1,!0),p8=kx(1,!0),b8={"top-left":_.some(F6),top:_.some(L6),"top-right":_.some(hx),right:_.some(xA),"bottom-right":_.some(DN),bottom:_.some(z6),"bottom-left":_.some(V6),left:_.some(RN)};var KN=Object.freeze({__proto__:null,setValueFrom:GN,setToMin:u8,setToMax:d8,getValueFromEvent:m8,setPositionFromValue:f8,onLeft:g8,onRight:qN,onUp:h8,onDown:p8,edgeActions:b8});const $A=[Ke("stepSize",1),Ke("onChange",oe),Ke("onChoose",oe),Ke("onInit",oe),Ke("onDragStart",oe),Ke("onDragEnd",oe),Ke("snapToGrid",!1),Ke("rounded",!0),Ns("snapStart"),Oi("model",fi("mode",{x:[Ke("minX",0),Ke("maxX",100),xc("value",t=>V(t.mode.minX)),Tt("getInitialValue"),br("manager",t8)],y:[Ke("minY",0),Ke("maxY",100),xc("value",t=>V(t.mode.minY)),Tt("getInitialValue"),br("manager",i8)],xy:[Ke("minX",0),Ke("maxX",100),Ke("minY",0),Ke("maxY",100),xc("value",t=>V({x:t.mode.minX,y:t.mode.minY})),Tt("getInitialValue"),br("manager",KN)]})),Da("sliderBehaviours",[fo,vn]),xc("mouseIsDown",()=>V(!1))],mu=Zc({name:"Slider",configFields:$A,partFields:SN,factory:(t,s,a,i)=>{const d=it=>Fn(it,t,"thumb"),g=it=>Fn(it,t,"spectrum"),p=it=>sr(it,t,"left-edge"),w=it=>sr(it,t,"right-edge"),T=it=>sr(it,t,"top-edge"),A=it=>sr(it,t,"bottom-edge"),D=t.model,M=D.manager,U=(it,yn)=>{M.setPositionFromValue(it,yn,t,{getLeftEdge:p,getRightEdge:w,getTopEdge:T,getBottomEdge:A,getSpectrum:g})},W=(it,yn)=>{D.value.set(yn);const Hn=d(it);U(it,Hn)},le=(it,yn)=>{W(it,yn);const Hn=d(it);return t.onChange(it,Hn,yn),_.some(!0)},he=it=>{M.setToMin(it,t)},nt=it=>{M.setToMax(it,t)},Me=it=>{const yn=()=>{sr(it,t,"thumb").each(Nn=>{const ho=D.value.get();t.onChoose(it,Nn,ho)})},Hn=t.mouseIsDown.get();t.mouseIsDown.set(!1),Hn&&yn()},ot=(it,yn)=>{yn.stop(),t.mouseIsDown.set(!0),t.onDragStart(it,d(it))},gn=(it,yn)=>{yn.stop(),t.onDragEnd(it,d(it)),Me(it)};return{uid:t.uid,dom:t.dom,components:s,behaviours:fc(t.sliderBehaviours,[fo.config({mode:"special",focusIn:it=>sr(it,t,"spectrum").map(fo.focusIn).map(Ne)}),vn.config({store:{mode:"manual",getValue:it=>D.value.get(),setValue:W}}),Nl.config({channels:{[ff()]:{onReceive:Me}}})]),events:ir([Pt(Ow(),(it,yn)=>{le(it,yn.event.value)}),Hr((it,yn)=>{const Hn=D.getInitialValue();D.value.set(Hn);const Nn=d(it);U(it,Nn);const ho=g(it);t.onInit(it,Nn,ho,D.value.get())}),Pt(er(),ot),Pt(Ic(),gn),Pt(Lc(),ot),Pt(vp(),gn)]),apis:{resetToMin:he,resetToMax:nt,setValue:W,refresh:U},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),rp=Un("rgb-hex-update"),BA=Un("slider-update"),PA=Un("palette-update"),YN=(t,s)=>{const a=mu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=mu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return mu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:Y(0)},components:[a,i],sliderBehaviours:cn([_o.config({})]),onChange:(d,g,p)=>{po(d,BA,{value:p})}})},XN="form",v8=[Da("formBehaviours",[vn])],Bw=t=>"<alloy.field."+t+">",y8=t=>{const s=(()=>{const g=[];return{field:(w,T)=>(g.push(w),By(XN,Bw(w),T)),record:Y(g)}})(),a=t(s),i=s.record(),d=Ve(i,g=>Wc({name:g,pname:Bw(g)}));return db(XN,v8,d,JN,a)},w8=(t,s)=>t.fold(()=>Bo.error(s),Bo.value),JN=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:fc(t.formBehaviours,[vn.config({store:{mode:"manual",getValue:a=>{const i=JC(a,t);return on(i,(d,g)=>d().bind(p=>{const w=os.getCurrent(p);return w8(w,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Km(p.element)))}).map(vn.getValue))},setValue:(a,i)=>{Dt(i,(d,g)=>{sr(a,t,g).each(p=>{os.getCurrent(p).each(w=>{vn.setValue(w,d)})})})}}})]),apis:{getField:(a,i)=>sr(a,t,i).bind(os.getCurrent)}}),Fb={getField:gh((t,s,a)=>t.getField(s,a)),sketch:y8},Tx=Un("valid-input"),FA=Un("invalid-input"),Pi=Un("validating-input"),Ex="colorcustom.rgb.",C8=(t,s,a,i)=>{const d=(U,W)=>Tf.config({invalidClass:s("invalid"),notify:{onValidate:le=>{po(le,Pi,{type:U})},onValid:le=>{po(le,Tx,{type:U,value:vn.getValue(le)})},onInvalid:le=>{po(le,FA,{type:U,value:vn.getValue(le)})}},validator:{validate:le=>{const he=vn.getValue(le),nt=W(he)?Bo.value(!0):Bo.error(t("aria.input.invalid"));return ii.pure(nt)},validateOnLoad:!1}}),g=(U,W,le,he,nt)=>{const Me=t(Ex+"range"),ot=Vs.parts.label({dom:{tag:"label",attributes:{"aria-label":he}},components:[za(le)]}),gn=Vs.parts.field({data:nt,factory:H0,inputAttributes:{type:"text",...W==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:cn([d(W,U),Sa.config({})]),onSetValue:Nn=>{Tf.isInvalid(Nn)&&Tf.run(Nn).get(oe)}}),it=[ot,gn],yn=W!=="hex"?[Vs.parts["aria-descriptor"]({text:Me})]:[],Hn=it.concat(yn);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Hn}},p=(U,W)=>{const le=ww(W);return Fb.getField(U,"hex").each(he=>{_o.isFocused(he)||vn.setValue(U,{hex:le.value})}),le},w=(U,W)=>{const le=W.red,he=W.green,nt=W.blue;vn.setValue(U,{red:le,green:he,blue:nt})},T=wr({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),A=(U,W)=>{T.getOpt(U).each(le=>{$n(le.element,"background-color","#"+W.value)})};return Fl({factory:()=>{const U={red:V(_.some(255)),green:V(_.some(255)),blue:V(_.some(255)),hex:V(_.some("ffffff"))},W=(oo,Xo)=>{const Ms=Cw(Xo);w(oo,Ms),Me(Ms)},le=oo=>U[oo].get(),he=(oo,Xo)=>{U[oo].set(Xo)},nt=()=>le("red").bind(oo=>le("green").bind(Xo=>le("blue").map(Ms=>ep(oo,Xo,Ms,1)))),Me=oo=>{const Xo=oo.red,Ms=oo.green,gs=oo.blue;he("red",_.some(Xo)),he("green",_.some(Ms)),he("blue",_.some(gs))},ot=(oo,Xo)=>{const Ms=Xo.event;Ms.type!=="hex"?he(Ms.type,_.none()):i(oo)},gn=(oo,Xo)=>{a(oo);const Ms=TR(Xo);he("hex",_.some(Xo));const gs=Cw(Ms);w(oo,gs),Me(gs),po(oo,rp,{hex:Ms}),A(oo,Ms)},it=(oo,Xo,Ms)=>{const gs=parseInt(Ms,10);he(Xo,_.some(gs)),nt().each(sn=>{const Dn=p(oo,sn);po(oo,rp,{hex:Dn}),A(oo,Dn)})},yn=oo=>oo.type==="hex",Hn=(oo,Xo)=>{const Ms=Xo.event;yn(Ms)?gn(oo,Ms.value):it(oo,Ms.type,Ms.value)},Nn=oo=>({label:t(Ex+oo+".label"),description:t(Ex+oo+".description")}),ho=Nn("red"),bo=Nn("green"),Wo=Nn("blue"),ys=Nn("hex");return hr(Fb.sketch(oo=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[oo.field("red",Vs.sketch(g(ex,"red",ho.label,ho.description,255))),oo.field("green",Vs.sketch(g(ex,"green",bo.label,bo.description,255))),oo.field("blue",Vs.sketch(g(ex,"blue",Wo.label,Wo.description,255))),oo.field("hex",Vs.sketch(g(P_,"hex",ys.label,ys.description,"ffffff"))),T.asSpec()],formBehaviours:cn([Tf.config({invalidClass:s("form-invalid")}),ms("rgb-form-events",[Pt(Tx,Hn),Pt(FA,ot),Pt(Pi,ot)])])})),{apis:{updateHex:(oo,Xo)=>{vn.setValue(oo,{hex:Xo.value}),W(oo,Xo),A(oo,Xo)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(U,W,le)=>{U.updateHex(W,le)}},extraApis:{}})},S8=(t,s)=>{const a=mu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=mu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(A,D)=>{const{width:M,height:U}=A,W=A.getContext("2d");if(W===null)return;W.fillStyle=D,W.fillRect(0,0,M,U);const le=W.createLinearGradient(0,0,M,0);le.addColorStop(0,"rgba(255,255,255,1)"),le.addColorStop(1,"rgba(255,255,255,0)"),W.fillStyle=le,W.fillRect(0,0,M,U);const he=W.createLinearGradient(0,0,0,U);he.addColorStop(0,"rgba(0,0,0,0)"),he.addColorStop(1,"rgba(0,0,0,1)"),W.fillStyle=he,W.fillRect(0,0,M,U)},g=(A,D)=>{const M=A.components()[0].element.dom,U=Sw(D,100,100),W=RR(U);d(M,H_(W))},p=(A,D)=>{const M=U_(Cw(D));mu.setValue(A,{x:M.saturation,y:100-M.value})};return Fl({factory:A=>{const D=Y({x:0,y:0}),M=(le,he,nt)=>{po(le,PA,{value:nt})},U=(le,he,nt,Me)=>{d(nt.element.dom,H_(NR))},W=cn([os.config({find:_.some}),_o.config({})]);return mu.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,i],onChange:M,onInit:U,sliderBehaviours:W})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(A,D,M)=>{g(D,M)},setThumb:(A,D,M)=>{p(D,M)}},extraApis:{}})},QN=(t,s)=>{const a=d=>{const g=C8(t,s,d.onValidHex,d.onInvalidHex),p=S8(t,s),w=Hn=>(100-Hn)/100*360,T=Hn=>100-Hn/360*100,A={paletteRgba:V(NR),paletteHue:V(0)},D=wr(YN(t,s)),M=wr(p.sketch({})),U=wr(g.sketch({})),W=(Hn,Nn,ho)=>{M.getOpt(Hn).each(bo=>{p.setHue(bo,ho)})},le=(Hn,Nn)=>{U.getOpt(Hn).each(ho=>{g.updateHex(ho,Nn)})},he=(Hn,Nn,ho)=>{D.getOpt(Hn).each(bo=>{mu.setValue(bo,T(ho))})},nt=(Hn,Nn)=>{M.getOpt(Hn).each(ho=>{p.setThumb(ho,Nn)})},Me=(Hn,Nn)=>{const ho=Cw(Hn);A.paletteRgba.set(ho),A.paletteHue.set(Nn)},ot=(Hn,Nn,ho,bo)=>{Me(Nn,ho),R(bo,Wo=>{Wo(Hn,Nn,ho)})},gn=()=>{const Hn=[le];return(Nn,ho)=>{const bo=ho.event.value,Wo=A.paletteHue.get(),ys=Sw(Wo,bo.x,100-bo.y),oo=FR(ys);ot(Nn,oo,Wo,Hn)}},it=()=>{const Hn=[W,le];return(Nn,ho)=>{const bo=w(ho.event.value),Wo=A.paletteRgba.get(),ys=U_(Wo),oo=Sw(bo,ys.saturation,ys.value),Xo=FR(oo);ot(Nn,Xo,bo,Hn)}},yn=()=>{const Hn=[W,he,nt];return(Nn,ho)=>{const bo=ho.event.hex,Wo=W_(bo);ot(Nn,bo,Wo.hue,Hn)}};return{uid:d.uid,dom:d.dom,components:[M.asSpec(),D.asSpec(),U.asSpec()],behaviours:cn([ms("colour-picker-events",[Pt(rp,yn()),Pt(PA,gn()),Pt(BA,it())]),os.config({find:Hn=>U.getOpt(Hn)}),fo.config({mode:"acyclic"})])}};return Fl({name:"ColourPicker",configFields:[Tt("dom"),Ke("onValidHex",oe),Ke("onInvalidHex",oe)],factory:a})},qu={self:()=>os.config({find:_.some}),memento:t=>os.config({find:t.getOpt}),childAt:t=>os.config({find:s=>ga(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},_f=ro([Ke("preprocess",At),Ke("postprocess",At)]),IA=(t,s)=>{const a=Sc("RepresentingConfigs.memento processors",_f,s);return vn.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=vn.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),p=t.get(i);vn.setValue(p,g)}}})},LA=(t,s,a)=>vn.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),nv=(t,s,a)=>LA(t,i=>s(i.element),(i,d)=>a(i.element,d)),Ku={memento:IA,withElement:nv,withComp:LA,domValue:t=>nv(t,gl,Jm),domHtml:t=>nv(t,Kd,qm),memory:t=>vn.config({store:{mode:"memory",initialValue:t}})},x8={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},k8=t=>s=>t.translate(x8[s]),T8=(t,s,a)=>{const i=T=>"tox-"+T,d=QN(k8(s),i),g=T=>{po(T,Ag,{name:"hex-valid",value:!0})},p=T=>{po(T,Ag,{name:"hex-valid",value:!1})},w=wr(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[w.asSpec()],behaviours:cn([Ku.withComp(a,T=>{const A=w.get(T);return os.getCurrent(A).bind(U=>vn.getValue(U).hex).map(U=>"#"+U).getOr("")},(T,A)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,M=_.from(D.exec(A)).bind(le=>eo(le,1)),U=w.get(T);os.getCurrent(U).fold(()=>{console.log("Can not find form")},le=>{vn.setValue(le,{hex:M.getOr("")}),Fb.getField(le,"hex").each(he=>{zs(he,Zf())})})}),qu.self()])}};var E8=tinymce.util.Tools.resolve("tinymce.Resource");const tM=t=>Vn(t,"init"),_8=t=>{const s=zr(),a=wr({dom:{tag:t.tag}}),i=zr();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:cn([ms("custom-editor-events",[Hr(d=>{a.getOpt(d).each(g=>{(tM(t)?t.init(g.element.dom):E8.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{i.on(w=>{p.setValue(w)}),i.clear(),s.set(p)})})})]),Ku.withComp(_.none(),()=>s.get().fold(()=>i.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>i.set(g),p=>p.setValue(g))}),qu.self()]),components:[a.asSpec()]}};var xl=tinymce.util.Tools.resolve("tinymce.util.Tools");const _x=(t,s)=>{const a=xl.explode(s.getOption("images_file_types")),i=d=>ze(a,g=>ve(d.name.toLowerCase(),`.${g.toLowerCase()}`));return xe(pn(t),i)},A8=(t,s,a)=>{const i=(U,W)=>{W.stop()},d=U=>(W,le)=>{R(U,he=>{he(W,le)})},g=(U,W)=>{var le;if(!xo.isDisabled(U)){const he=W.event.raw;w(U,(le=he.dataTransfer)===null||le===void 0?void 0:le.files)}},p=(U,W)=>{const le=W.event.raw.target;w(U,le.files)},w=(U,W)=>{W&&(vn.setValue(U,_x(W,s)),po(U,zl,{name:t.name}))},T=wr({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:cn([ms("input-file-events",[dh(wp()),dh(ch())])])}),A=U=>({uid:U.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:cn([Ku.memory(a.getOr([])),qu.self(),xo.config({}),Ts.config({toggleClass:"dragenter",toggleOnExecute:!1}),ms("dropzone-events",[Pt("dragenter",d([i,Ts.toggle])),Pt("dragleave",d([i,Ts.toggle])),Pt("dragover",i),Pt("drop",d([i,g])),Pt(yp(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[za(s.translate("Drop an image here"))]},Qi.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[za(s.translate("Browse for an image")),T.asSpec()],action:W=>{T.get(W).element.dom.click()},buttonBehaviours:cn([Sa.config({}),Ll.button(s.isDisabled),Ca()])})]}]}),D=t.label.map(U=>np(U,s)),M=Vs.parts.field({factory:{sketch:A}});return Ew(D,M,["tox-form__group--stretched"],[])},O8=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ve(t.items,s.interpreter)}),Ax=Un("alloy-fake-before-tabstop"),Ox=Un("alloy-fake-after-tabstop"),Dx=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:cn([_o.config({ignore:!0}),Sa.config({})])}),Pw=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[Dx([Ax]),t,Dx([Ox])],behaviours:cn([qu.childAt(1)])}),ov=(t,s)=>{po(t,jm(),{raw:{which:9,shiftKey:s}})},Fw=(t,s)=>{const a=s.element;ji(a,Ax)?ov(t,!0):ji(a,Ox)&&ov(t,!1)},sv=t=>kw(t,["."+Ax,"."+Ox].join(","),Pe),nM=t=>{const s=V(t.getOr(""));return{getValue:a=>s.get(),setValue:(a,i)=>{s.get()!==i&&So(a.element,"srcdoc",i),s.set(i)}}},D8=(t,s,a)=>{const i=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",p={...t.label.map(M=>({title:M})).getOr({}),...a.map(M=>({srcdoc:M})).getOr({}),...i?{sandbox:"allow-scripts allow-same-origin"}:{}},w=nM(a),T=t.label.map(M=>np(M,s)),A=M=>Pw({uid:M.uid,dom:{tag:"iframe",attributes:p,classes:d?[g]:[g,`${g}--opaque`]},behaviours:cn([Sa.config({}),_o.config({}),Ku.withComp(a,w.getValue,w.setValue)])}),D=Vs.parts.field({factory:{sketch:A}});return Ew(T,D,["tox-form__group--stretched"],[])},R8=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[ri(t,"load",i),ri(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>R(d,p=>p.unbind());t.dom.complete&&i()}),N8=(t,s,a,i,d)=>{const g=a*d,p=i*d,w=Math.max(0,t/2-g/2),T=Math.max(0,s/2-p/2);return{left:w.toString()+"px",top:T.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},M8=(t,s,a)=>{const i=gr(t),d=ut(t);return Math.min(i/s,d/a,1)},$8=(t,s)=>{const a=V(s.getOr({url:""})),i=wr({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=wr({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(T,A)=>{const D={url:A.url};A.zoom.each(U=>D.zoom=U),A.cachedWidth.each(U=>D.cachedWidth=U),A.cachedHeight.each(U=>D.cachedHeight=U),a.set(D);const M=()=>{const{cachedWidth:U,cachedHeight:W,zoom:le}=D;if(!yt(U)&&!yt(W)){if(yt(le)){const nt=M8(T.element,U,W);D.zoom=nt}const he=N8(gr(T.element),ut(T.element),U,W,D.zoom);d.getOpt(T).each(nt=>{Fr(nt.element,he)})}};i.getOpt(T).each(U=>{const W=U.element;A.url!==or(W,"src")&&(So(W,"src",A.url),ca(T.element,"tox-imagepreview__loaded")),M(),R8(W).then(le=>{T.getSystem().isConnected()&&(ya(T.element,"tox-imagepreview__loaded"),D.cachedWidth=le.dom.naturalWidth,D.cachedHeight=le.dom.naturalHeight,M())})})},p={};t.height.each(T=>p.height=T);const w=s.map(T=>({url:T.url,zoom:_.from(T.zoom),cachedWidth:_.from(T.cachedWidth),cachedHeight:_.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:cn([qu.self(),Ku.withComp(w,()=>a.get(),g)])}},B8=(t,s)=>{const a={dom:{tag:"label",classes:["tox-label"]},components:[za(s.providers.translate(t.label))]},i=Ve(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...i],behaviours:cn([qu.self(),Ho.config({}),Ku.domHtml(_.none()),fo.config({mode:"acyclic"})])}},oM=Un("toolbar.button.execute"),sM=t=>dl((s,a)=>{JS(t,s)(i=>{po(s,oM,{buttonApi:i}),t.onAction(i)})}),HA={[ul()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},rM=(t,s,a)=>fm(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),Iw=(t,s)=>rM(t,s,[]),aM=(t,s)=>rM(t,s,[Ho.config({})]),Rx=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[za(a.translate(t))],behaviours:cn([Ho.config({})])}),Af=Un("update-menu-text"),cM=Un("update-menu-icon"),Nx=(t,s,a)=>{const i=V(oe),d=t.text.map(M=>wr(Rx(M,s,a.providers))),g=t.icon.map(M=>wr(aM(M,a.providers.icons))),p=(M,U)=>{const W=vn.getValue(M);return _o.focus(W),po(W,"keydown",{raw:U.event.raw}),lu.close(W),_.some(!0)},w=t.role.fold(()=>({}),M=>({role:M})),T=t.tooltip.fold(()=>({}),M=>{const U=a.providers.translate(M);return{title:U,"aria-label":U}}),A=fm("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons);return wr(lu.sketch({...t.uid?{uid:t.uid}:{},...w,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ve(t.classes,M=>`${s}--${M}`)),attributes:{...T}},components:_b([g.map(M=>M.asSpec()),d.map(M=>M.asSpec()),_.some(A)]),matchWidth:!0,useMinWidth:!0,onOpen:(M,U,W)=>{t.searchable&&jI(W)},dropdownBehaviours:cn([...t.dropdownBehaviours,Ll.button(()=>t.disabled||a.providers.isDisabled()),Ca(),J0.config({}),Ho.config({}),ms("dropdown-events",[Ad(t,i),bw(t,i)]),ms("menubutton-update-display-text",[Pt(Af,(M,U)=>{d.bind(W=>W.getOpt(M)).each(W=>{Ho.set(W,[za(a.providers.translate(U.event.text))])})}),Pt(cM,(M,U)=>{g.bind(W=>W.getOpt(M)).each(W=>{Ho.set(W,[aM(U.event.icon,a.providers.icons)])})})])]),eventOrder:hr(HA,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:cn([fo.config({mode:"special",onLeft:p,onRight:p}),ms("dropdown-sandbox-events",[Pt(PS,(M,U)=>{UI(M),U.stop()}),Pt(FS,(M,U)=>{kf(M,U),U.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...L0(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:ix,onCollapseMenu:(M,U,W)=>{Ls.getHighlighted(W).each(le=>{ix(M,W,le)})},onDehighlightItem:Wa}},fetch:M=>ii.nu(Nt(t.fetch,M))})).asSpec()},P8=t=>qt(t),iM=t=>t.type==="separator",F8=t=>Vn(t,"getSubmenuItems"),I8={type:"separator"},lM=(t,s)=>{const a=ke(t,(i,d)=>P8(d)?d===""?i:d==="|"?i.length>0&&!iM(i[i.length-1])?i.concat([I8]):i:Vn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&iM(a[a.length-1])&&a.pop(),a},L8=(t,s)=>{const a=t.getSubmenuItems(),i=Mx(a,s),d=hr(i.menus,{[t.value]:i.items}),g=hr(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},uM=t=>{const s=Ut(t,"value").getOrThunk(()=>Un("generated-menu-item"));return hr({value:s},t)},Mx=(t,s)=>{const a=lM(qt(t)?t.split(" "):t,s);return We(a,(i,d)=>{if(F8(d)){const g=uM(d),p=L8(g,s);return{menus:hr(i.menus,p.menus),items:[p.item,...i.items],expansions:hr(i.expansions,p.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},Rg=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),zA=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Ib=(t,s,a,i)=>{const d=Un("primary-menu"),g=Mx(t,a.shared.providers.menuItems());if(g.items.length===0)return _.none();const p=Rg(i),w=eN(d,g.items,s,a,i.isHorizontalMenu,p),T=zA(i),A=on(g.menus,(M,U)=>eN(U,M,s,a,!1,T)),D=hr(A,Us(d,w));return _.from(wb.tieredData(d,D,g.expansions))},$x=t=>!Vn(t,"items"),Bx="data-value",VA=(t,s,a,i)=>Ve(a,d=>$x(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{vn.setValue(t,d.value),po(t,zl,{name:s}),_o.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>VA(t,s,d.items,i)}),rv=(t,s)=>to(t,a=>$x(a)?dr(a.value===s,a):rv(a.items,s)),dM=(t,s,a)=>{const i=s.shared.providers,d=a.bind(T=>rv(t.items,T)).orThunk(()=>co(t.items).filter($x)),g=t.label.map(T=>np(T,i)),p=Vs.parts.field({dom:{},factory:{sketch:T=>Nx({uid:T.uid,text:d.map(A=>A.text),icon:_.none(),tooltip:t.label,role:_.none(),fetch:(A,D)=>{const M=VA(A,t.name,t.items,vn.getValue(A));D(Ib(M,gm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:_.none()}))},onSetup:Y(oe),getApi:Y({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Sa.config({}),Ku.withComp(d.map(A=>A.value),A=>or(A.element,Bx),(A,D)=>{rv(t.items,D).each(M=>{So(A.element,Bx,M.value),po(A,Af,{text:M.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return Vs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:z([g.toArray(),[w]]),fieldBehaviours:cn([xo.config({disabled:Y(!t.enabled),onDisabled:T=>{Vs.getField(T).each(xo.disable)},onEnabled:T=>{Vs.getField(T).each(xo.enable)}})])})},mM=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ve(t.items,s.shared.interpreter)}),H8=(t,s)=>{const a=Ve(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Us("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:fc(t.selectBehaviours,[_o.config({}),vn.config({store:{mode:"manual",getValue:d=>gl(d.element),setValue:(d,g)=>{se(t.options,w=>w.value===g).isSome()&&Jm(d.element,g)},...i}})])}},z8=Fl({name:"HtmlSelect",configFields:[Tt("options"),Da("selectBehaviours",[_o,vn]),Ke("selectClasses",[]),Ke("selectAttributes",{}),Ns("data")],factory:H8}),V8=(t,s,a)=>{const i=Ve(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>np(T,s)),g=Vs.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:i,factory:z8,selectBehaviours:cn([xo.config({disabled:()=>!t.enabled||s.isDisabled()}),Sa.config({}),ms("selectbox-change",[Pt(yp(),(T,A)=>{po(T,zl,{name:t.name})})])])}),p=t.size>1?_.none():_.some(fm("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),w={dom:{tag:"div",classes:["tox-selectfield"]},components:z([[g],p.toArray()])};return Vs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:z([d.toArray(),[w]]),fieldBehaviours:cn([xo.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{Vs.getField(T).each(xo.disable)},onEnabled:T=>{Vs.getField(T).each(xo.enable)}}),Ca()])})},U8=Y([Ke("field1Name","field1"),Ke("field2Name","field2"),of("onLockedChange"),tm(["lockClass"]),Ke("locked",!1),Bl.field("coupledFieldBehaviours",[os,vn])]),W8=(t,s,a)=>sr(t,s,a).bind(os.getCurrent),UA=(t,s)=>Wc({factory:Vs,name:t,overrides:a=>({fieldBehaviours:cn([ms("coupled-input-behaviour",[Pt(Zf(),i=>{W8(i,a,s).each(d=>{sr(i,a,"lock").each(g=>{Ts.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),fM=Y([UA("field1","field2"),UA("field2","field1"),Wc({factory:Qi,schema:[Tt("dom")],name:"lock",overrides:t=>({buttonBehaviours:cn([Ts.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),Z8=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Bl.augment(t.coupledFieldBehaviours,[os.config({find:_.some}),vn.config({store:{mode:"manual",getValue:d=>{const g=kd(d,t,["field1","field2"]);return{[t.field1Name]:vn.getValue(g.field1()),[t.field2Name]:vn.getValue(g.field2())}},setValue:(d,g)=>{const p=kd(d,t,["field1","field2"]);ks(g,t.field1Name)&&vn.setValue(p.field1(),g[t.field1Name]),ks(g,t.field2Name)&&vn.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>sr(d,t,"field1"),getField2:d=>sr(d,t,"field2"),getLock:d=>sr(d,t,"lock")}}),fu=Zc({name:"FormCoupledInputs",configFields:U8(),partFields:fM(),factory:Z8,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),j8=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},av=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Bo.value({value:i,unit:d})}else return Bo.error(t)},gM=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Vn(a,d);return t.unit===s?_.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?_.some(t.value):_.some(t.value/a[t.unit]*a[s]):_.none()},WA=t=>_.none(),hM=(t,s)=>a=>gM(a,s).map(i=>({value:i*t,unit:s})),pM=(t,s)=>{const a=av(t).toOptional(),i=av(s).toOptional();return vs(a,i,(d,g)=>gM(d,g.unit).map(p=>g.value/p).map(p=>hM(p,g.unit)).getOr(WA)).getOr(WA)},G8=(t,s)=>{let a=WA;const i=Un("ratio-event"),d=M=>fm(M,{tag:"span",classes:["tox-icon","tox-lock-icon__"+M]},s.icons),g=fu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:cn([xo.config({disabled:()=>!t.enabled||s.isDisabled()}),Ca(),Sa.config({})])}),p=M=>({dom:{tag:"div",classes:["tox-form__group"]},components:M}),w=M=>Vs.parts.field({factory:H0,inputClasses:["tox-textfield"],inputBehaviours:cn([xo.config({disabled:()=>!t.enabled||s.isDisabled()}),Ca(),Sa.config({}),ms("size-input-events",[Pt(Zm(),(U,W)=>{po(U,i,{isField1:M})}),Pt(yp(),(U,W)=>{po(U,zl,{name:t.name})})])]),selectOnFocus:!1}),T=M=>({dom:{tag:"label",classes:["tox-label"]},components:[za(s.translate(M))]}),A=fu.parts.field1(p([Vs.parts.label(T("Width")),w(!0)])),D=fu.parts.field2(p([Vs.parts.label(T("Height")),w(!1)]));return fu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[A,D,p([T(ly),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(M,U,W)=>{av(vn.getValue(M)).each(le=>{a(le).each(he=>{vn.setValue(U,j8(he))})})},coupledFieldBehaviours:cn([xo.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:M=>{fu.getField1(M).bind(Vs.getField).each(xo.disable),fu.getField2(M).bind(Vs.getField).each(xo.disable),fu.getLock(M).each(xo.disable)},onEnabled:M=>{fu.getField1(M).bind(Vs.getField).each(xo.enable),fu.getField2(M).bind(Vs.getField).each(xo.enable),fu.getLock(M).each(xo.enable)}}),Ca(),ms("size-input-events2",[Pt(i,(M,U)=>{const W=U.event.isField1,le=W?fu.getField1(M):fu.getField2(M),he=W?fu.getField2(M):fu.getField1(M),nt=le.map(vn.getValue).getOr(""),Me=he.map(vn.getValue).getOr("");a=pM(nt,Me)})])])})},q8=(t,s,a)=>{const i=mu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[za(s.translate(t.label))]}),d=mu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=mu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return mu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:Y(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:cn([qu.self(),_o.config({})]),onChoose:(p,w,T)=>{po(p,zl,{name:t.name,value:T})}})},ZA=(t,s)=>{const a=w=>({dom:{tag:"th",innerHtml:s.translate(w)}}),i=w=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ve(w,a)}]}),d=w=>({dom:{tag:"td",innerHtml:s.translate(w)}}),g=w=>({dom:{tag:"tr"},components:Ve(w,d)}),p=w=>({dom:{tag:"tbody"},components:Ve(w,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),p(t.cells)],behaviours:cn([Sa.config({}),_o.config({})])}},bM=(t,s)=>{const a=t.label.map(U=>np(U,s)),i=[xo.config({disabled:()=>t.disabled||s.isDisabled()}),Ca(),fo.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:U=>(zs(U,Aw),_.some(!0))}),ms("textfield-change",[Pt(Zf(),(U,W)=>{po(U,zl,{name:t.name})}),Pt(_v(),(U,W)=>{po(U,zl,{name:t.name})})]),Sa.config({})],d=t.validation.map(U=>Tf.config({getRoot:W=>Ti(W.element),invalidClass:"tox-invalid",validator:{validate:W=>{const le=vn.getValue(W),he=U.validator(le);return ii.pure(he===!0?Bo.value(le):Bo.error(he))},validateOnLoad:U.validateOnLoad}})).toArray(),g=t.placeholder.fold(Y({}),U=>({placeholder:s.translate(U)})),p=t.inputMode.fold(Y({}),U=>({inputmode:U})),w={...g,...p},T=Vs.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(U=>({data:U})).getOr({}),inputAttributes:w,inputClasses:[t.classname],inputBehaviours:cn(z([i,d])),selectOnFocus:!1,factory:H0}),D=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),M=[xo.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:U=>{Vs.getField(U).each(xo.disable)},onEnabled:U=>{Vs.getField(U).each(xo.enable)}}),Ca()];return Ew(a,T,D,M)},K8=(t,s,a)=>bM({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:_.none(),maximized:t.maximized,data:a},s),Y8=(t,s,a)=>bM({name:t.name,multiline:!0,label:t.label,inputMode:_.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:_.none(),maximized:t.maximized,data:a},s);var jA=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return ir([Pt(t.event,i),Dl(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Pt(d,()=>s.cancel())]).getOr([])))}});const GA=(t,s)=>{let a=null;return{cancel:()=>{ao(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{ao(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},vM=(t,s)=>{let a=null;const i=()=>{ao(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},yM=t=>{const s=V(null);return Ri({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var X8=Object.freeze({__proto__:null,throttle:yM,init:t=>t.stream.streams.state(t)});const qA=(t,s)=>{const a=t.stream,i=vM(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var CM=[Oi("stream",fi("mode",{throttle:[Tt("delay"),Ke("stopEvent",!0),br("streams",{setup:qA,state:yM})]})),Ke("event","input"),Ns("cancelEvent"),of("onStream")];const KA=mc({fields:CM,name:"streaming",active:jA,state:X8}),Px=(t,s,a)=>{const i=vn.getValue(a);vn.setValue(s,i),XA(s)},YA=(t,s)=>{const a=t.element,i=gl(a),d=a.dom;or(a,"type")!=="number"&&s(d,i)},XA=t=>{YA(t,(s,a)=>s.setSelectionRange(a.length,a.length))},J8=(t,s)=>{YA(t,(a,i)=>a.setSelectionRange(s,i.length))},SM=(t,s,a)=>{if(t.selectsOver){const i=vn.getValue(s),d=t.getDisplayText(i),g=vn.getValue(a);return t.getDisplayText(g).indexOf(d)===0?_.some(()=>{Px(t,s,a),J8(s,d.length)}):_.none()}else return _.none()},Fx=Y("alloy.typeahead.itemexecute"),Q8=(t,s,a,i)=>{const d=(M,U,W)=>{t.previewing.set(!1);const le=na.getCoupled(M,"sandbox");if(ds.isOpen(le))os.getCurrent(le).each(he=>{Ls.getHighlighted(he).fold(()=>{W(he)},()=>{k2(le,he.element,"keydown",U)})});else{const he=nt=>{os.getCurrent(nt).each(W)};cx(t,p(M),M,le,i,he,ta.HighlightMenuAndItem).get(oe)}},g=BD(t),p=M=>U=>U.map(W=>{const le=en(W.menus),he=K(le,Me=>xe(Me.items,ot=>ot.type==="item"));return vn.getState(M).update(Ve(he,Me=>Me.data)),W}),w=M=>os.getCurrent(M),T="typeaheadevents",A=[_o.config({}),vn.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:M=>gl(M.element),getFallbackEntry:M=>({value:M,meta:{}}),setValue:(M,U)=>{Jm(M.element,t.model.getDisplayText(U))},...t.initialData.map(M=>Us("initialValue",M)).getOr({})}}),KA.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(M,U)=>{const W=na.getCoupled(M,"sandbox");if(_o.isFocused(M)&&gl(M.element).length>=t.minChars){const he=w(W).bind(Me=>Ls.getHighlighted(Me).map(vn.getValue));t.previewing.set(!0);const nt=Me=>{w(W).each(ot=>{he.fold(()=>{t.model.selectsOver&&Ls.highlightFirst(ot)},gn=>{Ls.highlightBy(ot,it=>vn.getValue(it).value===gn.value),Ls.getHighlighted(ot).orThunk(()=>(Ls.highlightFirst(ot),_.none()))})})};cx(t,p(M),M,W,i,nt,ta.HighlightJustMenu).get(oe)}},cancelEvent:jf()}),fo.config({mode:"special",onDown:(M,U)=>(d(M,U,Ls.highlightFirst),_.some(!0)),onEscape:M=>{const U=na.getCoupled(M,"sandbox");return ds.isOpen(U)?(ds.close(U),_.some(!0)):_.none()},onUp:(M,U)=>(d(M,U,Ls.highlightLast),_.some(!0)),onEnter:M=>{const U=na.getCoupled(M,"sandbox"),W=ds.isOpen(U);if(W&&!t.previewing.get())return w(U).bind(le=>Ls.getHighlighted(le)).map(le=>(po(M,Fx(),{item:le}),!0));{const le=vn.getValue(M);return zs(M,jf()),t.onExecute(U,M,le),W&&ds.close(U),_.some(!0)}}}),Ts.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),na.config({others:{sandbox:M=>lA(t,M,{onOpen:()=>Ts.on(M),onClose:()=>Ts.off(M)})}}),ms(T,[Hr(M=>{t.lazyTypeaheadComp.set(_.some(M))}),Dl(M=>{t.lazyTypeaheadComp.set(_.none())}),dl(M=>{const U=oe;iA(t,p(M),M,i,U,ta.HighlightMenuAndItem).get(oe)}),Pt(Fx(),(M,U)=>{const W=na.getCoupled(M,"sandbox");Px(t.model,M,U.event.item),zs(M,jf()),t.onItemExecute(M,W,U.event.item,vn.getValue(M)),ds.close(W),XA(M)})].concat(t.dismissOnBlur?[Pt(Cp(),M=>{const U=na.getCoupled(M,"sandbox");Ml(U.element).isNone()&&ds.close(U)})]:[]))],D={[ih()]:[vn.name(),KA.name(),T],...t.eventOrder};return{uid:t.uid,dom:PD(hr(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...fc(t.typeaheadBehaviours,A)},eventOrder:D}},xM=Y([Ns("lazySink"),Tt("fetch"),Ke("minChars",5),Ke("responseTime",1e3),us("onOpen"),Ke("getHotspot",_.some),Ke("getAnchorOverrides",Y({})),Ke("layouts",_.none()),Ke("eventOrder",{}),I("model",{},[Ke("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Ke("selectsOver",!0),Ke("populateFromBrowse",!0)]),us("onSetValue"),Gi("onExecute"),us("onItemExecute"),Ke("inputClasses",[]),Ke("inputAttributes",{}),Ke("inputStyles",{}),Ke("matchWidth",!0),Ke("useMinWidth",!1),Ke("dismissOnBlur",!0),tm(["openClass"]),Ns("initialData"),Da("typeaheadBehaviours",[_o,vn,KA,fo,Ts,na]),xc("lazyTypeaheadComp",()=>V(_.none)),xc("previewing",()=>V(!0))].concat($D()).concat(uA())),kM=Y([Hu({schema:[Pp()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{SM(t.model,d,i).fold(()=>{t.model.selectsOver?(Ls.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&Px(t.model,d,i)})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(po(i,Fx(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&Px(t.model,i,a)})}})})]),TM=Zc({name:"Typeahead",configFields:xM(),partFields:kM(),factory:Q8}),Dd=t=>({...t,toCached:()=>Dd(t.toCached()),bindFuture:T=>Dd(t.bind(A=>A.fold(D=>ii.pure(Bo.error(D)),D=>T(D)))),bindResult:T=>Dd(t.map(A=>A.bind(T))),mapResult:T=>Dd(t.map(A=>A.map(T))),mapError:T=>Dd(t.map(A=>A.mapError(T))),foldResult:(T,A)=>t.map(D=>D.fold(T,A)),withTimeout:(T,A)=>Dd(ii.nu(D=>{let M=!1;const U=setTimeout(()=>{M=!0,D(Bo.error(A()))},T);t.get(W=>{M||(clearTimeout(U),D(W))})}))}),EM=t=>Dd(ii.nu(t)),_M=t=>Dd(ii.pure(Bo.value(t))),nL={nu:EM,wrap:Dd,pure:_M,value:_M,error:t=>Dd(ii.pure(Bo.error(t))),fromResult:t=>Dd(ii.pure(t)),fromFuture:t=>Dd(t.map(Bo.value)),fromPromise:t=>EM(s=>{t.then(a=>{s(Bo.value(a))},a=>{s(Bo.error(a))})})},JA=t=>({isEnabled:()=>!xo.isDisabled(t),setEnabled:s=>xo.set(t,!s),setActive:s=>{const a=t.element;s?(ya(a,"tox-tbtn--enabled"),So(a,"aria-pressed",!0)):(ca(a,"tox-tbtn--enabled"),de(a,"aria-pressed"))},isActive:()=>ji(t.element,"tox-tbtn--enabled")}),QA=(t,s,a,i)=>Nx({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(d,g)=>{const p={pattern:t.search.isSome()?GI(d):""};t.fetch(w=>{g(Ib(w,gm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},p)},onSetup:t.onSetup,getApi:JA,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Sa.config({})]},s,a.shared),oL=(t,s,a)=>{const i=g=>p=>{const w=!p.isActive();p.setActive(w),g.storage.set(w),a.shared.getSink().each(T=>{s().getOpt(T).each(A=>{om(A.element),po(A,Ag,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(Ve(t,p=>{const w=p.text.fold(()=>({}),T=>({text:T}));return{type:p.type,active:!1,...w,onAction:i(p),onSetup:d(p)}}))}},AM=(t,s,a=[],i,d,g)=>{const p=s.fold(()=>({}),A=>({action:A})),w={buttonBehaviours:cn([Ll.button(()=>!t.enabled||g.isDisabled()),Ca(),Sa.config({}),ms("button press",[E2("click"),E2("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},T=hr(w,{dom:i});return hr(T,{components:d})},OM=(t,s,a,i=[])=>{const d=t.tooltip.map(T=>({"aria-label":a.translate(T),title:a.translate(T)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(T=>Iw(T,a.icons)),w=_b([p]);return AM(t,s,i,g,w,a)},sL=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},e3=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(U=>Iw(U,a.icons)),w=[p.getOrThunk(()=>za(g))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),M={tag:"button",classes:[...sL(T),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return AM(t,s,i,M,w,a)},t3=(t,s,a,i=[],d=[])=>{const g=e3(t,_.some(s),a,i,d);return Qi.sketch(g)},n3=(t,s)=>a=>{s==="custom"?po(a,Ag,{name:t,value:{}}):s==="submit"?zs(a,Aw):s==="cancel"?zs(a,op):console.error("Unknown button type: ",s)},rL=(t,s)=>s==="menu",aL=(t,s)=>s==="custom"||s==="cancel"||s==="submit",Ix=(t,s,a)=>{if(rL(t,s)){const i=()=>p,d=t,g={...t,type:"menubutton",search:_.none(),onSetup:w=>(w.setEnabled(t.enabled),oe),fetch:oL(d.items,i,a)},p=wr(QA(g,"tox-tbtn",a,_.none()));return p.asSpec()}else if(aL(t,s)){const i=n3(t.name,s),d={...t,borderless:!1};return t3(d,i,a.shared.providers,[])}else throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")},cL=(t,s)=>{const a=n3(t.name,"custom");return v6(_.none(),Vs.parts.field({factory:Qi,...e3(t,_.some(a),s,[Ku.memory(""),qu.self()])}))},DM={type:"separator"},iL=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:oe}),o3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:oe}),RM=t=>Ve(t,iL),lL=(t,s)=>xe(s,a=>a.type===t),NM=(t,s)=>RM(lL(t,s)),uL=t=>NM("header",t.targets),MM=t=>NM("anchor",t.targets),dL=t=>_.from(t.anchorTop).map(s=>o3("<top>",s)).toArray(),mL=t=>_.from(t.anchorBottom).map(s=>o3("<bottom>",s)).toArray(),$M=t=>Ve(t,s=>o3(s,s)),BM=t=>ke(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(DM,a),[]),Lx=(t,s)=>{const a=t.toLowerCase();return xe(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,p=(d=i.value)!==null&&d!==void 0?d:"";return Ys(g.toLowerCase(),a)||Ys(p.toLowerCase(),a)})},Hx=(t,s,a)=>{const i=vn.getValue(s),d=i.meta.text!==void 0?i.meta.text:i.value;return a.getLinkInformation().fold(()=>[],p=>{const w=Lx(d,$M(a.getHistory(t)));return t==="file"?BM([w,Lx(d,uL(p)),Lx(d,z([dL(p),MM(p),mL(p)]))]):w})},PM=Un("aria-invalid"),fL=(t,s,a,i)=>{const d=s.shared.providers,g=ot=>{const gn=vn.getValue(ot);a.addToHistory(gn.value,t.filetype)},p={...i.map(ot=>({initialData:ot})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":PM,type:"url"},minChars:0,responseTime:0,fetch:ot=>{const gn=Hx(t.filetype,ot,a),it=Ib(gn,gm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:_.none()});return ii.pure(it)},getHotspot:ot=>le.getOpt(ot),onSetValue:(ot,gn)=>{ot.hasConfigured(Tf)&&Tf.run(ot).get(oe)},typeaheadBehaviours:cn([...a.getValidationHandler().map(ot=>Tf.config({getRoot:gn=>Ti(gn.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(gn,it)=>{D.getOpt(gn).each(yn=>{So(yn.element,"title",d.translate(it))})}},validator:{validate:gn=>{const it=vn.getValue(gn);return nL.nu(yn=>{ot({type:t.filetype,url:it.value},Hn=>{if(Hn.status==="invalid"){const Nn=Bo.error(Hn.message);yn(Nn)}else{const Nn=Bo.value(Hn.message);yn(Nn)}})})},validateOnLoad:!1}})).toArray(),xo.config({disabled:()=>!t.enabled||d.isDisabled()}),Sa.config({}),ms("urlinput-events",[Pt(Zf(),ot=>{const gn=gl(ot.element),it=gn.trim();it!==gn&&Jm(ot.element,it),t.filetype==="file"&&po(ot,zl,{name:t.name})}),Pt(yp(),ot=>{po(ot,zl,{name:t.name}),g(ot)}),Pt(_v(),ot=>{po(ot,zl,{name:t.name}),g(ot)})])]),eventOrder:{[Zf()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ot=>ot.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:L0(!1,1,"normal")},onExecute:(ot,gn,it)=>{po(gn,Aw,{})},onItemExecute:(ot,gn,it,yn)=>{g(ot),po(ot,zl,{name:t.name})}},w=Vs.parts.field({...p,factory:TM}),T=t.label.map(ot=>np(ot,d)),D=wr(((ot,gn,it=ot,yn=ot)=>fm(it,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ot],attributes:{title:d.translate(yn),"aria-live":"polite",...gn.fold(()=>({}),Hn=>({id:Hn}))}},d.icons))("invalid",_.some(PM),"warning")),M=wr({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),U=a.getUrlPicker(t.filetype),W=Un("browser.url.event"),le=wr({dom:{tag:"div",classes:["tox-control-wrap"]},components:[w,M.asSpec()],behaviours:cn([xo.config({disabled:()=>!t.enabled||d.isDisabled()})])}),he=wr(t3({name:t.name,icon:_.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:_.none(),borderless:!0},ot=>zs(ot,W),d,[],["tox-browse-url"])),nt=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:z([[le.asSpec()],U.map(()=>he.asSpec()).toArray()])}),Me=ot=>{os.getCurrent(ot).each(gn=>{const it=vn.getValue(gn),yn={fieldname:t.name,...it};U.each(Hn=>{Hn(yn).get(Nn=>{vn.setValue(gn,Nn),po(ot,zl,{name:t.name})})})})};return Vs.sketch({dom:w6(),components:T.toArray().concat([nt()]),fieldBehaviours:cn([xo.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:ot=>{Vs.getField(ot).each(xo.disable),he.getOpt(ot).each(xo.disable)},onEnabled:ot=>{Vs.getField(ot).each(xo.enable),he.getOpt(ot).each(xo.enable)}}),Ca(),ms("url-input-events",[Pt(W,Me)])])})},gL=(t,s)=>bm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Qi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Qy(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:a=>{po(a,Ag,{name:"alert-banner",value:t.url})},buttonBehaviours:cn([QE()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),hL=(t,s)=>{t.dom.checked=s},FM=t=>t.dom.checked,IM=(t,s,a)=>{const i=T=>(T.element.dom.click(),_.some(!0)),d=Vs.parts.field({factory:{sketch:At},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:cn([qu.self(),xo.config({disabled:()=>!t.enabled||s.isDisabled()}),Sa.config({}),_o.config({}),Ku.withElement(a,FM,hL),fo.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),ms("checkbox-events",[Pt(yp(),(T,A)=>{po(T,zl,{name:t.name})})])])}),g=Vs.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[za(s.translate(t.label))],behaviours:cn([J0.config({})])}),p=T=>fm(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),w=wr({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return Vs.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,w.asSpec(),g],fieldBehaviours:cn([xo.config({disabled:()=>!t.enabled||s.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:T=>{Vs.getField(T).each(xo.disable)},onEnabled:T=>{Vs.getField(T).each(xo.enable)}}),Ca()])})},pL=t=>t.presets==="presentation"?bm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):bm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:cn([Sa.config({}),_o.config({})])}),hc=t=>(s,a,i,d)=>Ut(a,"name").fold(()=>t(a,d,_.none()),g=>s.field(g,t(a,d,Ut(i,g)))),LM=t=>(s,a,i,d)=>{const g=hr(a,{source:"dynamic"});return hc(t)(s,g,i,d)},bL={bar:hc((t,s)=>m6(t,s.shared)),collection:hc((t,s,a)=>C6(t,s.shared.providers,a)),alertbanner:hc((t,s)=>gL(t,s.shared.providers)),input:hc((t,s,a)=>K8(t,s.shared.providers,a)),textarea:hc((t,s,a)=>Y8(t,s.shared.providers,a)),label:hc((t,s)=>B8(t,s.shared)),iframe:LM((t,s,a)=>D8(t,s.shared.providers,a)),button:hc((t,s)=>cL(t,s.shared.providers)),checkbox:hc((t,s,a)=>IM(t,s.shared.providers,a)),colorinput:hc((t,s,a)=>T6(t,s.shared,s.colorinput,a)),colorpicker:hc((t,s,a)=>T8(t,s.shared.providers,a)),dropzone:hc((t,s,a)=>A8(t,s.shared.providers,a)),grid:hc((t,s)=>O8(t,s.shared)),listbox:hc((t,s,a)=>dM(t,s,a)),selectbox:hc((t,s,a)=>V8(t,s.shared.providers,a)),sizeinput:hc((t,s)=>G8(t,s.shared.providers)),slider:hc((t,s,a)=>q8(t,s.shared.providers,a)),urlinput:hc((t,s,a)=>fL(t,s,s.urlinput,a)),customeditor:hc(_8),htmlpanel:hc(pL),imagepreview:hc((t,s,a)=>$8(t,a)),table:hc((t,s)=>ZA(t,s.shared.providers)),panel:hc((t,s)=>mM(t,s))},vL={field:(t,s)=>s,record:Y([])},ss=(t,s,a,i)=>{const d=hr(i,{shared:{interpreter:g=>Lb(t,g,a,d)}});return Lb(t,s,a,d)},Lb=(t,s,a,i)=>Ut(bL,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,i)),s3=(t,s,a)=>Lb(vL,t,s,a),Ng="layout-inset",zx=t=>t.x,r3=(t,s)=>t.x+t.width/2-s.width/2,Vx=(t,s)=>t.x+t.width-s.width,HM=t=>t.y,Hb=(t,s)=>t.y+t.height-s.height,zM=(t,s)=>t.y+t.height/2-s.height/2,Lw=(t,s,a)=>dc(Vx(t,s),Hb(t,s),a.insetSouthwest(),B1(),"southwest",Qa(t,{right:0,bottom:3}),Ng),Ux=(t,s,a)=>dc(zx(t),Hb(t,s),a.insetSoutheast(),$1(),"southeast",Qa(t,{left:1,bottom:3}),Ng),Hw=(t,s,a)=>dc(Vx(t,s),HM(t),a.insetNorthwest(),M1(),"northwest",Qa(t,{right:0,top:2}),Ng),zw=(t,s,a)=>dc(zx(t),HM(t),a.insetNortheast(),Th(),"northeast",Qa(t,{left:1,top:2}),Ng),ym=(t,s,a)=>dc(r3(t,s),HM(t),a.insetNorth(),J2(),"north",Qa(t,{top:2}),Ng),zb=(t,s,a)=>dc(r3(t,s),Hb(t,s),a.insetSouth(),Vv(),"south",Qa(t,{bottom:3}),Ng),a3=(t,s,a)=>dc(Vx(t,s),zM(t,s),a.insetEast(),P1(),"east",Qa(t,{right:0}),Ng),VM=(t,s,a)=>dc(zx(t),zM(t,s),a.insetWest(),Q2(),"west",Qa(t,{left:1}),Ng),yL=t=>{switch(t){case"north":return ym;case"northeast":return zw;case"northwest":return Hw;case"south":return zb;case"southeast":return Ux;case"southwest":return Lw;case"east":return a3;case"west":return VM}},UM=(t,s,a,i,d)=>Kv(i).map(yL).getOr(ym)(t,s,a,i,d),WM=t=>{switch(t){case"north":return zb;case"northeast":return Ux;case"northwest":return Lw;case"south":return ym;case"southeast":return zw;case"southwest":return Hw;case"east":return VM;case"west":return a3}},wL=(t,s,a,i,d)=>Kv(i).map(WM).getOr(ym)(t,s,a,i,d),ZM={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},CL=(t,s,a)=>{const d={maxHeightFunction:Zp()},g=()=>({type:"node",root:Tr(qo(t())),node:_.from(t()),bubble:cg(12,12,ZM),layouts:{onRtl:()=>[zw],onLtr:()=>[Hw]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:cg(-12,12,ZM),layouts:{onRtl:()=>[Tc],onLtr:()=>[Ec]},overrides:d});return()=>a()?g():p()},SL=(t,s,a)=>{const i=()=>({type:"node",root:Tr(qo(t())),node:_.from(t()),layouts:{onRtl:()=>[ym],onLtr:()=>[ym]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Va],onLtr:()=>[Va]}});return()=>a()?i():d()},jM=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng();return _.some(am.range(Bt.fromDom(a.startContainer),a.startOffset,Bt.fromDom(a.endContainer),a.endOffset))}}),xL=t=>s=>({type:"node",root:t(),node:s}),kL=(t,s,a)=>{const i=iw(t),d=()=>Bt.fromDom(t.getBody()),g=()=>Bt.fromDom(t.getContentAreaContainer()),p=()=>i||!a();return{inlineDialog:CL(g,s,p),banner:SL(g,s,p),cursor:jM(t,d),node:xL(d)}},TL=t=>(s,a)=>{UR(t)(s,a)},EL=t=>()=>K_(t),_L=t=>s=>Ob(t,s),AL=t=>s=>q_(t,s),OL=t=>({colorPicker:TL(t),hasCustomColors:EL(t),getColors:_L(t),getColorCols:AL(t)}),DL=t=>()=>OS(t),RL=t=>({isDraggableModal:DL(t)}),NL=t=>{const s=V(MS(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},GM=t=>ks(t,"items"),c3=t=>ks(t,"format"),qM=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],ML=t=>Vn(t,"items"),$L=t=>Vn(t,"block"),BL=t=>Vn(t,"inline"),PL=t=>Vn(t,"selector"),KM=t=>ke(t,(s,a)=>{if(ML(a)){const i=KM(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(BL(a)||$L(a)||PL(a)){const d=`custom-${qt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),YM=(t,s)=>{const a=KM(s),i=d=>{R(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},XM=t=>uD(t).map(s=>{const a=YM(t,s);return dD(t)?qM.concat(a):a}).getOr(qM),JM=t=>{const s=De(t);return s.length===1&&nn(s,"title")},QM=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),i3=(t,s,a,i)=>{const d=T=>QM(T,a,i),g=T=>{const A=w(T.items);return{...T,type:"submenu",getStyleItems:Y(A)}},p=T=>{const A=qt(T.name)?T.name:Un(T.title),D=`custom-${A}`,M={...T,type:"formatter",format:D,isSelected:a(D),getStylePreview:i(D)};return t.formatter.register(A,M),M},w=T=>Ve(T,A=>GM(A)?g(A):c3(A)?d(A):JM(A)?{...A,type:"separator"}:p(A));return w(s)},e$=t=>{const s=w=>()=>t.formatter.match(w),a=w=>()=>{const T=t.formatter.get(w);return T!==void 0?_.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(w))}):_.none()},i=V([]),d=V([]),g=V(!1);return t.on("PreInit",w=>{const T=XM(t),A=i3(t,T,s,a);i.set(A)}),t.on("addStyleModifications",w=>{const T=i3(t,w.items,s,a);d.set(T),g.set(w.replace)}),{getData:()=>{const w=g.get()?[]:i.get(),T=d.get();return w.concat(T)}}},t$=t=>an(t)&&t.nodeType===1,FL=xl.trim,l3=t=>s=>!!(t$(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),n$=l3("true"),IL=l3("false"),u3=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),LL=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return n$(s)}return!1},HL=(t,s)=>Ve(Uc(Bt.fromDom(s),t),a=>a.dom),Rd=t=>t.innerText||t.textContent,Wx=t=>t.id?t.id:Un("h"),Zx=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,zL=t=>Zx(t)&&o$(t),jx=t=>t&&/^(H[1-6])$/.test(t.nodeName),o$=t=>LL(t)&&!IL(t),d3=t=>jx(t)&&o$(t),s$=t=>jx(t)?parseInt(t.nodeName.substr(1),10):0,m3=t=>{var s;const a=Wx(t),i=()=>{t.id=a};return u3("header",(s=Rd(t))!==null&&s!==void 0?s:"","#"+a,s$(t),i)},VL=t=>{const s=t.id||t.name,a=Rd(t);return u3("anchor",a||"#"+s,"#"+s,0,oe)},r$=t=>Ve(xe(t,d3),m3),a$=t=>Ve(xe(t,zL),VL),f3=t=>HL("h1,h2,h3,h4,h5,h6,a:not([href])",t),UL=t=>FL(t.title).length>0,c$={find:t=>{const s=f3(t);return xe(r$(s).concat(a$(s)),UL)}},Gx="tinymce-url-history",i$=5,g3=t=>qt(t)&&/^https?/.test(t),l$=t=>Tn(t)&&t.length<=i$&&H(t,g3),u$=t=>Kt(t)&&tn(t,s=>!l$(s)).isNone(),d$=()=>{const t=Ab.getItem(Gx);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Gx+" was not valid JSON",a),{};throw a}return u$(s)?s:(console.log("Local storage "+Gx+" was not valid format",s),{})},WL=t=>{if(!u$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Ab.setItem(Gx,JSON.stringify(t))},ZL=t=>{const s=d$();return Ut(s,t).getOr([])},m$=(t,s)=>{if(!g3(t))return;const a=d$(),i=Ut(a,s).getOr([]),d=xe(i,g=>g!==t);a[s]=[t].concat(d).slice(0,i$),WL(a)},Nd=t=>!!t,h3=t=>on(xl.makeMap(t,/[, ]/),Nd),p3=t=>_.from(pD(t)),jL=t=>{const s=_.from(AS(t)).filter(Nd).map(h3);return p3(t).fold(Pe,a=>s.fold(Ne,i=>De(i).length>0?i:!1))},GL=(t,s)=>{const a=jL(t);return Zt(a)?a?p3(t):_.none():a[s]?p3(t):_.none()},qL=(t,s)=>GL(t,s).map(a=>i=>ii.nu(d=>{const g=(w,T)=>{if(!qt(w))throw new Error("Expected value to be string");if(T!==void 0&&!Kt(T))throw new Error("Expected meta to be a object");d({value:w,meta:T})},p={filetype:s,fieldname:i.fieldname,..._.from(i.meta).getOr({})};a.call(t,g,i.value,p)})),f$=t=>_.from(t).filter(qt).getOrUndefined(),g$=t=>Xh(t)?_.some({targets:c$.find(t.getBody()),anchorTop:f$(vD(t)),anchorBottom:f$(yD(t))}):_.none(),h$=t=>_.from(bD(t)),sU=t=>({getHistory:ZL,addToHistory:m$,getLinkInformation:()=>g$(t),getValidationHandler:()=>h$(t),getUrlPicker:s=>qL(t,s)}),rU=(t,s,a)=>{const i=V(!1),d=NL(s),g={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:_d.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},p=sU(s),w=e$(s),T=OL(s),A=RL(s),D=()=>i.get(),M=he=>i.set(he),U={shared:{providers:g,anchors:kL(s,a,d.isPositionedAtTop),header:d},urlinput:p,styles:w,colorinput:T,dialog:A,isContextMenuOpen:D,setContextMenuState:M},W={...U,shared:{...U.shared,interpreter:he=>s3(he,{},W),getSink:t.popup}},le={...U,shared:{...U.shared,interpreter:he=>s3(he,{},le),getSink:t.dialog}};return{popup:W,dialog:le}},li=(t,s,a)=>{const i=(it,yn)=>{R([s,...a],Hn=>{Hn.broadcastEvent(it,yn)})},d=(it,yn)=>{R([s,...a],Hn=>{Hn.broadcastOn([it],yn)})},g=it=>d(Sd(),{target:it.target}),p=E(),w=ri(p,"touchstart",g),T=ri(p,"touchmove",it=>i(S2(),it)),A=ri(p,"touchend",it=>i(Yk(),it)),D=ri(p,"mousedown",g),M=ri(p,"mouseup",it=>{it.raw.button===0&&d(ff(),{target:it.target})}),U=it=>d(Sd(),{target:Bt.fromDom(it.target)}),W=it=>{it.button===0&&d(ff(),{target:Bt.fromDom(it.target)})},le=()=>{R(t.editorManager.get(),it=>{t!==it&&it.dispatch("DismissPopups",{relatedTarget:t})})},he=it=>i(g1(),ey(it)),nt=it=>{d(mf(),{}),i(xp(),ey(it))},Me=()=>d(mf(),{}),ot=it=>{it.state&&d(Sd(),{target:Bt.fromDom(t.getContainer())})},gn=it=>{d(Sd(),{target:Bt.fromDom(it.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",U),t.on("tap",U),t.on("mouseup",W),t.on("mousedown",le),t.on("ScrollWindow",he),t.on("ResizeWindow",nt),t.on("ResizeEditor",Me),t.on("AfterProgressState",ot),t.on("DismissPopups",gn)}),t.on("remove",()=>{t.off("click",U),t.off("tap",U),t.off("mouseup",W),t.off("mousedown",le),t.off("ScrollWindow",he),t.off("ResizeWindow",nt),t.off("ResizeEditor",Me),t.off("AfterProgressState",ot),t.off("DismissPopups",gn),D.unbind(),w.unbind(),T.unbind(),A.unbind(),M.unbind()}),t.on("detach",()=>{R([s,...a],tE),R([s,...a],it=>it.destroy())})},nc=Pl,Of=GC,qx=Y([Ke("shell",!1),Tt("makeItem"),Ke("setupItem",oe),Bl.field("listBehaviours",[Ho])]),KL=cu({name:"items",overrides:()=>({behaviours:cn([Ho.config({})])})}),YL=Y([KL]),XL=Y("CustomList"),JL=(t,s,a,i)=>{const d=(w,T)=>{p(w).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},A=>{const D=Ho.contents(A),M=T.length,U=M-D.length,W=U>0?It(U,()=>t.makeItem()):[],le=D.slice(M);R(le,nt=>Ho.remove(A,nt)),R(W,nt=>Ho.append(A,nt));const he=Ho.contents(A);R(he,(nt,Me)=>{t.setupItem(w,nt,T[Me],Me)})})},g=t.shell?{behaviours:[Ho.config({})],components:[]}:{behaviours:[],components:s},p=w=>t.shell?_.some(w):sr(w,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:fc(t.listBehaviours,g.behaviours),apis:{setItems:d}}},p$=Zc({name:XL(),configFields:qx(),partFields:YL(),factory:JL,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),cv=Y([Tt("dom"),Ke("shell",!0),Da("toolbarBehaviours",[Ho])]),b$=Y([cu({name:"groups",overrides:()=>({behaviours:cn([Ho.config({})])})})]),Kx=(t,s,a,i)=>{const d=(w,T)=>{g(w).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},A=>{Ho.set(A,T)})},g=w=>t.shell?_.some(w):sr(w,t,"groups"),p=t.shell?{behaviours:[Ho.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:fc(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},wm=Zc({name:"Toolbar",configFields:cv(),partFields:b$(),factory:Kx,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),v$=oe,QL=Pe,b3=Y([]);var e7=Object.freeze({__proto__:null,setup:v$,isDocked:QL,getBehaviours:b3});const y$=t=>(kr(Js(t,"position"),"fixed")?_.none():vc(t)).orThunk(()=>{const i=Bt.fromTag("span");return oa(t).bind(d=>{Cc(d,i);const g=vc(i);return Kl(i),g})}),v3=t=>y$(t).map(Os).getOrThunk(()=>Ko(0,0)),w$=dt.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),iU=(t,s)=>{const a=t.element;ya(a,s.transitionClass),ca(a,s.fadeOutClass),ya(a,s.fadeInClass),s.onShow(t)},t7=(t,s)=>{const a=t.element;ya(a,s.transitionClass),ca(a,s.fadeInClass),ya(a,s.fadeOutClass),s.onHide(t)},n7=(t,s)=>t.y<s.bottom&&t.bottom>s.y,o7=(t,s)=>t.y>=s.y,C$=(t,s)=>t.bottom<=s.bottom,Yx=(t,s,a)=>H(t,i=>{switch(i){case"bottom":return C$(s,a);case"top":return o7(s,a)}}),S$=(t,s)=>s.getInitialPos().map(a=>qn(a.bounds.x,a.bounds.y,gr(t),ut(t))),s7=(t,s,a)=>{a.setInitialPos({style:Vr(t),position:_t(t,"position")||"static",bounds:s})},y3=(t,s,a)=>a.getInitialPos().bind(i=>{switch(a.clearInitialPos(),i.position){case"static":return _.some(w$.static());case"absolute":const d=y$(t).map(ns).getOrThunk(()=>ns(Jr()));return _.some(w$.absolute(Pu("absolute",Ut(i.style,"left").map(g=>s.x-d.x),Ut(i.style,"top").map(g=>s.y-d.y),Ut(i.style,"right").map(g=>d.right-s.right),Ut(i.style,"bottom").map(g=>d.bottom-s.bottom))));default:return _.none()}}),r7=(t,s,a)=>S$(t,a).filter(i=>Yx(a.getModes(),i,s)).bind(i=>y3(t,i,a)),a7=(t,s,a)=>{const i=ns(t);if(Yx(a.getModes(),i,s))return _.none();{s7(t,i,a);const d=qa(),g=i.x-d.x,p=s.y-d.y,w=d.bottom-s.bottom,T=i.y<=s.y;return _.some(w$.fixed(Pu("fixed",_.some(g),T?_.some(p):_.none(),_.none(),T?_.none():_.some(w))))}},c7=(t,s,a)=>{const i=t.element;return kr(Js(i,"position"),"fixed")?r7(i,s,a):a7(i,s,a)},i7=(t,s)=>{const a=t.element;return S$(a,s).bind(i=>y3(a,i,s))},Xx=(t,s,a)=>{a.setDocked(!1),R(["left","right","top","bottom","position"],i=>$o(t.element,i)),s.onUndocked(t)},Jx=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Hp(t.element,i),(d?s.onDocked:s.onUndocked)(t)},x$=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const w=n7(p,i);w!==a.isVisible()&&(a.setVisible(w),d&&!w?(Xd(t.element,[g.fadeOutClass]),g.onHide(t)):(w?iU:t7)(t,g))})})},l7=(t,s,a)=>{const i=s.lazyViewport(t);a.isDocked()&&x$(t,s,a,i),c7(t,i,a).each(g=>{g.fold(()=>Xx(t,s,a),p=>Jx(t,s,a,p),p=>{x$(t,s,a,i,!0),Jx(t,s,a,p)})})},u7=(t,s,a)=>{const i=t.element;a.setDocked(!1),i7(t,a).each(d=>{d.fold(()=>Xx(t,s,a),g=>Jx(t,s,a,g),oe)}),a.setVisible(!0),s.contextual.each(d=>{fl(i,[d.fadeInClass,d.fadeOutClass,d.transitionClass]),d.onShow(t)}),w3(t,s,a)},w3=(t,s,a)=>{t.getSystem().isConnected()&&l7(t,s,a)},C3=(t,s,a)=>{a.isDocked()&&u7(t,s,a)};var Qx=Object.freeze({__proto__:null,refresh:w3,reset:C3,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i)}),x3=Object.freeze({__proto__:null,events:(t,s)=>ir([Ja(Ud(),(a,i)=>{t.contextual.each(d=>{ji(a.element,d.transitionClass)&&(fl(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),Pt(g1(),(a,i)=>{w3(a,t,s)}),Pt(xp(),(a,i)=>{C3(a,t,s)})])}),Vw=[hi("contextual",[aa("fadeInClass"),aa("fadeOutClass"),aa("transitionClass"),ba("lazyContext"),us("onShow"),us("onShown"),us("onHide"),us("onHidden")]),Oa("lazyViewport",qa),k("modes",["top","bottom"],Ea),us("onDocked"),us("onUndocked")],m7=Object.freeze({__proto__:null,init:t=>{const s=V(!1),a=V(!0),i=zr(),d=V(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Ri({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Ci=mc({fields:Vw,name:"docking",active:x3,apis:Qx,state:m7}),ek=Y(Un("toolbar-height-change")),Cm={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},k$="tox-tinymce--toolbar-sticky-on",tk="tox-tinymce--toolbar-sticky-off",nk=(t,s)=>{const a=fa(s),d=Bc(s).dom.innerHeight,g=Ui(a),p=Bt.fromDom(t.elm),w=_r(p),T=ut(p),A=w.y,D=A+T,M=Os(s),U=ut(s),W=M.top,le=W+U,he=Math.abs(W-g.top)<2,nt=Math.abs(le-(g.top+d))<2;if(he&&A<le)qg(g.left,A-U,a);else if(nt&&D>W){const Me=A-d+T+U;qg(g.left,Me,a)}},k3=(t,s)=>nn(Ci.getModes(t),s),T3=t=>{const s=i=>Bn(i)+(parseInt(_t(i,"margin-top"),10)||0)+(parseInt(_t(i,"margin-bottom"),10)||0),a=t.element;Ti(a).each(i=>{const d="padding-"+Ci.getModes(t)[0];if(Ci.isDocked(t)){const g=gr(i);$n(a,"width",g+"px"),$n(i,d,s(a)+"px")}else $o(a,"width"),$o(i,d)})},Vb=(t,s)=>{s?(ca(t,Cm.fadeOutClass),Xd(t,[Cm.transitionClass,Cm.fadeInClass])):(ca(t,Cm.fadeInClass),Xd(t,[Cm.fadeOutClass,Cm.transitionClass]))},E3=(t,s)=>{const a=Bt.fromDom(t.getContainer());s?(ya(a,k$),ca(a,tk)):(ya(a,tk),ca(a,k$))},f7=(t,s)=>{const a=fa(s);Ki(a).filter(i=>!Hs(s,i)).filter(i=>Hs(i,Bt.fromDom(a.dom.body))||di(t,i)).each(()=>om(s))},T$=(t,s)=>Ml(t).orThunk(()=>s().toOptional().bind(a=>Ml(a.element))),_3=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Ci.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(T3)}),t.on("SkinLoaded",()=>{a().each(i=>{Ci.isDocked(i)?Ci.reset(i):Ci.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(Ci.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{Ci.refresh(d);const g=d.element;Xi(g)&&nk(i,g)})}),t.on("PostRender",()=>{E3(t,!1)})},A3=t=>t().map(Ci.isDocked).getOr(!1),g7=()=>[Nl.config({channels:{[ek()]:{onReceive:T3}}})],E$=(t,s)=>{const a=zr(),i=s.getSink,d=w=>{i().each(T=>w(T.element))},g=w=>{t.inline||T3(w),E3(t,Ci.isDocked(w)),w.getSystem().broadcastOn([mf()],{}),i().each(T=>T.getSystem().broadcastOn([mf()],{}))},p=t.inline?[]:g7();return[_o.config({}),Ci.config({contextual:{lazyContext:w=>{const T=Bn(w.element),A=t.inline?t.getContentAreaContainer():t.getContainer(),D=ns(Bt.fromDom(A)),M=D.height-T,U=D.y+(k3(w,"top")?0:T);return _.some(qn(D.x,U,D.width,M))},onShow:()=>{d(w=>Vb(w,!0))},onShown:w=>{d(T=>fl(T,[Cm.transitionClass,Cm.fadeInClass])),a.get().each(T=>{f7(w.element,T),a.clear()})},onHide:w=>{T$(w.element,i).fold(a.clear,a.set),d(T=>Vb(T,!1))},onHidden:()=>{d(w=>fl(w,[Cm.transitionClass]))},...Cm},lazyViewport:w=>{const T=qa(),A=gD(t),D=T.y+(k3(w,"top")?A:0),M=T.height-(k3(w,"bottom")?A:0);return qn(T.x,D,T.width,M)},modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var h7=Object.freeze({__proto__:null,setup:_3,isDocked:A3,getBehaviours:E$});const O3=t=>{const s=t.editor,a=t.sticky?E$:b3;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:cn(a(s,t.sharedBackstage))}},p7=ro([Ra,Oi("items",Lt([al([C_,gi("items",Ea)]),Ea]))].concat(Tb)),b7=t=>Rs("GroupToolbarButton",p7,t),v7=[Xa("text"),Xa("tooltip"),Xa("icon"),_a("search",!1,Lt([ti,ro([Xa("placeholder")])],t=>Zt(t)?t?_.some({placeholder:_.none()}):_.none():_.some(t))),ba("fetch"),Oa("onSetup",()=>oe)],y7=ro([Ra,...v7]),_$=t=>Rs("menubutton",y7,t),w7=ro([Ra,hw,pm,W0,ZD,E5,xb,il("presets","normal",["normal","color","listpreview"]),US(1),Sb,_5]),C7=t=>Rs("SplitButton",w7,t);var D3=Fl({factory:(t,s)=>{const a=(d,g)=>{const p=Ve(g,w=>{const T={type:"menubutton",text:w.text,fetch:D=>{D(w.getItems())}},A=_$(T).mapError(D=>eu(D)).getOrDie();return QA(A,"tox-mbtn",s.backstage,_.some("menuitem"))});Ho.set(d,p)},i={focus:fo.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:cn([Ho.config({}),ms("menubar-events",[Hr(d=>{t.onSetup(d)}),Pt(Vd(),(d,g)=>{ia(d.element,".tox-mbtn--active").each(p=>{Rl(g.event.target,".tox-mbtn").each(w=>{Hs(p,w)||d.getSystem().getByDom(p).each(T=>{d.getSystem().getByDom(w).each(A=>{lu.expand(A),lu.close(T),_o.focus(A)})})})})}),Pt(kp(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(w=>d.getSystem().getByDom(w).toOptional()).each(w=>{lu.isOpen(p)&&(lu.expand(w),lu.close(p))})})})]),fo.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),_.some(!0))}),Sa.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Tt("dom"),Tt("uid"),Tt("onEscape"),Tt("backstage"),Ke("onSetup",oe)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const Uw="\u26A1\uFE0FUpgrade",x7="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",k7=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:x7,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:Uw}}]}),Ub=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Df=t=>t.dimension.property,Wb=(t,s)=>t.dimension.getDimension(s),ok=(t,s)=>{const a=Ub(t,s);fl(a,[s.shrinkingClass,s.growingClass])},R3=(t,s)=>{ca(t.element,s.openClass),ya(t.element,s.closedClass),$n(t.element,Df(s),"0px"),te(t.element)},N3=(t,s)=>{ca(t.element,s.closedClass),ya(t.element,s.openClass),$o(t.element,Df(s))},A$=(t,s,a,i)=>{a.setCollapsed(),$n(t.element,Df(s),Wb(s,t.element)),ok(t,s),R3(t,s),s.onStartShrink(t),s.onShrunk(t)},T7=(t,s,a,i)=>{const d=i.getOrThunk(()=>Wb(s,t.element));a.setCollapsed(),$n(t.element,Df(s),d),te(t.element);const g=Ub(t,s);ca(g,s.growingClass),ya(g,s.shrinkingClass),R3(t,s),s.onStartShrink(t)},O$=(t,s,a)=>{const i=Wb(s,t.element);(i==="0px"?A$:T7)(t,s,a,_.some(i))},D$=(t,s,a)=>{const i=Ub(t,s),d=ji(i,s.shrinkingClass),g=Wb(s,t.element);N3(t,s);const p=Wb(s,t.element);(d?()=>{$n(t.element,Df(s),g),te(t.element)}:()=>{R3(t,s)})(),ca(i,s.shrinkingClass),ya(i,s.growingClass),N3(t,s),$n(t.element,Df(s),p),a.setExpanded(),s.onStartGrow(t)},E7=(t,s,a)=>{if(a.isExpanded()){$o(t.element,Df(s));const i=Wb(s,t.element);$n(t.element,Df(s),i)}},R$=(t,s,a)=>{a.isExpanded()||D$(t,s,a)},M3=(t,s,a)=>{a.isExpanded()&&O$(t,s,a)},$3=(t,s,a)=>{a.isExpanded()&&A$(t,s,a)},_7=(t,s,a)=>a.isExpanded(),A7=(t,s,a)=>a.isCollapsed(),N$=(t,s,a)=>{const i=Ub(t,s);return ji(i,s.growingClass)===!0},M$=(t,s,a)=>{const i=Ub(t,s);return ji(i,s.shrinkingClass)===!0};var O7=Object.freeze({__proto__:null,refresh:E7,grow:R$,shrink:M3,immediateShrink:$3,hasGrown:_7,hasShrunk:A7,isGrowing:N$,isShrinking:M$,isTransitioning:(t,s,a)=>N$(t,s)||M$(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?O$:D$)(t,s,a)},disableTransitions:ok,immediateGrow:(t,s,a)=>{a.isExpanded()||(N3(t,s),$n(t.element,Df(s),Wb(s,t.element)),ok(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),D7=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return su(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Us(s.dimension.property,"0px")})},events:(t,s)=>ir([Ja(Ud(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(ok(a,t),s.isExpanded()&&$o(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),B$=[Tt("closedClass"),Tt("openClass"),Tt("shrinkingClass"),Tt("growingClass"),Ns("getAnimationRoot"),us("onShrunk"),us("onStartShrink"),us("onGrown"),us("onStartGrow"),Ke("expanded",!1),Oi("dimension",fi("property",{width:[br("property","width"),br("getDimension",t=>gr(t)+"px")],height:[br("property","height"),br("getDimension",t=>ut(t)+"px")]}))],N7=Object.freeze({__proto__:null,init:t=>{const s=V(t.expanded),a=()=>"expanded: "+s.get();return Ri({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Nt(s.set,!1),setExpanded:Nt(s.set,!0),readState:a})}});const Md=mc({fields:B$,name:"sliding",active:D7,apis:O7,state:N7}),Ww="container",rk=[Da("slotBehaviours",[])],P$=t=>"<alloy.field."+t+">",M7=t=>{const s=(()=>{const g=[];return{slot:(w,T)=>(g.push(w),By(Ww,P$(w),T)),record:Y(g)}})(),a=t(s),i=s.record(),d=Ve(i,g=>Wc({name:g,pname:P$(g)}));return db(Ww,rk,d,$7,a)},$7=(t,s)=>{const a=he=>bf(t),i=(he,nt)=>sr(he,t,nt),d=(he,nt)=>(Me,ot)=>sr(Me,t,ot).map(gn=>he(gn,ot)).getOr(nt),g=he=>(nt,Me)=>{R(Me,ot=>he(nt,ot))},p=(he,nt)=>or(he.element,"aria-hidden")!=="true",w=(he,nt)=>{if(!p(he)){const Me=he.element;$o(Me,"display"),de(Me,"aria-hidden"),po(he,Av(),{name:nt,visible:!0})}},T=(he,nt)=>{if(p(he)){const Me=he.element;$n(Me,"display","none"),So(Me,"aria-hidden","true"),po(he,Av(),{name:nt,visible:!1})}},A=d(p,!1),D=d(T),M=g(D),U=he=>M(he,a()),W=d(w),le={getSlotNames:a,getSlot:i,isShowing:A,hideSlot:D,hideAllSlots:U,showSlot:W};return{uid:t.uid,dom:t.dom,components:s,behaviours:vg(t.slotBehaviours),apis:le}},jc={...on({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>gh(t)),sketch:M7},P3=ro([pm,hw,Oa("onShow",oe),Oa("onHide",oe),xb]),F$=t=>Rs("sidebar",P3,t),B7=t=>{const{sidebars:s}=t.ui.registry.getAll();R(De(s),a=>{const i=s[a],d=()=>kr(_.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},F3=t=>({element:()=>t.element.dom}),P7=(t,s)=>{const a=Ve(De(s),i=>{const d=s[i],g=Ql(F$(d));return{name:i,getApi:F3,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ve(a,i=>{const d=V(oe);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Eb.unnamedEvents([Ad(i,d),bw(i,d),Pt(Av(),(g,p)=>{const w=p.event;se(a,A=>A.name===w.name).each(A=>{(w.visible?A.onShow:A.onHide)(A.getApi(g))})})])})})},F7=t=>jc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:P7(s,t),slotBehaviours:Eb.unnamedEvents([Hr(a=>jc.hideAllSlots(a))])})),I7=(t,s,a)=>{os.getCurrent(t).each(d=>{Ho.set(d,[F7(s)]);const g=a==null?void 0:a.toLowerCase();qt(g)&&Vn(s,g)&&os.getCurrent(d).each(p=>{jc.showSlot(p,g),Md.immediateGrow(d),$o(d.element,"width")})})},Zw=(t,s)=>{os.getCurrent(t).each(i=>{os.getCurrent(i).each(g=>{Md.hasGrown(i)?jc.isShowing(g,s)?Md.shrink(i):(jc.hideAllSlots(g),jc.showSlot(g,s)):(jc.hideAllSlots(g),jc.showSlot(g,s),Md.grow(i))})})},L7=t=>os.getCurrent(t).bind(a=>Md.isGrowing(a)||Md.hasGrown(a)?os.getCurrent(a).bind(g=>se(jc.getSlotNames(g),p=>jc.isShowing(g,p))):_.none()),I3=Un("FixSizeEvent"),L3=Un("AutoSizeEvent"),hU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:cn([Sa.config({}),_o.config({}),Md.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{os.getCurrent(s).each(jc.hideAllSlots),zs(s,L3)},onGrown:s=>{zs(s,L3)},onStartGrow:s=>{po(s,I3,{width:Js(s.element,"width").getOr("")})},onStartShrink:s=>{po(s,I3,{width:gr(s.element)+"px"})}}),Ho.config({}),os.config({find:s=>{const a=Ho.contents(s);return co(a)}})])}],behaviours:cn([qu.childAt(0),ms("sidebar-sliding-events",[Pt(I3,(s,a)=>{$n(s.element,"width",a.event.width)}),Pt(L3,(s,a)=>{$o(s.element,"width")})])])});var z7=Object.freeze({__proto__:null,block:(t,s,a,i)=>{So(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=cn([fo.config({mode:"special",onTab:()=>_.some(!0),onShiftTab:()=>_.some(!0)}),_o.config({})]),p=i(d,g),w=d.getSystem().build(p);Ho.append(d,hl(w)),w.hasConfigured(fo)&&s.focus&&fo.focusIn(w),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Ho.remove(d,w))},unblock:(t,s,a)=>{de(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()}}),I$=[Oa("getRoot",_.none),Aa("focus",!0),us("onBlock"),us("onUnblock")],V7=Object.freeze({__proto__:null,init:()=>{const t=OT(),s=a=>{t.set({destroy:a})};return Ri({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Mg=mc({fields:I$,name:"blocking",apis:z7,state:V7}),U7=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return ke(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},W7=t=>Array.prototype.slice.call(t.dom.classList,0),$g=t=>{const s=Bt.fromHtml(t),a=Xs(s),i=U7(s),d=W7(s),g=a.length===0?{}:{innerHtml:Kd(s)};return{tag:Go(s),classes:d,attributes:i,...g}},Z7=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:$g('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),L$=t=>os.getCurrent(t).each(s=>om(s.element)),j7=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;_.from(t.iframeElement).map(Bt.fromDom).each(d=>{s?(B(d,a).each(g=>So(d,i,g)),So(d,a,-1)):(de(d,a),B(d,i).each(g=>{So(d,a,g),de(d,i)}))})},bU=(t,s,a,i)=>{const d=s.element;if(j7(t,a),a)Mg.block(s,Z7(i)),$o(d,"display"),de(d,"aria-hidden"),t.hasFocus()&&L$(s);else{const g=os.getCurrent(s).exists(p=>jv(p.element));Mg.unblock(s),$n(d,"display","none"),So(d,"aria-hidden","true"),g&&t.focus()}},vU=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:cn([Ho.config({}),Mg.config({focus:!1}),os.config({find:s=>co(s.components())})]),components:[]}),H$=t=>t.type==="focusin",z$=t=>H$(t)?(t.composed?co(t.composedPath()):_.from(t.target)).map(Bt.fromDom).filter(Ss).exists(a=>ji(a,"mce-pastebin")):!1,G7=(t,s,a)=>{const i=V(!1),d=zr(),g=w=>{i.get()&&!z$(w)&&(w.preventDefault(),L$(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",w=>{w.command.toLowerCase()==="mcefocus"&&w.value!==!0&&g(w)})});const p=w=>{w!==i.get()&&(i.set(w),bU(t,s(),w,a.providers),iI(t,w))};t.on("ProgressState",w=>{if(d.on(clearTimeout),rt(w.time)){const T=N0.setEditorTimeout(t,()=>p(w.state),w.time);d.set(T)}else p(w.state),d.clear()})},q7=(t,s)=>ke(t,(d,g)=>s(g,d.len).fold(Y(d),w=>({len:w.finish,list:d.list.concat([w])})),{len:0,list:[]}).list,Vl=(t,s,a)=>({within:t,extra:s,withinWidth:a}),V$=(t,s,a)=>{const i=q7(t,(w,T)=>{const A=a(w);return _.some({element:w,start:T,finish:T+A,width:A})}),d=xe(i,w=>w.finish<=s),g=We(d,(w,T)=>w+T.width,0),p=i.slice(d.length);return{within:d,extra:p,withinWidth:g}},jw=t=>Ve(t,s=>s.element),U$=(t,s,a)=>{const i=jw(t.concat(s));return Vl(i,[],a)},K7=(t,s,a,i)=>{const d=jw(t).concat([a]);return Vl(d,jw(s),i)},Gw=(t,s,a)=>Vl(jw(t),[],a),Y7=(t,s,a)=>{const i=V$(s,t,a);return i.extra.length===0?_.some(i):_.none()},ak=(t,s,a,i)=>{const d=Y7(t,s,a).getOrThunk(()=>V$(s,t-a(i),a)),g=d.within,p=d.extra,w=d.withinWidth;return p.length===1&&p[0].width<=a(i)?U$(g,p,w):p.length>=1?K7(g,p,i,w):Gw(g,p,w)},W$=(t,s)=>{const a=Ve(s,i=>hl(i));wm.setGroups(t,a)},ck=t=>to(t,s=>Ml(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),Z$=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Fn(t,s,"primary"),g=na.getCoupled(t,"overflowGroup");$n(d.element,"visibility","hidden");const p=i.concat([g]),w=ck(p);a([]),W$(d,p);const T=gr(d.element),A=ak(T,s.builtGroups.get(),D=>gr(D.element),g);A.extra.length===0?(Ho.remove(d,g),a([])):(W$(d,A.within),a(A.extra)),$o(d.element,"visibility"),te(d.element),w.each(_o.focus)},Yu=Y([Da("splitToolbarBehaviours",[na]),xc("builtGroups",()=>V([]))]),X7=Y([tm(["overflowToggledClass"]),Uf("getOverflowBounds"),Tt("lazySink"),xc("overflowGroups",()=>V([])),us("onOpened"),us("onClosed")].concat(Yu())),ik=Y([Wc({factory:wm,schema:cv(),name:"primary"}),Hu({schema:cv(),name:"overflow"}),Hu({name:"overflow-button"}),Hu({name:"overflow-group"})]),lk=Y((t,s)=>{Ds(t,Math.floor(s))}),J7=Y([tm(["toggledClass"]),Tt("lazySink"),ba("fetch"),Uf("getBounds"),hi("fireDismissalEventInstead",[Ke("event",Zd())]),cf(),us("onToggled")]),Q7=Y([Hu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:cn([Ts.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Hu({factory:wm,schema:cv(),name:"toolbar",overrides:t=>({toolbarBehaviours:cn([fo.config({mode:"cyclic",onEscape:s=>(sr(s,t,"button").each(_o.focus),_.none())})])})})]),j$=(t,s)=>{const a=na.getCoupled(t,"toolbarSandbox");ds.isOpen(a)?ds.close(a):ds.open(a,s.toolbar())},H3=(t,s,a,i)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();ai.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:lk()}}},d)},G$=(t,s,a,i,d)=>{wm.setGroups(s,d),H3(t,s,a,i),Ts.on(t)},eH=(t,s,a)=>{const i=D1(),d=(p,w)=>{a.fetch().get(T=>{G$(t,w,a,s.layouts,T),i.link(t.element),fo.focusIn(w)})},g=()=>{Ts.off(t),_o.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:cn([fo.config({mode:"special",onEscape:p=>(ds.close(p),_.some(!0))}),ds.config({onOpen:d,onClose:g,isPartOf:(p,w,T)=>Qd(w,T)||Qd(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Nl.config({channels:{...Bh({isExtraPart:Pe,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...l0({doReposition:()=>{ds.getState(na.getCoupled(t,"toolbarSandbox")).each(p=>{H3(t,p,a,s.layouts)})}})}})])}},ap=Zc({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...Qi.sketch({...i.button(),action:d=>{j$(d,i)},buttonBehaviours:Bl.augment({dump:i.button().buttonBehaviours},[na.config({others:{toolbarSandbox:d=>eH(d,a,t)}})])}),apis:{setGroups:(d,g)=>{ds.getState(na.getCoupled(d,"toolbarSandbox")).each(p=>{G$(d,p,t,a.layouts,g)})},reposition:d=>{ds.getState(na.getCoupled(d,"toolbarSandbox")).each(g=>{H3(d,g,t,a.layouts)})},toggle:d=>{j$(d,i)},getToolbar:d=>ds.getState(na.getCoupled(d,"toolbarSandbox")),isOpen:d=>ds.isOpen(na.getCoupled(d,"toolbarSandbox"))}}),configFields:J7(),partFields:Q7(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),q$=Y([Tt("items"),tm(["itemSelector"]),Da("tgroupBehaviours",[fo])]),K$=Y([ub({name:"items",unit:"item"})]),tH=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:fc(t.tgroupBehaviours,[fo.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),qw=Zc({name:"ToolbarGroup",configFields:q$(),partFields:K$(),factory:tH}),Y$=t=>Ve(t,s=>hl(s)),X$=(t,s,a)=>{Z$(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{ap.setGroups(d,Y$(i))})})},nH=(t,s,a,i)=>{const d=wr(ap.sketch({fetch:()=>ii.nu(g=>{g(Y$(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Ec,Tc],onRtl:()=>[Tc,Ec],onBottomLtr:()=>[Vc,si],onBottomRtl:()=>[si,Vc]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:fc(t.splitToolbarBehaviours,[na.config({others:{overflowGroup:()=>qw.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(Ve(p,g.getSystem().build)),X$(g,d,t)},refresh:g=>X$(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{ap.toggle(p)})},isOpen:g=>d.getOpt(g).map(ap.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{ap.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(ap.getToolbar)},domModification:{attributes:{role:"group"}}}},J$=Zc({name:"SplitFloatingToolbar",configFields:X7(),partFields:ik(),factory:nH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),oH=Y([tm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),us("onOpened"),us("onClosed")].concat(Yu())),sH=Y([Wc({factory:wm,schema:cv(),name:"primary"}),Wc({factory:wm,schema:cv(),name:"overflow",overrides:t=>({toolbarBehaviours:cn([Md.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{sr(s,t,"overflow-button").each(a=>{Ts.off(a),_o.focus(a)}),t.onClosed(s)},onGrown:s=>{fo.focusIn(s),t.onOpened(s)},onStartGrow:s=>{sr(s,t,"overflow-button").each(Ts.on)}}),fo.config({mode:"acyclic",onEscape:s=>(sr(s,t,"overflow-button").each(_o.focus),_.some(!0))})])})}),Hu({name:"overflow-button",overrides:t=>({buttonBehaviours:cn([Ts.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Hu({name:"overflow-group"})]),rH=(t,s)=>sr(t,s,"overflow").map(Md.hasGrown).getOr(!1),Q$=(t,s)=>{sr(t,s,"overflow-button").bind(()=>sr(t,s,"overflow")).each(a=>{z3(t,s),Md.toggleGrow(a)})},z3=(t,s)=>{sr(t,s,"overflow").each(a=>{Z$(t,s,i=>{const d=Ve(i,g=>hl(g));wm.setGroups(a,d)}),sr(t,s,"overflow-button").each(i=>{Md.hasGrown(a)&&Ts.on(i)}),Md.refresh(a)})},aH=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(p,w)=>{const T=Ve(w,p.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:fc(t.splitToolbarBehaviours,[na.config({others:{overflowGroup:p=>qw.sketch({...i["overflow-group"](),items:[Qi.sketch({...i["overflow-button"](),action:w=>{zs(p,d)}})]})}}),ms("toolbar-toggle-events",[Pt(d,p=>{Q$(p,t)})])]),apis:{setGroups:(p,w)=>{g(p,w),z3(p,t)},refresh:p=>z3(p,t),toggle:p=>Q$(p,t),isOpen:p=>rH(p,t)},domModification:{attributes:{role:"group"}}}},V3=Zc({name:"SplitSlidingToolbar",configFields:oH(),partFields:sH(),factory:aH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),eB=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[qw.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:cn([Sa.config({}),_o.config({})])}},uk=t=>qw.sketch(eB(t)),U3=(t,s)=>{const a=Hr(i=>{const d=Ve(t.initGroups,uk);wm.setGroups(i,d)});return cn([Ll.toolbarButton(t.providers.isDisabled),Ca(),fo.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),ms("toolbar-events",[a])])},Kw=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":eB({title:_.none(),items:[]}),"overflow-button":OM({name:"more",icon:_.some("more-drawer"),enabled:!0,tooltip:_.some("More..."),primary:!1,buttonType:_.none(),borderless:!1},_.none(),t.providers)},splitToolbarBehaviours:U3(t,s)}},W3=t=>{const s=Kw(t),a=4,i=J$.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return J$.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=_r(d),p=mi(d),w=_r(p),T=Math.max(p.dom.scrollHeight,w.height);return qn(g.x+a,w.y,g.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},cH=t=>{const s=V3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=V3.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=Kw(t);return V3.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([ek()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([ek()],{type:"closed"}),t.onToggled(d,!1)}})},dk=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return wm.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Zu.scrolling?["tox-toolbar--scrolling"]:[])},components:[wm.parts.groups({})],toolbarBehaviours:U3(t,s)})},tB=[zf("type",["button"]),Eg,il("buttonType","secondary",["primary","secondary"]),ba("onAction")],iH=fi("type",{button:tB}),lH=ro([k("buttons",[],iH),ba("onShow"),ba("onHide")]),uH=t=>Rs("view",lH,t),nB=(t,s)=>t3({text:t.text,enabled:!0,primary:!1,name:"name",icon:_.none(),borderless:!1,buttonType:_.some(t.buttonType)},a=>{t.onAction()},s),dH=t=>{const s=Ve(t.buttons,a=>nB(a,t.providers));return{uid:t.uid,dom:{tag:"div",classes:["tox-view__header"]},components:[bm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),bm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:s})]}},mH=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),Z3=(t,s,a,i)=>{const d={getPane:g=>nc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var iv=Zc({name:"silver.View",configFields:[Tt("viewConfig")],partFields:[cu({factory:{sketch:dH},schema:[Tt("buttons"),Tt("providers")],name:"header"}),cu({factory:{sketch:mH},schema:[],name:"pane"})],factory:Z3,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const fH=(t,s,a)=>Le(s,(i,d)=>{const g=Ql(uH(i));return t.slot(d,iv.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[iv.parts.header({buttons:g.buttons,providers:a})]:[],iv.parts.pane({})]}))}),oB=(t,s)=>jc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:fH(a,t,s),slotBehaviours:Eb.unnamedEvents([Hr(i=>jc.hideAllSlots(i))])})),sB=t=>se(jc.getSlotNames(t),s=>jc.isShowing(t,s)),rB=t=>{const s=t.element;$n(s,"display","none"),So(s,"aria-hidden","true")},gH=t=>{const s=t.element;$o(s,"display"),de(s,"aria-hidden")},aB=t=>({getContainer:Y(t)}),cB=(t,s,a)=>{jc.getSlot(t,s).each(i=>{iv.getPane(i).each(d=>{a(i)(aB(d.element.dom))})})},hH=(t,s)=>cB(t,s,iv.getOnShow),pH=(t,s)=>cB(t,s,iv.getOnHide);var mk=Fl({factory:(t,s)=>{const g={setViews:(p,w)=>{Ho.set(p,[oB(w,s.backstage.shared.providers)])},whichView:p=>os.getCurrent(p).bind(sB),toggleView:(p,w,T,A)=>os.getCurrent(p).exists(D=>{const M=sB(D),U=M.exists(le=>A===le),W=jc.getSlot(D,A).isSome();return W&&(jc.hideAllSlots(D),U?(rB(p),w()):(T(),gH(p),jc.showSlot(D,A),hH(D,A)),M.each(le=>pH(D,le))),W})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:cn([Ho.config({}),os.config({find:p=>{const w=Ho.contents(p);return co(w)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Tt("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const vH=(t,s,a)=>{let i=!1;const d={getSocket:g=>nc.getPart(g,t,"socket"),setSidebar:(g,p,w)=>{nc.getPart(g,t,"sidebar").each(T=>I7(T,p,w))},toggleSidebar:(g,p)=>{nc.getPart(g,t,"sidebar").each(w=>Zw(w,p))},whichSidebar:g=>nc.getPart(g,t,"sidebar").bind(L7).getOrNull(),getHeader:g=>nc.getPart(g,t,"header"),getToolbar:g=>nc.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{nc.getPart(g,t,"toolbar").each(w=>{const T=Ve(p,uk);w.getApis().setGroups(w,T)})},setToolbars:(g,p)=>{nc.getPart(g,t,"multiple-toolbar").each(w=>{const T=Ve(p,A=>Ve(A,uk));p$.setItems(w,T)})},refreshToolbar:g=>{nc.getPart(g,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:g=>{nc.getPart(g,t,"toolbar").each(p=>{uo(p.getApis().toggle,w=>w(p))})},isToolbarDrawerToggled:g=>nc.getPart(g,t,"toolbar").bind(p=>_.from(p.getApis().isOpen).map(w=>w(p))).getOr(!1),getThrobber:g=>nc.getPart(g,t,"throbber"),focusToolbar:g=>{nc.getPart(g,t,"toolbar").orThunk(()=>nc.getPart(g,t,"multiple-toolbar")).each(w=>{fo.focusIn(w)})},setMenubar:(g,p)=>{nc.getPart(g,t,"menubar").each(w=>{D3.setMenus(w,p)})},focusMenubar:g=>{nc.getPart(g,t,"menubar").each(p=>{D3.focus(p)})},setViews:(g,p)=>{nc.getPart(g,t,"viewWrapper").each(w=>{mk.setViews(w,p)})},toggleView:(g,p)=>nc.getPart(g,t,"viewWrapper").exists(w=>mk.toggleView(w,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>nc.getPart(g,t,"viewWrapper").bind(mk.whichView).getOrNull(),hideMainView:g=>{i=d.isToolbarDrawerToggled(g),i&&d.toggleToolbarDrawer(g),nc.getPart(g,t,"editorContainer").each(p=>{const w=p.element;$n(w,"display","none"),So(w,"aria-hidden","true")})},showMainView:g=>{i&&d.toggleToolbarDrawer(g),nc.getPart(g,t,"editorContainer").each(p=>{const w=p.element;$o(w,"display"),de(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},yH=Of.optional({factory:D3,name:"menubar",schema:[Tt("backstage")]}),j3=t=>t.type===Zu.sliding?cH:t.type===Zu.floating?W3:dk,G3=Of.optional({factory:{sketch:t=>p$.sketch({uid:t.uid,dom:t.dom,listBehaviours:cn([fo.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>dk({type:t.type,uid:Un("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),_.some(!0))}),setupItem:(s,a,i,d)=>{wm.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[Tt("dom"),Tt("onEscape")]}),wH=Of.optional({factory:{sketch:t=>{const s=j3(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),_.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Tt("dom"),Tt("onEscape"),Tt("getSink")]}),CH=Of.optional({factory:{sketch:O3},name:"header",schema:[Tt("dom")]}),SH=Of.optional({factory:{sketch:k7},name:"promotion",schema:[Tt("dom")]}),xH=Of.optional({name:"socket",schema:[Tt("dom")]}),kH=Of.optional({factory:{sketch:hU},name:"sidebar",schema:[Tt("dom")]}),TH=Of.optional({factory:{sketch:vU},name:"throbber",schema:[Tt("dom")]}),EH=Of.optional({factory:mk,name:"viewWrapper",schema:[Tt("backstage")]}),_H=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),iB=Of.optional({factory:{sketch:_H},name:"editorContainer",schema:[]});var ur=Zc({name:"OuterContainer",factory:vH,configFields:[Tt("dom"),Tt("behaviours")],partFields:[CH,yH,wH,G3,xH,kH,SH,TH,EH,iB],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const q3="file edit view insert format tools table help",K3={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},lv=(t,s,a)=>{const i=_S(a).split(/[ ,]/);return{text:t.title,getItems:()=>K(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:ze(i,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},fk=t=>t.split(" "),lB=(t,s)=>{const a={...K3,...s.menus},i=De(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?fk(q3):fk(s.menubar===!1?"":s.menubar),g=xe(d,w=>{const T=Vn(K3,w);return i?T||Ut(s.menus,w).exists(A=>Vn(A,"items")):T}),p=Ve(g,w=>{const T=a[w];return lv({title:T.title,items:fk(T.items)},s,t)});return xe(p,w=>{const T=A=>qt(A)||A.type!=="separator";return w.getItems().length>0&&ze(w.getItems(),T)})},uB=t=>{const s=()=>{t._skinLoaded=!0,sI(t)};return()=>{t.initialized?s():t.on("init",s)}},AH=(t,s)=>()=>rI(t,{message:s}),dB=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),OH=(t,s)=>{const a=s+"/skin.min.css";return dB(t,a,t.ui.styleSheetLoader)},DH=(t,s)=>{if(Is(Bt.fromDom(t.getElement()))){const i=s+"/skin.shadowdom.min.css";return dB(t,i,ew.DOM.styleSheetLoader)}else return Promise.resolve()},mB=(t,s)=>{const a=P0(s);a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!RS(s)&&qt(a)?Promise.all([OH(s,a),DH(s,a)]).then(uB(s),AH(s,"Skin could not be loaded")):uB(s)()},fB=Nt(mB,!1),RH=Nt(mB,!0),gk=(t,s)=>a=>{const i=ag(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},Yw=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},gB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Xu=(t,s)=>()=>t.execCommand(s),NH=(t,s,a)=>{const i=(w,T,A,D)=>{const M=s.shared.providers.translate(w.title);if(w.type==="separator")return _.some({type:"separator",text:M});if(w.type==="submenu"){const U=K(w.getStyleItems(),W=>d(W,T,D));return T===0&&U.length<=0?_.none():_.some({type:"nestedmenuitem",text:M,enabled:U.length>0,getSubmenuItems:()=>K(w.getStyleItems(),W=>d(W,T,D))})}else return _.some({type:"togglemenuitem",text:M,icon:w.icon,active:w.isSelected(D),enabled:!A,onAction:a.onAction(w),...w.getStylePreview().fold(()=>({}),U=>({meta:{style:U}}))})},d=(w,T,A)=>{const D=w.type==="formatter"&&a.isInvalid(w);return T===0?D?[]:i(w,T,!1,A).toArray():i(w,T,D,A).toArray()},g=w=>{const T=a.getCurrentValue(),A=a.shouldHide?0:1;return K(w,D=>d(D,A,T))};return{validateItems:g,getFetch:(w,T)=>(A,D)=>{const M=T(),U=g(M),W=Ib(U,gm.CLOSE_ON_EXECUTE,w,{isHorizontalMenu:!1,search:_.none()});D(W)}}},uv=(t,s,a)=>{const i=a.dataset,d=i.type==="basic"?()=>Ve(i.data,g=>QM(g,a.isSelectedFor,a.getPreviewFor)):i.getData;return{items:NH(t,s,a),getStyleItems:d}},Xw=(t,s,a)=>{const{items:i,getStyleItems:d}=uv(t,s,a),g=w=>({getComponent:Y(w)}),p=Yw(t,"NodeChange",w=>{const T=w.getComponent();a.updateText(T)});return Nx({text:a.icon.isSome()?_.none():a.text,icon:a.icon,tooltip:_.from(a.tooltip),role:_.none(),fetch:i.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},MH=t=>Ve(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),hB=t=>({type:"basic",data:t});var Zb;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Zb||(Zb={}));const pB=(t,s)=>s===Zb.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),Y3=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:MH(pB(i,a))}},hk=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],bB=t=>{const s=()=>se(hk,w=>t.formatter.match(w.format)),a=w=>()=>t.formatter.match(w),i=w=>_.none,d=w=>{const A=s().fold(Y("left"),D=>D.title.toLowerCase());po(w,cM,{icon:`align-${A}`})},g=hB(hk),p=w=>()=>se(hk,T=>T.format===w.format).each(T=>t.execCommand(T.command));return{tooltip:"Align",text:_.none(),icon:_.some("align-left"),isSelectedFor:a,getCurrentValue:_.none,getPreviewFor:i,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:w=>!t.formatter.canApply(w.format)}},$H=(t,s)=>Xw(t,s,bB(t)),BH=(t,s)=>{const a=uv(t,s,bB(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},X3=(t,s)=>{const a=s(),i=Ve(a,d=>d.format);return _.from(t.formatter.closest(i)).bind(d=>se(a,g=>g.format===d)).orThunk(()=>dr(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},vB=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),i=p=>()=>{const w=t.formatter.get(p);return w?_.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):_.none()},d=p=>{const T=X3(t,()=>g.data).fold(Y(s),A=>A.title);po(p,Af,{text:T})},g=Y3(t,"block_formats",Zb.SemiColon);return{tooltip:"Blocks",text:_.some(s),icon:_.none(),isSelectedFor:a,getCurrentValue:_.none,getPreviewFor:i,onAction:gB(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},yB=(t,s)=>Xw(t,s,vB(t)),PH=(t,s)=>{const a=uv(t,s,vB(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},FH=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],wB=t=>{const s=t.split(/\s*,\s*/);return Ve(s,a=>a.replace(/^['"]+|['"]+$/g,""))},IH=t=>{const s=()=>{const a=wB(t.toLowerCase());return H(FH,i=>a.indexOf(i.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},CB=t=>{const s="System Font",a=()=>{const A=le=>le?wB(le)[0]:"",D=t.queryCommandValue("FontName"),M=T.data,U=D?D.toLowerCase():"";return{matchOpt:se(M,le=>{const he=le.format;return he.toLowerCase()===U||A(he).toLowerCase()===A(U).toLowerCase()}).orThunk(()=>dr(IH(U),{title:s,format:U})),font:D}},i=A=>D=>D.exists(M=>M.format===A),d=()=>{const{matchOpt:A}=a();return A},g=A=>()=>_.some({tag:"div",styles:A.indexOf("dings")===-1?{"font-family":A}:{}}),p=A=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,A.format)})},w=A=>{const{matchOpt:D,font:M}=a(),U=D.fold(Y(M),W=>W.title);po(A,Af,{text:U})},T=Y3(t,"font_family_formats",Zb.SemiColon);return{tooltip:"Fonts",text:_.some(s),icon:_.none(),isSelectedFor:i,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:w,dataset:T,shouldHide:!1,isInvalid:Pe}},SB=(t,s)=>Xw(t,s,CB(t)),LH=(t,s)=>{const a=uv(t,s,CB(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},HH={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},zH={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},VH=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},UH=(t,s)=>/[0-9.]+px$/.test(t)?VH(parseInt(t,10)*72/96,s||0)+"pt":Ut(zH,t).getOr(t),WH=t=>Ut(HH,t).getOr(""),xB=t=>{const s=()=>{let T=_.none();const A=w.data,D=t.queryCommandValue("FontSize");if(D)for(let M=3;T.isNone()&&M>=0;M--){const U=UH(D,M),W=WH(U);T=se(A,le=>le.format===D||le.format===U||le.format===W)}return{matchOpt:T,size:D}},a=T=>A=>A.exists(D=>D.format===T),i=()=>{const{matchOpt:T}=s();return T},d=Y(_.none),g=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},p=T=>{const{matchOpt:A,size:D}=s(),M=A.fold(Y(D),U=>U.title);po(T,Af,{text:M})},w=Y3(t,"font_size_formats",Zb.Space);return{tooltip:"Font sizes",text:_.some("12pt"),icon:_.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:p,dataset:w,shouldHide:!1,isInvalid:Pe}},kB=(t,s)=>Xw(t,s,xB(t)),ZH=(t,s)=>{const a=uv(t,s,xB(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},TB=(t,s)=>{const a="Paragraph",i=p=>()=>t.formatter.match(p),d=p=>()=>{const w=t.formatter.get(p);return w!==void 0?_.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):_.none()},g=p=>{const w=M=>GM(M)?K(M.items,w):c3(M)?[{title:M.title,format:M.format}]:[],T=K(XM(t),w),D=X3(t,Y(T)).fold(Y(a),M=>M.title);po(p,Af,{text:D})};return{tooltip:"Formats",text:_.some(a),icon:_.none(),isSelectedFor:i,getCurrentValue:_.none,getPreviewFor:d,onAction:gB(t),updateText:g,shouldHide:mD(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},EB=(t,s)=>{const a={type:"advanced",...s.styles};return Xw(t,s,TB(t,a))},jH=(t,s)=>{const a={type:"advanced",...s.styles},i=uv(t,s,TB(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})};var _B=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const p=g(i,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?O0:MO)(i,p)})};return ir([Pt(nu(),(i,d)=>{const g=d;if(!g.universal){const p=t.channel;nn(g.channels,p)&&a(i,g.data)}}),Hr((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),qH=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),KH=[Tt("channel"),Ns("renderComponents"),Ns("updateState"),Ns("initialData"),Aa("reuseDom",!0)],YH=Object.freeze({__proto__:null,init:()=>{const t=V(_.none()),s=()=>t.set(_.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Ul=mc({fields:KH,name:"reflecting",active:_B,apis:qH,state:YH}),XH=Y([Tt("toggleClass"),Tt("fetch"),of("onExecute"),Ke("getHotspot",_.some),Ke("getAnchorOverrides",Y({})),cf(),of("onItemExecute"),Ns("lazySink"),Tt("dom"),us("onOpen"),Da("splitDropdownBehaviours",[na,fo,_o]),Ke("matchWidth",!1),Ke("useMinWidth",!1),Ke("eventOrder",{}),Ns("role")].concat(uA())),JH=Wc({factory:Qi,schema:[Tt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:cn([_o.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(jd)},buttonBehaviours:cn([Ts.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),QH=Wc({factory:Qi,schema:[Tt("dom")],name:"button",defaults:()=>({buttonBehaviours:cn([_o.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),e9=Y([JH,QH,cu({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Tt("text")],name:"aria-descriptor"}),Hu({schema:[Pp()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),ax()]),t9=(t,s,a,i)=>{const d=D=>{os.getCurrent(D).each(M=>{Ls.highlightFirst(M),fo.focusIn(M)})},g=D=>{iA(t,At,D,i,d,ta.HighlightMenuAndItem).get(oe)},p=D=>(g(D),_.some(!0)),w=D=>{const M=Fn(D,t,"button");return jd(M),_.some(!0)},T={...ir([Hr((D,M)=>{sr(D,t,"aria-descriptor").each(W=>{const le=Un("aria");So(W.element,"id",le),So(D.element,"aria-describedby",le)})})]),...yS(_.some(g))},A={repositionMenus:D=>{Ts.isOn(D)&&QR(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:A,eventOrder:{...t.eventOrder,[ul()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:fc(t.splitDropdownBehaviours,[na.config({others:{sandbox:D=>{const M=Fn(D,t,"arrow");return lA(t,D,{onOpen:()=>{Ts.on(M),Ts.on(D)},onClose:()=>{Ts.off(M),Ts.off(D)}})}}}),fo.config({mode:"special",onSpace:w,onEnter:w,onDown:p}),_o.config({}),Ts.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},pk=Zc({name:"SplitDropdown",configFields:XH(),partFields:e9(),factory:t9,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),J3=t=>({isEnabled:()=>!xo.isDisabled(t),setEnabled:s=>xo.set(t,!s)}),n9=t=>({setActive:s=>{Ts.set(t,s)},isActive:()=>Ts.isOn(t),isEnabled:()=>!xo.isDisabled(t),setEnabled:s=>xo.set(t,!s)}),AB=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),Q3=Un("focus-button"),bk=(t,s,a,i,d,g)=>({dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:AB(a,g)},components:_b([t.map(p=>Iw(p,g.icons)),s.map(p=>Rx(p,"tox-tbtn",g))]),eventOrder:{[Lc()]:["focusing","alloy.base.behaviour","common-button-display-events"]},buttonBehaviours:cn([Ll.toolbarButton(g.isDisabled),Ca(),ms("common-button-display-events",[Pt(Lc(),(p,w)=>{w.event.prevent(),zs(p,Q3)})])].concat(i.map(p=>Ul.config({channel:p,initialData:{icon:t,text:s},renderComponents:(w,T)=>_b([w.icon.map(A=>Iw(A,g.icons)),w.text.map(A=>Rx(A,"tox-tbtn",g))])})).toArray()).concat(d.getOr([])))}),o9=(t,s,a,i)=>{const d=s.shared;return ap.sketch({lazySink:d.getSink,fetch:()=>ii.nu(g=>{g(Ve(a(t.items),uk))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:bk(t.icon,t.text,t.tooltip,_.none(),_.none(),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},OB=(t,s,a)=>{const i=V(oe),d=bk(t.icon,t.text,t.tooltip,_.none(),_.none(),a);return Qi.sketch({dom:d.dom,components:d.components,eventOrder:HA,buttonBehaviours:cn([ms("toolbar-button-events",[sM({onAction:t.onAction,getApi:s.getApi}),Ad(s,i),bw(s,i)]),Ll.toolbarButton(()=>!t.enabled||a.isDisabled()),Ca()].concat(s.toolbarButtonBehaviours))})},s9=(t,s)=>DB(t,s,[]),DB=(t,s,a)=>OB(t,{toolbarButtonBehaviours:a.length>0?[ms("toolbarButtonWith",a)]:[],getApi:J3,onSetup:t.onSetup},s),r9=(t,s)=>RB(t,s,[]),RB=(t,s,a)=>OB(t,{toolbarButtonBehaviours:[Ho.config({}),Ts.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[ms("toolbarToggleButtonWith",a)]:[]),getApi:n9,onSetup:t.onSetup},s),vk=(t,s,a)=>i=>ii.nu(d=>s.fetch(d)).map(d=>_.from(dA(hr(oA(Un("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,gm.CLOSE_ON_EXECUTE,s.select.getOr(Pe),a),{movement:nx(s.columns,s.presets),menuBehaviours:Eb.unnamedEvents(s.columns!=="auto"?[]:[Hr((g,p)=>{__(g,4,MD(s.presets)).each(({numRows:w,numColumns:T})=>{fo.setGridSize(g,w,T)})})])})))),a9=(t,s)=>{const a=Un("channel-update-split-dropdown-display"),i=p=>({isEnabled:()=>!xo.isDisabled(p),setEnabled:w=>xo.set(p,!w),setIconFill:(w,T)=>{ia(p.element,'svg path[id="'+w+'"], rect[id="'+w+'"]').each(A=>{So(A,"fill",T)})},setActive:w=>{So(p.element,"aria-pressed",w),ia(p.element,"span").each(T=>{p.getSystem().getByDom(T).each(A=>Ts.set(A,w))})},isActive:()=>ia(p.element,"span").exists(w=>p.getSystem().getByDom(w).exists(Ts.isOn))}),d=V(oe),g={getApi:i,onSetup:t.onSetup};return pk.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...AB(t.tooltip,s.providers)}},onExecute:p=>{t.onAction(i(p))},onItemExecute:(p,w,T)=>{},splitDropdownBehaviours:cn([Ll.splitButton(s.providers.isDisabled),Ca(),ms("split-dropdown-events",[Pt(Q3,_o.focus),Ad(g,d),bw(g,d)]),J0.config({})]),eventOrder:{[fd()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:vk(i,t,s.providers),parts:{menu:L0(!1,t.columns,t.presets)},components:[pk.parts.button(bk(t.icon,t.text,_.none(),_.some(a),_.some([Ts.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),pk.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Qy("chevron-down",s.providers.icons)},buttonBehaviours:cn([Ll.splitButton(s.providers.isDisabled),Ca(),QE()])}),pk.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},yk=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],cp=(t,s)=>(a,i,d)=>{const g=t(a).mapError(p=>eu(p)).getOrDie();return s(g,i,d)},e4={button:cp(KD,(t,s)=>s9(t,s.shared.providers)),togglebutton:cp(T_,(t,s)=>r9(t,s.shared.providers)),menubutton:cp(_$,(t,s)=>QA(t,"tox-tbtn",s,_.none())),splitbutton:cp(C7,(t,s)=>a9(t,s.shared)),grouptoolbarbutton:cp(b7,(t,s,a)=>{const i=a.ui.registry.getAll().buttons,d=p=>Qw(a,{buttons:i,toolbar:p,allowToolbarGroups:!1},s,_.none()),g={[oy]:s.shared.header.isPositionedAtTop()?sm.TopToBottom:sm.BottomToTop};switch(B0(a)){case Zu.floating:return o9(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},c9=(t,s,a)=>Ut(e4,t.type).fold(()=>(console.error("skipping button defined by",t),_.none()),i=>_.some(i(t,s,a))),NB={styles:EB,fontsize:kB,fontfamily:SB,blocks:yB,align:$H},i9=t=>{const s=Ve(yk,a=>{const i=xe(a.items,d=>Vn(t,d)||Vn(NB,d));return{name:a.name,items:i}});return xe(s,a=>a.items.length>0)},l9=t=>{const s=t.split("|");return Ve(s,a=>({items:a.trim().split(" ")}))},u9=t=>Oe(t,s=>Vn(s,"name")&&Vn(s,"items")),d9=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?i9(a):qt(s)?l9(s):u9(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},wk=(t,s,a,i,d,g)=>Ut(s,a.toLowerCase()).orThunk(()=>g.bind(p=>to(p,w=>Ut(s,w+a.toLowerCase())))).fold(()=>Ut(NB,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),_.none()):c9(p,d,t)),Qw=(t,s,a,i)=>{const d=d9(s),g=Ve(d,p=>{const w=K(p.items,T=>T.trim().length===0?[]:wk(t,s.buttons,T,s.allowToolbarGroups,a,i).toArray());return{title:_.from(t.translate(p.name)),items:w}});return xe(g,p=>p.items.length>0)},t4=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(Oe(g,qt)){const w=g.map(T=>{const A={toolbar:T,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return Qw(t,A,i,_.none())});ur.setToolbars(d,w)}else ur.setToolbar(d,Qw(t,a,i,_.none()))},n4=Fc(),MB=n4.os.isiOS()&&n4.os.version.major<=12,m9=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=V(Ko(d.innerWidth,d.innerHeight)),w=V(Ko(g.offsetWidth,g.offsetHeight)),T=()=>{const U=p.get();(U.left!==d.innerWidth||U.top!==d.innerHeight)&&(p.set(Ko(d.innerWidth,d.innerHeight)),z_(t))},A=()=>{const U=t.getDoc().documentElement,W=w.get();(W.left!==U.offsetWidth||W.top!==U.offsetHeight)&&(w.set(Ko(U.offsetWidth,U.offsetHeight)),z_(t))},D=U=>{MR(t,U)};i.bind(d,"resize",T),i.bind(d,"scroll",D);const M=Qv(Bt.fromDom(t.getBody()),"load",A);t.on("hide",()=>{R(a,U=>{$n(U.element,"display","none")})}),t.on("show",()=>{R(a,U=>{$o(U.element,"display")})}),t.on("NodeChange",A),t.on("remove",()=>{M.unbind(),i.unbind(d,"resize",T),i.unbind(d,"scroll",D),d=null})},$B=(t,s)=>{au(t,s.dialogUi.mothership)};var f9=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=s,w=V(0),T=g.outerContainer;fB(t);const A=Bt.fromDom(d.targetNode),D=Tr(qo(A));yy(A,g.mothership),$B(D,s),t.on("PostRender",()=>{ur.setSidebar(T,a.sidebar,DS(t)),t4(t,s,a,i),w.set(t.getWin().innerWidth),ur.setMenubar(T,lB(t,a)),ur.setViews(T,a.views),m9(t,s)});const M=ur.getSocket(T).getOrDie("Could not find expected socket element");if(MB){Fr(M.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const he=GA(()=>{t.dispatch("ScrollContent")},20),nt=ri(M.element,"scroll",he.throttle);t.on("remove",nt.unbind)}A_(t,s),t.addCommand("ToggleSidebar",(he,nt)=>{ur.toggleSidebar(T,nt),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var he;return(he=ur.whichSidebar(T))!==null&&he!==void 0?he:""}),t.addCommand("ToggleView",(he,nt)=>{if(ur.toggleView(T,nt)){const Me=T.element;g.mothership.broadcastOn([Sd()],{target:Me}),R(p,ot=>{ot.broadcastOn([Sd()],{target:Me})}),ao(ur.whichView(T))&&(t.focus(),t.nodeChanged())}}),t.addQueryValueHandler("ToggleView",()=>{var he;return(he=ur.whichView(T))!==null&&he!==void 0?he:""});const U=B0(t),W=()=>{ur.refreshToolbar(s.mainUi.outerContainer)};(U===Zu.sliding||U===Zu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const he=t.getWin().innerWidth;he!==w.get()&&(W(),w.set(he))});const le={setEnabled:he=>{YS(s,!he)},isEnabled:()=>!xo.isDisabled(T)};return{iframeContainer:M.element.dom,editorContainer:T.element.dom,api:le}}});const o4=t=>/^[0-9\.]+(|px)$/i.test(""+t)?_.some(parseInt(""+t,10)):_.none(),s4=t=>rt(t)?t+"px":t,Ck=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},g9=t=>{const s=kS(t),a=ow(t),i=o_(t);return o4(s).map(d=>Ck(d,a,i))},h9=t=>g9(t).getOr(kS(t)),r4=t=>{const s=TS(t),a=n_(t),i=ES(t);return o4(s).map(d=>Ck(d,a,i))},p9=t=>r4(t).getOr(TS(t)),{ToolbarLocation:a4,ToolbarMode:BB}=c5,b9=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=a,w=ew.DOM,T=iw(t),A=uw(t),D=ES(t).or(r4(t)),M=i.shared.header,U=M.isPositionedAtTop,W=B0(t),le=W===BB.sliding||W===BB.floating,he=V(!1),nt=()=>he.get()&&!t.removed,Me=ys=>le?ys.fold(Y(0),oo=>oo.components().length>1?ut(oo.components()[1].element):0):0,ot=ys=>{switch(r_(t)){case a4.auto:const oo=ur.getToolbar(g.outerContainer),Xo=Me(oo),Ms=ut(ys.element)-Xo,gs=ns(s);if(gs.y>Ms)return"top";{const Dn=mi(s),Mo=Math.max(Dn.dom.scrollHeight,ut(Dn));return gs.bottom<Mo-Ms||qa().bottom<gs.bottom-Ms?"bottom":"top"}case a4.bottom:return"bottom";case a4.top:default:return"top"}},gn=ys=>{d.on(oo=>{Ci.setModes(oo,[ys]),M.setDockingMode(ys);const Xo=U()?sm.TopToBottom:sm.BottomToTop;So(oo.element,oy,Xo)})},it=()=>{d.on(ys=>{const oo=D.getOrThunk(()=>{const Xo=o4(_t(Jr(),"margin-left")).getOr(0);return gr(Jr())-Os(s).left+Xo});$n(ys.element,"max-width",oo+"px")})},yn=()=>{d.on(ys=>{const oo=ur.getToolbar(g.outerContainer),Xo=Me(oo),Ms=ns(s),gs=U()?Math.max(Ms.y-ut(ys.element)+Xo,0):Ms.bottom;Fr(g.outerContainer.element,{position:"absolute",top:Math.round(gs)+"px",left:Math.round(Ms.x)+"px"})})},Hn=()=>{R(p,ys=>{ys.broadcastOn([mf()],{})})},Nn=(ys=!1)=>{if(!!nt()){if(T||it(),le&&ur.refreshToolbar(g.outerContainer),T||yn(),A){const oo=ys?Ci.reset:Ci.refresh;d.on(oo)}Hn()}},ho=(ys=!0)=>{T||!A||!nt()||d.on(oo=>{const Xo=M.getDockingMode(),Ms=ot(oo);Ms!==Xo&&(gn(Ms),ys&&Nn(!0))})};return{isVisible:nt,isPositionedAtTop:U,show:()=>{he.set(!0),$n(g.outerContainer.element,"display","flex"),w.addClass(t.getBody(),"mce-edit-focus"),R(p,ys=>{$o(ys.element,"display")}),ho(!1),Nn()},hide:()=>{he.set(!1),$n(g.outerContainer.element,"display","none"),w.removeClass(t.getBody(),"mce-edit-focus"),R(p,ys=>{$n(ys.element,"display","none")})},update:Nn,updateMode:ho,repositionPopups:Hn}},PB=(t,s)=>{const a=ns(t);return{pos:s?a.y:a.bottom,bounds:a}},dv=(t,s,a,i)=>{const d=V(PB(s,a.isPositionedAtTop())),g=w=>{const{pos:T,bounds:A}=PB(s,a.isPositionedAtTop()),{pos:D,bounds:M}=d.get(),U=A.height!==M.height||A.width!==M.width;d.set({pos:T,bounds:A}),U&&z_(t,w),a.isVisible()&&(D!==T?a.update(!0):U&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(!0)),t.on("NodeChange keydown",w=>{requestAnimationFrame(()=>g(w))}),t.on("ScrollWindow",()=>a.updateMode());const p=ag();p.set(Qv(Bt.fromDom(t.getBody()),"load",w=>g(w.raw))),t.on("remove",()=>{p.clear()})},c4=(t,s)=>{au(t,s.dialogUi.mothership)};var v9=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,p=zr(),w=Bt.fromDom(d.targetNode),T=b9(t,w,s,i,p),A=fD(t);RH(t);const D=()=>{if(p.isSet()){T.show();return}p.set(ur.getHeader(g.outerContainer).getOrDie());const U=lw(t);au(U,g.mothership),c4(U,s),t4(t,s,a,i),ur.setMenubar(g.outerContainer,lB(t,a)),T.show(),dv(t,w,T,A),t.nodeChanged()};t.on("show",D),t.on("hide",T.hide),A||(t.on("focus",D),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||A)&&D()}),A_(t,s);const M={show:D,hide:T.hide,setEnabled:U=>{YS(s,!U)},isEnabled:()=>!xo.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:M}}});const FB=()=>{const t=zr(),s=zr(),a=zr();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>[...t.get().map(g=>g.mothership).toArray()],setupDialogUi:g=>{t.set(g)},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(w=>p(w.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},i4="contexttoolbar-show",l4="contexttoolbar-hide",IB=t=>({hide:()=>zs(t,Sp()),getValue:()=>vn.getValue(t)}),LB=(t,s)=>Pt(oM,(a,i)=>{const d=t.get(a),g=IB(d);s.onAction(g,i.event.buttonApi)}),mv=(t,s,a)=>{const{primary:i,...d}=s.original,g=Ql(KD({...d,type:"button",onAction:oe}));return DB(g,a,[LB(t,s)])},Sk=(t,s,a)=>{const{primary:i,...d}=s.original,g=Ql(T_({...d,type:"togglebutton",onAction:oe}));return RB(g,a,[LB(t,s)])},u4=t=>t.type==="contextformtogglebutton",HB=(t,s,a)=>u4(s)?Sk(t,s,a):mv(t,s,a),zB=(t,s,a)=>{const i=Ve(s,p=>wr(HB(t,p,a)));return{asSpecs:()=>Ve(i,p=>p.asSpec()),findPrimary:p=>to(s,(w,T)=>w.primary?_.from(i[T]).bind(A=>A.getOpt(p)).filter(we(xo.isDisabled)):_.none())}},d4=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=wr(H0.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:cn([fo.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(jd(p),!0)),onLeft:(g,p)=>(p.cut(),_.none()),onRight:(g,p)=>(p.cut(),_.none())})])})),d=zB(i,t.commands,s);return[{title:_.none(),items:[i.asSpec()]},{title:_.none(),items:d.asSpecs()}]},y9={renderContextForm:(t,s,a)=>dk({type:t,uid:Un("context-toolbar"),initGroups:d4(s,a),onEscape:_.none,cyclicKeying:!0,providers:a}),buildInitGroups:d4},VB=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,w9=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Fe(Bt.fromDom(t.startContainer),t.startOffset).element;return(Pr(a)?oa(a):_.some(a)).filter(Ss).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},m4=t=>{const s=t.selection.getRng(),a=w9(s);if(t.inline){const i=Ui();return qn(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=_r(Bt.fromDom(t.getBody()));return qn(i.x+a.left,i.y+a.top,a.width,a.height)}},UB=(t,s)=>s.filter(a=>jr(a)&&ws(a)).map(_r).getOrThunk(()=>m4(t)),xk=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},WB=(t,s,a,i,d,g)=>{const p=Bt.fromDom(t.getContainer()),w=ia(p,".tox-editor-header").getOr(p),T=ns(w),A=T.y>=s.bottom,D=i&&!A;if(t.inline&&D)return{y:Math.max(T.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(T.y-g,a.bottom)};const M=d==="line"?ns(p):s;return D?{y:Math.max(T.bottom+g,a.y),bottom:Math.min(M.bottom-g,a.bottom)}:{y:Math.max(M.y+g,a.y),bottom:Math.min(T.y-g,a.bottom)}},f4=(t,s,a,i=0)=>{const d=sl(window),g=ns(Bt.fromDom(t.getContentAreaContainer())),p=NS(t)||F0(t)||cw(t),{x:w,width:T}=xk(g,d,i);if(t.inline&&!p)return qn(w,d.y,T,d.height);{const A=s.header.isPositionedAtTop(),{y:D,bottom:M}=WB(t,g,d,A,a,i);return qn(w,D,T,M-D)}},fv=12,ZB={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},g4={maxHeightFunction:Zp(),maxWidthFunction:lk()},C9=(t,s)=>{const a=t.selection.getRng(),i=Fe(Bt.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Hs(i.element,s)},S9=(t,s,a)=>{const i=Js(t,"position");$n(t,"position",s);const d=a(t);return i.each(g=>$n(t,"position",g)),d},e2=t=>t==="node",jB=(t,s,a,i,d)=>{const g=m4(t),p=i.lastElement().exists(w=>Hs(a,w));if(C9(t,a))return p?UM:ym;if(p)return S9(s,i.getMode(),()=>VB(g,ns(s),-20)&&!i.isReposition()?wL:UM);{const w=i.getMode()==="fixed"?d.y+Ui().top:d.y,T=ut(s)+fv;return w+T<=g.y?ym:zb}},x9=(t,s,a,i)=>{const d=T=>(A,D,M,U,W)=>{const le=jB(t,U,T,a,W),he={...A,y:W.y,height:W.height};return{...le(he,D,M,U,W),alwaysFit:!0}},g=T=>e2(i)?[d(T)]:[];return s?{onLtr:T=>[Va,Tc,Ec,si,Vc,qi].concat(g(T)),onRtl:T=>[Va,Ec,Tc,Vc,si,qi].concat(g(T))}:{onLtr:T=>[qi,Va,si,Tc,Vc,Ec].concat(g(T)),onRtl:T=>[qi,Va,Vc,Ec,si,Tc].concat(g(T))}},k9=(t,s,a,i)=>s==="line"?{bubble:cg(fv,0,ZB),layouts:{onLtr:()=>[I1],onRtl:()=>[L1]},overrides:g4}:{bubble:cg(0,fv,ZB,1/fv),layouts:x9(t,a,i,s),overrides:g4},h4=(t,s)=>{const a=xe(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=Ee(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},T9=t=>{if(t.length<=1)return t;{const s=g=>ze(t,p=>p.position===g),a=g=>xe(t,p=>p.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),p=Ve(a("selection"),w=>({...w,position:"node"}));return g.concat(p)}else return a(i?"selection":"node");else return a("line")}},E9=t=>{if(t.length<=1)return t;{const s=i=>se(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>xe(t,d=>d.position===i))}},GB=(t,s,a)=>{const i=h4(t,s);if(i.contextForms.length>0)return _.some({elem:t,toolbars:[i.contextForms[0]]});{const d=h4(t,a);if(d.contextForms.length>0)return _.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=T9(i.contextToolbars.concat(d.contextToolbars));return _.some({elem:t,toolbars:g})}else return _.none()}},qB=(t,s,a)=>t(s)?_.none():rh(s,i=>{if(Ss(i)){const{contextToolbars:d,contextForms:g}=h4(i,a.inNodeScope),p=g.length>0?g:E9(d);return p.length>0?_.some({elem:i,toolbars:p}):_.none()}else return _.none()},t),_9=(t,s)=>{const a=Bt.fromDom(s.getBody()),i=p=>Hs(p,a),d=p=>!i(p)&&!di(a,p),g=Bt.fromDom(s.selection.getNode());return d(g)?_.none():GB(g,t.inNodeScope,t.inEditorScope).orThunk(()=>qB(i,g,t))},A9=(t,s)=>{const a={},i=[],d=[],g={},p={},w=(D,M)=>{const U=Ql(R5(M));a[D]=U,U.launch.map(W=>{g["form:"+D]={...M.launch,type:W.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(U)}}}),U.scope==="editor"?d.push(U):i.push(U),p[D]=U},T=(D,M)=>{pw(M).each(U=>{M.scope==="editor"?d.push(U):i.push(U),p[D]=U})},A=De(t);return R(A,D=>{const M=t[D];M.type==="contextform"?w(D,M):M.type==="contexttoolbar"&&T(D,M)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:p,formNavigators:g}},p4=Un("forward-slide"),KB=Un("backward-slide"),b4=Un("change-slide-event"),v4="tox-pop--resizing",O9=t=>{const s=V([]);return Kr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Kr.getContent(a).each(i=>{$o(i.element,"visibility")}),ca(a.element,v4),$o(a.element,"width")},inlineBehaviours:cn([ms("context-toolbar-events",[Ja(Ud(),(a,i)=>{i.event.raw.propertyName==="width"&&(ca(a.element,v4),$o(a.element,"width"))}),Pt(b4,(a,i)=>{const d=a.element;$o(d,"width");const g=gr(d);Kr.setContent(a,i.event.contents),ya(d,v4);const p=gr(d);$n(d,"width",g+"px"),Kr.getContent(a).each(w=>{i.event.focus.bind(T=>(om(T),Ml(d))).orThunk(()=>(fo.focusIn(w),Ki(qo(d))))}),setTimeout(()=>{$n(a.element,"width",p+"px")},0)}),Pt(p4,(a,i)=>{Kr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Ki(qo(a.element))}]))}),po(a,b4,{contents:i.event.forwardContents,focus:_.none()})}),Pt(KB,(a,i)=>{jn(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),po(a,b4,{contents:hl(d.bar),focus:d.focus})})})]),fo.config({mode:"special",onEscape:a=>jn(s.get()).fold(()=>t.onEscape(),i=>(zs(a,KB),_.some(!0)))})]),lazySink:()=>Bo.value(t.sink)})},y4="tox-pop--transition",w4=(t,s,a,i)=>{const d=i.backstage,g=d.shared,p=Fc().deviceType.isTouch,w=zr(),T=zr(),A=zr(),D=vi(O9({sink:a,onEscape:()=>(t.focus(),_.some(!0))})),M=()=>{const bo=A.get().getOr("node"),Wo=e2(bo)?1:0;return f4(t,g,bo,Wo)},U=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),W=bo=>kr(vs(bo,w.get(),Hs),!0),le=()=>{if(U()){const bo=M(),Wo=kr(A.get(),"node")?UB(t,w.get()):m4(t);return bo.height<=0||!VB(Wo,bo,.01)}else return!0},he=()=>{w.clear(),T.clear(),A.clear(),Kr.hide(D)},nt=()=>{if(Kr.isOpen(D)){const bo=D.element;$o(bo,"display"),le()?$n(bo,"display","none"):(T.set(0),Kr.reposition(D))}},Me=bo=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[bo],behaviours:cn([fo.config({mode:"acyclic"}),ms("pop-dialog-wrap-events",[Hr(Wo=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>fo.focusIn(Wo))}),Dl(Wo=>{t.shortcuts.remove("ctrl+F9")})])])}),ot=Ir(()=>A9(s,bo=>{const Wo=yn([bo]);po(D,p4,{forwardContents:Me(Wo)})})),gn=(bo,Wo)=>Qw(t,{buttons:bo,toolbar:Wo.items,allowToolbarGroups:!1},i.backstage,_.some(["form:"])),it=(bo,Wo)=>y9.buildInitGroups(bo,Wo),yn=bo=>{const{buttons:Wo}=t.ui.registry.getAll(),ys=ot(),oo={...Wo,...ys.formNavigators},Xo=B0(t)===Zu.scrolling?Zu.scrolling:Zu.default,Ms=z(Ve(bo,gs=>gs.type==="contexttoolbar"?gn(oo,gs):it(gs,g.providers)));return dk({type:Xo,uid:Un("context-toolbar"),initGroups:Ms,onEscape:_.none,cyclicKeying:!0,providers:g.providers})},Hn=(bo,Wo)=>{const ys=bo==="node"?g.anchors.node(Wo):g.anchors.cursor(),oo=k9(t,bo,p(),{lastElement:w.get,isReposition:()=>kr(T.get(),0),getMode:()=>ai.getMode(a)});return hr(ys,oo)},Nn=(bo,Wo)=>{if(ho.cancel(),!U())return;const ys=yn(bo),oo=bo[0].position,Xo=Hn(oo,Wo);A.set(oo),T.set(1);const Ms=D.element;$o(Ms,"display"),W(Wo)||(ca(Ms,y4),ai.reset(a,D)),Kr.showWithinBounds(D,Me(ys),{anchor:Xo,transition:{classes:[y4],mode:"placement"}},()=>_.some(M())),Wo.fold(w.clear,w.set),le()&&$n(Ms,"display","none")},ho=vM(()=>{if(!(!t.hasFocus()||t.removed))if(ji(D.element,y4))ho.throttle();else{const bo=ot();_9(bo,t).fold(he,Wo=>{Nn(Wo.toolbars,_.some(Wo.elem))})}},17);t.on("init",()=>{t.on("remove",he),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",nt),t.on("click keyup focus SetContent",ho.throttle),t.on(l4,he),t.on(i4,bo=>{const Wo=ot();Ut(Wo.lookupTable,bo.toolbarKey).each(ys=>{Nn([ys],dr(bo.target!==t,bo.target)),Kr.getContent(D).each(fo.focusIn)})}),t.on("focusout",bo=>{N0.setEditorTimeout(t,()=>{Ml(a.element).isNone()&&Ml(D.element).isNone()&&he()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&he()}),t.on("AfterProgressState",bo=>{bo.state?he():t.hasFocus()&&ho.throttle()}),t.on("NodeChange",bo=>{Ml(D.element).fold(ho.throttle,oe)})})},D9=t=>{R([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Xu(t,a.cmd),onSetup:gk(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:Xu(t,"JustifyNone")})},R9={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},C4=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=w=>`(?:${w})?`,p=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),YB=(t,s)=>ze(s,a=>ze(R9[a],i=>t===i)),XB=(t,s)=>_.from(C4.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return YB(g,s)?_.some({value:d,unit:g}):_.none()}),N9=(t,s)=>XB(t,s).map(({value:a,unit:i})=>a+i),JB=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=zr();return Ve(i,p=>({type:"togglemenuitem",text:s.display(p),onSetup:w=>{const T=D=>{D&&(g.on(M=>M.setActive(!1)),g.set(w)),w.setActive(D)};T(kr(d,s.hash(p)));const A=s.watcher(t,p,T);return()=>{g.clear(),A()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},M9={name:"lineheight",text:"Line height",icon:"line-height",getOptions:xD,hash:t=>N9(t,["fixed","relative","empty"]).getOr(t),display:At,watcher:(t,s,a)=>t.formatter.formatChanged("lineheight",a,!1,{value:s}).unbind,getCurrent:t=>_.from(t.queryCommandValue("LineHeight")),setCurrent:(t,s)=>t.execCommand("LineHeight",!1,s)},$9=t=>_.from(s_(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:Y(a),hash:i=>yt(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var p;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:i=>{const d=Bt.fromDom(i.selection.getNode());return md(d,g=>_.some(g).filter(Ss).bind(p=>B(p,"lang").map(T=>{const A=B(p,"data-mce-lang").getOrUndefined();return{code:T,customCode:A,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=ag();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),d.clear}})),B9=t=>{JB(t,M9),$9(t).each(s=>JB(t,s))},QB=(t,s)=>{BH(t,s),LH(t,s),jH(t,s),PH(t,s),ZH(t,s)},P9=t=>Yw(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent"))}),eP=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:P9(t),onAction:Xu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:Xu(t,"indent")})},F9=t=>{eP(t)},tP=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),()=>t.off("PastePlainTextToggle",i)},S4=t=>{const s=V(i_(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:tP(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:tP(t,s)})},kk=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},nP=t=>{xl.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:gk(t,s.name),onAction:kk(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:gk(t,a),onAction:kk(t,a)})}},x4=t=>{xl.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Xu(t,s.action)})})},I9=t=>{xl.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Xu(t,s.action),onSetup:gk(t,s.name)})})},L9=t=>{nP(t),x4(t),I9(t)},H9=t=>{xl.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Xu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:kk(t,"code")})},z9=t=>{L9(t),H9(t)},t2=(t,s)=>Yw(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),V9=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:t2(t,"hasUndo"),onAction:Xu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:t2(t,"hasRedo"),onAction:Xu(t,"redo")})},U9=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:t2(t,"hasUndo"),onAction:Xu(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:t2(t,"hasRedo"),onAction:Xu(t,"redo")})},W9=t=>{V9(t),U9(t)},Z9=t=>Yw(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),j9=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:Z9(t),onAction:Xu(t,"mceToggleVisualAid")})},G9=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Xu(t,"mceToggleVisualAid")})},q9=t=>{G9(t),j9(t)},K9=(t,s)=>{D9(t),z9(t),QB(t,s),W9(t),hI(t),q9(t),F9(t),B9(t),S4(t)},oP=t=>qt(t)?t.split(/[ ,]/):t,sP=t=>s=>s.options.get(t),rP=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:qt(a)||Oe(a,qt)?{value:oP(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},aP=sP("contextmenu_never_use_native"),Y9=sP("contextmenu_avoid_overlap"),X9=t=>ip(t).length===0,ip=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:xe(a,i=>Vn(s,i))},gv=(t,s)=>({type:"makeshift",x:t,y:s}),J9=(t,s,a)=>gv(t.x+s,t.y+a),cP=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Q9=t=>{if(cP(t)){const s=t.touches[0];return gv(s.pageX,s.pageY)}else return gv(t.pageX,t.pageY)},ez=t=>{if(cP(t)){const s=t.touches[0];return gv(s.clientX,s.clientY)}else return gv(t.clientX,t.clientY)},iP=(t,s)=>{const a=ew.DOM.getPos(t);return J9(s,a.x,a.y)},tz=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Q9(s):iP(t.getContentAreaContainer(),ez(s)):lP(t),lP=t=>({type:"selection",root:Bt.fromDom(t.selection.getNode())}),nz=t=>({type:"node",node:_.some(Bt.fromDom(t.selection.getNode())),root:Bt.fromDom(t.getBody())}),uP=(t,s,a)=>{switch(a){case"node":return nz(t);case"point":return tz(t,s);case"selection":return lP(t)}},oz=(t,s,a,i,d,g)=>{const p=a(),w=uP(t,s,g);Ib(p,gm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:_.none()}).map(T=>{s.preventDefault(),Kr.showMenuAt(d,{anchor:w},{menu:{markers:Cb("normal")},data:T})})},sz={onLtr:()=>[Va,Tc,Ec,si,Vc,qi,ym,zb,zw,Ux,Hw,Lw],onRtl:()=>[Va,Ec,Tc,Vc,si,qi,ym,zb,Hw,Lw,zw,Ux]},rz=12,az={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},dP=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return n0(t.getWin(),am.domRange(d)).exists(p=>p.left<=i.clientX&&p.right>=i.clientX&&p.top<=i.clientY&&p.bottom>=i.clientY)}},mP=t=>{const s=t.selection.getRng(),a=()=>{N0.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},cz=(t,s,a)=>{const i=uP(t,s,a);return{bubble:cg(0,a==="point"?rz:0,az),layouts:sz,overrides:{maxWidthFunction:lk(),maxHeightFunction:Zp()},...i}},n2=(t,s,a,i,d,g,p)=>{const w=cz(t,s,g);Ib(a,gm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:_.none()}).map(T=>{s.preventDefault();const A=p?ta.HighlightMenuAndItem:ta.HighlightNone;Kr.showMenuWithinBounds(d,{anchor:w},{menu:{markers:Cb("normal"),highlightOnOpen:A},data:T,type:"horizontal"},()=>_.some(f4(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(l4)})},iz=(t,s,a,i,d,g)=>{const p=Fc(),w=p.os.isiOS(),T=p.os.isMacOS(),A=p.os.isAndroid(),D=p.deviceType.isTouch(),M=()=>!(A||w||T&&D),U=()=>{const W=a();n2(t,s,W,i,d,g,M())};if((T||w)&&g!=="node"){const W=()=>{mP(t),U()};dP(t,s)?W():(t.once("selectionchange",W),t.once("touchend",()=>t.off("selectionchange",W)))}else U()},fP=t=>qt(t)?t==="|":t.type==="separator",o2={type:"separator"},gP=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(qt(t))return t;switch(t.type){case"separator":return o2;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return qt(i)?i:Ve(i,gP)}};default:const a=t;return{type:"menuitem",...s(a),onAction:bt(a.onAction)}}},hP=(t,s)=>{if(s.length===0)return t;const i=jn(t).filter(d=>!fP(d)).fold(()=>[],d=>[o2]);return t.concat(i).concat(s).concat([o2])},lz=(t,s,a)=>{const i=ke(s,(d,g)=>Ut(t,g.toLowerCase()).map(p=>{const w=p.update(a);if(qt(w))return hP(d,w.split(" "));if(w.length>0){const T=Ve(w,gP);return hP(d,T)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&fP(i[i.length-1])&&i.pop(),i},uz=(t,s)=>s.ctrlKey&&!aP(t),dz=t=>t.type==="longpress"||Vn(t,"touches"),pP=(t,s)=>!dz(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),bP=(t,s)=>pP(t,s)?t.selection.getStart(!0):s.target,mz=(t,s)=>{const a=Y9(t),i=pP(t,s)?"selection":"point";if(ht(a)){const d=bP(t,s);return kw(Bt.fromDom(d),a)?"node":i}else return i},fz=(t,s,a)=>{const d=Fc().deviceType.isTouch,g=vi(Kr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:cn([ms("dismissContextMenu",[Pt(Zd(),(T,A)=>{ds.close(T),t.focus()})])])})),p=()=>Kr.hide(g),w=T=>{if(aP(t)&&T.preventDefault(),uz(t,T)||X9(t))return;const A=mz(t,T),D=()=>{const U=bP(t,T),W=t.ui.registry.getAll(),le=ip(t);return lz(W.contextMenus,le,U)};(d()?iz:oz)(t,T,D,a,g,A)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,p),t.on("longpress contextmenu",w)})},k4=dt.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Tk=t=>s=>s.translate(-t.left,-t.top),Ek=t=>s=>s.translate(t.left,t.top),Bg=t=>(s,a)=>ke(t,(i,d)=>d(i),Ko(s,a)),_k=(t,s,a)=>t.fold(Bg([Ek(a),Tk(s)]),Bg([Tk(s)]),Bg([])),hv=(t,s,a)=>t.fold(Bg([Ek(a)]),Bg([]),Bg([Ek(s)])),vP=(t,s,a)=>t.fold(Bg([]),Bg([Tk(a)]),Bg([Ek(s),Tk(a)])),gz=(t,s,a,i,d,g)=>{const p=hv(t,d,g),w=hv(s,d,g);return Math.abs(p.left-w.left)<=a&&Math.abs(p.top-w.top)<=i},Ak=(t,s,a,i,d,g)=>{const p=hv(t,d,g),w=hv(s,d,g),T=Math.abs(p.left-w.left),A=Math.abs(p.top-w.top);return Ko(T,A)},yP=(t,s,a)=>{const i=t.fold((d,g)=>({position:_.some("absolute"),left:_.some(d+"px"),top:_.some(g+"px")}),(d,g)=>({position:_.some("absolute"),left:_.some(d-a.left+"px"),top:_.some(g-a.top+"px")}),(d,g)=>({position:_.some("fixed"),left:_.some(d+"px"),top:_.some(g+"px")}));return{right:_.none(),bottom:_.none(),...i}},hz=(t,s,a)=>t.fold((i,d)=>Ok(i+s,d+a),(i,d)=>lp(i+s,d+a),(i,d)=>jb(i+s,d+a)),T4=(t,s,a,i)=>{const d=(g,p)=>(w,T)=>{const A=g(s,a,i);return p(w.getOr(A.left),T.getOr(A.top))};return t.fold(d(vP,Ok),d(hv,lp),d(_k,jb))},Ok=k4.offset,lp=k4.absolute,jb=k4.fixed,E4=(t,s)=>{const a=or(t,s);return yt(a)?NaN:parseInt(a,10)},pz=(t,s)=>{const a=t.element,i=E4(a,s.leftAttr),d=E4(a,s.topAttr);return isNaN(i)||isNaN(d)?_.none():_.some(Ko(i,d))},bz=(t,s,a)=>{const i=t.element;So(i,s.leftAttr,a.left+"px"),So(i,s.topAttr,a.top+"px")},vz=(t,s)=>{const a=t.element;de(a,s.leftAttr),de(a,s.topAttr)},yz=(t,s,a,i)=>pz(t,s).fold(()=>a,d=>jb(d.left+i.left,d.top+i.top)),wz=(t,s,a,i,d,g)=>{const p=yz(t,s,a,i),w=s.mustSnap?Cz(t,s,p,d,g):Sz(t,s,p,d,g),T=_k(p,d,g);return bz(t,s,T),w.fold(()=>({coord:jb(T.left,T.top),extra:_.none()}),A=>({coord:A.output,extra:A.extra}))},_4=(t,s)=>{vz(t,s)},A4=(t,s,a,i)=>to(t,d=>{const g=d.sensor;return gz(s,g,d.range.left,d.range.top,a,i)?_.some({output:T4(d.output,s,a,i),extra:d.extra}):_.none()}),Cz=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return A4(g,a,i,d).orThunk(()=>ke(g,(T,A)=>{const D=A.sensor,M=Ak(a,D,A.range.left,A.range.top,i,d);return T.deltas.fold(()=>({deltas:_.some(M),snap:_.some(A)}),U=>{const W=(M.left+M.top)/2,le=(U.left+U.top)/2;return W<=le?{deltas:_.some(M),snap:_.some(A)}:T})},{deltas:_.none(),snap:_.none()}).snap.map(T=>({output:T4(T.output,a,i,d),extra:T.extra})))},Sz=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return A4(g,a,i,d)},xz=(t,s,a)=>({coord:T4(t.output,t.output,s,a),extra:t.extra});var kz=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=fa(t.element),p=Ui(g),w=v3(d),T=xz(i,p,w),A=yP(T.coord,p,w);fr(d,A)}}});const O4="data-initial-z-index",Tz=t=>{oa(t.element).filter(Ss).each(s=>{B(s,O4).fold(()=>$o(s,"z-index"),a=>$n(s,"z-index",a)),de(s,O4)})},Ez=t=>{oa(t.element).filter(Ss).each(s=>{Js(s,"z-index").each(a=>{So(s,O4,a)}),$n(s,"z-index",_t(t.element,"z-index"))})},wP=(t,s)=>{t.getSystem().addToGui(s),Ez(s)},_z=t=>{Tz(t),t.getSystem().removeFromGui(t)},CP=(t,s,a)=>t.getSystem().build(bm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var Az=hi("snaps",[Tt("getSnapPoints"),us("onSensor"),Tt("leftAttr"),Tt("topAttr"),Ke("lazyViewport",qa),Ke("mustSnap",!1)]);const D4=[Ke("useFixed",Pe),Tt("blockerClass"),Ke("getTarget",At),Ke("onDrag",oe),Ke("repositionTarget",!0),Ke("onDrop",oe),Oa("getBounds",qa),Az],Oz=t=>as(Js(t,"left"),Js(t,"top"),Js(t,"position"),(s,a,i)=>(i==="fixed"?jb:Ok)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Os(t);return lp(s.left,s.top)}),Dz=(t,s,a,i,d)=>{const g=d.bounds,p=hv(s,a,i),w=pl(p.left,g.x,g.x+g.width-d.width),T=pl(p.top,g.y,g.y+g.height-d.height),A=lp(w,T);return s.fold(()=>{const D=vP(A,a,i);return Ok(D.left,D.top)},Y(A),()=>{const D=_k(A,a,i);return jb(D.left,D.top)})},Rz=(t,s,a,i,d,g,p)=>{const w=s.fold(()=>{const T=hz(a,g.left,g.top),A=_k(T,i,d);return jb(A.left,A.top)},T=>{const A=wz(t,T,a,g,i,d);return A.extra.each(D=>{T.onSensor(t,D)}),A.coord});return Dz(t,w,i,d,p)},Nz=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=fa(t.element),p=Ui(g),w=v3(d),T=Oz(d),A=Rz(t,s.snaps,T,p,w,i,a),D=yP(A,p,w);fr(d,D)}s.onDrag(t,d,i)},SP=(t,s)=>({bounds:t.getBounds(),height:Bn(s.element),width:nr(s.element)}),R4=(t,s,a,i,d)=>{const g=a.update(i,d),p=a.getStartData().getOrThunk(()=>SP(s,t));g.each(w=>{Nz(t,s,p,w)})},xP=(t,s,a,i)=>{s.each(_z),a.snaps.each(g=>{_4(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},N4=t=>(s,a)=>{const i=d=>{a.setStartData(SP(s,d))};return ir([Pt(g1(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},kP=t=>ir([Pt(Lc(),t.forceDrop),Pt(vp(),t.drop),Pt(Di(),(s,a)=>{t.move(a.event)}),Pt(Ru(),t.delayDrop)]);var $z=Object.freeze({__proto__:null,getData:t=>_.from(Ko(t.x,t.y)),getDelta:(t,s)=>Ko(s.left-t.left,s.top-t.top)});const Dk=(t,s,a)=>[Pt(Lc(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>xP(i,_.some(A),t,s),w=tN(p,200),T={drop:p,delayDrop:w.schedule,forceDrop:p,move:M=>{w.cancel(),R4(i,t,s,$z,M)}},A=CP(i,t.blockerClass,kP(T));(()=>{a(i),wP(i,A)})()})],Rk=[...D4,br("dragger",{handlers:N4(Dk)})],Bz=t=>ir([Pt(er(),t.forceDrop),Pt(Ic(),t.drop),Pt(Ol(),t.drop),Pt(Ha(),(s,a)=>{t.move(a.event)})]),Pz=t=>{const s=t[0];return _.some(Ko(s.clientX,s.clientY))};var TP=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?Pz(a):_.none()},getDelta:(t,s)=>Ko(s.left-t.left,s.top-t.top)});const up=(t,s,a)=>{const i=zr(),d=g=>{xP(g,i.get(),t,s),i.clear()};return[Pt(er(),(g,p)=>{p.stop();const w=()=>d(g),T={drop:w,delayDrop:oe,forceDrop:w,move:M=>{R4(g,t,s,TP,M)}},A=CP(g,t.blockerClass,Bz(T));i.set(A),(()=>{a(g),wP(g,A)})()}),Pt(Ha(),(g,p)=>{p.stop(),R4(g,t,s,TP,p.event)}),Pt(Ic(),(g,p)=>{p.stop(),d(g)}),Pt(Ol(),d)]},EP=[...D4,br("dragger",{handlers:N4(up)})],Fz=(t,s,a)=>[...Dk(t,s,a),...up(t,s,a)],Iz=[...D4,br("dragger",{handlers:N4(Fz)})];var Lz=Object.freeze({__proto__:null,mouse:Rk,touch:EP,mouseOrTouch:Iz}),Hz=Object.freeze({__proto__:null,init:()=>{let t=_.none(),s=_.none();const a=()=>{t=_.none(),s=_.none()},i=(T,A)=>{const D=t.map(M=>T.getDelta(M,A));return t=_.some(A),D},d=(T,A)=>T.getData(A).bind(D=>i(T,D)),g=T=>{s=_.some(T)},p=()=>s,w=Y({});return Ri({readState:w,reset:a,update:d,getStartData:p,setStartData:g})}});const Pg=Zv({branchKey:"mode",branches:Lz,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:_.from(t.extra)})},state:Hz,apis:kz}),Gb=40,bv=Gb/2,s2=(t,s,a,i,d,g)=>t.fold(()=>Pg.snap({sensor:lp(a-bv,i-bv),range:Ko(d,g),output:lp(_.some(a),_.some(i)),extra:{td:s}}),p=>{const w=a-bv,T=i-bv,A=Gb,D=Gb,M=p.element.dom.getBoundingClientRect();return Pg.snap({sensor:lp(w,T),range:Ko(A,D),output:lp(_.some(a-M.width/2),_.some(i-M.height/2)),extra:{td:s}})}),dp=(t,s,a)=>{const i=(d,g)=>d.exists(p=>Hs(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;i(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},r2=t=>wr(Qi.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:cn([Pg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),J0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),zz=(t,s)=>{const a=V([]),i=V([]),d=V(!1),g=zr(),p=zr(),w=Nn=>{const ho=_r(Nn);return s2(W.getOpt(s),Nn,ho.x,ho.y,ho.width,ho.height)},T=()=>Ve(a.get(),Nn=>w(Nn)),A=Nn=>{const ho=_r(Nn);return s2(le.getOpt(s),Nn,ho.right,ho.bottom,ho.width,ho.height)},D=()=>Ve(i.get(),Nn=>A(Nn)),M=dp(T,g,Nn=>{p.get().each(ho=>{t.dispatch("TableSelectorChange",{start:Nn,finish:ho})})}),U=dp(D,p,Nn=>{g.get().each(ho=>{t.dispatch("TableSelectorChange",{start:ho,finish:Nn})})}),W=r2(M),le=r2(U),he=vi(W.asSpec()),nt=vi(le.asSpec()),Me=(Nn,ho,bo,Wo)=>{const ys=ho.dom.getBoundingClientRect();$o(Nn.element,"display");const oo=Bc(Bt.fromDom(t.getBody())).dom.innerHeight,Xo=bo(ys),Ms=Wo(ys,oo);(Xo||Ms)&&$n(Nn.element,"display","none")},ot=(Nn,ho,bo,Wo)=>{const ys=bo(ho);Pg.snapTo(Nn,ys),Me(Nn,ho,Ms=>Ms[Wo]<0,(Ms,gs)=>Ms[Wo]>gs)},gn=Nn=>ot(he,Nn,w,"top"),it=()=>g.get().each(gn),yn=Nn=>ot(nt,Nn,A,"bottom"),Hn=()=>p.get().each(yn);Fc().deviceType.isTouch()&&(t.on("TableSelectionChange",Nn=>{d.get()||(Ac(s,he),Ac(s,nt),d.set(!0)),g.set(Nn.start),p.set(Nn.finish),Nn.otherCells.each(ho=>{a.set(ho.upOrLeftCells),i.set(ho.downOrRightCells),gn(Nn.start),yn(Nn.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{it(),Hn()}),t.on("TableSelectionClear",()=>{d.get()&&(Oc(he),Oc(nt),d.set(!1)),g.clear(),p.clear()}))};var _P=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const AP=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",OP=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"\u203A",g=(A,D,M)=>Qi.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":M,"aria-level":M+1}},components:[za(A)],action:U=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:cn([Ll.button(a.isDisabled),Ca()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[za(` ${d} `)]}),w=A=>ke(A,(D,M,U)=>{const W=g(M.name,M.element,U);return U===0?D.concat([W]):D.concat([p(),W])},[]),T=A=>{const D=[];let M=A.length;for(;M-- >0;){const U=A[M];if(U.nodeType===1&&!AP(U)){const W=lI(t,U);if(W.isDefaultPrevented()||D.push({name:W.name,element:U}),W.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:cn([fo.config({mode:"flow",selector:"div[role=button]"}),xo.config({disabled:a.isDisabled}),Ca(),Sa.config({}),Ho.config({}),ms("elementPathEvents",[Hr((A,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>fo.focusIn(A)),t.on("NodeChange",M=>{const U=T(M.parents),W=U.length>0?w(U):[];Ho.set(A,W)})})])]),components:[]}};var qb;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(qb||(qb={}));const Vz=(t,s,a,i,d)=>{const g={height:Ck(i+s.top,ow(t),o_(t))};return a===qb.Both&&(g.width=Ck(d+s.left,n_(t),ES(t))),g},DP=(t,s,a)=>{const i=Bt.fromDom(t.getContainer()),d=Vz(t,s,a,ut(i),gr(i));Dt(d,(g,p)=>{rt(g)&&$n(i,p,s4(g))}),aI(t)},RP=t=>{const s=c_(t);return s===!1?qb.None:s==="both"?qb.Both:qb.Vertical},a2=(t,s,a,i)=>{const g=Ko(a*20,i*20);return DP(t,g,s),_.some(!0)},M4=(t,s)=>{const a=RP(t);return a===qb.None?_.none():_.some(fm("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize")},behaviours:[Pg.config({mode:"mouse",repositionTarget:!1,onDrag:(i,d,g)=>DP(t,g,a),blockerClass:"tox-blocker"}),fo.config({mode:"special",onLeft:()=>a2(t,a,-1,0),onRight:()=>a2(t,a,1,0),onUp:()=>a2(t,a,0,-1),onDown:()=>a2(t,a,0,1)}),Sa.config({}),_o.config({})]},s.icons))},Uz=(t,s)=>{const a=(i,d,g)=>Ho.set(i,[za(s.translate(["{0} "+g,d[g]]))]);return Qi.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:cn([Ll.button(s.isDisabled),Ca(),Sa.config({}),Ho.config({}),vn.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),ms("wordcount-events",[dl(i=>{const d=vn.getValue(i),g=d.mode==="words"?"characters":"words";vn.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Hr(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=vn.getValue(i);vn.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[ul()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},Wz=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":_d.translate(["Powered by {0}","Tiny"])},innerHtml:_P.trim()},behaviours:cn([_o.config({})])}]}),i=()=>{const g=[];return a_(t)&&g.push(OP(t,{},s)),t.hasPlugin("wordcount")&&g.push(Uz(t,s)),CD(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=i(),p=M4(t,s);return g.concat(p.toArray())})()}},NP=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),MP=t=>{const s=t.inline,a=s?v9:f9,i=uw(t)?h7:e7,d=FB(),g=zr(),p=zr(),D=Fc().deviceType.isTouch()?["tox-platform-touch"]:[],M=MS(t),U=B0(t),W=wr({dom:{tag:"div",classes:["tox-anchorbar"]}}),le=()=>d.mainUi.get().map(gs=>gs.outerContainer).bind(ur.getHeader),he=()=>Bo.fromOption(d.dialogUi.get().map(gs=>gs.sink),"UI has not been rendered"),nt=()=>Bo.fromOption(d.popupUi.get().map(gs=>gs.sink),"(popup) UI has not been rendered"),Me=d.lazyGetInOuterOrDie("anchor bar",W.getOpt),ot=d.lazyGetInOuterOrDie("toolbar",ur.getToolbar),gn=d.lazyGetInOuterOrDie("throbber",ur.getThrobber),it=rU({popup:nt,dialog:he},t,Me),yn=()=>{const gs={attributes:{[oy]:M?sm.BottomToTop:sm.TopToBottom}},sn=ur.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:it.popup,onEscape:()=>{t.focus()}}),Dn=ur.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:it.popup.shared.getSink,providers:it.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:p2=>{uI(t,p2)},type:U,lazyToolbar:ot,lazyHeader:()=>le().getOrDie("Could not find header element"),...gs}),Mo=ur.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:it.popup.shared.providers,onEscape:()=>{t.focus()},type:U}),Qo=cw(t),Zs=F0(t),_s=NS(t),Gc=SD(t),Dr=Hn(),zg=Qo||Zs||_s,ja=()=>Qo?[Mo]:Zs?[Dn]:[],Qb=Gc?[Dr,sn]:[sn];return ur.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(zg?[]:["tox-editor-header--empty"]),...gs},components:z([_s?Qb:[],ja(),iw(t)?[]:[W.asSpec()]]),sticky:uw(t),editor:t,sharedBackstage:it.popup.shared})},Hn=()=>ur.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Nn=()=>{const gs=ur.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),sn=ur.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[gs,sn]}},ho=()=>{const gs=lw(t),sn=Hs(Jr(),gs)&&_t(gs,"display")==="grid",Dn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(D),attributes:{..._d.isRtl()?{dir:"rtl"}:{}}},behaviours:cn([ai.config({useFixed:()=>i.isDocked(le)})])},Mo={dom:{styles:{width:document.body.clientWidth+"px"}},events:ir([Pt(xp(),_s=>{$n(_s.element,"width",document.body.clientWidth+"px")})])},Qo=vi(hr(Dn,sn?Mo:{})),Zs=cN(Qo);return p.set(Zs),{sink:Qo,mothership:Zs}},bo=At,Wo=()=>{const gs=yn(),sn=Nn(),Dn=ur.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:it.popup}),Mo=ur.parts.viewWrapper({backstage:it.popup}),Qo=wD(t)&&!s?_.some(Wz(t,it.popup.shared.providers)):_.none(),Zs=z([M?[]:[gs],s?[]:[sn],M?[gs]:[]]),_s=ur.parts.editorContainer({components:z([Zs,s?[]:Qo.toArray()])}),Gc=l_(t),Dr={role:"application",..._d.isRtl()?{dir:"rtl"}:{},...Gc?{"aria-hidden":"true"}:{}},zg=vi(ur.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(s?["tox-tinymce-inline"]:[]).concat(M?["tox-tinymce--toolbar-bottom"]:[]).concat(D),styles:{visibility:"hidden",...Gc?{opacity:"0",border:"0"}:{}},attributes:Dr},components:[_s,...s?[]:[Mo],Dn],behaviours:cn([Ca(),xo.config({disableClass:"tox-tinymce--disabled"}),fo.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),ja=cN(zg);return g.set(ja),{mothership:ja,outerContainer:zg}},ys=gs=>{const sn=s4(h9(t)),Dn=s4(p9(t));return t.inline||(tl("div","width",Dn)&&$n(gs.element,"width",Dn),tl("div","height",sn)?$n(gs.element,"height",sn):$n(gs.element,"height","400px")),sn},oo=gs=>{t.addShortcut("alt+F9","focus menubar",()=>{ur.focusMenubar(gs)}),t.addShortcut("alt+F10","focus toolbar",()=>{ur.focusToolbar(gs)}),t.addCommand("ToggleToolbarDrawer",()=>{ur.toggleToolbarDrawer(gs)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>ur.isToolbarDrawerToggled(gs))},Xo=gs=>{const{mainUi:sn,popupUi:Dn,uiMotherships:Mo}=gs;on(sw(t),(I4,qP)=>{t.ui.registry.addGroupToolbarButton(qP,I4)});const{buttons:Qo,menuItems:Zs,contextToolbars:_s,sidebars:Gc,views:Dr}=t.ui.registry.getAll(),zg=aw(t),ja={menuItems:Zs,menus:TD(t),menubar:hD(t),toolbar:zg.getOrThunk(()=>rw(t)),allowToolbarGroups:U===Zu.floating,buttons:Qo,sidebar:Gc,views:Dr};oo(sn.outerContainer),li(t,sn.mothership,Mo),i.setup(t,it.popup.shared,le),K9(t,it.popup),fz(t,it.popup.shared.getSink,it.popup),B7(t),G7(t,gn,it.popup.shared),w4(t,_s,Dn.sink,{backstage:it.popup}),zz(t,Dn.sink);const Qb=t.getElement(),p2=ys(sn.outerContainer),GP={targetNode:Qb,height:p2};return a.render(t,gs,ja,it.popup,GP)},Ms=()=>{const gs=Wo(),sn=ho(),Dn=bo(sn);d.dialogUi.set(sn),d.popupUi.set(Dn),d.mainUi.set(gs);const Mo={popupUi:Dn,dialogUi:sn,mainUi:gs,uiMotherships:d.getUiMotherships()};return Xo(Mo)};return{popups:{backstage:it.popup,getMothership:()=>NP("popups",p)},dialogs:{backstage:it.dialog,getMothership:()=>NP("dialogs",p)},renderUI:Ms}},Zz=(t,s)=>{const a=_.from(or(t,"id")).fold(()=>{const i=Un("dialog-describe");return So(s,"id",i),i},At);So(t,"aria-describedby",a)},jz=(t,s)=>{const a=B(t,"id").fold(()=>{const i=Un("dialog-label");return So(s,"id",i),i},At);So(t,"aria-labelledby",a)},Gz=Y([Tt("lazySink"),Ns("dragBlockClass"),Oa("getBounds",qa),Ke("useTabstopAt",Ne),Ke("eventOrder",{}),Da("modalBehaviours",[fo]),Gi("onExecute"),Hv("onEscape")]),c2={sketch:At},$4=Y([cu({name:"draghandle",overrides:(t,s)=>({behaviours:cn([Pg.config({mode:"mouse",getTarget:a=>Jd(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Wc({schema:[Tt("dom")],name:"title"}),Wc({factory:c2,schema:[Tt("dom")],name:"close"}),Wc({factory:c2,schema:[Tt("dom")],name:"body"}),cu({factory:c2,schema:[Tt("dom")],name:"footer"}),Hu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Ke("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Ke("components",[])],name:"blocker"})]),qz=(t,s,a,i)=>{const d=zr(),g=W=>{d.set(W);const le=t.lazySink(W).getOrDie(),he=i.blocker(),nt=le.getSystem().build({...he,components:he.components.concat([hl(W)]),behaviours:cn([_o.config({}),ms("dialog-blocker-events",[Ja(Zm(),()=>{fo.focusIn(W)})])])});Ac(le,nt),fo.focusIn(W)},p=W=>{d.clear(),oa(W.element).each(le=>{W.getSystem().getByDom(le).each(he=>{Oc(he)})})},w=W=>Fn(W,t,"body"),T=W=>Fn(W,t,"footer"),A=(W,le)=>{Mg.block(W,le)},D=W=>{Mg.unblock(W)},M=Un("modal-events"),U={...t.eventOrder,[fd()]:[M].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:w,getFooter:T,setIdle:D,setBusy:A},eventOrder:U,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:fc(t.modalBehaviours,[Ho.config({}),fo.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),Mg.config({getRoot:d.get}),ms(M,[Hr(W=>{jz(W.element,Fn(W,t,"title").element),Zz(W.element,Fn(W,t,"body").element)})])])}},Za=Zc({name:"ModalDialog",configFields:Gz(),partFields:$4(),factory:qz,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),Kz=ro([Ra,C_].concat(j0)),Yz=ti,B4=[x_("button"),pm,il("align","end",["start","end"]),Z0,ju,Vf("buttonType",["primary","secondary"])],$P=[...B4,Eg],P4=[zf("type",["submit","cancel","custom"]),...$P],Kb=[zf("type",["menu"]),W0,hw,pm,gi("items",Kz),...B4],BP=fi("type",{submit:P4,cancel:P4,custom:P4,menu:Kb}),Xz=[Ra,Eg,zf("level",["info","warn","error","success"]),VD,Ke("url","")],Nk=ro(Xz),vv=t=>[Ra,t],Mk=[Ra,Eg,ju,x_("button"),pm,A5,Vf("buttonType",["primary","secondary","toolbar"]),Z0],PP=ro(Mk),Fg=[Ra,C_],Na=Fg.concat([zS]),$k=Fg.concat([S_,ju]),FP=ro($k),IP=ti,Jz=Na.concat([US("auto")]),Qz=ro(Jz),mp=al([fw,Eg,VD]),RU=Na.concat([yr("storageKey","default")]),eV=ro(RU),LP=Ea,Bk=ro(Na),HP=Ea,tV=Fg.concat([yr("tag","textarea"),aa("scriptId"),aa("scriptUrl"),C("settings",void 0)]),nV=Fg.concat([yr("tag","textarea"),ba("init")]),oV=ra(t=>Rs("customeditor.old",Ka(nV),t).orThunk(()=>Rs("customeditor.new",Ka(tV),t))),sV=Ea,NU=ro(Na),rV=Vm(),aV=t=>[Ra,kv("columns"),t],MU=[Ra,aa("html"),il("presets","presentation",["presentation","document"])],cV=ro(MU),iV=Na.concat([Aa("sandboxed",!0),Aa("transparent",!0)]),u2=ro(iV),lV=Ea,uV=ro(Fg.concat([Xa("height")])),zP=ro([aa("url"),zd("zoom"),zd("cachedWidth"),zd("cachedHeight")]),dV=Na.concat([Xa("inputMode"),Xa("placeholder"),Aa("maximized",!1),ju]),$U=ro(dV),e=Ea,n=t=>[Ra,S_,t],o=[Eg,fw],r=[Eg,gi("items",l1("items",()=>c))],c=Lt([ro(o),ro(r)]),u=Na.concat([gi("items",c),ju]),f=ro(u),b=Ea,y=Na.concat([tu("items",[Eg,fw]),u1("size",1),ju]),x=ro(y),N=Ea,P=Na.concat([Aa("constrain",!0),ju]),L=ro(P),ce=ro([aa("width"),aa("height")]),ie=Fg.concat([S_,u1("min",0),u1("max",0)]),ee=ro(ie),ue=Ur,Re=[Ra,gi("header",Ea),gi("cells",Qc(Ea))],Ae=ro(Re),je=Na.concat([Xa("placeholder"),Aa("maximized",!1),ju]),et=ro(je),xt=Ea,un=Na.concat([il("filetype","file",["image","media","file"]),ju]),Xt=ro(un),lt=ro([fw,WS]),Je=t=>Ya("items","items",lc(),Qc(ra(s=>Rs(`Checking item of ${t}`,Sn,s).fold(a=>Bo.error(eu(a)),a=>Bo.value(a))))),Sn=Eu(()=>oh("type",{alertbanner:Nk,bar:ro(vv(Je("bar"))),button:PP,checkbox:FP,colorinput:eV,colorpicker:Bk,dropzone:NU,grid:ro(aV(Je("grid"))),iframe:u2,input:$U,listbox:f,selectbox:x,sizeinput:L,slider:ee,textarea:et,urlinput:Xt,customeditor:oV,htmlpanel:cV,imagepreview:uV,collection:Qz,label:ro(n(Je("label"))),table:Ae,panel:lo})),no=[Ra,Ke("classes",[]),gi("items",Sn)],lo=ro(no),Vo=[x_("tab"),T5,gi("items",Sn)],bs=[Ra,tu("tabs",Vo)],js=ro(bs),Ws=$P,Ma=BP,Si=ro([aa("title"),Oi("body",oh("type",{panel:lo,tabpanel:js})),yr("size","normal"),gi("buttons",Ma),Ke("initialData",{}),Oa("onAction",oe),Oa("onChange",oe),Oa("onSubmit",oe),Oa("onClose",oe),Oa("onCancel",oe),Oa("onTabChange",oe)]),Gt=t=>Rs("dialog",Si,t),Uo=ro([zf("type",["cancel","custom"]),...Ws]),go=ro([aa("title"),aa("url"),zd("height"),zd("width"),Wf("buttons",Uo),Oa("onAction",oe),Oa("onCancel",oe),Oa("onClose",oe),Oa("onMessage",oe)]),Or=t=>Rs("dialog",go,t),Cn=t=>Kt(t)?[t].concat(K(en(t),Cn)):Tn(t)?K(t,Cn):[],Ao=t=>qt(t.type)&&qt(t.name),wo={checkbox:IP,colorinput:LP,colorpicker:HP,dropzone:rV,input:e,iframe:lV,imagepreview:zP,selectbox:N,sizeinput:ce,slider:ue,listbox:b,size:ce,textarea:xt,urlinput:lt,customeditor:sV,collection:mp,togglemenuitem:Yz},hn=t=>_.from(wo[t.type]),fs=t=>xe(Cn(t),Ao),rs=t=>{const s=fs(t),a=K(s,i=>hn(i).fold(()=>[],d=>[Oi(i.name,d)]));return ro(a)},oc=t=>{var s;const a=Ql(Gt(t)),i=rs(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},Sr={open:(t,s)=>{const a=oc(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Ql(Or(s));return t(a)},redial:t=>oc(t)},Ro=t=>{const s=[],a={};return Dt(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Bo.error(s):Bo.value(a)},Ps=(t,s,a)=>{const i=wr(Fb.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ve(t.items,g=>ss(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:cn([fo.config({mode:"acyclic",useTabstopAt:we(sv)}),qu.memento(i),Ku.memento(i,{postprocess:d=>Ro(d).fold(g=>(console.error(g),{}),At)})])}},xa=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:yS(t.action),behaviours:fc(t.tabButtonBehaviours,[_o.config({}),fo.config({mode:"execution",useSpace:!0,useEnter:!0}),vn.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),vr=Fl({name:"TabButton",configFields:[Ke("uid",void 0),Tt("value"),Ya("dom","dom",Pm(()=>({attributes:{role:"tab",id:Un("aria"),"aria-selected":"false"}})),ei()),Ns("action"),Ke("domModification",{}),Da("tabButtonBehaviours",[_o,fo,vn]),Tt("view")],factory:xa}),Yr=Y([Tt("tabs"),Tt("dom"),Ke("clickToDismiss",!1),Da("tabbarBehaviours",[Ls,fo]),tm(["tabClass","selectedClass"])]),ua=ub({factory:vr,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{Ls.dehighlight(i,d),po(i,x2(),{tabbar:i,button:d})},a=(i,d)=>{Ls.highlight(i,d),po(i,p1(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=Ls.isHighlighted(d,i);(()=>g&&t.clickToDismiss?s:g?oe:a)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Br=Y([ua]),$a=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:fc(t.tabbarBehaviours,[Ls.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{So(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{So(g.element,"aria-selected","false")}}),fo.config({mode:"flow",getInitial:d=>Ls.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),gu=Zc({name:"Tabbar",configFields:Yr(),partFields:Br(),factory:$a}),ui=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:fc(t.tabviewBehaviours,[Ho.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Sm=Fl({name:"Tabview",configFields:[Da("tabviewBehaviours",[Ho])],factory:ui}),hu=Y([Ke("selectFirst",!0),us("onChangeTab"),us("onDismissTab"),Ke("tabs",[]),Da("tabSectionBehaviours",[])]),Yb=Wc({factory:gu,schema:[Tt("dom"),cl("markers",[Tt("tabClass"),Tt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Xb=Wc({factory:Sm,name:"tabview"}),xm=Y([Yb,Xb]),$d=(t,s,a,i)=>{const d=p=>{const w=vn.getValue(p);sr(p,t,"tabview").each(T=>{se(t.tabs,D=>D.value===w).each(D=>{const M=D.view();B(p.element,"id").each(U=>{So(T.element,"aria-labelledby",U)}),Ho.set(T,M),t.onChangeTab(T,p,M)})})},g=(p,w)=>{sr(p,t,"tabbar").each(T=>{w(T).each(jd)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:vg(t.tabSectionBehaviours),events:ir(z([t.selectFirst?[Hr((p,w)=>{g(p,Ls.getFirst)})]:[],[Pt(p1(),(p,w)=>{const T=w.event.button;d(T)}),Pt(x2(),(p,w)=>{const T=w.event.button;t.onDismissTab(p,T)})]])),apis:{getViewItems:p=>sr(p,t,"tabview").map(w=>Ho.contents(w)).getOr([]),showTab:(p,w)=>{g(p,A=>{const D=Ls.getCandidates(A);return se(D,U=>vn.getValue(U)===w).filter(U=>!Ls.isHighlighted(A,U))})}}}},Xr=Zc({name:"TabSection",configFields:hu(),partFields:xm(),factory:$d,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Ju=(t,s,a)=>Ve(t,(i,d)=>{Ho.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Ho.set(a,[]),g.height}),km=t=>co(Jt(t,(s,a)=>s>a?-1:s<a?1:0)),Qu=(t,s,a)=>{const i=mi(t).dom,d=Jd(t,".tox-dialog-wrap").getOr(t),g=_t(d,"position")==="fixed";let p;g?p=Math.max(i.clientHeight,window.innerHeight):p=Math.max(i.offsetHeight,i.scrollHeight);const w=ut(s),A=s.dom.offsetLeft>=a.dom.offsetLeft+gr(a)?Math.max(ut(a),w):w,D=parseInt(_t(t,"margin-top"),10)||0,M=parseInt(_t(t,"margin-bottom"),10)||0,W=ut(t)+D+M-A;return p-W},ed=(t,s)=>{co(t).each(a=>Xr.showTab(s,a.value))},Tm=(t,s)=>{$n(t,"height",s+"px"),$n(t,"flex-basis",s+"px")},Mc=(t,s,a)=>{Jd(t,'[role="dialog"]').each(i=>{ia(i,'[role="tablist"]').each(d=>{a.get().map(g=>($n(s,"height","0"),$n(s,"flex-basis","0"),Math.min(g,Qu(i,s,d)))).each(g=>{Tm(s,g)})})})},Em=t=>ia(t,'[role="tabpanel"]'),Rf=t=>{const s=zr();return{extraEvents:[Hr(d=>{const g=d.element;Em(g).each(p=>{$n(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(w=>{const T=Ju(t,p,w);km(T).fold(s.clear,s.set)}),Mc(g,p,s),$o(p,"visibility"),ed(t,d),requestAnimationFrame(()=>{Mc(g,p,s)})})}),Pt(xp(),d=>{const g=d.element;Em(g).each(p=>{Mc(g,p,s)})}),Pt(ux,(d,g)=>{const p=d.element;Em(p).each(w=>{const T=Ki(qo(w));$n(w,"visibility","hidden");const A=Js(w,"height").map(U=>parseInt(U,10));$o(w,"height"),$o(w,"flex-basis");const D=w.dom.getBoundingClientRect().height;A.forall(U=>D>U)?(s.set(D),Mc(p,w,s)):A.each(U=>{Tm(w,U)}),$o(w,"visibility"),T.each(om)})})],selectFirst:!1}},td="send-data-to-section",Ig="send-data-to-view",Pk=(t,s,a)=>{const i=V({}),d=A=>{const D=vn.getValue(A),M=Ro(D).getOr({}),U=i.get(),W=hr(U,M);i.set(W)},g=A=>{const D=i.get();vn.setValue(A,D)},p=V(null),w=Ve(t.tabs,A=>({value:A.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[za(a.shared.providers.translate(A.title))],view:()=>[Fb.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:Ve(A.items,M=>ss(D,M,s,a)),formBehaviours:cn([fo.config({mode:"acyclic",useTabstopAt:we(sv)}),ms("TabView.form.events",[Hr(g),Dl(d)]),Nl.config({channels:Qs([{key:td,value:{onReceive:d}},{key:Ig,value:{onReceive:g}}])})])}))]})),T=Rf(w);return Xr.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(A,D,M)=>{const U=vn.getValue(D);po(A,dN,{name:U,oldName:p.get()}),p.set(U)},tabs:w,components:[Xr.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[gu.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:cn([Sa.config({})])}),Xr.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:cn([ms("tabpanel",T.extraEvents),fo.config({mode:"acyclic"}),os.config({find:A=>co(Xr.getViewItems(A))}),Ku.withComp(_.none(),A=>(A.getSystem().broadcastOn([td],{}),i.get()),(A,D)=>{i.set(D),A.getSystem().broadcastOn([Ig],{})})])})},d2=Un("update-dialog"),m2=Un("update-title"),Fk=Un("update-body"),Ik=Un("update-footer"),Lg=Un("body-send-message"),fp=(t,s,a,i,d)=>{const g=T=>{const A=T.body;switch(A.type){case"tabpanel":return[Pk(A,T.initialData,i)];default:return[Ps(A,T.initialData,i)]}},p=(T,A)=>_.some({isTabPanel:()=>A.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(T=>({id:T})).getOr({}),...d?w:{}}},components:[],behaviours:cn([qu.childAt(0),Ul.config({channel:`${Fk}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},tt=(t,s,a,i,d)=>fp(t,s,_.some(a),i,d),at=(t,s,a)=>{const i=fp(t,s,_.none(),a,!1);return Za.parts.body(i)},Wt=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Pw({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:cn([Sa.config({}),_o.config({})])})]}],behaviours:cn([fo.config({mode:"acyclic",useTabstopAt:we(sv)})])};return Za.parts.body(s)};function $t(t){return $t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$t(t)}function Xn(t,s){return Xn=Object.setPrototypeOf||function(i,d){return i.__proto__=d,i},Xn(t,s)}function Es(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $r(t,s,a){return Es()?$r=Reflect.construct:$r=function(d,g,p){var w=[null];w.push.apply(w,g);var T=Function.bind.apply(d,w),A=new T;return p&&Xn(A,p.prototype),A},$r.apply(null,arguments)}function tr(t){return pu(t)||f2(t)||VP(t)||UP()}function pu(t){if(Array.isArray(t))return Lk(t)}function f2(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VP(t,s){if(!!t){if(typeof t=="string")return Lk(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Lk(t,s)}}function Lk(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,i=new Array(s);a<s;a++)i[a]=t[a];return i}function UP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mV=Object.hasOwnProperty,Yo=Object.setPrototypeOf,mt=Object.isFrozen,Ln=Object.getPrototypeOf,No=Object.getOwnPropertyDescriptor,Ks=Object.freeze,pc=Object.seal,kl=Object.create,Fi=typeof Reflect<"u"&&Reflect,Jb=Fi.apply,xi=Fi.construct;Jb||(Jb=function(s,a,i){return s.apply(a,i)}),Ks||(Ks=function(s){return s}),pc||(pc=function(s){return s}),xi||(xi=function(s,a){return $r(s,tr(a))});var WP=Hg(Array.prototype.forEach),fV=Hg(Array.prototype.pop),g2=Hg(Array.prototype.push),F4=Hg(String.prototype.toLowerCase),TW=Hg(String.prototype.match),yv=Hg(String.prototype.replace),EW=Hg(String.prototype.indexOf),_W=Hg(String.prototype.trim),nd=Hg(RegExp.prototype.test),gV=AW(TypeError);function Hg(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return Jb(t,s,i)}}function AW(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return xi(t,a)}}function xr(t,s){Yo&&Yo(t,null);for(var a=s.length;a--;){var i=s[a];if(typeof i=="string"){var d=F4(i);d!==i&&(mt(s)||(s[a]=d),i=d)}t[i]=!0}return t}function h2(t){var s=kl(null),a;for(a in t)Jb(mV,t,[a])&&(s[a]=t[a]);return s}function ZP(t,s){for(;t!==null;){var a=No(t,s);if(a){if(a.get)return Hg(a.get);if(typeof a.value=="function")return Hg(a.value)}t=Ln(t)}function i(d){return console.warn("fallback value for",d),null}return i}var BU=Ks(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hV=Ks(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pV=Ks(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),OW=Ks(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),bV=Ks(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),DW=Ks(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),PU=Ks(["#text"]),FU=Ks(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),vV=Ks(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),IU=Ks(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),jP=Ks(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),RW=pc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),NW=pc(/<%[\w\W]*|[\w\W]*%>/gm),MW=pc(/^data-[\-\w.\u00B7-\uFFFF]/),$W=pc(/^aria-[\-\w]+$/),BW=pc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),PW=pc(/^(?:\w+script|data):/i),FW=pc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),IW=pc(/^html$/i),LW=function(){return typeof window>"u"?null:window},HW=function(s,a){if($t(s)!=="object"||typeof s.createPolicy!="function")return null;var i=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(i=a.currentScript.getAttribute(d));var g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML:function(w){return w}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function LU(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:LW(),s=function(ft){return LU(ft)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,i=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,w=t.Element,T=t.NodeFilter,A=t.NamedNodeMap,D=A===void 0?t.NamedNodeMap||t.MozNamedAttrMap:A,M=t.HTMLFormElement,U=t.DOMParser,W=t.trustedTypes,le=w.prototype,he=ZP(le,"cloneNode"),nt=ZP(le,"nextSibling"),Me=ZP(le,"childNodes"),ot=ZP(le,"parentNode");if(typeof g=="function"){var gn=i.createElement("template");gn.content&&gn.content.ownerDocument&&(i=gn.content.ownerDocument)}var it=HW(W,a),yn=it?it.createHTML(""):"",Hn=i,Nn=Hn.implementation,ho=Hn.createNodeIterator,bo=Hn.createDocumentFragment,Wo=Hn.getElementsByTagName,ys=a.importNode,oo={};try{oo=h2(i).documentMode?i.documentMode:{}}catch{}var Xo={};s.isSupported=typeof ot=="function"&&Nn&&typeof Nn.createHTMLDocument<"u"&&oo!==9;var Ms=RW,gs=NW,sn=MW,Dn=$W,Mo=PW,Qo=FW,Zs=BW,_s=null,Gc=xr({},[].concat(tr(BU),tr(hV),tr(pV),tr(bV),tr(PU))),Dr=null,zg=xr({},[].concat(tr(FU),tr(vV),tr(IU),tr(jP))),ja=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Qb=null,p2=null,GP=!0,I4=!0,qP=!1,Hk=!1,b2=!1,SV=!1,xV=!1,zk=!1,KP=!1,YP=!1,cW=!0,kV=!0,L4=!1,Vk={},Uk=null,iW=xr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),lW=null,uW=xr({},["audio","video","img","source","image","track"]),TV=null,dW=xr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),EV="http://www.w3.org/1998/Math/MathML",_V="http://www.w3.org/2000/svg",wv="http://www.w3.org/1999/xhtml",XP=wv,AV=!1,Wk,fZ=["application/xhtml+xml","text/html"],gZ="text/html",v2,Zk=null,hZ=i.createElement("form"),mW=function(ft){return ft instanceof RegExp||ft instanceof Function},OV=function(ft){Zk&&Zk===ft||((!ft||$t(ft)!=="object")&&(ft={}),ft=h2(ft),_s="ALLOWED_TAGS"in ft?xr({},ft.ALLOWED_TAGS):Gc,Dr="ALLOWED_ATTR"in ft?xr({},ft.ALLOWED_ATTR):zg,TV="ADD_URI_SAFE_ATTR"in ft?xr(h2(dW),ft.ADD_URI_SAFE_ATTR):dW,lW="ADD_DATA_URI_TAGS"in ft?xr(h2(uW),ft.ADD_DATA_URI_TAGS):uW,Uk="FORBID_CONTENTS"in ft?xr({},ft.FORBID_CONTENTS):iW,Qb="FORBID_TAGS"in ft?xr({},ft.FORBID_TAGS):{},p2="FORBID_ATTR"in ft?xr({},ft.FORBID_ATTR):{},Vk="USE_PROFILES"in ft?ft.USE_PROFILES:!1,GP=ft.ALLOW_ARIA_ATTR!==!1,I4=ft.ALLOW_DATA_ATTR!==!1,qP=ft.ALLOW_UNKNOWN_PROTOCOLS||!1,Hk=ft.SAFE_FOR_TEMPLATES||!1,b2=ft.WHOLE_DOCUMENT||!1,zk=ft.RETURN_DOM||!1,KP=ft.RETURN_DOM_FRAGMENT||!1,YP=ft.RETURN_TRUSTED_TYPE||!1,xV=ft.FORCE_BODY||!1,cW=ft.SANITIZE_DOM!==!1,kV=ft.KEEP_CONTENT!==!1,L4=ft.IN_PLACE||!1,Zs=ft.ALLOWED_URI_REGEXP||Zs,XP=ft.NAMESPACE||wv,ft.CUSTOM_ELEMENT_HANDLING&&mW(ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ja.tagNameCheck=ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ft.CUSTOM_ELEMENT_HANDLING&&mW(ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ja.attributeNameCheck=ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ft.CUSTOM_ELEMENT_HANDLING&&typeof ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ja.allowCustomizedBuiltInElements=ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Wk=fZ.indexOf(ft.PARSER_MEDIA_TYPE)===-1?Wk=gZ:Wk=ft.PARSER_MEDIA_TYPE,v2=Wk==="application/xhtml+xml"?function(Zn){return Zn}:F4,Hk&&(I4=!1),KP&&(zk=!0),Vk&&(_s=xr({},tr(PU)),Dr=[],Vk.html===!0&&(xr(_s,BU),xr(Dr,FU)),Vk.svg===!0&&(xr(_s,hV),xr(Dr,vV),xr(Dr,jP)),Vk.svgFilters===!0&&(xr(_s,pV),xr(Dr,vV),xr(Dr,jP)),Vk.mathMl===!0&&(xr(_s,bV),xr(Dr,IU),xr(Dr,jP))),ft.ADD_TAGS&&(_s===Gc&&(_s=h2(_s)),xr(_s,ft.ADD_TAGS)),ft.ADD_ATTR&&(Dr===zg&&(Dr=h2(Dr)),xr(Dr,ft.ADD_ATTR)),ft.ADD_URI_SAFE_ATTR&&xr(TV,ft.ADD_URI_SAFE_ATTR),ft.FORBID_CONTENTS&&(Uk===iW&&(Uk=h2(Uk)),xr(Uk,ft.FORBID_CONTENTS)),kV&&(_s["#text"]=!0),b2&&xr(_s,["html","head","body"]),_s.table&&(xr(_s,["tbody"]),delete Qb.tbody),Ks&&Ks(ft),Zk=ft)},fW=xr({},["mi","mo","mn","ms","mtext"]),gW=xr({},["foreignobject","desc","title","annotation-xml"]),pZ=xr({},["title","style","font","a","script"]),JP=xr({},hV);xr(JP,pV),xr(JP,OW);var DV=xr({},bV);xr(DV,DW);var bZ=function(ft){var Zn=ot(ft);(!Zn||!Zn.tagName)&&(Zn={namespaceURI:wv,tagName:"template"});var Po=F4(ft.tagName),Ba=F4(Zn.tagName);return ft.namespaceURI===_V?Zn.namespaceURI===wv?Po==="svg":Zn.namespaceURI===EV?Po==="svg"&&(Ba==="annotation-xml"||fW[Ba]):Boolean(JP[Po]):ft.namespaceURI===EV?Zn.namespaceURI===wv?Po==="math":Zn.namespaceURI===_V?Po==="math"&&gW[Ba]:Boolean(DV[Po]):ft.namespaceURI===wv?Zn.namespaceURI===_V&&!gW[Ba]||Zn.namespaceURI===EV&&!fW[Ba]?!1:!DV[Po]&&(pZ[Po]||!JP[Po]):!1},e1=function(ft){g2(s.removed,{element:ft});try{ft.parentNode.removeChild(ft)}catch{try{ft.outerHTML=yn}catch{ft.remove()}}},QP=function(ft,Zn){try{g2(s.removed,{attribute:Zn.getAttributeNode(ft),from:Zn})}catch{g2(s.removed,{attribute:null,from:Zn})}if(Zn.removeAttribute(ft),ft==="is"&&!Dr[ft])if(zk||KP)try{e1(Zn)}catch{}else try{Zn.setAttribute(ft,"")}catch{}},hW=function(ft){var Zn,Po;if(xV)ft="<remove></remove>"+ft;else{var Ba=TW(ft,/^[\r\n\t ]+/);Po=Ba&&Ba[0]}Wk==="application/xhtml+xml"&&(ft='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ft+"</body></html>");var Bd=it?it.createHTML(ft):ft;if(XP===wv)try{Zn=new U().parseFromString(Bd,Wk)}catch{}if(!Zn||!Zn.documentElement){Zn=Nn.createDocument(XP,"template",null);try{Zn.documentElement.innerHTML=AV?"":Bd}catch{}}var bu=Zn.body||Zn.documentElement;return ft&&Po&&bu.insertBefore(i.createTextNode(Po),bu.childNodes[0]||null),XP===wv?Wo.call(Zn,b2?"html":"body")[0]:b2?Zn.documentElement:bu},pW=function(ft){return ho.call(ft.ownerDocument||ft,ft,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT,null,!1)},vZ=function(ft){return ft instanceof M&&(typeof ft.nodeName!="string"||typeof ft.textContent!="string"||typeof ft.removeChild!="function"||!(ft.attributes instanceof D)||typeof ft.removeAttribute!="function"||typeof ft.setAttribute!="function"||typeof ft.namespaceURI!="string"||typeof ft.insertBefore!="function")},H4=function(ft){return $t(p)==="object"?ft instanceof p:ft&&$t(ft)==="object"&&typeof ft.nodeType=="number"&&typeof ft.nodeName=="string"},t1=function(ft,Zn,Po){!Xo[ft]||WP(Xo[ft],function(Ba){Ba.call(s,Zn,Po,Zk)})},bW=function(ft){var Zn;if(t1("beforeSanitizeElements",ft,null),vZ(ft)||nd(/[\u0080-\uFFFF]/,ft.nodeName))return e1(ft),!0;var Po=v2(ft.nodeName);if(t1("uponSanitizeElement",ft,{tagName:Po,allowedTags:_s}),ft.hasChildNodes()&&!H4(ft.firstElementChild)&&(!H4(ft.content)||!H4(ft.content.firstElementChild))&&nd(/<[/\w]/g,ft.innerHTML)&&nd(/<[/\w]/g,ft.textContent)||Po==="select"&&nd(/<template/i,ft.innerHTML))return e1(ft),!0;if(!_s[Po]||Qb[Po]){if(!Qb[Po]&&yW(Po)&&(ja.tagNameCheck instanceof RegExp&&nd(ja.tagNameCheck,Po)||ja.tagNameCheck instanceof Function&&ja.tagNameCheck(Po)))return!1;if(kV&&!Uk[Po]){var Ba=ot(ft)||ft.parentNode,Bd=Me(ft)||ft.childNodes;if(Bd&&Ba)for(var bu=Bd.length,Wl=bu-1;Wl>=0;--Wl)Ba.insertBefore(he(Bd[Wl],!0),nt(ft))}return e1(ft),!0}return ft instanceof w&&!bZ(ft)||(Po==="noscript"||Po==="noembed")&&nd(/<\/no(script|embed)/i,ft.innerHTML)?(e1(ft),!0):(Hk&&ft.nodeType===3&&(Zn=ft.textContent,Zn=yv(Zn,Ms," "),Zn=yv(Zn,gs," "),ft.textContent!==Zn&&(g2(s.removed,{element:ft.cloneNode()}),ft.textContent=Zn)),t1("afterSanitizeElements",ft,null),!1)},vW=function(ft,Zn,Po){if(cW&&(Zn==="id"||Zn==="name")&&(Po in i||Po in hZ))return!1;if(!(I4&&!p2[Zn]&&nd(sn,Zn))){if(!(GP&&nd(Dn,Zn))){if(!Dr[Zn]||p2[Zn]){if(!(yW(ft)&&(ja.tagNameCheck instanceof RegExp&&nd(ja.tagNameCheck,ft)||ja.tagNameCheck instanceof Function&&ja.tagNameCheck(ft))&&(ja.attributeNameCheck instanceof RegExp&&nd(ja.attributeNameCheck,Zn)||ja.attributeNameCheck instanceof Function&&ja.attributeNameCheck(Zn))||Zn==="is"&&ja.allowCustomizedBuiltInElements&&(ja.tagNameCheck instanceof RegExp&&nd(ja.tagNameCheck,Po)||ja.tagNameCheck instanceof Function&&ja.tagNameCheck(Po))))return!1}else if(!TV[Zn]){if(!nd(Zs,yv(Po,Qo,""))){if(!((Zn==="src"||Zn==="xlink:href"||Zn==="href")&&ft!=="script"&&EW(Po,"data:")===0&&lW[ft])){if(!(qP&&!nd(Mo,yv(Po,Qo,"")))){if(Po)return!1}}}}}}return!0},yW=function(ft){return ft.indexOf("-")>0},wW=function(ft){var Zn,Po,Ba,Bd;t1("beforeSanitizeAttributes",ft,null);var bu=ft.attributes;if(!!bu){var Wl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Dr};for(Bd=bu.length;Bd--;){Zn=bu[Bd];var eF=Zn,Zl=eF.name,CW=eF.namespaceURI;Po=Zl==="value"?Zn.value:_W(Zn.value),Ba=v2(Zl);var wZ=Po;if(Wl.attrName=Ba,Wl.attrValue=Po,Wl.keepAttr=!0,Wl.forceKeepAttr=void 0,t1("uponSanitizeAttribute",ft,Wl),Po=Wl.attrValue,!Wl.forceKeepAttr){if(!Wl.keepAttr){QP(Zl,ft);continue}if(nd(/\/>/i,Po)){QP(Zl,ft);continue}Hk&&(Po=yv(Po,Ms," "),Po=yv(Po,gs," "));var CZ=v2(ft.nodeName);if(!vW(CZ,Ba,Po)){QP(Zl,ft);continue}if(Po!==wZ)try{CW?ft.setAttributeNS(CW,Zl,Po):ft.setAttribute(Zl,Po)}catch{QP(Zl,ft)}}}t1("afterSanitizeAttributes",ft,null)}},yZ=function hs(ft){var Zn,Po=pW(ft);for(t1("beforeSanitizeShadowDOM",ft,null);Zn=Po.nextNode();)t1("uponSanitizeShadowNode",Zn,null),!bW(Zn)&&(Zn.content instanceof d&&hs(Zn.content),wW(Zn));t1("afterSanitizeShadowDOM",ft,null)};return s.sanitize=function(hs,ft){var Zn,Po,Ba,Bd,bu;if(AV=!hs,AV&&(hs="<!-->"),typeof hs!="string"&&!H4(hs)){if(typeof hs.toString!="function")throw gV("toString is not a function");if(hs=hs.toString(),typeof hs!="string")throw gV("dirty is not a string, aborting")}if(!s.isSupported){if($t(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof hs=="string")return t.toStaticHTML(hs);if(H4(hs))return t.toStaticHTML(hs.outerHTML)}return hs}if(SV||OV(ft),s.removed=[],typeof hs=="string"&&(L4=!1),L4){if(hs.nodeName){var Wl=v2(hs.nodeName);if(!_s[Wl]||Qb[Wl])throw gV("root node is forbidden and cannot be sanitized in-place")}}else if(hs instanceof p)Zn=hW("<!---->"),Po=Zn.ownerDocument.importNode(hs,!0),Po.nodeType===1&&Po.nodeName==="BODY"||Po.nodeName==="HTML"?Zn=Po:Zn.appendChild(Po);else{if(!zk&&!Hk&&!b2&&hs.indexOf("<")===-1)return it&&YP?it.createHTML(hs):hs;if(Zn=hW(hs),!Zn)return zk?null:YP?yn:""}Zn&&xV&&e1(Zn.firstChild);for(var eF=pW(L4?hs:Zn);Ba=eF.nextNode();)Ba.nodeType===3&&Ba===Bd||bW(Ba)||(Ba.content instanceof d&&yZ(Ba.content),wW(Ba),Bd=Ba);if(Bd=null,L4)return hs;if(zk){if(KP)for(bu=bo.call(Zn.ownerDocument);Zn.firstChild;)bu.appendChild(Zn.firstChild);else bu=Zn;return Dr.shadowroot&&(bu=ys.call(a,bu,!0)),bu}var Zl=b2?Zn.outerHTML:Zn.innerHTML;return b2&&_s["!doctype"]&&Zn.ownerDocument&&Zn.ownerDocument.doctype&&Zn.ownerDocument.doctype.name&&nd(IW,Zn.ownerDocument.doctype.name)&&(Zl="<!DOCTYPE "+Zn.ownerDocument.doctype.name+`>
`+Zl),Hk&&(Zl=yv(Zl,Ms," "),Zl=yv(Zl,gs," ")),it&&YP?it.createHTML(Zl):Zl},s.setConfig=function(hs){OV(hs),SV=!0},s.clearConfig=function(){Zk=null,SV=!1},s.isValidAttribute=function(hs,ft,Zn){Zk||OV({});var Po=v2(hs),Ba=v2(ft);return vW(Po,Ba,Zn)},s.addHook=function(hs,ft){typeof ft=="function"&&(Xo[hs]=Xo[hs]||[],g2(Xo[hs],ft))},s.removeHook=function(hs){if(Xo[hs])return fV(Xo[hs])},s.removeHooks=function(hs){Xo[hs]&&(Xo[hs]=[])},s.removeAllHooks=function(){Xo={}},s}var zW=LU();const VW=t=>zW().sanitize(t),UW=$0.deviceType.isTouch(),HU=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),zU=(t,s)=>Za.parts.close(Qi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:cn([Sa.config({})])})),VU=()=>Za.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),UU=(t,s)=>Za.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:$g(`<p>${VW(s.translate(t))}</p>`)}]}]}),WU=t=>Za.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),ZU=(t,s)=>[bm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),bm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],yV=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return Za.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),_.some(!0)),useTabstopAt:g=>!sv(g),dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:$g(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:UW?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:cn([_o.config({}),ms("dialog-events",t.dialogEvents.concat([Ja(Zm(),(g,p)=>{fo.focusIn(g)})])),ms("scroll-lock",[Hr(()=>{ya(Jr(),d)}),Dl(()=>{ca(Jr(),d)})]),...t.extraBehaviours]),eventOrder:{[ul()]:["dialog-events"],[fd()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[ih()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},jU=t=>Qi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[fm("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:s=>{zs(s,op)}}),GU=(t,s,a,i)=>{const d=g=>[za(i.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:cn([Ul.config({channel:`${m2}-${s}`,initialData:t,renderComponents:d})])}},qU=()=>({dom:$g('<div class="tox-dialog__draghandle"></div>')}),WW=(t,s,a,i)=>bm.sketch({dom:$g('<div class="tox-dialog__header"></div>'),components:[GU(t,s,_.some(a),i),qU(),jU(i)],containerBehaviours:cn([Pg.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Rl(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),ZW=(t,s,a)=>{const i=Za.parts.title(GU(t,s,_.none(),a)),d=Za.parts.draghandle(qU()),g=Za.parts.close(jU(a)),p=[i].concat(t.draggable?[d]:[]).concat([g]);return bm.sketch({dom:$g('<div class="tox-dialog__header"></div>'),components:p})},KU=(t,s,a)=>ZW({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),YU=(t,s,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:$g('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),XU=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{Za.setBusy(t(),(d,g)=>YU(i.message,g,s))},onUnblock:()=>{Za.setIdle(t())}}),JU=(t,s,a,i)=>{const d=(g,p)=>_.some(p);return vi(yV({...t,lazySink:i.shared.getSink,extraBehaviours:[Ul.config({channel:`${d2}-${t.id}`,updateState:d,initialData:s}),Ku.memory({}),...t.extraBehaviours],onEscape:g=>{zs(g,op)},dialogEvents:a,eventOrder:{[nu()]:[Ul.name(),Nl.name()],[fd()]:["scroll-lock",Ul.name(),"messages","dialog-events","alloy.base.behaviour"],[ih()]:["alloy.base.behaviour","dialog-events","messages",Ul.name(),"scroll-lock"]}}))},QU=t=>{const s=a=>{const i=Ve(a.items,d=>{const g=V(!1);return{...d,storage:g}});return{...a,items:i}};return Ve(t,a=>a.type==="menu"?s(a):a)},eW=t=>ke(t,(s,a)=>a.type==="menu"?ke(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),tW=(t,s)=>[uh(Zm(),Fw),t(_w,(a,i)=>{s.onClose(),i.onClose()}),t(op,(a,i,d,g)=>{i.onCancel(a),zs(g,_w)}),Pt(hA,(a,i)=>s.onUnblock()),Pt(gA,(a,i)=>s.onBlock(i.event))],wV={initUrlDialog:(t,s)=>{const a=(d,g)=>Pt(d,(p,w)=>{i(p,(T,A)=>{g(t(),T,w.event,p)})}),i=(d,g)=>{Ul.getState(d).get().each(p=>{g(p,d)})};return[...tW(a,s),a(Ag,(d,g,p)=>{g.onAction(d,{name:p.name})})]},initDialog:(t,s,a)=>{const i=(g,p)=>Pt(g,(w,T)=>{d(w,(A,D)=>{p(t(),A,T.event,w)})}),d=(g,p)=>{Ul.getState(g).get().each(w=>{p(w.internalDialog,g)})};return[...tW(i,s),i(Aw,(g,p)=>p.onSubmit(g)),i(zl,(g,p,w)=>{p.onChange(g,{name:w.name})}),i(Ag,(g,p,w,T)=>{const A=()=>fo.focusIn(T),D=W=>J(W,"disabled")||B(W,"aria-disabled").exists(le=>le==="true"),M=qo(T.element),U=Ki(M);p.onAction(g,{name:w.name,value:w.value}),Ki(M).fold(A,W=>{D(W)||U.exists(le=>di(W,le)&&D(le))?A():a().toOptional().filter(le=>!di(le.element,W)).each(A)})}),i(dN,(g,p,w)=>{p.onTabChange(g,{newTabName:w.name,oldTabName:w.oldName})}),Dl(g=>{const p=t();vn.setValue(g,p.getData())})]}},jW=(t,s)=>Ix(t,t.type,s),GW=(t,s,a)=>se(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),qW=(t,s)=>{const a=s.map(w=>w.footerButtons).getOr([]),i=Ee(a,w=>w.align==="start"),d=(w,T)=>bm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${w}`]},components:Ve(T,A=>A.memento.asSpec())}),g=d("start",i.pass),p=d("end",i.fail);return[g,p]},nW=(t,s,a)=>{const i=(d,g)=>{const p=Ve(g.buttons,T=>{const A=wr(jW(T,a));return{name:T.name,align:T.align,memento:A}}),w=T=>GW(d,p,T);return _.some({lookupByName:w,footerButtons:p})};return{dom:$g('<div class="tox-dialog__footer"></div>'),components:[],behaviours:cn([Ul.config({channel:`${Ik}-${s}`,initialData:t,updateState:i,renderComponents:qW})])}},KW=(t,s,a)=>nW(t,s,a),oW=(t,s,a)=>Za.parts.footer(nW(t,s,a)),sW=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=os.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Fb.getField(i,s).orThunk(()=>{const d=t.getFooter();return Ul.getState(d).get().bind(p=>p.lookupByName(s))})}else return _.none()},YW=(t,s)=>{const a=t.getRoot();return Ul.getState(a).get().map(i=>Ql(Rs("data",i.dataValidator,s))).getOr(s)},rW=(t,s,a)=>{const i=le=>{const he=t.getRoot();he.getSystem().isConnected()&&le(he)},W={getData:()=>{const le=t.getRoot(),he=le.getSystem().isConnected()?t.getFormWrapper():le,nt=vn.getValue(he),Me=on(a,ot=>ot.get());return{...nt,...Me}},setData:le=>{i(he=>{const nt=W.getData(),Me=hr(nt,le),ot=YW(t,Me),gn=t.getFormWrapper();vn.setValue(gn,ot),Dt(a,(it,yn)=>{Vn(Me,yn)&&it.set(Me[yn])})})},setEnabled:(le,he)=>{sW(t,le).each(he?xo.enable:xo.disable)},focus:le=>{sW(t,le).each(_o.focus)},block:le=>{if(!qt(le))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(he=>{po(he,gA,{message:le})})},unblock:()=>{i(le=>{zs(le,hA)})},showTab:le=>{i(he=>{const nt=t.getBody();Ul.getState(nt).get().exists(ot=>ot.isTabPanel())&&os.getCurrent(nt).each(ot=>{Xr.showTab(ot,le)})})},redial:le=>{i(he=>{const nt=t.getId(),Me=s(le);he.getSystem().broadcastOn([`${d2}-${nt}`],Me),he.getSystem().broadcastOn([`${m2}-${nt}`],Me.internalDialog),he.getSystem().broadcastOn([`${Fk}-${nt}`],Me.internalDialog),he.getSystem().broadcastOn([`${Ik}-${nt}`],Me.internalDialog),W.setData(Me.initialData)})},close:()=>{i(le=>{zs(le,_w)})}};return W},XW=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},JW=(t,s,a)=>{const i=Un("dialog"),d=t.internalDialog,g=KU(d.title,i,a),p=at({body:d.body,initialData:d.initialData},i,a),w=QU(d.buttons),T=eW(w),A=oW({buttons:w},i,a),D=wV.initDialog(()=>he,XU(()=>W,a.shared.providers,s),a.shared.getSink),M=XW(d.size),U={id:i,header:g,body:p,footer:_.some(A),extraClasses:M,extraBehaviours:[],extraStyles:{}},W=JU(U,t,D,a),le=(()=>{const nt=()=>{const Me=Za.getBody(W);return os.getCurrent(Me).getOr(Me)};return{getId:Y(i),getRoot:Y(W),getBody:()=>Za.getBody(W),getFooter:()=>Za.getFooter(W),getFormWrapper:nt}})(),he=rW(le,s.redial,T);return{dialog:W,instanceApi:he}},QW=(t,s,a,i)=>{const d=Un("dialog"),g=Un("dialog-label"),p=Un("dialog-content"),w=t.internalDialog,T=(Me,ot)=>_.some(ot),A=wr(WW({title:w.title,draggable:!0},d,g,a.shared.providers)),D=wr(tt({body:w.body,initialData:w.initialData},d,p,a,i)),M=QU(w.buttons),U=eW(M),W=wr(KW({buttons:M},d,a)),le=wV.initDialog(()=>nt,{onBlock:Me=>{Mg.block(he,(ot,gn)=>YU(Me.message,gn,a.shared.providers))},onUnblock:()=>{Mg.unblock(he)},onClose:()=>s.closeWindow()},a.shared.getSink),he=vi({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:{role:"dialog",["aria-labelledby"]:g,["aria-describedby"]:p}},eventOrder:{[nu()]:[Ul.name(),Nl.name()],[ul()]:["execute-on-form"],[fd()]:["reflecting","execute-on-form"]},behaviours:cn([fo.config({mode:"cyclic",onEscape:Me=>(zs(Me,_w),_.some(!0)),useTabstopAt:Me=>!sv(Me)&&(Go(Me)!=="button"||or(Me,"disabled")!=="disabled")}),Ul.config({channel:`${d2}-${d}`,updateState:T,initialData:t}),_o.config({}),ms("execute-on-form",le.concat([Ja(Zm(),(Me,ot)=>{fo.focusIn(Me)})])),Mg.config({getRoot:()=>_.some(he)}),Ho.config({}),Ku.memory({})]),components:[A.asSpec(),D.asSpec(),W.asSpec()]}),nt=rW({getId:Y(d),getRoot:Y(he),getFooter:()=>W.get(he),getBody:()=>D.get(he),getFormWrapper:()=>{const Me=D.get(he);return os.getCurrent(Me).getOr(Me)}},s.redial,U);return{dialog:he,instanceApi:nt}};var CV=tinymce.util.Tools.resolve("tinymce.util.URI");const eZ=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!qt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(w=>{po(w,gA,{message:p})})},unblock:()=>{s(p=>{zs(p,hA)})},close:()=>{s(p=>{zs(p,_w)})},sendMessage:p=>{s(w=>{w.getSystem().broadcastOn([Lg],p)})}}},tZ=["insertContent","setContent","execCommand","close","block","unblock"],aW=t=>Kt(t)&&tZ.indexOf(t.mceAction)!==-1,nZ=t=>!aW(t)&&Kt(t)&&Vn(t,"mceAction"),oZ=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=Zt(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},sZ=(t,s,a,i)=>{const d=Un("dialog"),g=KU(t.title,d,i),p=Wt(t),w=t.buttons.bind(ot=>ot.length===0?_.none():_.some(oW({buttons:ot},d,i))),T=wV.initUrlDialog(()=>Me,XU(()=>nt,i.shared.providers,s)),A={...t.height.fold(()=>({}),ot=>({height:ot+"px","max-height":ot+"px"})),...t.width.fold(()=>({}),ot=>({width:ot+"px","max-width":ot+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],M=new CV(t.url,{base_uri:new CV(window.location.href)}),U=`${M.protocol}://${M.host}${M.port?":"+M.port:""}`,W=ag(),le=[ms("messages",[Hr(()=>{const ot=ri(Bt.fromDom(window),"message",gn=>{if(M.isSameOrigin(new CV(gn.raw.origin))){const it=gn.raw.data;aW(it)?oZ(a,Me,it):nZ(it)&&t.onMessage(Me,it)}});W.set(ot)}),Dl(W.clear)]),Nl.config({channels:{[Lg]:{onReceive:(ot,gn)=>{ia(ot.element,"iframe").each(it=>{const yn=it.dom.contentWindow;an(yn)&&yn.postMessage(gn,U)})}}}})],nt=JU({id:d,header:g,body:p,footer:w,extraClasses:D,extraBehaviours:le,extraStyles:A},t,T,i),Me=eZ(nt);return{dialog:nt,instanceApi:Me}},rZ=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{Za.hide(A),d()},p=wr(Ix({name:"close-alert",text:"OK",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"cancel",t)),w=VU(),T=zU(g,s.providers),A=vi(yV({lazySink:()=>s.getSink(),header:HU(w,T),body:UU(i,s.providers),footer:_.some(WU(ZU([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Pt(op,g)],eventOrder:{}}));Za.show(A);const D=p.get(A);_o.focus(D)}}},aZ=t=>{const s=t.shared;return{open:(i,d)=>{const g=U=>{Za.hide(D),d(U)},p=wr(Ix({name:"yes",text:"Yes",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"submit",t)),w=Ix({name:"no",text:"No",primary:!1,buttonType:_.some("secondary"),align:"end",enabled:!0,icon:_.none()},"cancel",t),T=VU(),A=zU(()=>g(!1),s.providers),D=vi(yV({lazySink:()=>s.getSink(),header:HU(T,A),body:UU(i,s.providers),footer:_.some(WU(ZU([],[w,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Pt(op,()=>g(!1)),Pt(Aw,()=>g(!0))],eventOrder:{}}));Za.show(D);const M=p.get(D);_o.focus(M)}}},cZ=(t,s)=>Ql(Rs("data",s,t)),iZ=t=>kw(t,".tox-alert-dialog")||kw(t,".tox-confirm-dialog"),lZ=(t,s,a)=>s&&a?[]:[Ci.config({contextual:{lazyContext:()=>_.some(ns(Bt.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})],uZ=t=>{const s=t.editor,a=uw(s),i=rZ(t.backstages.dialog),d=aZ(t.backstages.dialog),g=(W,le,he)=>le!==void 0&&le.inline==="toolbar"?A(W,t.backstages.popup.shared.anchors.inlineDialog(),he,le.ariaAttrs):le!==void 0&&le.inline==="cursor"?A(W,t.backstages.popup.shared.anchors.cursor(),he,le.ariaAttrs):T(W,he),p=(W,le)=>w(W,le),w=(W,le)=>{const he=nt=>{const Me=sZ(nt,{closeWindow:()=>{Za.hide(Me.dialog),le(Me.instanceApi)}},s,t.backstages.dialog);return Za.show(Me.dialog),Me.instanceApi};return Sr.openUrl(he,W)},T=(W,le)=>{const he=(nt,Me,ot)=>{const gn=Me,yn=JW({dataValidator:ot,initialData:gn,internalDialog:nt},{redial:Sr.redial,closeWindow:()=>{Za.hide(yn.dialog),le(yn.instanceApi)}},t.backstages.dialog);return Za.show(yn.dialog),yn.instanceApi.setData(gn),yn.instanceApi};return Sr.open(he,W)},A=(W,le,he,nt=!1)=>{const Me=(ot,gn,it)=>{const yn=cZ(gn,it),Hn=zr(),Nn=t.backstages.popup.shared.header.isPositionedAtTop(),ho={dataValidator:it,initialData:yn,internalDialog:ot},bo=()=>Hn.on(oo=>{Kr.reposition(oo),Ci.refresh(oo)}),Wo=QW(ho,{redial:Sr.redial,closeWindow:()=>{Hn.on(Kr.hide),s.off("ResizeEditor",bo),Hn.clear(),he(Wo.instanceApi)}},t.backstages.popup,nt),ys=vi(Kr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...Nn?{}:{fireRepositionEventInstead:{}},inlineBehaviours:cn([ms("window-manager-inline-events",[Pt(Zd(),(oo,Xo)=>{zs(Wo.dialog,op)})]),...lZ(s,a,Nn)]),isExtraPart:(oo,Xo)=>iZ(Xo)}));return Hn.set(ys),Kr.showWithin(ys,hl(Wo.dialog),{anchor:le},_.some(Jr())),(!a||!Nn)&&(Ci.refresh(ys),s.on("ResizeEditor",bo)),Wo.instanceApi.setData(yn),fo.focusIn(Wo.dialog),Wo.instanceApi};return Sr.open(Me,W)};return{open:g,openUrl:p,alert:(W,le)=>{i.open(W,le)},close:W=>{W.close()},confirm:(W,le)=>{d.open(W,le)}}},dZ=t=>{lD(t),IR(t),rP(t)};var mZ=()=>{Ot.add("silver",t=>{dZ(t);const{dialogs:s,popups:a,renderUI:i}=MP(t);JI.register(t,a.backstage.shared);const d=uZ({editor:t,backstages:{popup:a.backstage,dialog:s.backstage}}),g=()=>t_(t,{backstage:a.backstage},a.getMothership());return{renderUI:i,getWindowManagerImpl:Y(d),getNotificationManagerImpl:g}})};mZ()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var Fo=tinymce.util.Tools.resolve("tinymce.ModelManager");const ko=(l,m,h)=>{var v;return h(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},mo=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&ko(l,String,(h,v)=>v.isPrototypeOf(h))?"string":m},Jn=l=>m=>mo(m)===l,An=l=>m=>typeof m===l,so=l=>m=>l===m,Qn=Jn("string"),qt=Jn("object"),Kt=Jn("array"),Ct=so(null),Tn=An("boolean"),ao=so(void 0),Zt=l=>l==null,yt=l=>!Zt(l),Rt=An("function"),an=An("number"),qe=()=>{},rt=(l,m)=>(...h)=>l(m.apply(null,h)),Oe=(l,m)=>h=>l(m(h)),oe=l=>()=>l,bt=l=>l,Ft=(l,m)=>l===m;function wt(l,...m){return(...h)=>{const v=m.concat(h);return l.apply(null,v)}}const Y=l=>m=>!l(m),At=l=>()=>{throw new Error(l)},On=l=>l(),Nt=oe(!1),we=oe(!0);class Q{constructor(m,h){this.tag=m,this.value=h}static some(m){return new Q(!0,m)}static none(){return Q.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?Q.some(m(this.value)):Q.none()}bind(m){return this.tag?m(this.value):Q.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:Q.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m!=null?m:"Called getOrDie on None")}static from(m){return yt(m)?Q.some(m):Q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Q.singletonNone=new Q(!1);const ct=Array.prototype.slice,Pe=Array.prototype.indexOf,Ne=Array.prototype.push,Ot=(l,m)=>Pe.call(l,m),_=(l,m)=>Ot(l,m)>-1,ge=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return!0}return!1},Ue=(l,m)=>{const h=[];for(let v=0;v<l;v++)h.push(m(v));return h},Ie=(l,m)=>{const h=l.length,v=new Array(h);for(let S=0;S<h;S++){const O=l[S];v[S]=m(O,S)}return v},_e=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];m(S,h)}},jt=(l,m)=>{for(let h=l.length-1;h>=0;h--){const v=l[h];m(v,h)}},nn=(l,m)=>{const h=[],v=[];for(let S=0,O=l.length;S<O;S++){const F=l[S];(m(F,S)?h:v).push(F)}return{pass:h,fail:v}},ze=(l,m)=>{const h=[];for(let v=0,S=l.length;v<S;v++){const O=l[v];m(O,v)&&h.push(O)}return h},It=(l,m,h)=>(jt(l,(v,S)=>{h=m(h,v,S)}),h),Et=(l,m,h)=>(_e(l,(v,S)=>{h=m(h,v,S)}),h),Ve=(l,m,h)=>{for(let v=0,S=l.length;v<S;v++){const O=l[v];if(m(O,v))return Q.some(O);if(h(O,v))break}return Q.none()},R=(l,m)=>Ve(l,m,Nt),zn=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return Q.some(h)}return Q.none()},Ee=l=>{const m=[];for(let h=0,v=l.length;h<v;++h){if(!Kt(l[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+l);Ne.apply(m,l[h])}return m},xe=(l,m)=>Ee(Ie(l,m)),We=(l,m)=>{for(let h=0,v=l.length;h<v;++h){const S=l[h];if(m(S,h)!==!0)return!1}return!0},ke=l=>{const m=ct.call(l,0);return m.reverse(),m},ae=(l,m)=>{const h={};for(let v=0,S=l.length;v<S;v++){const O=l[v];h[String(O)]=m(O,v)}return h},se=(l,m)=>{const h=ct.call(l,0);return h.sort(m),h},re=(l,m)=>m>=0&&m<l.length?Q.some(l[m]):Q.none(),z=l=>re(l,0),K=l=>re(l,l.length-1),H=(l,m)=>{for(let h=0;h<l.length;h++){const v=m(l[h],h);if(v.isSome())return v}return Q.none()},Z=Object.keys,$e=Object.hasOwnProperty,Be=(l,m)=>{const h=Z(l);for(let v=0,S=h.length;v<S;v++){const O=h[v],F=l[O];m(F,O)}},zt=(l,m)=>Jt(l,(h,v)=>({k:v,v:m(h,v)})),Jt=(l,m)=>{const h={};return Be(l,(v,S)=>{const O=m(v,S);h[O.k]=O.v}),h},eo=l=>(m,h)=>{l[h]=m},co=(l,m,h,v)=>{Be(l,(S,O)=>{(m(S,O)?h:v)(S,O)})},jn=(l,m)=>{const h={};return co(l,m,eo(h),qe),h},pn=(l,m)=>{const h=[];return Be(l,(v,S)=>{h.push(m(v,S))}),h},to=l=>pn(l,bt),De=(l,m)=>Ye(l,m)?Q.from(l[m]):Q.none(),Ye=(l,m)=>$e.call(l,m),Dt=(l,m)=>Ye(l,m)&&l[m]!==void 0&&l[m]!==null,on=l=>{for(const m in l)if($e.call(l,m))return!1;return!0};typeof window<"u"||Function("return this;")();const wn=8,bn=9,Oo=11,xs=1,Ge=3,Le=l=>l.dom.nodeName.toLowerCase(),tn=l=>l.dom.nodeType,en=l=>m=>tn(m)===l,Ut=l=>tn(l)===wn||Le(l)==="#comment",Vn=en(xs),ks=en(Ge),kr=en(bn),da=en(Oo),ps=l=>m=>Vn(m)&&Le(m)===l,bc=(l,m,h)=>{if(Qn(h)||Tn(h)||an(h))l.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",l),new Error("Attribute value was not simple")},vs=(l,m,h)=>{bc(l.dom,m,h)},as=(l,m)=>{const h=l.dom;Be(m,(v,S)=>{bc(h,S,v)})},uo=(l,m)=>{Be(m,(h,v)=>{h.fold(()=>{Fs(l,v)},S=>{bc(l.dom,v,S)})})},dr=(l,m)=>{const h=l.dom.getAttribute(m);return h===null?void 0:h},Wr=(l,m)=>Q.from(dr(l,m)),Fs=(l,m)=>{l.dom.removeAttribute(m)},ma=l=>Et(l.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),Zr=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const S="HTML does not have a single root node";throw console.error(S,l),new Error(S)}return ka(v.childNodes[0])},sc=(l,m)=>{const v=(m||document).createElement(l);return ka(v)},Ys=(l,m)=>{const v=(m||document).createTextNode(l);return ka(v)},ka=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},q={fromHtml:Zr,fromTag:sc,fromText:Ys,fromDom:ka,fromPoint:(l,m,h)=>Q.from(l.dom.elementFromPoint(m,h)).map(ka)},st=(l,m)=>{const h=l.dom;if(h.nodeType!==xs)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},ht=l=>l.nodeType!==xs&&l.nodeType!==bn&&l.nodeType!==Oo||l.childElementCount===0,In=(l,m)=>{const h=m===void 0?document:m.dom;return ht(h)?[]:Ie(h.querySelectorAll(l),q.fromDom)},Gn=(l,m)=>{const h=m===void 0?document:m.dom;return ht(h)?Q.none():Q.from(h.querySelector(l)).map(q.fromDom)},Rn=(l,m)=>l.dom===m.dom,cs=(l,m)=>{const h=l.dom,v=m.dom;return h===v?!1:h.contains(v)},es=st,Co=l=>q.fromDom(l.dom.ownerDocument),rr=l=>kr(l)?l:Co(l),Bt=l=>q.fromDom(rr(l).dom.documentElement),fe=l=>q.fromDom(rr(l).dom.defaultView),pe=l=>Q.from(l.dom.parentNode).map(q.fromDom),kt=l=>Q.from(l.dom.parentElement).map(q.fromDom),Qt=(l,m)=>{const h=Rt(m)?m:Nt;let v=l.dom;const S=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const O=v.parentNode,F=q.fromDom(O);if(S.push(F),h(F)===!0)break;v=O}return S},rn=l=>Q.from(l.dom.previousSibling).map(q.fromDom),_n=l=>Q.from(l.dom.nextSibling).map(q.fromDom),dn=l=>Ie(l.dom.childNodes,q.fromDom),Mn=(l,m)=>{const h=l.dom.childNodes;return Q.from(h[m]).map(q.fromDom)},Kn=l=>Mn(l,0),vo=(l,m)=>{pe(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},As=(l,m)=>{_n(l).fold(()=>{pe(l).each(S=>{Go(S,m)})},v=>{vo(v,m)})},mr=(l,m)=>{Kn(l).fold(()=>{Go(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},Go=(l,m)=>{l.dom.appendChild(m.dom)},qc=(l,m,h)=>{Mn(l,h).fold(()=>{Go(l,m)},v=>{vo(v,m)})},is=(l,m)=>{vo(l,m),Go(m,l)},ws=(l,m)=>{_e(m,(h,v)=>{const S=v===0?l:m[v-1];As(S,h)})},Ss=(l,m)=>{_e(m,h=>{Go(l,h)})},Pr=l=>{l.dom.textContent="",_e(dn(l),m=>{Rr(m)})},Rr=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},$c=l=>{const m=dn(l);m.length>0&&ws(l,m),Rr(l)},Pa=(l,m)=>q.fromDom(l.dom.cloneNode(m)),Kc=l=>Pa(l,!1),ki=l=>Pa(l,!0),Yc=(l,m)=>{const h=q.fromTag(m),v=ma(l);return as(h,v),h},Ii=(l,m)=>{const h=Yc(l,m),v=dn(ki(l));return Ss(h,v),h},Hs=(l,m)=>{const h=Yc(l,m);As(l,h);const v=dn(l);return Ss(h,v),Rr(l),h},di=["tfoot","thead","tbody","colgroup"],fa=l=>_(di,l),rc=(l,m)=>({rows:l,columns:m}),mi=(l,m)=>({row:l,column:m}),Bc=(l,m,h)=>({element:l,rowspan:m,colspan:h}),oa=(l,m,h,v)=>({element:l,rowspan:m,colspan:h,isNew:v}),Ti=(l,m,h,v,S,O)=>({element:l,rowspan:m,colspan:h,row:v,column:S,isLocked:O}),vc=(l,m,h)=>({element:l,cells:m,section:h}),Li=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),Xs=(l,m,h)=>({element:l,isNew:m,isLocked:h}),ga=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),X=(l,m,h,v)=>({startRow:l,startCol:m,finishRow:h,finishCol:v}),Ce=(l,m,h)=>({element:l,colspan:m,column:h}),Fe=(l,m)=>({element:l,columns:m}),pt=l=>da(l)&&yt(l.dom.host),Vt=Rt(Element.prototype.attachShadow)&&Rt(Node.prototype.getRootNode),io=oe(Vt),qo=Vt?l=>q.fromDom(l.dom.getRootNode()):rr,Tr=l=>{const m=qo(l);return pt(m)?Q.some(m):Q.none()},Is=l=>q.fromDom(l.dom.host),Nr=l=>{if(io()&&yt(l.target)){const m=q.fromDom(l.target);if(Vn(m)&&Er(m)&&l.composed&&l.composedPath){const h=l.composedPath();if(h)return z(h)}}return Q.from(l.target)},Er=l=>yt(l.dom.shadowRoot),Mr=l=>{const m=ks(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return Tr(q.fromDom(m)).fold(()=>h.body.contains(m),Oe(Mr,Is))},Fa=()=>jr(q.fromDom(document)),jr=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return q.fromDom(m)},Jr=(l,m,h)=>ze(Qt(l,h),m),Xc=(l,m)=>ze(dn(l),m),Jc=(l,m)=>{let h=[];return _e(dn(l),v=>{m(v)&&(h=h.concat([v])),h=h.concat(Jc(v,m))}),h},So=(l,m,h)=>Jr(l,v=>st(v,m),h),ls=(l,m)=>Xc(l,h=>st(h,m)),or=(l,m)=>In(m,l);var B=(l,m,h,v,S)=>l(h,v)?Q.some(h):Rt(S)&&S(h)?Q.none():m(h,v,S);const J=(l,m,h)=>{let v=l.dom;const S=Rt(h)?h:Nt;for(;v.parentNode;){v=v.parentNode;const O=q.fromDom(v);if(m(O))return Q.some(O);if(S(O))break}return Q.none()},de=(l,m,h)=>B((S,O)=>O(S),J,l,m,h),Xe=(l,m)=>{const h=S=>m(q.fromDom(S));return R(l.dom.childNodes,h).map(q.fromDom)},kn=(l,m)=>{const h=v=>{for(let S=0;S<v.childNodes.length;S++){const O=q.fromDom(v.childNodes[S]);if(m(O))return Q.some(O);const F=h(v.childNodes[S]);if(F.isSome())return F}return Q.none()};return h(l.dom)},Do=(l,m,h)=>J(l,v=>st(v,m),h),$n=(l,m)=>Xe(l,h=>st(h,m)),Fr=(l,m)=>Gn(m,l),fr=(l,m,h)=>B((S,O)=>st(S,O),Do,l,m,h),_t=(l,m,h=Ft)=>l.exists(v=>h(v,m)),sa=l=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(h);return m},Js=(l,m)=>l!=null?m(l):Q.none(),Vr=(l,m)=>l?Q.some(m):Q.none(),tl=(l,m,h)=>m===""||l.length>=m.length&&l.substr(h,h+m.length)===m,$o=(l,m,h=0,v)=>{const S=l.indexOf(m,h);return S!==-1?ao(v)?!0:S+m.length<=v:!1},te=(l,m)=>tl(l,m,0),me=(l,m)=>tl(l,m,l.length-m.length),ut=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Bn=l=>l.length>0,Yn=l=>{const m=parseFloat(l);return isNaN(m)?Q.none():Q.some(m)},Gs=l=>l.style!==void 0&&Rt(l.style.getPropertyValue),Ko=(l,m,h)=>{if(!Qn(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",l),new Error("CSS value must be a string: "+h);Gs(l)&&l.style.setProperty(m,h)},Hi=(l,m)=>{Gs(l)&&l.style.removeProperty(m)},Jo=(l,m,h)=>{const v=l.dom;Ko(v,m,h)},Os=(l,m)=>{const h=l.dom;Be(m,(v,S)=>{Ko(h,S,v)})},Ta=(l,m)=>{const h=l.dom,S=window.getComputedStyle(h).getPropertyValue(m);return S===""&&!Mr(l)?ac(h,m):S},ac=(l,m)=>Gs(l)?l.style.getPropertyValue(m):"",zi=(l,m)=>{const h=l.dom,v=ac(h,m);return Q.from(v).filter(S=>S.length>0)},gr=(l,m)=>{const h=l.dom;Hi(h,m),_t(Wr(l,"style").map(ut),"")&&Fs(l,"style")},nr=(l,m)=>{const h=l.dom,v=m.dom;Gs(h)&&Gs(v)&&(v.style.cssText=h.style.cssText)},Ds=(l,m,h=0)=>Wr(l,m).map(v=>parseInt(v,10)).getOr(h),Ir=(l,m)=>Ds(l,m,1),yc=l=>ps("col")(l)?Ds(l,"span",1)>1:Ir(l,"colspan")>1,Tl=l=>Ir(l,"rowspan")>1,Gr=(l,m)=>parseInt(Ta(l,m),10),jl=oe(10),vu=oe(10),cc=(l,m)=>yu(l,m,we),yu=(l,m,h)=>xe(dn(l),v=>st(v,m)?h(v)?[v]:[]:yu(v,m,h)),Vg=(l,m,h=Nt)=>{if(h(m))return Q.none();if(_(l,Le(m)))return Q.some(m);const v=S=>st(S,"table")||h(S);return Do(m,l.join(","),v)},Pc=(l,m)=>Vg(["td","th"],l,m),El=l=>cc(l,"th,td"),od=l=>st(l,"colgroup")?ls(l,"col"):xe(wu(l),m=>ls(m,"col")),Ia=(l,m)=>fr(l,"table",m),nl=l=>cc(l,"tr"),wu=l=>Ia(l).fold(oe([]),m=>ls(m,"colgroup")),Pd=(l,m)=>Ie(l,h=>{if(Le(h)==="colgroup"){const v=Ie(od(h),S=>{const O=Ds(S,"span",1);return Bc(S,1,O)});return vc(h,v,"colgroup")}else{const v=Ie(El(h),S=>{const O=Ds(S,"rowspan",1),F=Ds(S,"colspan",1);return Bc(S,O,F)});return vc(h,v,m(h))}}),Gl=l=>pe(l).map(m=>{const h=Le(m);return fa(h)?h:"tbody"}).getOr("tbody"),_m=l=>{const m=nl(l),v=[...wu(l),...m];return Pd(v,Gl)},Fd=(l,m)=>Pd(l,()=>m),Ei=l=>{let m=!1,h;return(...v)=>(m||(m=!0,h=l.apply(null,v)),h)},Ug=(l,m,h,v)=>{const S=l.isiOS()&&/ipad/i.test(h)===!0,O=l.isiOS()&&!S,F=l.isiOS()||l.isAndroid(),G=F||v("(pointer:coarse)"),ne=S||!O&&F&&v("(min-device-width:768px)"),ye=O||F&&!ne,Ze=m.isSafari()&&l.isiOS()&&/safari/i.test(h)===!1,Mt=!ye&&!ne&&!Ze;return{isiPad:oe(S),isiPhone:oe(O),isTablet:oe(ne),isPhone:oe(ye),isTouch:oe(G),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:oe(Ze),isDesktop:oe(Mt)}},Am=(l,m)=>{for(let h=0;h<l.length;h++){const v=l[h];if(v.test(m))return v}},Cu=(l,m)=>{const h=Am(l,m);if(!h)return{major:0,minor:0};const v=S=>Number(m.replace(h,"$"+S));return be(v(1),v(2))},Id=(l,m)=>{const h=String(m).toLowerCase();return l.length===0?_i():Cu(l,h)},_i=()=>be(0,0),be=(l,m)=>({major:l,minor:m}),ql={nu:be,detect:Id,unknown:_i},Ai=(l,m)=>H(m.brands,h=>{const v=h.brand.toLowerCase();return R(l,S=>{var O;return v===((O=S.brand)===null||O===void 0?void 0:O.toLowerCase())}).map(S=>({current:S.name,version:ql.nu(parseInt(h.version,10),0)}))}),Om=(l,m)=>{const h=String(m).toLowerCase();return R(l,v=>v.search(h))},Dm=(l,m)=>Om(l,m).map(h=>{const v=ql.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Wg=(l,m)=>Om(l,m).map(h=>{const v=ql.detect(h.versionRegexes,m);return{current:h.name,version:v}}),$s=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ga=l=>m=>$o(m,l),Nf=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>$o(l,"edge/")&&$o(l,"chrome")&&$o(l,"safari")&&$o(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$s],search:l=>$o(l,"chrome")&&!$o(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>$o(l,"msie")||$o(l,"trident")},{name:"Opera",versionRegexes:[$s,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ga("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ga("firefox")},{name:"Safari",versionRegexes:[$s,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>($o(l,"safari")||$o(l,"mobile/"))&&$o(l,"applewebkit")}],Vi=[{name:"Windows",search:Ga("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>$o(l,"iphone")||$o(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ga("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ga("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ga("linux"),versionRegexes:[]},{name:"Solaris",search:Ga("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ga("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ga("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Rm={browsers:oe(Nf),oses:oe(Vi)},Su="Edge",wc="Chromium",Mf="IE",sd="Opera",Zg="Firefox",Fc="Safari",Ld=()=>Nm({current:void 0,version:ql.unknown()}),Nm=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isEdge:v(Su),isChromium:v(wc),isIE:v(Mf),isOpera:v(sd),isFirefox:v(Zg),isSafari:v(Fc)}},rd={unknown:Ld,nu:Nm,edge:oe(Su),chromium:oe(wc),ie:oe(Mf),opera:oe(sd),firefox:oe(Zg),safari:oe(Fc)},ha="Windows",Hd="iOS",$f="Android",Mm="Linux",xu="macOS",jg="Solaris",$m="FreeBSD",Cc="ChromeOS",Gg=()=>ol({current:void 0,version:ql.unknown()}),ol=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isWindows:v(ha),isiOS:v(Hd),isAndroid:v($f),isMacOS:v(xu),isLinux:v(Mm),isSolaris:v(jg),isFreeBSD:v($m),isChromeOS:v(Cc)}},ad={unknown:Gg,nu:ol,windows:oe(ha),ios:oe(Hd),android:oe($f),linux:oe(Mm),macos:oe(xu),solaris:oe(jg),freebsd:oe($m),chromeos:oe(Cc)},Ui={detect:(l,m,h)=>{const v=Rm.browsers(),S=Rm.oses(),O=m.bind(ne=>Ai(v,ne)).orThunk(()=>Dm(v,l)).fold(rd.unknown,rd.nu),F=Wg(S,l).fold(ad.unknown,ad.nu),G=Ug(F,O,l,h);return{browser:O,os:F,deviceType:G}}},qg=l=>window.matchMedia(l).matches;let Kg=Ei(()=>Ui.detect(navigator.userAgent,Q.from(navigator.userAgentData),qg));const Bf=()=>Kg(),sl=(l,m)=>{const h=(G,ne)=>{if(!an(ne)&&!ne.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+ne);const ye=G.dom;Gs(ye)&&(ye.style[l]=ne+"px")},v=G=>{const ne=m(G);if(ne<=0||ne===null){const ye=Ta(G,l);return parseFloat(ye)||0}return ne},S=v,O=(G,ne)=>Et(ne,(ye,Ze)=>{const Mt=Ta(G,Ze),ln=Mt===void 0?0:parseInt(Mt,10);return isNaN(ln)?ye:ye+ln},0);return{set:h,get:v,getOuter:S,aggregate:O,max:(G,ne,ye)=>{const Ze=O(G,ye);return ne>Ze?ne-Ze:0}}},E=(l,m)=>Yn(l).getOr(m),$=(l,m,h)=>E(Ta(l,m),h),j=(l,m,h,v)=>{const S=$(l,`padding-${h}`,0),O=$(l,`padding-${v}`,0),F=$(l,`border-${h}-width`,0),G=$(l,`border-${v}-width`,0);return m-S-O-F-G},Se=(l,m)=>{const h=l.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:j(l,v,"left","right")},He=l=>$(l,"height",l.dom.offsetHeight),mn=l=>$(l,"width",l.dom.offsetWidth),yo=l=>Se(l,"content-box"),ts=sl("width",l=>l.dom.offsetWidth),Zo=l=>ts.get(l),qn=l=>ts.getOuter(l),ns=yo,_r=mn,qa=(l,m,h)=>{const v=l.cells,S=v.slice(0,m),O=v.slice(m),F=S.concat(h).concat(O);return Cv(l,F)},Qr=(l,m,h)=>qa(l,m,[h]),Bm=(l,m,h)=>{const v=l.cells;v[m]=h},Cv=(l,m)=>ga(l.element,m,l.section,l.isNew),Bo=(l,m)=>{const h=l.cells,v=Ie(h,m);return ga(l.element,v,l.section,l.isNew)},Lr=(l,m)=>l.cells[m],Bs=(l,m)=>Lr(l,m).element,ic=l=>l.cells.length,La=l=>{const m=nn(l,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},Pf=(l,m,h)=>{const v=Ie(l.cells,h);return ga(m(l.element),v,l.section,!0)},Ff="data-snooker-locked-cols",Yg=l=>Wr(l,Ff).bind(m=>Q.from(m.match(/\d+/g))).map(m=>ae(m,we)),Yl=l=>{const m=Et(La(l).rows,(v,S)=>(_e(S.cells,(O,F)=>{O.isLocked&&(v[F]=!0)}),v),{}),h=pn(m,(v,S)=>parseInt(S,10));return se(h)},If=(l,m)=>l+","+m,Sv=(l,m,h)=>Q.from(l.access[If(m,h)]),y2=(l,m,h)=>{const v=qr(l,S=>h(m,S.element));return v.length>0?Q.some(v[0]):Q.none()},qr=(l,m)=>{const h=xe(l.all,v=>v.cells);return ze(h,m)},Xg=l=>{const m={};let h=0;return _e(l.cells,v=>{const S=v.colspan;Ue(S,O=>{const F=h+O;m[F]=Ce(v.element,S,F)}),h+=S}),m},n1=l=>{const m={},h=[],S=z(l).map(Yt=>Yt.element).bind(Ia).bind(Yg).getOr({});let O=0,F=0,G=0;const{pass:ne,fail:ye}=nn(l,Yt=>Yt.section==="colgroup");_e(ye,Yt=>{const vt=[];_e(Yt.cells,fn=>{let St=0;for(;m[If(G,St)]!==void 0;)St++;const Wn=Dt(S,St.toString()),To=Ti(fn.element,fn.rowspan,fn.colspan,G,St,Wn);for(let zo=0;zo<fn.colspan;zo++)for(let Ar=0;Ar<fn.rowspan;Ar++){const gc=G+Ar,la=St+zo,$i=If(gc,la);m[$i]=To,F=Math.max(F,la+1)}vt.push(To)}),O++,h.push(vc(Yt.element,vt,Yt.section)),G++});const{columns:Ze,colgroups:Mt}=K(ne).map(Yt=>{const vt=Xg(Yt);return{colgroups:[Fe(Yt.element,to(vt))],columns:vt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:rc(O,F),access:m,all:h,columns:Ze,colgroups:Mt}},Lo={fromTable:l=>{const m=_m(l);return n1(m)},generate:n1,getAt:Sv,findItem:y2,filterItems:qr,justCells:l=>xe(l.all,m=>m.cells),justColumns:l=>to(l.columns),hasColumns:l=>Z(l.columns).length>0,getColumnAt:(l,m)=>Q.from(l.columns[m])},lc=(l,m=we)=>{const h=l.grid,v=Ue(h.columns,bt),S=Ue(h.rows,bt);return Ie(v,O=>Xl(()=>xe(S,ye=>Lo.getAt(l,ye,O).filter(Ze=>Ze.column===O).toArray()),ye=>ye.colspan===1&&m(ye.element),()=>Lo.getAt(l,0,O)))},Xl=(l,m,h)=>{const v=l();return R(v,m).orThunk(()=>Q.from(v[0]).orThunk(h)).map(F=>F.element)},ku=l=>{const m=l.grid,h=Ue(m.rows,bt),v=Ue(m.columns,bt);return Ie(h,S=>Xl(()=>xe(v,ne=>Lo.getAt(l,S,ne).filter(ye=>ye.row===S).fold(oe([]),ye=>[ye])),ne=>ne.rowspan===1,()=>Lo.getAt(l,S,0)))},Jg=(l,m)=>{if(m<0||m>=l.length-1)return Q.none();const h=l[m].fold(()=>{const S=ke(l.slice(0,m));return H(S,(O,F)=>O.map(G=>({value:G,delta:F+1})))},S=>Q.some({value:S,delta:0})),v=l[m+1].fold(()=>{const S=l.slice(m+1);return H(S,(O,F)=>O.map(G=>({value:G,delta:F+1})))},S=>Q.some({value:S,delta:1}));return h.bind(S=>v.map(O=>{const F=O.delta+S.delta;return Math.abs(O.value-S.value)/F}))},Pm=(l,m)=>h=>s1(h)==="rtl"?m:l,s1=l=>Ta(l,"direction")==="rtl"?"rtl":"ltr",r1=sl("height",l=>{const m=l.dom;return Mr(l)?m.getBoundingClientRect().height:m.offsetHeight}),Fm=l=>r1.get(l),Qg=l=>r1.getOuter(l),Im=He,_l=(l,m)=>({left:l,top:m,translate:(v,S)=>_l(l+v,m+S)}),Al=_l,xv=l=>{const m=l.getBoundingClientRect();return Al(m.left,m.top)},id=(l,m)=>l!==void 0?l:m!==void 0?m:0,Tu=l=>{const m=l.dom.ownerDocument,h=m.body,v=m.defaultView,S=m.documentElement;if(h===l.dom)return Al(h.offsetLeft,h.offsetTop);const O=id(v==null?void 0:v.pageYOffset,S.scrollTop),F=id(v==null?void 0:v.pageXOffset,S.scrollLeft),G=id(S.clientTop,h.clientTop),ne=id(S.clientLeft,h.clientLeft);return Hf(l).translate(F-ne,O-G)},Hf=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?Al(v.offsetLeft,v.offsetTop):Mr(l)?xv(m):Al(0,0)},ld=(l,m)=>({row:l,y:m}),eh=(l,m)=>({col:l,x:m}),pa=l=>Tu(l).left+qn(l),Wi=l=>Tu(l).left,Lm=(l,m)=>eh(l,Wi(m)),En=(l,m)=>eh(l,pa(m)),Hm=l=>Tu(l).top,rl=(l,m)=>ld(l,Hm(m)),th=(l,m)=>ld(l,Hm(m)+Qg(m)),nh=(l,m,h)=>{if(h.length===0)return[];const v=Ie(h.slice(1),(O,F)=>O.map(G=>l(F,G))),S=h[h.length-1].map(O=>m(h.length-1,O));return v.concat([S])},w2=l=>-l,Eu={delta:bt,positions:l=>nh(rl,th,l),edge:Hm},ro=Pm({delta:bt,edge:Wi,positions:l=>nh(Lm,En,l)},{delta:w2,edge:pa,positions:l=>nh(En,Lm,l)}),Qc={delta:(l,m)=>ro(m).delta(l,m),positions:(l,m)=>ro(m).positions(l,m),edge:l=>ro(l).edge(l)},Lt={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},a1=(()=>{const l="[0-9]+",h="[eE]"+("[+-]?"+l),v="\\.",S=G=>`(?:${G})?`,F=`[+-]?(?:${["Infinity",l+v+S(l)+S(h),v+l+S(h),l+S(h)].join("|")})`;return new RegExp(`^(${F})(.*)$`)})(),c1=(l,m)=>ge(m,h=>ge(Lt[h],v=>l===v)),al=(l,m)=>Q.from(a1.exec(l)).bind(v=>{const S=Number(v[1]),O=v[2];return c1(O,m)?Q.some({value:S,unit:O}):Q.none()}),ei=/(\d+(\.\d+)?)%/,zm=/(\d+(\.\d+)?)px|em/,Ur=ps("col"),Ea=(l,m,h)=>{const v=kt(l).getOrThunk(()=>jr(Co(l)));return m(l)/h(v)*100},ti=(l,m)=>{Jo(l,"width",m+"px")},ar=(l,m)=>{Jo(l,"width",m+"%")},_u=(l,m)=>{Jo(l,"height",m+"px")},i1=l=>Im(l)+"px",Jl=(l,m,h,v)=>{const S=Ia(l).map(O=>{const F=h(O);return Math.floor(m/100*F)}).getOr(m);return v(l,S),S},oh=(l,m,h,v)=>{const S=parseFloat(l);return me(l,"%")&&Le(m)!=="table"?Jl(m,S,h,v):S},Vm=l=>{const m=i1(l);return m?oh(m,l,Fm,_u):Fm(l)},ra=(l,m,h)=>{const v=h(l),S=Ir(l,m);return v/S},sh=(l,m)=>zi(l,m).orThunk(()=>Wr(l,m).map(h=>h+"px")),Um=l=>sh(l,"width"),Rs=l=>sh(l,"height"),Ql=l=>Ea(l,Zo,ns),Sc=l=>Ur(l)?Zo(l):_r(l),eu=l=>ra(l,"rowspan",Vm),fi=l=>Um(l).bind(h=>al(h,["fixed","relative","empty"])),l1=(l,m,h)=>{Jo(l,"width",m+h)},Ya=l=>Zo(l)+"px",xc=l=>Ea(l,Zo,ns)+"%",hp=l=>Um(l).exists(m=>ei.test(m)),Tt=l=>Um(l).exists(m=>zm.test(m)),Oi=l=>Um(l).isNone(),kv=oe(ei),aa=ps("col"),zf=l=>Um(l).getOrThunk(()=>Sc(l)+"px"),ud=l=>Rs(l).getOrThunk(()=>eu(l)+"px"),ba=l=>Ie(Lo.justColumns(l),m=>Q.from(m.element)),Tv=l=>{const m=Bf().browser,h=m.isChromium()||m.isFirefox();return aa(l)?h:!0},cl=(l,m,h,v,S,O)=>l.filter(v).fold(()=>O(Jg(h,m)),F=>S(F)),tu=(l,m,h,v)=>{const S=lc(l),O=Lo.hasColumns(l)?ba(l):S,F=[Q.some(Qc.edge(m))].concat(Ie(Qc.positions(S,m),ne=>ne.map(ye=>ye.x))),G=Y(yc);return Ie(O,(ne,ye)=>cl(ne,ye,F,G,Ze=>{if(Tv(Ze))return h(Ze);{const Mt=Js(S[ye],bt);return cl(Mt,ye,F,G,ln=>v(Q.some(Zo(ln))),v)}},v))},gi=l=>l.map(m=>m+"px").getOr(""),Ns=(l,m)=>tu(l,m,zf,gi),Zi=(l,m,h)=>tu(l,m,Ql,v=>v.fold(()=>h.minCellWidth(),S=>S/h.pixelWidth()*100)),zd=(l,m,h)=>tu(l,m,Sc,v=>v.getOrThunk(h.minCellWidth)),Xa=(l,m,h,v,S)=>{const O=ku(l),F=[Q.some(h.edge(m))].concat(Ie(h.positions(O,m),G=>G.map(ne=>ne.y)));return Ie(O,(G,ne)=>cl(G,ne,F,Y(Tl),v,S))},Vf=(l,m,h)=>Xa(l,m,h,eu,v=>v.getOrThunk(vu)),Uf=(l,m,h)=>Xa(l,m,h,ud,gi),Wf=(l,m)=>()=>Mr(l)?m(l):parseFloat(zi(l,"width").getOr("0")),hi=l=>{const m=Wf(l,Zo),h=oe(0);return{width:m,pixelWidth:m,getWidths:(S,O)=>zd(S,l,O),getCellDelta:h,singleColumnWidth:oe([0]),minCellWidth:h,setElementWidth:qe,adjustTableWidth:qe,isRelative:!0,label:"none"}},pp=l=>{const m=Wf(l,ne=>parseFloat(xc(ne))),h=Wf(l,Zo);return{width:m,pixelWidth:h,getWidths:(ne,ye)=>Zi(ne,l,ye),getCellDelta:ne=>ne/h()*100,singleColumnWidth:(ne,ye)=>[100-ne],minCellWidth:()=>jl()/h()*100,setElementWidth:ar,adjustTableWidth:ne=>{const ye=m(),Ze=ne/100*ye,Mt=ye+Ze;ar(l,Mt)},isRelative:!0,label:"percent"}},Ke=l=>{const m=Wf(l,Zo);return{width:m,pixelWidth:m,getWidths:(F,G)=>zd(F,l,G),getCellDelta:bt,singleColumnWidth:(F,G)=>[Math.max(jl(),F+G)-F],minCellWidth:jl,setElementWidth:ti,adjustTableWidth:F=>{const G=m()+F;ti(l,G)},isRelative:!1,label:"pixel"}},_a=(l,m)=>kv().exec(m)!==null?pp(l):Ke(l),yr={getTableSize:l=>Um(l).fold(()=>hi(l),h=>_a(l,h)),pixelSize:Ke,percentageSize:pp,noneSize:hi},il=(l,m,h,v,S,O)=>({minRow:l,minCol:m,maxRow:h,maxCol:v,allCells:S,selectedCells:O}),Aa=(l,m)=>{const h=l.grid.columns;let S=l.grid.rows,O=h,F=0,G=0;const ne=[],ye=[];return Be(l.access,Ze=>{if(ne.push(Ze),m(Ze)){ye.push(Ze);const Mt=Ze.row,ln=Mt+Ze.rowspan-1,Yt=Ze.column,vt=Yt+Ze.colspan-1;Mt<S?S=Mt:ln>F&&(F=ln),Yt<O?O=Yt:vt>G&&(G=vt)}}),il(S,O,F,G,ne,ye)},Oa=(l,m,h)=>{const v=l[h].element,S=q.fromTag("td");Go(S,q.fromTag("br")),(m?Go:mr)(v,S)},C=(l,m,h,v)=>{const S=ze(l,G=>G.section!=="colgroup"),O=m.grid.columns,F=m.grid.rows;for(let G=0;G<F;G++){let ne=!1;for(let ye=0;ye<O;ye++)G<h.minRow||G>h.maxRow||ye<h.minCol||ye>h.maxCol||(Lo.getAt(m,G,ye).filter(v).isNone()?Oa(S,ne,G):ne=!0)}},k=(l,m,h,v)=>{Be(h.columns,F=>{(F.column<m.minCol||F.column>m.maxCol)&&Rr(F.element)});const S=ze(cc(l,"tr"),F=>F.dom.childElementCount===0);_e(S,Rr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&_e(cc(l,"th,td"),F=>{Fs(F,"rowspan"),Fs(F,"colspan")}),Fs(l,Ff),Fs(l,"data-snooker-col-series"),yr.getTableSize(l).adjustTableWidth(v)},I=(l,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const S=zd(m,l,h),O=Et(S,(ye,Ze)=>ye+Ze,0),ne=Et(S.slice(v.minCol,v.maxCol+1),(ye,Ze)=>ye+Ze,0)/O*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(ne)},V=(l,m)=>{const h=ln=>st(ln.element,m),v=ki(l),S=_m(v),O=yr.getTableSize(l),F=Lo.generate(S),G=Aa(F,h),ne="th:not("+m+"),td:not("+m+")",ye=yu(v,"th,td",ln=>st(ln,ne));_e(ye,Rr),C(S,F,G,h);const Ze=Lo.fromTable(l),Mt=I(l,Ze,O,G);return k(v,G,F,Mt),v},Te="\xA0",Ht=((l,m)=>{const h=O=>{if(!l(O))throw new Error("Can only get "+m+" value of a "+m+" node");return v(O).getOr("")},v=O=>l(O)?Q.from(O.dom.nodeValue):Q.none();return{get:h,getOption:v,set:(O,F)=>{if(!l(O))throw new Error("Can only set raw "+m+" value of a "+m+" node");O.dom.nodeValue=F}}})(ks,"text"),xn=l=>Ht.get(l),Io=l=>Ht.getOption(l),jo=(l,m)=>Ht.set(l,m),cr=l=>Le(l)==="img"?1:Io(l).fold(()=>dn(l).length,m=>m.length),Us=l=>Io(l).filter(m=>m.trim().length!==0||m.indexOf(Te)>-1).isSome(),Qs=["img","br"],ni=l=>Us(l)||_(Qs,Le(l)),ll=l=>kn(l,ni),Au=l=>dd(l,ni),dd=(l,m)=>{const h=v=>{const S=dn(v);for(let O=S.length-1;O>=0;O--){const F=S[O];if(m(F))return Q.some(F);const G=h(F);if(G.isSome())return G}return Q.none()};return h(l)},rh={scope:["row","col"]},md=l=>()=>{const m=q.fromTag("td",l.dom);return Go(m,q.fromTag("br",l.dom)),m},Ou=l=>()=>q.fromTag("col",l.dom),Wm=l=>()=>q.fromTag("colgroup",l.dom),Du=l=>()=>q.fromTag("tr",l.dom),pi=(l,m,h)=>{const v=Ii(l,m);return Be(h,(S,O)=>{S===null?Fs(v,O):vs(v,O,S)}),v},ah=l=>l,bp=(l,m,h)=>ll(l).map(S=>{const O=h.join(","),F=So(S,O,G=>Rn(G,l));return It(F,(G,ne)=>{const ye=Kc(ne);return Fs(ye,"contenteditable"),Go(G,ye),ye},m)}).getOr(m),Ev=(l,m)=>{Be(rh,(h,v)=>Wr(l,v).filter(S=>_(h,S)).each(S=>vs(m,v,S)))},Eo=(l,m,h)=>{const v=(F,G)=>{nr(F.element,G),gr(G,"height"),F.colspan!==1&&gr(G,"width")},S=F=>{const G=q.fromTag(Le(F.element),m.dom),ne=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ye=ne.length>0?bp(F.element,G,ne):G;return Go(ye,q.fromTag("br")),v(F,G),Ev(F.element,G),l(F.element,G),G};return{col:F=>{const G=q.fromTag(Le(F.element),m.dom);return v(F,G),l(F.element,G),G},colgroup:Wm(m),row:Du(m),cell:S,replace:pi,colGap:Ou(m),gap:md(m)}},er=l=>({col:Ou(l),colgroup:Wm(l),row:Du(l),cell:md(l),replace:ah,colGap:Ou(l),gap:md(l)}),Ha=(l,m)=>{const v=(m||document).createElement("div");return v.innerHTML=l,dn(q.fromDom(v))},Ic=l=>Ie(l,q.fromDom),Ol=l=>q.fromDom(l.getBody()),Lc=l=>m=>Rn(m,Ol(l)),Di=l=>{Fs(l,"data-mce-style");const m=h=>Fs(h,"data-mce-style");_e(El(l),m),_e(od(l),m),_e(nl(l),m)},Ru=l=>q.fromDom(l.selection.getStart()),vp=l=>l.getBoundingClientRect().width,Vd=l=>l.getBoundingClientRect().height,Zm=(l,m)=>{const h=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return Q.from(h).filter(Bn)},Gk=l=>/^(\d+(\.\d+)?)%$/.test(l),jm=l=>/^(\d+(\.\d+)?)px$/.test(l),qk=(l,m)=>{const h=m.column,v=m.column+m.colspan-1,S=m.row,O=m.row+m.rowspan-1;return h<=l.finishCol&&v>=l.startCol&&S<=l.finishRow&&O>=l.startRow},Zf=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,yp=(l,m)=>{let h=!0;const v=wt(Zf,m);for(let S=m.startRow;S<=m.finishRow;S++)for(let O=m.startCol;O<=m.finishCol;O++)h=h&&Lo.getAt(l,S,O).exists(v);return h?Q.some(m):Q.none()},wp=(l,m)=>X(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),va=(l,m,h)=>{const v=Lo.findItem(l,m,Rn),S=Lo.findItem(l,h,Rn);return v.bind(O=>S.map(F=>wp(O,F)))},Ud=(l,m,h)=>va(l,m,h).bind(v=>yp(l,v)),Kk=(l,m,h,v)=>Lo.findItem(l,m,Rn).bind(S=>{const O=h>0?S.row+S.rowspan-1:S.row,F=v>0?S.column+S.colspan-1:S.column;return Lo.getAt(l,O+h,F+v).map(ne=>ne.element)}),d1=(l,m,h)=>va(l,m,h).map(v=>{const S=Lo.filterItems(l,wt(qk,v));return Ie(S,O=>O.element)}),ea=(l,m)=>{const h=(v,S)=>cs(S,v);return Lo.findItem(l,m,h).map(v=>v.element)},C2=(l,m,h)=>Ia(l).bind(v=>{const S=nu(v);return Kk(S,l,m,h)}),Wd=(l,m,h)=>{const v=nu(l);return d1(v,m,h)},Cp=(l,m,h,v,S)=>{const O=nu(l),F=Rn(l,h)?Q.some(m):ea(O,m),G=Rn(l,S)?Q.some(v):ea(O,v);return F.bind(ne=>G.bind(ye=>d1(O,ne,ye)))},_v=(l,m,h)=>{const v=nu(l);return Ud(v,m,h)},nu=Lo.fromTable;var ul=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Gm=()=>{const l=ye=>q.fromDom(ye.dom.cloneNode(!1)),m=ye=>rr(ye).dom,h=ye=>Vn(ye)?Le(ye)==="body"?!0:_(ul,Le(ye)):!1,v=ye=>Vn(ye)?_(["br","img","hr","input"],Le(ye)):!1,S=ye=>Vn(ye)&&dr(ye,"contenteditable")==="false",O=(ye,Ze)=>ye.dom.compareDocumentPosition(Ze.dom),F=(ye,Ze)=>{const Mt=ma(ye);as(Ze,Mt)},G=ye=>{const Ze=Le(ye);return _(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ze)},ne=ye=>Vn(ye)?Wr(ye,"lang"):Q.none();return{up:oe({selector:Do,closest:fr,predicate:J,all:Qt}),down:oe({selector:or,predicate:Jc}),styles:oe({get:Ta,getRaw:zi,set:Jo,remove:gr}),attrs:oe({get:dr,set:vs,remove:Fs,copyTo:F}),insert:oe({before:vo,after:As,afterAll:ws,append:Go,appendAll:Ss,prepend:mr,wrap:is}),remove:oe({unwrap:$c,remove:Rr}),create:oe({nu:q.fromTag,clone:l,text:q.fromText}),query:oe({comparePosition:O,prevSibling:rn,nextSibling:_n}),property:oe({children:dn,name:Le,parent:pe,document:m,isText:ks,isComment:Ut,isElement:Vn,isSpecial:G,getLanguage:ne,getText:xn,setText:jo,isBoundary:h,isEmptyTag:v,isNonEditable:S}),eq:Rn,is:es}};const ch=(l,m,h,v)=>{const S=h[0],O=h.slice(1);return v(l,m,S,O)},m1=(l,m,h)=>h.length>0?ch(l,m,h,Sp):Q.none(),Sp=(l,m,h,v)=>{const S=m(l,h);return It(v,(O,F)=>{const G=m(l,F);return jf(l,O,G)},S)},jf=(l,m,h)=>m.bind(v=>h.filter(wt(l.eq,v))),f1=(l,m)=>wt(l.eq,m),S2=(l,m,h,v=Nt)=>{const S=[m].concat(l.up().all(m)),O=[h].concat(l.up().all(h)),F=Ze=>zn(Ze,v).fold(()=>Ze,ln=>Ze.slice(0,ln+1)),G=F(S),ne=F(O),ye=R(G,Ze=>ge(ne,f1(l,Ze)));return{firstpath:G,secondpath:ne,shared:ye}},Yk=m1,g1=S2,xp=Gm(),fd=(l,m)=>Yk(xp,(h,v)=>l(v),m),ih=(l,m,h)=>g1(xp,l,m,h),Zd=l=>Do(l,"table"),h1=(l,m,h)=>{const v=S=>O=>h!==void 0&&h(O)||Rn(O,S);return Rn(l,m)?Q.some({boxes:Q.some([l]),start:l,finish:m}):Zd(l).bind(S=>Zd(m).bind(O=>{if(Rn(S,O))return Q.some({boxes:Wd(S,l,m),start:l,finish:m});if(cs(S,O)){const F=So(m,"td,th",v(S)),G=F.length>0?F[F.length-1]:m;return Q.some({boxes:Cp(S,l,S,m,O),start:l,finish:G})}else if(cs(O,S)){const F=So(l,"td,th",v(O)),G=F.length>0?F[F.length-1]:l;return Q.some({boxes:Cp(O,l,S,m,O),start:l,finish:G})}else return ih(l,m).shared.bind(F=>fr(F,"table",h).bind(G=>{const ne=So(m,"td,th",v(G)),ye=ne.length>0?ne[ne.length-1]:m,Ze=So(l,"td,th",v(G)),Mt=Ze.length>0?Ze[Ze.length-1]:l;return Q.some({boxes:Cp(G,l,S,m,O),start:Mt,finish:ye})}))}))},kp=(l,m)=>{const h=or(l,m);return h.length>0?Q.some(h):Q.none()},Av=(l,m)=>R(l,h=>st(h,m)),p1=(l,m,h)=>Fr(l,m).bind(v=>Fr(l,h).bind(S=>fd(Zd,[v,S]).map(O=>({first:v,last:S,table:O})))),x2=(l,m)=>Do(l,"table").bind(h=>Fr(h,m).bind(v=>h1(v,l).bind(S=>S.boxes.map(O=>({boxes:O,start:S.start,finish:S.finish}))))),Ov=(l,m,h,v,S)=>Av(l,S).bind(O=>C2(O,m,h).bind(F=>x2(F,v))),b1=(l,m)=>kp(l,m),zs=(l,m,h)=>p1(l,m,h).bind(v=>{const S=ne=>Rn(l,ne),O="thead,tfoot,tbody,table",F=Do(v.first,O,S),G=Do(v.last,O,S);return F.bind(ne=>G.bind(ye=>Rn(ne,ye)?_v(v.table,v.first,v.last):Q.none()))}),po=bt,jd=l=>{const m=(v,S)=>Wr(v,S).exists(O=>parseInt(O,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&We(l,h)?Q.some(l):Q.none()},Dv=(l,m,h)=>m.length<=1?Q.none():zs(l,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Gd="data-mce-selected",v1="td["+Gd+"],th["+Gd+"]",k2="["+Gd+"]",ir="data-mce-first-selected",T2="td["+ir+"],th["+ir+"]",qd="data-mce-last-selected",E2="td["+qd+"],th["+qd+"]",Pt=k2,gd={selected:Gd,selectedSelector:v1,firstSelected:ir,firstSelectedSelector:T2,lastSelected:qd,lastSelectedSelector:E2},lh=(l,m,h)=>({element:h,mergable:Dv(m,l,gd),unmergable:jd(l),selection:po(l)}),Tp=(l,m,h)=>({element:l,clipboard:m,generators:h}),Xk=(l,m,h,v)=>({selection:po(l),clipboard:h,generators:v}),Gf=l=>Ia(l).bind(m=>b1(m,gd.firstSelectedSelector)).fold(oe(l),m=>m[0]),uh=l=>(m,h)=>{const v=Le(m),S=v==="col"||v==="colgroup"?Gf(m):m;return fr(S,l,h)},dh=uh("th,td,caption"),_2=uh("th,td"),Ja=l=>Ic(l.model.table.getSelectedCells()),Hr=l=>ze(Ja(l),m=>st(m,gd.selectedSelector)),Dl=l=>Ia(l[0]).map(m=>{const h=V(m,Pt);return Di(h),[h]}),Jk=(l,m)=>Ie(m,h=>l.selection.serializer.serialize(h.dom,{})).join(""),dl=l=>Ie(l,m=>m.dom.innerText).join(""),oi=(l,m)=>{l.on("BeforeGetContent",h=>{const v=S=>{h.preventDefault(),Dl(S).each(O=>{h.content=h.format==="text"?dl(O):Jk(l,O)})};if(h.selection===!0){const S=Hr(l);S.length>=1&&v(S)}}),l.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=Ja(l);z(v).each(S=>{Ia(S).each(O=>{const F=ze(Ha(h.content),ne=>Le(ne)!=="meta"),G=ps("table");if(F.length===1&&G(F[0])){h.preventDefault();const ne=q.fromDom(l.getDoc()),ye=er(ne),Ze=Tp(S,F[0],ye);m.pasteCells(O,Ze).each(()=>{l.focus()})}})})}})},Kd=(l,m)=>({element:l,offset:m}),qm=(l,m,h)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?h(m).bind(v=>qm(l,v,h).orThunk(()=>Q.some(v))):Q.none(),A2=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,kc=(l,m)=>{const h=qm(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(h))return Kd(h,A2(l,h));const v=l.property().children(h);return v.length>0?kc(l,v[v.length-1]):Kd(h,A2(l,h))},O2=kc,D2=Gm(),Km=l=>O2(D2,l),Rv=(l,m)=>{yc(l)||fi(l).each(v=>{const S=v.value/2;l1(l,S,v.unit),l1(m,S,v.unit)})},Nu=l=>Ie(l,oe(0)),y1=(l,m,h,v,S)=>S(l.slice(0,m)).concat(v).concat(S(l.slice(h))),Nv=l=>(m,h,v,S)=>{if(l(v)){const O=Math.max(S,m[h]-Math.abs(v)),F=Math.abs(O-m[h]);return v>=0?F:-F}else return v},Un=Nv(l=>l<0),Qk=Nv(we),R2=()=>{const l=(G,ne,ye,Ze,Mt)=>{const ln=Un(G,ne,Ze,Mt);return y1(G,ne,ye+1,[ln,0],Nu)},m=(G,ne,ye,Ze)=>{const Mt=(100+ye)/100,ln=Math.max(Ze,(G[ne]+ye)/Mt);return Ie(G,(Yt,vt)=>(vt===ne?ln:Yt/Mt)-Yt)},h=(G,ne,ye,Ze,Mt,ln)=>ln?m(G,ne,Ze,Mt):l(G,ne,ye,Ze,Mt);return{resizeTable:(G,ne)=>G(ne),clampTableDelta:Un,calcLeftEdgeDeltas:h,calcMiddleDeltas:(G,ne,ye,Ze,Mt,ln,Yt)=>h(G,ye,Ze,Mt,ln,Yt),calcRightEdgeDeltas:(G,ne,ye,Ze,Mt,ln)=>{if(ln)return m(G,ye,Ze,Mt);{const Yt=Un(G,ye,Ze,Mt);return Nu(G.slice(0,ye)).concat([Yt])}},calcRedestributedWidths:(G,ne,ye,Ze)=>{if(Ze){const ln=(ne+ye)/ne,Yt=Ie(G,vt=>vt/ln);return{delta:ln*100-100,newSizes:Yt}}else return{delta:ye,newSizes:G}}}},w1=()=>{const l=(F,G,ne,ye,Ze)=>{const Mt=ye>=0?ne:G,ln=Qk(F,Mt,ye,Ze);return y1(F,G,ne+1,[ln,-ln],Nu)};return{resizeTable:(F,G,ne)=>{ne&&F(G)},clampTableDelta:(F,G,ne,ye,Ze)=>{if(Ze){if(ne>=0)return ne;{const Mt=Et(F,(ln,Yt)=>ln+Yt-ye,0);return Math.max(-Mt,ne)}}else return Un(F,G,ne,ye)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(F,G,ne,ye,Ze,Mt)=>l(F,ne,ye,Ze,Mt),calcRightEdgeDeltas:(F,G,ne,ye,Ze,Mt)=>{if(Mt)return Nu(F);{const ln=ye/F.length;return Ie(F,oe(ln))}},calcRedestributedWidths:(F,G,ne,ye)=>({delta:0,newSizes:F})}},mh=l=>Lo.fromTable(l).grid,C1=ps("th"),fh=l=>We(l,m=>C1(m.element)),qf=(l,m)=>l&&m?"sectionCells":l?"section":"cells",hd=l=>{const m=l.section==="thead",h=_t(Mv(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:qf(m,h)}:{type:"body"}},Mv=l=>{const m=ze(l,h=>C1(h.element));return m.length===0?Q.some("td"):m.length===l.length?Q.some("th"):Q.none()},Ym=l=>{const m=Ie(l,S=>hd(S).type),h=_(m,"header"),v=_(m,"footer");if(!h&&!v)return Q.some("body");{const S=_(m,"body");return h&&!S&&!v?Q.some("header"):!h&&!S&&v?Q.some("footer"):Q.none()}},eT=l=>H(l.all,m=>{const h=hd(m);return h.type==="header"?Q.from(h.subType):Q.none()}),Yd=(l,m,h)=>Xs(h(l.element,m),!0,l.isLocked),Kf=(l,m)=>l.section!==m?ga(l.element,l.cells,m,l.isNew):l,S1=()=>({transformRow:Kf,transformCell:(l,m,h)=>{const v=h(l.element,m),S=Le(v)!=="td"?Hs(v,"td"):v;return Xs(S,l.isNew,l.isLocked)}}),x1=()=>({transformRow:Kf,transformCell:Yd}),Ep=()=>({transformRow:(l,m)=>Kf(l,m==="thead"?"tbody":m),transformCell:Yd}),Mu={getTableSectionType:(l,m)=>{const h=Lo.fromTable(l);switch(eT(h).getOr(m)){case"section":return S1();case"sectionCells":return x1();case"cells":return Ep()}},section:S1,sectionCells:x1,cells:Ep,fallback:()=>({transformRow:bt,transformCell:Yd})},gh=l=>fr(l,"[contenteditable]"),ou=(l,m=!1)=>Mr(l)?l.dom.isContentEditable:gh(l).fold(oe(m),h=>Ri(h)==="true"),Ri=l=>l.dom.contentEditable,Ap=(l,m,h,v)=>{h===v?Fs(l,m):vs(l,m,h)},pr=(l,m,h)=>{K(ls(l,m)).fold(()=>mr(l,h),v=>As(v,h))},nT=(l,m)=>{const h=$n(l,m).getOrThunk(()=>{const v=q.fromTag(m,Co(l).dom);return m==="thead"?pr(l,"caption,colgroup",v):m==="colgroup"?pr(l,"caption",v):Go(l,v),v});return Pr(h),h},N2=(l,m)=>{const h=[],v=[],S=Yt=>Ie(Yt,vt=>{vt.isNew&&h.push(vt.element);const fn=vt.element;return Pr(fn),_e(vt.cells,St=>{St.isNew&&v.push(St.element),Ap(St.element,"colspan",St.colspan,1),Ap(St.element,"rowspan",St.rowspan,1),Go(fn,St.element)}),fn}),O=Yt=>xe(Yt,vt=>Ie(vt.cells,fn=>(Ap(fn.element,"span",fn.colspan,1),fn.element))),F=(Yt,vt)=>{const fn=nT(l,vt),Wn=(vt==="colgroup"?O:S)(Yt);Ss(fn,Wn)},G=Yt=>{$n(l,Yt).each(Rr)},ne=(Yt,vt)=>{Yt.length>0?F(Yt,vt):G(vt)},ye=[],Ze=[],Mt=[],ln=[];return _e(m,Yt=>{switch(Yt.section){case"thead":ye.push(Yt);break;case"tbody":Ze.push(Yt);break;case"tfoot":Mt.push(Yt);break;case"colgroup":ln.push(Yt);break}}),ne(ln,"colgroup"),ne(ye,"thead"),ne(Ze,"tbody"),ne(Mt,"tfoot"),{newRows:h,newCells:v}},su=l=>Ie(l,m=>{const h=Kc(m.element);return _e(m.cells,v=>{const S=ki(v.element);Ap(S,"colspan",v.colspan,1),Ap(S,"rowspan",v.rowspan,1),Go(h,S)}),h}),k1=(l,m)=>Ie(l,h=>Lr(h,m)),M2=(l,m)=>l[m],pd=(l,m)=>{if(l.length===0)return 0;const h=l[0];return zn(l,S=>!m(h.element,S.element)).getOr(l.length)},uc=(l,m,h,v)=>{const S=M2(l,m),O=S.section==="colgroup",F=pd(S.cells.slice(h),v),G=O?1:pd(k1(l.slice(m),h),v);return{colspan:F,rowspan:G}},oT=(l,m)=>{const h=Ie(l,S=>Ie(S.cells,Nt)),v=(S,O,F,G)=>{for(let ne=S;ne<S+F;ne++)for(let ye=O;ye<O+G;ye++)h[ne][ye]=!0};return Ie(l,(S,O)=>{const F=xe(S.cells,(G,ne)=>{if(h[O][ne]===!1){const ye=uc(l,O,ne,m);return v(O,ne,ye.rowspan,ye.colspan),[oa(G.element,ye.rowspan,ye.colspan,G.isNew)]}else return[]});return Li(S.element,F,S.section,S.isNew)})},Op=(l,m,h)=>{const v=[];_e(l.colgroups,S=>{const O=[];for(let F=0;F<l.grid.columns;F++){const G=Lo.getColumnAt(l,F).map(ne=>Xs(ne.element,h,!1)).getOrThunk(()=>Xs(m.colGap(),!0,!1));O.push(G)}v.push(ga(S.element,O,"colgroup",h))});for(let S=0;S<l.grid.rows;S++){const O=[];for(let ne=0;ne<l.grid.columns;ne++){const ye=Lo.getAt(l,S,ne).map(Ze=>Xs(Ze.element,h,Ze.isLocked)).getOrThunk(()=>Xs(m.gap(),!0,!1));O.push(ye)}const F=l.all[S],G=ga(F.element,O,F.section,h);v.push(G)}return v},Yf=(l,m)=>Op(l,m,!1),hh=l=>oT(l,Rn),T1=(l,m)=>H(l.all,h=>R(h.cells,v=>Rn(m,v.element))),$2=(l,m,h)=>{const v=Ie(m.selection,O=>Pc(O).bind(F=>T1(l,F)).filter(h)),S=sa(v);return Vr(S.length>0,S)},Hc=(l,m,h,v,S)=>(O,F,G,ne)=>{const ye=Lo.fromTable(O),Ze=Q.from(ne==null?void 0:ne.section).getOrThunk(Mu.fallback);return m(ye,F).map(ln=>{const Yt=Yf(ye,G),vt=l(Yt,ln,Rn,S(G),Ze),fn=Yl(vt.grid),St=hh(vt.grid);return{info:ln,grid:St,cursor:vt.cursor,lockedColumns:fn}}).bind(ln=>{const Yt=N2(O,ln.grid),vt=Q.from(ne==null?void 0:ne.sizing).getOrThunk(()=>yr.getTableSize(O)),fn=Q.from(ne==null?void 0:ne.resize).getOrThunk(w1);return h(O,ln.grid,ln.info,{sizing:vt,resize:fn,section:Ze}),v(O),Fs(O,Ff),ln.lockedColumns.length>0&&vs(O,Ff,ln.lockedColumns.join(",")),Q.some({cursor:ln.cursor,newRows:Yt.newRows,newCells:Yt.newCells})})},z4=(l,m)=>Pc(m.element).bind(h=>T1(l,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),B2=(l,m)=>$2(l,m,we).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),V4=(l,m)=>m.mergable,U4=(l,m)=>m.unmergable,ml=(l,m)=>$2(l,m,we),zc=(l,m)=>$2(l,m,h=>!h.isLocked),bi=(l,m)=>T1(l,m).exists(h=>!h.isLocked),P2=(l,m)=>We(m,h=>bi(l,h)),sT=(l,m)=>V4(l,m).filter(h=>P2(l,h.cells)),Xm=(l,m)=>U4(l,m).filter(h=>P2(l,h)),ph=(l,m,h,v)=>{const S=La(l).rows;if(S.length===0)return l;for(let O=m.startRow;O<=m.finishRow;O++)for(let F=m.startCol;F<=m.finishCol;F++){const G=S[O],ne=Lr(G,F).isLocked;Bm(G,F,Xs(v(),!1,ne))}return l},E1=(l,m,h,v)=>{const S=La(l).rows;let O=!0;for(let F=0;F<S.length;F++)for(let G=0;G<ic(S[0]);G++){const ne=S[F],ye=Lr(ne,G),Ze=ye.element,Mt=h(Ze,m);Mt&&!O?Bm(ne,G,Xs(v(),!0,ye.isLocked)):Mt&&(O=!1)}return l},Dp=(l,m)=>Et(l,(h,v)=>ge(h,S=>m(S.element,v.element))?h:h.concat([v]),[]),$u=(l,m,h,v)=>(m>0&&m<l[0].cells.length&&_e(l,S=>{const O=S.cells[m-1];let F=0;const G=v();for(;S.cells.length>m+F&&h(O.element,S.cells[m+F].element);)Bm(S,m+F,Xs(G,!0,S.cells[m+F].isLocked)),F++}),l),Xf=(l,m,h,v)=>{const S=La(l).rows;if(m>0&&m<S.length){const O=S[m-1].cells,F=Dp(O,h);_e(F,G=>{let ne=Q.none();for(let ye=m;ye<S.length;ye++)for(let Ze=0;Ze<ic(S[0]);Ze++){const Mt=S[ye],ln=Lr(Mt,Ze);h(ln.element,G.element)&&(ne.isNone()&&(ne=Q.some(v())),ne.each(vt=>{Bm(Mt,Ze,Xs(vt,!0,ln.isLocked))}))}})}return l},bh=l=>{const m=O=>O(l),h=oe(l),v=()=>S,S={tag:!0,inner:l,fold:(O,F)=>F(l),isValue:we,isError:Nt,map:O=>Rp.value(O(l)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:O=>{O(l)},toOptional:()=>Q.some(l)};return S},vh=l=>{const m=()=>h,h={tag:!1,inner:l,fold:(v,S)=>v(l),isValue:Nt,isError:we,map:m,mapError:v=>Rp.error(v(l)),bind:m,exists:Nt,forall:we,getOr:bt,or:bt,getOrThunk:On,orThunk:On,getOrDie:At(String(l)),each:qe,toOptional:Q.none};return h},Rp={value:bh,error:vh,fromOption:(l,m)=>l.fold(()=>vh(m),bh)},ca=(l,m,h)=>{if(l.row>=m.length||l.column>ic(m[0]))return Rp.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),S=v[0].cells.slice(l.column),O=ic(h[0]),F=h.length;return Rp.value({rowDelta:v.length-F,colDelta:S.length-O})},ji=(l,m)=>{const h=ic(l[0]),v=ic(m[0]);return{rowDelta:0,colDelta:h-v}},Xd=(l,m)=>{const h=l.length,v=m.length;return{rowDelta:h-v,colDelta:0}},fl=(l,m,h,v)=>{const S=m.section==="colgroup"?h.col:h.cell;return Ue(l,O=>Xs(S(),!0,v(O)))},F2=(l,m,h,v)=>{const S=l[l.length-1];return l.concat(Ue(m,()=>{const O=S.section==="colgroup"?h.colgroup:h.row,F=Pf(S,O,bt),G=fl(F.cells.length,F,h,ne=>Ye(v,ne.toString()));return Cv(F,G)}))},rT=(l,m,h,v)=>Ie(l,S=>{const O=fl(m,S,h,Nt);return qa(S,v,O)}),aT=(l,m,h)=>Ie(l,v=>Et(h,(S,O)=>{const F=fl(1,v,m,we)[0];return Qr(S,O,F)},v)),gl=(l,m,h)=>{const v=m.colDelta<0?rT:bt,S=m.rowDelta<0?F2:bt,O=Yl(l),F=ic(l[0]),G=ge(O,Ze=>Ze===F-1),ne=v(l,Math.abs(m.colDelta),h,G?F-1:F),ye=Yl(ne);return S(ne,Math.abs(m.rowDelta),h,ae(ye,we))},Jm=(l,m,h,v)=>{const S=Lr(l[m],h),O=wt(v,S.element),F=l[m];return l.length>1&&ic(F)>1&&(h>0&&O(Bs(F,h-1))||h<F.cells.length-1&&O(Bs(F,h+1))||m>0&&O(Bs(l[m-1],h))||m<l.length-1&&O(Bs(l[m+1],h)))},I2=(l,m,h,v,S,O)=>{const F=l.row,G=l.column,ne=h.length,ye=ic(h[0]),Ze=F+ne,Mt=G+ye+O.length,ln=ae(O,we);for(let Yt=F;Yt<Ze;Yt++){let vt=0;for(let fn=G;fn<Mt;fn++){if(ln[fn]){vt++;continue}Jm(m,Yt,fn,S)&&E1(m,Bs(m[Yt],fn),S,v.cell);const St=fn-G-vt,Wn=Lr(h[Yt-F],St),To=Wn.element,zo=v.replace(To);Bm(m[Yt],fn,Xs(zo,!0,Wn.isLocked))}}return m},L2=(l,m,h)=>{const v=ic(m[0]),S=La(m).cols.length+l.row,O=Ue(v-l.column,G=>G+l.column),F=R(O,G=>We(h,ne=>ne!==G)).getOr(v-1);return{row:S,column:F}},$v=(l,m,h)=>ze(h,v=>v>=l.column&&v<=ic(m[0])+l.column),Bv=(l,m,h,v,S)=>{const O=Yl(m),F=L2(l,m,O),G=La(h).rows,ne=$v(F,G,O);return ca(F,m,G).map(Ze=>{const Mt={...Ze,colDelta:Ze.colDelta-ne.length},ln=gl(m,Mt,v),Yt=Yl(ln),vt=$v(F,G,Yt);return I2(F,ln,G,v,S,vt)})},Jf=(l,m,h,v,S)=>{$u(m,l,S,v.cell);const O=Xd(h,m),F=gl(h,O,v),G=Xd(m,F),ne=gl(m,G,v);return Ie(ne,(ye,Ze)=>qa(ye,l,F[Ze].cells))},Pv=(l,m,h,v,S)=>{Xf(m,l,S,v.cell);const O=Yl(m),F=ji(m,h),G={...F,colDelta:F.colDelta-O.length},ne=gl(m,G,v),{cols:ye,rows:Ze}=La(ne),Mt=Yl(ne),ln=ji(h,m),Yt={...ln,colDelta:ln.colDelta+Mt.length},vt=aT(h,v,Mt),fn=gl(vt,Yt,v);return[...ye,...Ze.slice(0,l),...fn,...Ze.slice(l,Ze.length)]},H2=(l,m,h,v)=>Pf(l,S=>v(S,h),m),z2=(l,m,h,v,S)=>{const{rows:O,cols:F}=La(l),G=O.slice(0,m),ne=O.slice(m),ye=H2(O[h],(Ze,Mt)=>m>0&&m<O.length&&v(Bs(O[m-1],Mt),Bs(O[m],Mt))?Lr(O[m],Mt):Xs(S(Ze.element,v),!0,Ze.isLocked),v,S);return[...F,...G,ye,...ne]},V2=(l,m,h,v,S,O,F)=>{if(h==="colgroup"||!v){const G=Lr(l,S);return Xs(F(G.element,O),!0,!1)}else return Lr(l,m)},Qm=(l,m,h,v,S)=>Ie(l,O=>{const F=m>0&&m<ic(O)&&v(Bs(O,m-1),Bs(O,m)),G=V2(O,m,O.section,F,h,v,S);return Qr(O,m,G)}),yh=(l,m)=>xe(l,h=>{const v=h.cells,S=It(m,(O,F)=>F>=0&&F<O.length?O.slice(0,F).concat(O.slice(F+1)):O,v);return S.length>0?[ga(h.element,S,h.section,h.isNew)]:[]}),Qf=(l,m,h)=>{const{rows:v,cols:S}=La(l);return[...S,...v.slice(0,m),...v.slice(h+1)]},U2=(l,m,h,v)=>Bs(l[m],h)!==void 0&&m>0&&v(Bs(l[m-1],h),Bs(l[m],h)),cT=(l,m,h)=>m>0&&h(Bs(l,m-1),Bs(l,m)),Fv=(l,m,h,v)=>U2(l,m,h,v)||cT(l[m],h,v),Np=(l,m)=>We(m,bt)&&fh(l.cells)?we:(v,S,O)=>!(Le(v.element)==="th"&&m[O]),Mp=(l,m)=>We(m,bt)&&fh(l)?we:(v,S,O)=>!(Le(v.element)==="th"&&m[S]),W2=(l,m,h,v)=>{const S=F=>F==="row"?Tl(m):yc(m),O=F=>S(F)?`${F}group`:F;return l?C1(m)?O(h):null:v&&C1(m)?O(h==="row"?"col":"row"):null},iT=(l,m)=>(h,v,S)=>Q.some(W2(l,h.element,"col",m[S])),Z2=(l,m)=>(h,v)=>Q.some(W2(l,h.element,"row",m[v])),za=(l,m,h)=>Xs(h(l.element,m),!0,l.isLocked),_1=(l,m,h,v,S,O,F)=>{const G=ne=>ge(m,ye=>h(ne.element,ye.element));return Ie(l,(ne,ye)=>Bo(ne,(Ze,Mt)=>{if(G(Ze)){const ln=F(Ze,ye,Mt)?S(Ze,h,v):Ze;return O(ln,ye,Mt).each(Yt=>{uo(ln.element,{scope:Q.from(Yt)})}),ln}else return Ze}))},$p=(l,m,h)=>xe(l,(v,S)=>Fv(l,S,m,h)?[]:[Lr(v,m)]),ef=(l,m,h)=>{const v=l[m];return xe(v.cells,(S,O)=>Fv(l,m,O,h)?[]:[S])},A1=(l,m,h,v,S)=>{const O=La(l).rows,F=xe(m,Ze=>$p(O,Ze,v)),G=Ie(O,Ze=>fh(Ze.cells)),ne=Mp(F,G),ye=Z2(h,G);return _1(l,F,v,S,za,ye,ne)},vi=(l,m,h,v,S,O,F)=>{const{cols:G,rows:ne}=La(l),ye=ne[m[0]],Ze=xe(m,St=>ef(ne,St,S)),Mt=Ie(ye.cells,(St,Wn)=>fh($p(ne,Wn,S))),ln=[...ne];_e(m,St=>{ln[St]=F.transformRow(ne[St],h)});const Yt=[...G,...ln],vt=Np(ye,Mt),fn=iT(v,Mt);return _1(Yt,Ze,S,O,F.transformCell,fn,vt)},hl=(l,m,h,v)=>{const S=La(l).rows,O=Ie(m,F=>Lr(S[F.row],F.column));return _1(l,O,h,v,za,Q.none,we)},tf={generate:l=>{if(!Kt(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],h={};return _e(l,(v,S)=>{const O=Z(v);if(O.length!==1)throw new Error("one and only one name per case");const F=O[0],G=v[F];if(h[F]!==void 0)throw new Error("duplicate key detected:"+F);if(F==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Kt(G))throw new Error("case arguments must be an array");m.push(F),h[F]=(...ne)=>{const ye=ne.length;if(ye!==G.length)throw new Error("Wrong number of arguments to case "+F+". Expected "+G.length+" ("+G+"), got "+ye);return{fold:(...Mt)=>{if(Mt.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Mt.length);return Mt[S].apply(null,ne)},match:Mt=>{const ln=Z(Mt);if(m.length!==ln.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+ln.join(","));if(!We(m,vt=>_(ln,vt)))throw new Error("Not all branches were specified when using match. Specified: "+ln.join(", ")+`
Required: `+m.join(", "));return Mt[F].apply(null,ne)},log:Mt=>{console.log(Mt,{constructors:m,constructor:F,params:ne})}}}}),h}},wh={...tf.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},G2=(l,m)=>l.length===0?wh.none():l.length===1?wh.only(0):m===0?wh.left(0,1):m===l.length-1?wh.right(m-1,m):m>0&&m<l.length-1?wh.middle(m-1,m,m+1):wh.none(),q2=(l,m,h,v,S)=>{const O=l.slice(0),F=G2(l,m),G=oe(Ie(O,oe(0))),ne=ln=>v.singleColumnWidth(O[ln],h),ye=(ln,Yt)=>S.calcLeftEdgeDeltas(O,ln,Yt,h,v.minCellWidth(),v.isRelative),Ze=(ln,Yt,vt)=>S.calcMiddleDeltas(O,ln,Yt,vt,h,v.minCellWidth(),v.isRelative),Mt=(ln,Yt)=>S.calcRightEdgeDeltas(O,ln,Yt,h,v.minCellWidth(),v.isRelative);return F.fold(G,ne,ye,Ze,Mt)},Jd=(l,m,h)=>{let v=0;for(let S=l;S<m;S++)v+=h[S]!==void 0?h[S]:0;return v},uT=(l,m)=>{const h=Lo.justCells(l);return Ie(h,v=>{const S=Jd(v.column,v.column+v.colspan,m);return{element:v.element,width:S,colspan:v.colspan}})},ia=(l,m)=>{const h=Lo.justColumns(l);return Ie(h,(v,S)=>({element:v.element,width:m[S],colspan:v.colspan}))},Rl=(l,m)=>{const h=Lo.justCells(l);return Ie(h,v=>{const S=Jd(v.row,v.row+v.rowspan,m);return{element:v.element,height:S,rowspan:v.rowspan}})},Ch=(l,m)=>Ie(l.all,(h,v)=>({element:h.element,height:m[v]})),O1=l=>It(l,(m,h)=>m+h,0),D1=(l,m)=>Lo.hasColumns(l)?ia(l,m):uT(l,m),Bp=(l,m,h)=>{const v=D1(l,m);_e(v,S=>{h.setElementWidth(S.element,S.width)})},Qd=(l,m,h,v,S)=>{const O=Lo.fromTable(l),F=S.getCellDelta(m),G=S.getWidths(O,S),ne=h===O.grid.columns-1,ye=v.clampTableDelta(G,h,F,S.minCellWidth(),ne),Ze=q2(G,h,ye,S,v),Mt=Ie(Ze,(ln,Yt)=>ln+G[Yt]);Bp(O,Mt,S),v.resizeTable(S.adjustTableWidth,ye,ne)},R1=(l,m,h,v)=>{const S=Lo.fromTable(l),O=Vf(S,l,v),F=Ie(O,(Ze,Mt)=>h===Mt?Math.max(m+Ze,vu()):Ze),G=Rl(S,F),ne=Ch(S,F);_e(ne,Ze=>{_u(Ze.element,Ze.height)}),_e(G,Ze=>{_u(Ze.element,Ze.height)});const ye=O1(F);_u(l,ye)},Sh=(l,m,h,v,S)=>{const O=Lo.generate(m),F=v.getWidths(O,v),G=v.pixelWidth(),{newSizes:ne,delta:ye}=S.calcRedestributedWidths(F,G,h.pixelDelta,v.isRelative);Bp(O,ne,v),v.adjustTableWidth(ye)},Iv=(l,m,h,v)=>{const S=Lo.generate(m),O=v.getWidths(S,v);Bp(S,O,v)},eg=l=>Et(l,(h,v)=>ge(h,O=>O.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),em=ps("col"),nf=ps("colgroup"),K2=l=>Le(l)==="tr"||nf(l),gt=l=>{const m=Ds(l,"colspan",1),h=Ds(l,"rowspan",1);return{element:l,colspan:m,rowspan:h}},xh=(l,m=gt)=>{const h=G=>em(G.element)?l.col(G):l.cell(G),v=G=>nf(G.element)?l.colgroup(G):l.row(G),S=G=>{if(K2(G))return v({element:G});{const ne=G,ye=h(m(ne));return O=Q.some({item:ne,replacement:ye}),ye}};let O=Q.none();return{getOrInit:(G,ne)=>O.fold(()=>S(G),ye=>ne(G,ye.item)?ye.replacement:S(G))}},dT=l=>m=>{const h=[],v=(F,G)=>R(h,ne=>G(ne.item,F)),S=F=>{const G=l==="td"?{scope:null}:{},ne=m.replace(F,l,G);return h.push({item:F,sub:ne}),ne};return{replaceOrInit:(F,G)=>{if(K2(F)||em(F))return F;{const ne=F;return v(ne,G).fold(()=>S(ne),ye=>G(F,ye.item)?ye.sub:S(ne))}}}},Lv=l=>Wr(l,"scope").map(m=>m.substr(0,3)),wa={modification:xh,transform:dT,merging:l=>({unmerge:v=>{const S=Lv(v);return S.each(O=>vs(v,"scope",O)),()=>{const O=l.cell({element:v,colspan:1,rowspan:1});return gr(O,"width"),gr(v,"width"),S.each(F=>vs(O,"scope",F)),O}},merge:v=>{const S=()=>{const O=sa(Ie(v,Lv));if(O.length===0)return Q.none();{const F=O[0],G=["row","col"];return ge(O,ye=>ye!==F&&_(G,ye))?Q.none():Q.from(F)}};return gr(v[0],"width"),S().fold(()=>Fs(v[0],"scope"),O=>vs(v[0],"scope",O+"group")),oe(v[0])}})},Y2=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],X2=(l,m)=>{const h=l.property().name(m);return _(["ol","ul"],h)},Pp=(l,m)=>{const h=l.property().name(m);return _(Y2,h)},tm=(l,m)=>_(["br","img","hr","input"],l.property().name(m)),kh=Gm(),us=l=>Pp(kh,l),Gi=l=>X2(kh,l),of=l=>tm(kh,l),Hv=l=>{const m=ps("br"),h=ne=>We(ne,ye=>m(ye)||ks(ye)&&xn(ye).trim().length===0),v=ne=>Le(ne)==="li"||J(ne,Gi).isSome(),S=ne=>_n(ne).map(ye=>us(ye)?!0:of(ye)?Le(ye)!=="img":!1).getOr(!1),O=ne=>Au(ne).bind(ye=>{const Ze=S(ye);return pe(ye).map(Mt=>Ze===!0||v(Mt)||m(ye)||us(Mt)&&!Rn(ne,Mt)?[]:[q.fromTag("br")])}).getOr([]),G=(()=>{const ne=xe(l,ye=>{const Ze=dn(ye);return h(Ze)?[]:Ze.concat(O(ye))});return ne.length===0?[q.fromTag("br")]:ne})();Pr(l[0]),Ss(l[0],G)},br=l=>ou(l,!0),zv=l=>{El(l).length===0&&Rr(l)},Fp=(l,m)=>({grid:l,cursor:m}),dc=l=>H(l,m=>H(m.cells,h=>{const v=h.element;return Vr(br(v),v)})),Bu=(l,m,h)=>{var v,S;const O=La(l).rows;return Q.from((S=(v=O[m])===null||v===void 0?void 0:v.cells[h])===null||S===void 0?void 0:S.element).filter(br).orThunk(()=>dc(O))},Ni=(l,m,h)=>{const v=Bu(l,m,h);return Fp(l,v)},Ip=l=>Et(l,(h,v)=>ge(h,O=>O.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),mT=(l,m,h,v)=>{const S=m[0].row,O=Ip(m),F=It(O,(G,ne)=>({grid:z2(G.grid,S,ne.row+G.delta,h,v.getOrInit),delta:G.delta+1}),{grid:l,delta:0}).grid;return Ni(F,S,m[0].column)},Th=(l,m,h,v)=>{const S=Ip(m),O=S[S.length-1],F=O.row+O.rowspan,G=It(S,(ne,ye)=>z2(ne,F,ye.row,h,v.getOrInit),l);return Ni(G,F,m[0].column)},M1=(l,m,h,v)=>{const S=m.details,O=eg(S),F=O[0].column,G=It(O,(ne,ye)=>({grid:Qm(ne.grid,F,ye.column+ne.delta,h,v.getOrInit),delta:ne.delta+1}),{grid:l,delta:0}).grid;return Ni(G,S[0].row,F)},$1=(l,m,h,v)=>{const S=m.details,O=S[S.length-1],F=O.column+O.colspan,G=eg(S),ne=It(G,(ye,Ze)=>Qm(ye,F,Ze.column,h,v.getOrInit),l);return Ni(ne,S[0].row,F)},B1=(l,m,h,v)=>{const S=eg(m),O=Ie(S,G=>G.column),F=A1(l,O,!0,h,v.replaceOrInit);return Ni(F,m[0].row,m[0].column)},J2=(l,m,h,v)=>{const S=hl(l,m,h,v.replaceOrInit);return Ni(S,m[0].row,m[0].column)},Vv=(l,m,h,v)=>{const S=eg(m),O=Ie(S,G=>G.column),F=A1(l,O,!1,h,v.replaceOrInit);return Ni(F,m[0].row,m[0].column)},Q2=(l,m,h,v)=>{const S=hl(l,m,h,v.replaceOrInit);return Ni(S,m[0].row,m[0].column)},P1=(l,m)=>(h,v,S,O,F)=>{const G=Ip(v),ne=Ie(G,Ze=>Ze.row),ye=vi(h,ne,l,m,S,O.replaceOrInit,F);return Ni(ye,v[0].row,v[0].column)},tg=P1("thead",!0),pl=P1("tbody",!1),fT=P1("tfoot",!1),Qa=(l,m,h,v)=>{const S=eg(m.details),O=yh(l,Ie(S,G=>G.column)),F=O.length>0?O[0].cells.length-1:0;return Ni(O,S[0].row,Math.min(S[0].column,F))},eC=(l,m,h,v)=>{const S=Ip(m),O=Qf(l,S[0].row,S[S.length-1].row),F=O.length>0?O.length-1:0;return Ni(O,Math.min(m[0].row,F),m[0].column)},nm=(l,m,h,v)=>{const S=m.cells;Hv(S);const O=ph(l,m.bounds,h,v.merge(S));return Fp(O,Q.from(S[0]))},gT=(l,m,h,v)=>{const O=It(m,(F,G)=>E1(F,G,h,v.unmerge(G)),l);return Fp(O,Q.from(m[0]))},yi=(l,m,h,v)=>{const O=((ne,ye)=>{const Ze=Lo.fromTable(ne);return Op(Ze,ye,!0)})(m.clipboard,m.generators),F=mi(m.row,m.column);return Bv(F,l,O,m.generators,h).fold(()=>Fp(l,Q.some(m.element)),ne=>Ni(ne,m.row,m.column))},F1=(l,m,h)=>{const v=Fd(l,h.section),S=Lo.generate(v);return Op(S,m,!0)},ru=(l,m,h,v)=>{const S=La(l).rows,O=m.cells[0].column,F=S[m.cells[0].row],G=F1(m.clipboard,m.generators,F),ne=Jf(O,l,G,m.generators,h);return Ni(ne,m.cells[0].row,m.cells[0].column)},Uv=(l,m,h,v)=>{const S=La(l).rows,O=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,F=S[m.cells[0].row],G=F1(m.clipboard,m.generators,F),ne=Jf(O,l,G,m.generators,h);return Ni(ne,m.cells[0].row,m.cells[0].column)},tC=(l,m,h,v)=>{const S=La(l).rows,O=m.cells[0].row,F=S[O],G=F1(m.clipboard,m.generators,F),ne=Pv(O,l,G,m.generators,h);return Ni(ne,m.cells[0].row,m.cells[0].column)},hT=(l,m,h,v)=>{const S=La(l).rows,O=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,F=S[m.cells[0].row],G=F1(m.clipboard,m.generators,F),ne=Pv(O,l,G,m.generators,h);return Ni(ne,m.cells[0].row,m.cells[0].column)},pT=(l,m)=>{const h=Lo.fromTable(l);return ml(h,m).bind(S=>{const O=S[S.length-1],F=S[0].column,G=O.column+O.colspan,ne=Ee(Ie(h.all,ye=>ze(ye.cells,Ze=>Ze.column>=F&&Ze.column<G)));return Mv(ne)}).getOr("")},Tc=(l,m)=>{const h=Lo.fromTable(l);return ml(h,m).bind(Mv).getOr("")},Ec=(l,m)=>{const h=Lo.fromTable(l);return ml(h,m).bind(S=>{const O=S[S.length-1],F=S[0].row,G=O.row+O.rowspan,ne=h.all.slice(F,G);return Ym(ne)}).getOr("")},si=(l,m,h,v)=>Iv(l,m,h,v.sizing),Vc=(l,m,h,v)=>Sh(l,m,h,v.sizing,v.resize),qi=(l,m)=>ge(m,h=>h.column===0&&h.isLocked),Va=(l,m)=>ge(m,h=>h.column+h.colspan>=l.grid.columns&&h.isLocked),I1=(l,m)=>{const h=lc(l),v=eg(m);return Et(v,(S,O)=>{const G=h[O.column].map(qn).getOr(0);return S+G},0)},L1=l=>(m,h)=>ml(m,h).filter(v=>!(l?qi:Va)(m,v)).map(v=>({details:v,pixelDelta:I1(m,v)})),nC=(l,m)=>zc(l,m).map(h=>({details:h,pixelDelta:-I1(l,h)})),H1=l=>(m,h)=>B2(m,h).filter(v=>!(l?qi:Va)(m,v.cells)),Pn=wa.transform("th"),ng=wa.transform("td"),z1=Hc(mT,ml,qe,qe,wa.modification),Wv=Hc(Th,ml,qe,qe,wa.modification),bT=Hc(M1,L1(!0),Vc,qe,wa.modification),W4=Hc($1,L1(!1),Vc,qe,wa.modification),oC=Hc(Qa,nC,Vc,zv,wa.modification),vT=Hc(eC,ml,qe,zv,wa.modification),yT=Hc(B1,zc,qe,qe,Pn),V1=Hc(Vv,zc,qe,qe,ng),wT=Hc(tg,zc,qe,qe,Pn),bl=Hc(pl,zc,qe,qe,ng),Lp=Hc(fT,zc,qe,qe,ng),CT=Hc(J2,zc,qe,qe,Pn),sC=Hc(Q2,zc,qe,qe,ng),cn=Hc(nm,sT,si,qe,wa.merging),ST=Hc(gT,Xm,si,qe,wa.merging),mc=Hc(yi,z4,si,qe,wa.modification),rC=Hc(ru,H1(!0),qe,qe,wa.modification),Zv=Hc(Uv,H1(!1),qe,qe,wa.modification),xT=Hc(tC,B2,qe,qe,wa.modification),Nl=Hc(hT,B2,qe,qe,wa.modification),Z4=pT,kT=Tc,om=Ec,aC=(l,m)=>l.dispatch("NewRow",{node:m}),jv=(l,m)=>l.dispatch("NewCell",{node:m}),Ki=(l,m,h)=>{l.dispatch("TableModified",{...h,table:m})},Ml=(l,m,h,v,S)=>{l.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:S})},U1=l=>{l.dispatch("TableSelectionClear")},Pu=(l,m,h,v,S)=>{l.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:S})},cC=(l,m,h,v,S)=>{l.dispatch("ObjectResized",{target:m,width:h,height:v,origin:S})},Hp={structure:!1,style:!0},Ua={structure:!0,style:!1},iC={structure:!0,style:!0},sf=l=>m=>m.options.get(l),W1="100%",lC=l=>{var m;const h=l.dom,v=(m=h.getParent(l.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:l.getBody();return ns(q.fromDom(v))+"px"},Gv=(l,m)=>Vp(l)||!uC(l)?m:Eh(l)?{...m,width:lC(l)}:{...m,width:W1},TT=(l,m)=>Vp(l)||uC(l)?m:Eh(l)?{...m,width:lC(l)}:{...m,width:W1},ET=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=_(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=_(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0})},qv=l=>Q.from(l.options.get("table_clone_elements")),_T=l=>{const m=l.options.get("object_resizing");return _(m.split(","),"table")},og=sf("table_header_type"),zp=sf("table_column_resizing"),Z1=l=>zp(l)==="preservetable",Kv=l=>zp(l)==="resizetable",sg=sf("table_sizing_mode"),rg=l=>sg(l)==="relative",Eh=l=>sg(l)==="fixed",Vp=l=>sg(l)==="responsive",AT=sf("table_resize_bars"),uC=sf("table_style_by_css"),Yv=l=>{const m=l.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:TT(l,h)},Xv=l=>{const m=l.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:Gv(l,h)},OT=sf("table_use_colgroups"),ag=(l,m)=>rg(l)?yr.percentageSize(m):Eh(l)?yr.pixelSize(m):yr.getTableSize(m),zr=(l,m,h)=>{const v=ci=>Le(Ol(ci))==="table",S=ci=>!v(l)||mh(ci).rows>1,O=ci=>!v(l)||mh(ci).columns>1,F=qv(l),G=Kv(l)?qe:Rv,ne=ci=>{switch(og(l)){case"section":return Mu.section();case"sectionCells":return Mu.sectionCells();case"cells":return Mu.cells();default:return Mu.getTableSectionType(ci,"section")}},ye=(ci,Bi)=>Bi.cursor.fold(()=>{const Zh=El(ci);return z(Zh).filter(Mr).map(Uu=>{h.clearSelectedCells(ci.dom);const Nc=l.dom.createRng();return Nc.selectNode(Uu.dom),l.selection.setRng(Nc),vs(Uu,"data-mce-selected","1"),Nc})},Zh=>{const Uu=Km(Zh),Nc=l.dom.createRng();return Nc.setStart(Uu.element.dom,Uu.offset),Nc.setEnd(Uu.element.dom,Uu.offset),l.selection.setRng(Nc),h.clearSelectedCells(ci.dom),Q.some(Nc)}),Ze=(ci,Bi,Zh,Uu)=>(Nc,AE,OE=!1)=>{Di(Nc);const jh=q.fromDom(l.getDoc()),Gy=Eo(Zh,jh,F),DE={sizing:ag(l,Nc),resize:Kv(l)?R2():w1(),section:ne(Nc)};return Bi(Nc)?ci(Nc,AE,Gy,DE).bind(qy=>{m.refresh(Nc.dom),_e(qy.newRows,bb=>{aC(l,bb.dom)}),_e(qy.newCells,bb=>{jv(l,bb.dom)});const A0=ye(Nc,qy);return Mr(Nc)&&(Di(Nc),OE||Ki(l,Nc.dom,Uu)),A0.map(bb=>({rng:bb,effect:Uu}))}):Q.none()},Mt=Ze(vT,S,qe,Ua),ln=Ze(oC,O,qe,Ua),Yt=Ze(z1,we,qe,Ua),vt=Ze(Wv,we,qe,Ua),fn=Ze(bT,we,G,Ua),St=Ze(W4,we,G,Ua),Wn=Ze(cn,we,qe,Ua),To=Ze(ST,we,qe,Ua),zo=Ze(rC,we,qe,Ua),Ar=Ze(Zv,we,qe,Ua),gc=Ze(xT,we,qe,Ua),la=Ze(Nl,we,qe,Ua),$i=Ze(mc,we,qe,iC),Cf=Ze(CT,we,qe,Ua),pb=Ze(sC,we,qe,Ua),E0=Ze(yT,we,qe,Ua),_0=Ze(V1,we,qe,Ua),qs=Ze(wT,we,qe,Ua),Dc=Ze(bl,we,qe,Ua),Rc=Ze(Lp,we,qe,Ua);return{deleteRow:Mt,deleteColumn:ln,insertRowsBefore:Yt,insertRowsAfter:vt,insertColumnsBefore:fn,insertColumnsAfter:St,mergeCells:Wn,unmergeCells:To,pasteColsBefore:zo,pasteColsAfter:Ar,pasteRowsBefore:gc,pasteRowsAfter:la,pasteCells:$i,makeCellsHeader:Cf,unmakeCellsHeader:pb,makeColumnsHeader:E0,unmakeColumnsHeader:_0,makeRowsHeader:qs,makeRowsBody:Dc,makeRowsFooter:Rc,getTableRowType:om,getTableCellType:kT,getTableColType:Z4}},Jv=(l,m,h)=>{const v=Ds(l,m,1);h===1||v<=1?Fs(l,m):vs(l,m,Math.min(h,v))},ri=(l,m)=>h=>{const v=h.column+h.colspan-1,S=h.column;return v>=l&&S<m},Qv=(l,m,h)=>{if(Lo.hasColumns(l)){const v=ze(Lo.justColumns(l),ri(m,h)),S=Ie(v,F=>{const G=ki(F.element);return Jv(G,"span",h-m),G}),O=q.fromTag("colgroup");return Ss(O,S),[O]}else return[]},ey=(l,m,h)=>Ie(l.all,v=>{const S=ze(v.cells,ri(m,h)),O=Ie(S,G=>{const ne=ki(G.element);return Jv(ne,"colspan",h-m),ne}),F=q.fromTag("tr");return Ss(F,O),F}),Up=(l,m)=>{const h=Lo.fromTable(l);return zc(h,m).map(S=>{const O=S[S.length-1],F=S[0].column,G=O.column+O.colspan,ne=Qv(h,F,G),ye=ey(h,F,G);return[...ne,...ye]})},j1=(l,m,h)=>{const v=Lo.fromTable(l);return ml(v,m).bind(O=>{const F=Op(v,h,!1),ne=La(F).rows.slice(O[0].row,O[O.length-1].row+O[O.length-1].rowspan),ye=xe(ne,Mt=>{const ln=ze(Mt.cells,Yt=>!Yt.isLocked);return ln.length>0?[{...Mt,cells:ln}]:[]}),Ze=hh(ye);return Vr(Ze.length>0,Ze)}).map(O=>su(O))},Wp=tf.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),dC=(l,m,h)=>{const v=h.substring(0,h.length-l.length),S=parseFloat(v);return v===S.toString()?m(S):Wp.invalid(h)},rf={...Wp,from:l=>me(l,"%")?dC("%",Wp.percent,l):me(l,"px")?dC("px",Wp.pixels,l):Wp.invalid(l)},DT=(l,m)=>Ie(l,h=>rf.from(h).fold(()=>h,S=>S/m*100+"%",S=>S+"%")),RT=(l,m,h)=>{const v=h/m;return Ie(l,S=>rf.from(S).fold(()=>S,F=>F*v+"px",F=>F/100*h+"px"))},NT=(l,m)=>{const h=l.fold(()=>oe(""),v=>{const S=v/m;return oe(S+"px")},()=>{const v=100/m;return oe(v+"%")});return Ue(m,h)},MT=(l,m,h)=>l.fold(()=>m,v=>RT(m,h,v),v=>DT(m,h)),mC=(l,m,h)=>{const v=rf.from(h),S=We(l,O=>O==="0px")?NT(v,l.length):MT(v,l,m);return G1(S)},ty=(l,m)=>l.length===0?m:It(l,(h,v)=>rf.from(v).fold(oe(0),bt,bt)+h,0),$T=(l,m)=>{const h=Math.floor(l);return{value:h+m,remainder:l-h}},BT=(l,m)=>rf.from(l).fold(oe(l),h=>h+m+"px",h=>h+m+"%"),G1=l=>{if(l.length===0)return l;const m=It(l,(v,S)=>{const O=rf.from(S).fold(()=>({value:S,remainder:0}),F=>$T(F,"px"),F=>({value:F+"%",remainder:0}));return{output:[O.value].concat(v.output),remainder:v.remainder+O.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([BT(h[h.length-1],Math.round(m.remainder))])},PT=rf.from,fC=(l,m,h)=>{_e(m,v=>{const S=l.slice(v.column,v.colspan+v.column),O=ty(S,jl());Jo(v.element,"width",O+h)})},FT=(l,m,h)=>{_e(m,(v,S)=>{const O=ty([l[S]],jl());Jo(v.element,"width",O+h)})},Zp=(l,m,h,v)=>{_e(h,S=>{const O=l.slice(S.row,S.rowspan+S.row),F=ty(O,vu());Jo(S.element,"height",F+v)}),_e(m,(S,O)=>{Jo(S.element,"height",l[O])})},ny=l=>PT(l).fold(oe("px"),oe("px"),oe("%")),gC=(l,m,h)=>{const v=Lo.fromTable(l),S=v.all,O=Lo.justCells(v),F=Lo.justColumns(v);m.each(G=>{const ne=ny(G),ye=Zo(l),Ze=Ns(v,l),Mt=mC(Ze,ye,G);Lo.hasColumns(v)?FT(Mt,F,ne):fC(Mt,O,ne),Jo(l,"width",G)}),h.each(G=>{const ne=ny(G),ye=Fm(l),Ze=Uf(v,l,Eu),Mt=mC(Ze,ye,G);Zp(Mt,S,O,ne),Jo(l,"height",G)})},hC=hp,pC=Tt,cg=Oi,ig=l=>{Fs(l,"width")},af=l=>{const m=xc(l);gC(l,Q.some(m),Q.none()),ig(l)},_h=l=>{const m=Ya(l);gC(l,Q.some(m),Q.none()),ig(l)},bC=l=>{gr(l,"width");const m=od(l),h=m.length>0?m:El(l);_e(h,v=>{gr(v,"width"),ig(v)}),ig(l)},sm={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},oy=()=>q.fromTag("th"),IT=()=>q.fromTag("td"),cf=()=>q.fromTag("col"),q1=(l,m,h,v)=>{const S=q.fromTag("tr");for(let O=0;O<l;O++){const F=v<m||O<h?oy():IT();O<h&&vs(F,"scope","row"),v<m&&vs(F,"scope","col"),Go(F,q.fromTag("br")),Go(S,F)}return S},LT=l=>{const m=q.fromTag("colgroup");return Ue(l,()=>Go(m,cf())),m},sy=(l,m,h,v)=>Ue(l,S=>q1(m,h,v,S)),HT=(l,m,h,v,S,O=sm)=>{const F=q.fromTag("table"),G=S!=="cells";Os(F,O.styles),as(F,O.attributes),O.colGroups&&Go(F,LT(m));const ne=Math.min(l,h);if(G&&h>0){const Yt=q.fromTag("thead");Go(F,Yt);const fn=sy(h,m,S==="sectionCells"?ne:0,v);Ss(Yt,fn)}const ye=q.fromTag("tbody");Go(F,ye);const Ze=G?l-ne:l,ln=sy(Ze,m,G?0:h,v);return Ss(ye,ln),F},zT=l=>l.dom.innerHTML,ry=l=>{const m=q.fromTag("div"),h=q.fromDom(l.dom.cloneNode(!0));return Go(m,h),zT(m)},vC=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},yC=(l,m)=>{Fr(m,"td,th").each(wt(vC,l))},ay=(l,m)=>{_e(or(m,"tr"),h=>{aC(l,h.dom),_e(or(h,"th,td"),v=>{jv(l,v.dom)})})},wC=l=>Qn(l)&&l.indexOf("%")!==-1,CC=(l,m,h,v,S)=>{const O=Xv(l),F={styles:O,attributes:Yv(l),colGroups:OT(l)};return l.undoManager.ignore(()=>{const G=HT(h,m,S,v,og(l),F);vs(G,"data-mce-id","__mce");const ne=ry(G);l.insertContent(ne),l.addVisual()}),Fr(Ol(l),'table[data-mce-id="__mce"]').map(G=>(Eh(l)?_h(G):Vp(l)?bC(G):(rg(l)||wC(O.width))&&af(G),Di(G),Fs(G,"data-mce-id"),ay(l,G),yC(l,G),G.dom)).getOrNull()},VT=(l,m,h,v={})=>{const S=O=>an(O)&&O>0;if(S(m)&&S(h)){const O=v.headerRows||0,F=v.headerColumns||0;return CC(l,h,m,F,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var K1=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const SC="x-tinymce/dom-table-",Y1=SC+"rows",bd=SC+"columns",cy=l=>{const m=K1.FakeClipboardItem(l);K1.write([m])},iy=l=>{var m;const h=(m=K1.read())!==null&&m!==void 0?m:[];return H(h,v=>Q.from(v.getType(l)))},xC=l=>{iy(l).isSome()&&K1.clear()},kC=l=>{l.fold(G4,m=>cy({[Y1]:m}))},ly=()=>iy(Y1),G4=()=>xC(Y1),X1=l=>{l.fold(Gp,m=>cy({[bd]:m}))},jp=()=>iy(bd),Gp=()=>xC(bd),lg=l=>dh(Ru(l),Lc(l)),UT=l=>_2(Ru(l),Lc(l)),uy=(l,m)=>{const h=Lc(l),v=()=>lg(l).each(St=>{Ia(St,h).filter(Y(h)).each(Wn=>{const To=q.fromText("");if(As(Wn,To),Rr(Wn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const zo=l.dom.createRng();zo.setStart(To.dom,0),zo.setEnd(To.dom,0),l.selection.setRng(zo),l.nodeChanged()}})}),S=St=>lg(l).each(Wn=>{Vp(l)||Eh(l)||rg(l)||Ia(Wn,h).each(zo=>{St==="relative"&&!hC(zo)?af(zo):St==="fixed"&&!pC(zo)?_h(zo):St==="responsive"&&!cg(zo)&&bC(zo),Di(zo),Ki(l,zo.dom,Ua)})}),O=St=>Ia(St,h),F=St=>UT(l).bind(Wn=>O(Wn).map(To=>St(To,Wn))),G=(St,Wn)=>{F(To=>{l.formatter.toggle("tableclass",{value:Wn},To.dom),Ki(l,To.dom,Hp)})},ne=(St,Wn)=>{F(To=>{const zo=Ja(l),gc=We(zo,la=>l.formatter.match("tablecellclass",{value:Wn},la.dom))?l.formatter.remove:l.formatter.apply;_e(zo,la=>gc("tablecellclass",{value:Wn},la.dom)),Ki(l,To.dom,Hp)})},ye=()=>{lg(l).each(St=>{Ia(St,h).each(Wn=>{$n(Wn,"caption").fold(()=>{const To=q.fromTag("caption");Go(To,q.fromText("Caption")),qc(Wn,To,0),l.selection.setCursorLocation(To.dom,0)},To=>{ps("caption")(St)&&Gn("td",Wn).each(zo=>l.selection.setCursorLocation(zo.dom,0)),Rr(To)}),Ki(l,Wn.dom,Ua)})})},Ze=St=>{l.focus()},Mt=(St,Wn=!1)=>F((To,zo)=>{const Ar=lh(Ja(l),To,zo);St(To,Ar,Wn).each(Ze)}),ln=()=>F((St,Wn)=>{const To=lh(Ja(l),St,Wn),zo=Eo(qe,q.fromDom(l.getDoc()),Q.none());return j1(St,To,zo)}),Yt=()=>F((St,Wn)=>{const To=lh(Ja(l),St,Wn);return Up(St,To)}),vt=(St,Wn)=>Wn().each(To=>{const zo=Ie(To,Ar=>ki(Ar));F((Ar,gc)=>{const la=er(q.fromDom(l.getDoc())),$i=Xk(Ja(l),gc,zo,la);St(Ar,$i).each(Ze)})}),fn=St=>(Wn,To)=>De(To,"type").each(zo=>{Mt(St(zo),To.no_events)});Be({mceTableSplitCells:()=>Mt(m.unmergeCells),mceTableMergeCells:()=>Mt(m.mergeCells),mceTableInsertRowBefore:()=>Mt(m.insertRowsBefore),mceTableInsertRowAfter:()=>Mt(m.insertRowsAfter),mceTableInsertColBefore:()=>Mt(m.insertColumnsBefore),mceTableInsertColAfter:()=>Mt(m.insertColumnsAfter),mceTableDeleteCol:()=>Mt(m.deleteColumn),mceTableDeleteRow:()=>Mt(m.deleteRow),mceTableCutCol:()=>Yt().each(St=>{X1(St),Mt(m.deleteColumn)}),mceTableCutRow:()=>ln().each(St=>{kC(St),Mt(m.deleteRow)}),mceTableCopyCol:()=>Yt().each(St=>X1(St)),mceTableCopyRow:()=>ln().each(St=>kC(St)),mceTablePasteColBefore:()=>vt(m.pasteColsBefore,jp),mceTablePasteColAfter:()=>vt(m.pasteColsAfter,jp),mceTablePasteRowBefore:()=>vt(m.pasteRowsBefore,ly),mceTablePasteRowAfter:()=>vt(m.pasteRowsAfter,ly),mceTableDelete:v,mceTableCellToggleClass:ne,mceTableToggleClass:G,mceTableToggleCaption:ye,mceTableSizingMode:(St,Wn)=>S(Wn),mceTableCellType:fn(St=>St==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:fn(St=>St==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:fn(St=>{switch(St){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(St,Wn)=>l.addCommand(Wn,St)),l.addCommand("mceInsertTable",(St,Wn)=>{VT(l,Wn.rows,Wn.columns,Wn.options)}),l.addCommand("mceTableApplyCellStyle",(St,Wn)=>{const To=gc=>"tablecell"+gc.toLowerCase().replace("-","");if(!qt(Wn))return;const zo=Ja(l);if(zo.length===0)return;const Ar=jn(Wn,(gc,la)=>l.formatter.has(To(la))&&Qn(gc));on(Ar)||(Be(Ar,(gc,la)=>{const $i=To(la);_e(zo,Cf=>{gc===""?l.formatter.remove($i,{value:null},Cf.dom,!0):l.formatter.apply($i,{value:gc},Cf.dom)})}),O(zo[0]).each(gc=>Ki(l,gc.dom,Hp)))})},WT=(l,m)=>{const h=Lc(l),v=S=>_2(Ru(l)).bind(O=>Ia(O,h).map(F=>{const G=lh(Ja(l),F,O);return S(F,G)})).getOr("");Be({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(S,O)=>l.addQueryValueHandler(O,S))},J1=tf.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),qp=(l,m,h,v)=>l.fold(m,h,v),TC=l=>l.fold(bt,bt,bt),ZT=J1.before,jT=J1.on,GT=J1.after,ec={before:ZT,on:jT,after:GT,cata:qp,getStart:TC},rm={create:(l,m)=>({selection:l,kill:m})},am=(l,m)=>{const h=l.document.createRange();return h.selectNode(m.dom),h},qT=(l,m)=>{const h=l.document.createRange();return lf(h,m),h},lf=(l,m)=>l.selectNodeContents(m.dom),Fu=(l,m)=>{m.fold(h=>{l.setStartBefore(h.dom)},(h,v)=>{l.setStart(h.dom,v)},h=>{l.setStartAfter(h.dom)})},Q1=(l,m)=>{m.fold(h=>{l.setEndBefore(h.dom)},(h,v)=>{l.setEnd(h.dom,v)},h=>{l.setEndAfter(h.dom)})},e0=(l,m,h)=>{const v=l.document.createRange();return Fu(v,m),Q1(v,h),v},dy=(l,m,h,v,S)=>{const O=l.document.createRange();return O.setStart(m.dom,h),O.setEnd(v.dom,S),O},EC=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),cm=l=>{const m=l.getClientRects(),h=m.length>0?m[0]:l.getBoundingClientRect();return h.width>0||h.height>0?Q.some(h).map(EC):Q.none()},vd=tf.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),t0=(l,m,h)=>m(q.fromDom(h.startContainer),h.startOffset,q.fromDom(h.endContainer),h.endOffset),_C=(l,m)=>m.match({domRange:h=>({ltr:oe(h),rtl:Q.none}),relative:(h,v)=>({ltr:Ei(()=>e0(l,h,v)),rtl:Ei(()=>Q.some(e0(l,v,h)))}),exact:(h,v,S,O)=>({ltr:Ei(()=>dy(l,h,v,S,O)),rtl:Ei(()=>Q.some(dy(l,S,O,h,v)))})}),Kp=(l,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(S=>S.collapsed===!1).map(S=>vd.rtl(q.fromDom(S.endContainer),S.endOffset,q.fromDom(S.startContainer),S.startOffset)).getOrThunk(()=>t0(l,vd.ltr,h)):t0(l,vd.ltr,h)},Oh=(l,m)=>{const h=_C(l,m);return Kp(l,h)},Uc=(l,m)=>Oh(l,m).match({ltr:(v,S,O,F)=>{const G=l.document.createRange();return G.setStart(v.dom,S),G.setEnd(O.dom,F),G},rtl:(v,S,O,F)=>{const G=l.document.createRange();return G.setStart(O.dom,F),G.setEnd(v.dom,S),G}});vd.ltr,vd.rtl;const uf={create:(l,m,h,v)=>({start:l,soffset:m,finish:h,foffset:v})},my={create:(l,m,h,v)=>({start:ec.on(l,m),finish:ec.on(h,v)})},Iu=(l,m)=>{const h=Uc(l,m);return uf.create(q.fromDom(h.startContainer),h.startOffset,q.fromDom(h.endContainer),h.endOffset)},Yp=my.create,n0=(l,m,h,v,S,O,F)=>Rn(h,S)&&v===O?Q.none():fr(h,"td,th",m).bind(G=>fr(S,"td,th",m).bind(ne=>ug(l,m,G,ne,F))),ug=(l,m,h,v,S)=>Rn(h,v)?Q.none():h1(h,v,m).bind(O=>{const F=O.boxes.getOr([]);return F.length>1?(S(l,F,O.start,O.finish),Q.some(rm.create(Q.some(Yp(h,0,h,cr(h))),!0))):Q.none()}),KT=(l,m,h,v,S)=>{const O=F=>(S.clearBeforeUpdate(h),S.selectRange(h,F.boxes,F.start,F.finish),F.boxes);return Ov(v,l,m,S.firstSelectedSelector,S.lastSelectedSelector).map(O)},Dh=(l,m)=>({item:l,mode:m}),OC=(l,m,h,v=yd)=>l.property().parent(m).map(S=>Dh(S,v)),yd=(l,m,h,v=Rh)=>h.sibling(l,m).map(S=>Dh(S,v)),Rh=(l,m,h,v=Rh)=>{const S=l.property().children(m);return h.first(S).map(F=>Dh(F,v))},DC=[{current:OC,next:yd,fallback:Q.none()},{current:yd,next:Rh,fallback:Q.some(OC)},{current:Rh,next:Rh,fallback:Q.some(yd)}],Xp=(l,m,h,v,S=DC)=>R(S,F=>F.current===h).bind(F=>F.current(l,m,v,F.next).orThunk(()=>F.fallback.bind(G=>Xp(l,m,G,v)))),Jp={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?Q.some(h[h.length-1]):Q.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?Q.some(h[0]):Q.none()})},Qp=(l,m,h,v,S,O)=>Xp(l,m,v,S).bind(G=>O(G.item)?Q.none():h(G.item)?Q.some(G.item):Qp(l,G.item,h,G.mode,S,O)),fy=(l,m,h,v)=>Qp(l,m,h,yd,Jp.left(),v),gy=(l,m,h,v)=>Qp(l,m,h,yd,Jp.right(),v),hy=l=>m=>l.property().children(m).length===0,RC=(l,m,h)=>Nh(l,m,hy(l),h),vl=(l,m,h)=>o0(l,m,hy(l),h),Nh=fy,o0=gy,wd=Gm(),wi=(l,m)=>RC(wd,l,m),yl=(l,m)=>vl(wd,l,m),Mi=(l,m,h)=>Nh(wd,l,m,h),Cd=(l,m,h)=>o0(wd,l,m,h),py=(l,m,h)=>J(l,m,h).isSome(),wl=tf.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),dg=(l,m,h)=>{const v=l.getRect(m),S=l.getRect(h);return S.right>v.left&&S.left<v.right},YT=l=>fr(l,"tr"),mg={...wl,verify:(l,m,h,v,S,O,F)=>fr(v,"td,th",F).bind(G=>fr(m,"td,th",F).map(ne=>Rn(G,ne)?Rn(v,G)&&cr(G)===S?O(ne):wl.none("in same cell"):fd(YT,[G,ne]).fold(()=>dg(l,ne,G)?wl.success():O(ne),ye=>O(ne)))).getOr(wl.none("default")),cata:(l,m,h,v,S)=>l.fold(m,h,v,S)},by=(l,m,h,v)=>({parent:l,children:m,element:h,index:v}),eb=l=>pe(l).bind(m=>{const h=dn(m);return XT(h,l).map(v=>by(m,h,l,v))}),XT=(l,m)=>zn(l,wt(Rn,m)),NC=ps("br"),vy=(l,m,h)=>m(l,h).bind(v=>ks(v)&&xn(v).trim().length===0?vy(v,m,h):Q.some(v)),X4=(l,m,h)=>h.traverse(m).orThunk(()=>vy(m,h.gather,l)).map(h.relative),JT=(l,m)=>Mn(l,m).filter(NC).orThunk(()=>Mn(l,m-1).filter(NC)),ai=(l,m,h,v)=>JT(m,h).bind(S=>v.traverse(S).fold(()=>vy(S,v.gather,l).map(v.relative),O=>eb(O).map(F=>ec.on(F.parent,F.index)))),s0=(l,m,h,v)=>(NC(m)?X4(l,m,v):ai(l,m,h,v)).map(O=>({start:O,finish:O})),fg=l=>mg.cata(l,m=>Q.none(),()=>Q.none(),m=>Q.some(Kd(m,0)),m=>Q.some(Kd(m,cr(m)))),lm=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),tb=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),r0=(l,m,h)=>({left:l.left+m,top:l.top+h,right:l.right+m,bottom:l.bottom+h}),MC=l=>l.top,QT=l=>l.bottom,eE=(l,m,h)=>h>=0&&h<cr(m)?l.getRangedRect(m,h,m,h+1):h>0?l.getRangedRect(m,h-1,m,h):Q.none(),a0=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Ac=(l,m)=>Q.some(l.getRect(m)),$C=(l,m,h)=>Vn(m)?Ac(l,m).map(a0):ks(m)?eE(l,m,h).map(a0):Q.none(),Mh=(l,m)=>Vn(m)?Ac(l,m).map(a0):ks(m)?l.getRangedRect(m,0,m,cr(m)).map(a0):Q.none(),Oc=5,c0=100,au=tf.generate([{none:[]},{retry:["caret"]}]),yy=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,wy=(l,m,h)=>de(m,us).fold(Nt,v=>Mh(l,v).exists(S=>yy(h,S))),tE=(l,m,h,v,S)=>{const O=lm(S,Oc);return Math.abs(h.bottom-v.bottom)<1||h.top>S.bottom?au.retry(O):h.top===S.bottom?au.retry(lm(S,1)):wy(l,m,S)?au.retry(r0(O,Oc,0)):au.none()},Cy={point:MC,adjuster:(l,m,h,v,S)=>{const O=tb(S,Oc);return Math.abs(h.top-v.top)<1||h.bottom<S.top?au.retry(O):h.bottom===S.top?au.retry(tb(S,1)):wy(l,m,S)?au.retry(r0(O,Oc,0)):au.none()},move:tb,gather:wi},BC={point:QT,adjuster:tE,move:lm,gather:yl},oE=(l,m,h)=>l.elementFromPoint(m,h).filter(v=>Le(v)==="table").isSome(),nb=(l,m,h,v,S)=>$h(l,m,h,m.move(v,Oc),S),$h=(l,m,h,v,S)=>S===0?Q.some(v):oE(l,v.left,m.point(v))?nb(l,m,h,v,S-1):l.situsFromPoint(v.left,m.point(v)).bind(O=>O.start.fold(Q.none,F=>Mh(l,F).bind(G=>m.adjuster(l,F,G,h,v).fold(Q.none,ne=>$h(l,m,h,ne,S-1))).orThunk(()=>Q.some(v)),Q.none)),sE=(l,m,h)=>l.point(m)>h.getInnerHeight()?Q.some(l.point(m)-h.getInnerHeight()):l.point(m)<0?Q.some(-l.point(m)):Q.none(),PC=(l,m,h)=>{const v=l.move(h,Oc),S=$h(m,l,h,v,c0).getOr(v);return sE(l,S,m).fold(()=>m.situsFromPoint(S.left,l.point(S)),O=>(m.scrollBy(0,O),m.situsFromPoint(S.left,l.point(S)-O)))},Sy={tryUp:wt(PC,Cy),tryDown:wt(PC,BC),getJumpSize:oe(Oc)},rE=20,xy=(l,m,h)=>l.getSelection().bind(v=>s0(m,v.finish,v.foffset,h).fold(()=>Q.some(Kd(v.finish,v.foffset)),S=>{const O=l.fromSitus(S),F=mg.verify(l,v.finish,v.foffset,O.finish,O.foffset,h.failure,m);return fg(F)})),df=(l,m,h,v,S,O)=>O===0?Q.none():J4(l,m,h,v,S).bind(F=>{const G=l.fromSitus(F),ne=mg.verify(l,h,v,G.finish,G.foffset,S.failure,m);return mg.cata(ne,()=>Q.none(),()=>Q.some(F),ye=>Rn(h,ye)&&v===0?gg(l,h,v,tb,S):df(l,m,ye,0,S,O-1),ye=>Rn(h,ye)&&v===cr(ye)?gg(l,h,v,lm,S):df(l,m,ye,cr(ye),S,O-1))}),gg=(l,m,h,v,S)=>$C(l,m,h).bind(O=>FC(l,S,v(O,Sy.getJumpSize()))),FC=(l,m,h)=>{const v=Bf().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,h):Q.none()},J4=(l,m,h,v,S)=>$C(l,h,v).bind(O=>FC(l,S,O)),IC=(l,m,h)=>xy(l,m,h).bind(v=>df(l,m,v.element,v.offset,h,rE).map(l.fromSitus)),ky=(l,m)=>py(l,h=>pe(h).exists(v=>Rn(v,m))),Ty=(l,m,h,v,S)=>fr(v,"td,th",m).bind(O=>fr(O,"table",m).bind(F=>ky(S,F)?IC(l,m,h).bind(G=>fr(G.finish,"td,th",m).map(ne=>({start:O,finish:ne,range:G}))):Q.none())),i0=(l,m,h,v,S,O)=>O(v,m).orThunk(()=>Ty(l,m,h,v,S).map(F=>{const G=F.range;return rm.create(Q.some(Yp(G.start,G.soffset,G.finish,G.foffset)),!0)})),ds=(l,m)=>fr(l,"tr",m).bind(h=>fr(h,"table",m).bind(v=>{const S=or(v,"tr");return Rn(h,S[0])?Mi(v,O=>Au(O).isSome(),m).map(O=>{const F=cr(O);return rm.create(Q.some(Yp(O,F,O,F)),!0)}):Q.none()})),Sd=(l,m)=>fr(l,"tr",m).bind(h=>fr(h,"table",m).bind(v=>{const S=or(v,"tr");return Rn(h,S[S.length-1])?Cd(v,O=>ll(O).isSome(),m).map(O=>rm.create(Q.some(Yp(O,0,O,0)),!0)):Q.none()})),mf=(l,m,h,v,S,O,F)=>Ty(l,h,v,S,O).bind(G=>ug(m,h,G.start,G.finish,F)),ff=l=>{let m=l;return{get:()=>m,set:S=>{m=S}}},Ey=l=>{const m=ff(Q.none()),h=()=>m.get().each(l);return{clear:()=>{h(),m.set(Q.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:G=>{h(),m.set(Q.some(G))}}},Bh=()=>{const l=Ey(qe);return{...l,on:h=>l.get().each(h)}},gf=(l,m)=>fr(l,"td,th",m),l0=(l,m,h,v)=>{const S=Bh(),O=S.clear,F=Ze=>{S.on(Mt=>{v.clearBeforeUpdate(m),gf(Ze.target,h).each(ln=>{h1(Mt,ln,h).each(Yt=>{const vt=Yt.boxes.getOr([]);if(vt.length===1){const fn=vt[0],St=Ri(fn)==="false",Wn=_t(gh(Ze.target),fn,Rn);St&&Wn&&(v.selectRange(m,vt,fn,fn),l.selectContents(fn))}else vt.length>1&&(v.selectRange(m,vt,Yt.start,Yt.finish),l.selectContents(ln))})})})};return{clearstate:O,mousedown:Ze=>{v.clear(m),gf(Ze.target,h).each(S.set)},mouseover:Ze=>{F(Ze)},mouseup:Ze=>{F(Ze),O()}}},u0={traverse:_n,gather:yl,relative:ec.before,retry:Sy.tryDown,failure:mg.failedDown},d0={traverse:rn,gather:wi,relative:ec.before,retry:Sy.tryUp,failure:mg.failedUp},hg=l=>m=>m===l,pg=hg(38),ob=hg(40),m0=l=>l>=37&&l<=40,Q4={isBackward:hg(37),isForward:hg(39)},LC={isBackward:hg(39),isForward:hg(37)},um=l=>{const m=l!==void 0?l.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return Al(h,v)},_y=(l,m,h)=>{const S=(h!==void 0?h.dom:document).defaultView;S&&S.scrollBy(l,m)},bg=tf.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ay=l=>bg.exact(l.start,l.soffset,l.finish,l.foffset),HC=l=>l.match({domRange:m=>q.fromDom(m.startContainer),relative:(m,h)=>ec.getStart(m),exact:(m,h,v,S)=>m}),sb=bg.domRange,Oy=bg.relative,aE=bg.exact,cE=l=>{const m=HC(l);return fe(m)},xd=uf.create,Ph={domRange:sb,relative:Oy,exact:aE,exactFromRange:Ay,getWin:cE,range:xd},iE=(l,m,h)=>{var v,S;return Q.from((S=(v=l.dom).caretPositionFromPoint)===null||S===void 0?void 0:S.call(v,m,h)).bind(O=>{if(O.offsetNode===null)return Q.none();const F=l.dom.createRange();return F.setStart(O.offsetNode,O.offset),F.collapse(),Q.some(F)})},$l=(l,m,h)=>{var v,S;return Q.from((S=(v=l.dom).caretRangeFromPoint)===null||S===void 0?void 0:S.call(v,m,h))},tc=(()=>document.caretPositionFromPoint?iE:document.caretRangeFromPoint?$l:Q.none)(),lE=(l,m,h)=>{const v=q.fromDom(l.document);return tc(v,m,h).map(S=>uf.create(q.fromDom(S.startContainer),S.startOffset,q.fromDom(S.endContainer),S.endOffset))},Fh=(l,m)=>{const h=Le(l);return h==="input"?ec.after(l):_(["br","img"],h)?m===0?ec.before(l):ec.after(l):ec.on(l,m)},Ih=(l,m)=>{const h=l.fold(ec.before,Fh,ec.after),v=m.fold(ec.before,Fh,ec.after);return Ph.relative(h,v)},zC=(l,m,h,v)=>{const S=Fh(l,m),O=Fh(h,v);return Ph.relative(S,O)},VC=(l,m,h,v)=>{const O=Co(l).dom.createRange();return O.setStart(l.dom,m),O.setEnd(h.dom,v),O},uE=(l,m,h,v)=>{const S=VC(l,m,h,v),O=Rn(l,h)&&m===v;return S.collapsed&&!O},vn=l=>Q.from(l.getSelection()),Da=(l,m)=>{vn(l).each(h=>{h.removeAllRanges(),h.addRange(m)})},vg=(l,m,h,v,S)=>{const O=dy(l,m,h,v,S);Da(l,O)},fc=(l,m,h,v,S,O)=>{m.collapse(h.dom,v),m.extend(S.dom,O)},Bl=(l,m)=>Oh(l,m).match({ltr:(h,v,S,O)=>{vg(l,h,v,S,O)},rtl:(h,v,S,O)=>{vn(l).each(F=>{if(F.setBaseAndExtent)F.setBaseAndExtent(h.dom,v,S.dom,O);else if(F.extend)try{fc(l,F,h,v,S,O)}catch{vg(l,S,O,h,v)}else vg(l,S,O,h,v)})}}),f0=(l,m,h,v,S)=>{const O=zC(m,h,v,S);Bl(l,O)},Lh=(l,m,h)=>{const v=Ih(m,h);Bl(l,v)},rb=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),h=l.getRangeAt(l.rangeCount-1);return Q.some(uf.create(q.fromDom(m.startContainer),m.startOffset,q.fromDom(h.endContainer),h.endOffset))}else return Q.none()},UC=l=>{if(l.anchorNode===null||l.focusNode===null)return rb(l);{const m=q.fromDom(l.anchorNode),h=q.fromDom(l.focusNode);return uE(m,l.anchorOffset,h,l.focusOffset)?Q.some(uf.create(m,l.anchorOffset,h,l.focusOffset)):rb(l)}},ab=(l,m,h=!0)=>{const S=(h?qT:am)(l,m);Da(l,S)},Dy=l=>vn(l).filter(m=>m.rangeCount>0).bind(UC),hf=l=>Dy(l).map(m=>Ph.exact(m.start,m.soffset,m.finish,m.foffset)),cb=(l,m)=>{const h=Uc(l,m);return cm(h)},dE=(l,m,h)=>lE(l,m,h),WC=l=>{vn(l).each(m=>m.removeAllRanges())},Ry=l=>({elementFromPoint:(St,Wn)=>q.fromPoint(q.fromDom(l.document),St,Wn),getRect:St=>St.dom.getBoundingClientRect(),getRangedRect:(St,Wn,To,zo)=>{const Ar=Ph.exact(St,Wn,To,zo);return cb(l,Ar)},getSelection:()=>hf(l).map(St=>Iu(l,St)),fromSitus:St=>{const Wn=Ph.relative(St.start,St.finish);return Iu(l,Wn)},situsFromPoint:(St,Wn)=>dE(l,St,Wn).map(To=>my.create(To.start,To.soffset,To.finish,To.foffset)),clearSelection:()=>{WC(l)},collapseSelection:(St=!1)=>{hf(l).each(Wn=>Wn.fold(To=>To.collapse(St),(To,zo)=>{const Ar=St?To:zo;Lh(l,Ar,Ar)},(To,zo,Ar,gc)=>{const la=St?To:Ar,$i=St?zo:gc;f0(l,la,$i,la,$i)}))},setSelection:St=>{f0(l,St.start,St.soffset,St.finish,St.foffset)},setRelativeSelection:(St,Wn)=>{Lh(l,St,Wn)},selectNode:St=>{ab(l,St,!1)},selectContents:St=>{ab(l,St)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>um(q.fromDom(l.document)).top,scrollBy:(St,Wn)=>{_y(St,Wn,q.fromDom(l.document))}}),yg=(l,m)=>({rows:l,cols:m}),ib=(l,m,h,v)=>{const S=Ry(l),O=l0(S,m,h,v);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},g0=(l,m,h,v)=>{const S=Ry(l),O=()=>(v.clear(m),Q.none());return{keydown:(ne,ye,Ze,Mt,ln,Yt)=>{const vt=ne.raw,fn=vt.which,St=vt.shiftKey===!0;return kp(m,v.selectedSelector).fold(()=>(m0(fn)&&!St&&v.clearBeforeUpdate(m),ob(fn)&&St?wt(mf,S,m,h,u0,Mt,ye,v.selectRange):pg(fn)&&St?wt(mf,S,m,h,d0,Mt,ye,v.selectRange):ob(fn)?wt(i0,S,h,u0,Mt,ye,Sd):pg(fn)?wt(i0,S,h,d0,Mt,ye,ds):Q.none),To=>{const zo=Ar=>()=>H(Ar,la=>KT(la.rows,la.cols,m,To,v)).fold(()=>p1(m,v.firstSelectedSelector,v.lastSelectedSelector).map(la=>{const $i=ob(fn)||Yt.isForward(fn)?ec.after:ec.before;return S.setRelativeSelection(ec.on(la.first,0),$i(la.table)),v.clear(m),rm.create(Q.none(),!0)}),la=>Q.some(rm.create(Q.none(),!0)));return ob(fn)&&St?zo([yg(1,0)]):pg(fn)&&St?zo([yg(-1,0)]):Yt.isBackward(fn)&&St?zo([yg(0,-1),yg(-1,0)]):Yt.isForward(fn)&&St?zo([yg(0,1),yg(1,0)]):m0(fn)&&!St?O:Q.none})()},keyup:(ne,ye,Ze,Mt,ln)=>kp(m,v.selectedSelector).fold(()=>{const Yt=ne.raw,vt=Yt.which;return Yt.shiftKey===!0&&m0(vt)?n0(m,h,ye,Ze,Mt,ln,v.selectRange):Q.none()},Q.none)}},h0=(l,m,h,v)=>{const S=Ry(l);return(O,F)=>{v.clearBeforeUpdate(m),h1(O,F,h).each(G=>{const ne=G.boxes.getOr([]);v.selectRange(m,ne,G.start,G.finish),S.selectContents(F),S.collapseSelection()})}},Hh=(l,m)=>{const h=dr(l,m);return h===void 0||h===""?[]:h.split(" ")},Ny=(l,m,h)=>{const S=Hh(l,m).concat([h]);return vs(l,m,S.join(" ")),!0},ZC=(l,m,h)=>{const v=ze(Hh(l,m),S=>S!==h);return v.length>0?vs(l,m,v.join(" ")):Fs(l,m),!1},Lu=l=>l.dom.classList!==void 0,lb=l=>Hh(l,"class"),mE=(l,m)=>Ny(l,"class",m),fE=(l,m)=>ZC(l,"class",m),dm=(l,m)=>{Lu(l)?l.dom.classList.add(m):mE(l,m)},gE=l=>{(Lu(l)?l.dom.classList:lb(l)).length===0&&Fs(l,"class")},jC=(l,m)=>{Lu(l)?l.dom.classList.remove(m):fE(l,m),gE(l)},p0=(l,m)=>Lu(l)&&l.dom.classList.contains(m),hE=(l,m)=>{_e(m,h=>{jC(l,h)})},b0=l=>m=>{dm(m,l)},Wc=l=>m=>{hE(m,l)},ub={byClass:l=>{const m=b0(l.selected),h=Wc([l.selected,l.lastSelected,l.firstSelected]),v=O=>{const F=or(O,l.selectedSelector);_e(F,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(O,F,G,ne)=>{v(O),_e(F,m),dm(G,l.firstSelected),dm(ne,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,h)=>{const v=ne=>{Fs(ne,l.selected),Fs(ne,l.firstSelected),Fs(ne,l.lastSelected)},S=ne=>{vs(ne,l.selected,"1")},O=ne=>{F(ne),h()},F=ne=>{const ye=or(ne,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);_e(ye,v)};return{clearBeforeUpdate:F,clear:O,selectRange:(ne,ye,Ze,Mt)=>{O(ne),_e(ye,S),vs(Ze,l.firstSelected,"1"),vs(Mt,l.lastSelected,"1"),m(ye,Ze,Mt)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},v0=(l,m,h,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return h(l.elements)}},GC=()=>({tag:"none"}),My=l=>({tag:"multiple",elements:l}),qC=l=>({tag:"single",element:l}),$y=(l,m,h)=>({get:()=>b1(l(),h).fold(()=>m().fold(GC,qC),My)}),KC=(l,m)=>{const h=l.slice(0,m[m.length-1].row+1),v=hh(h);return xe(v,S=>{const O=S.cells.slice(0,m[m.length-1].column+1);return Ie(O,F=>F.element)})},By=(l,m)=>{const h=l.slice(m[0].row+m[0].rowspan-1,l.length),v=hh(h);return xe(v,S=>{const O=S.cells.slice(m[0].column+m[0].colspan-1,S.cells.length);return Ie(O,F=>F.element)})},YC=(l,m,h)=>{const v=Lo.fromTable(l);return ml(v,m).map(O=>{const F=Op(v,h,!1),{rows:G}=La(F),ne=KC(G,O),ye=By(G,O);return{upOrLeftCells:ne,downOrRightCells:ye}})},XC=(l,m,h,v,S,O,F)=>({target:l,x:m,y:h,stop:v,prevent:S,kill:O,raw:F}),y0=l=>{const m=q.fromDom(Nr(l).getOr(l.target)),h=()=>l.stopPropagation(),v=()=>l.preventDefault(),S=rt(v,h);return XC(m,l.clientX,l.clientY,h,v,S,l)},Py=(l,m)=>h=>{l(h)&&m(y0(h))},sr=(l,m,h,v,S)=>{const O=Py(h,v);return l.dom.addEventListener(m,O,S),{unbind:wt(pf,l,m,O,S)}},Fn=(l,m,h,v)=>sr(l,m,h,v,!1),pf=(l,m,h,v)=>{l.dom.removeEventListener(m,h,v)},JC=we,bf=(l,m,h)=>Fn(l,m,JC,h),kd=y0,zh=l=>!p0(q.fromDom(l.target),"ephox-snooker-resizer-bar"),Fy=(l,m)=>{const h=$y(()=>q.fromDom(l.getBody()),()=>_2(Ru(l),Lc(l)),gd.selectedSelector),v=(ne,ye,Ze)=>{Ia(ye).each(ln=>{const Yt=qv(l),vt=Eo(qe,q.fromDom(l.getDoc()),Yt),fn=Ja(l),St=YC(ln,{selection:fn},vt);Ml(l,ne,ye,Ze,St)})},S=()=>U1(l),O=ub.byAttr(gd,v,S);return l.on("init",ne=>{const ye=l.getWin(),Ze=Ol(l),Mt=Lc(l),ln=()=>{const qs=l.selection,Dc=q.fromDom(qs.getStart()),Rc=q.fromDom(qs.getEnd());fd(Ia,[Dc,Rc]).fold(()=>O.clear(Ze),qe)},Yt=ib(ye,Ze,Mt,O),vt=g0(ye,Ze,Mt,O),fn=h0(ye,Ze,Mt,O),St=qs=>qs.raw.shiftKey===!0;l.on("TableSelectorChange",qs=>fn(qs.start,qs.finish));const Wn=(qs,Dc)=>{!St(qs)||(Dc.kill&&qs.kill(),Dc.selection.each(Rc=>{const Vu=Ph.relative(Rc.start,Rc.finish),Xi=Uc(ye,Vu);l.selection.setRng(Xi)}))},To=qs=>{const Dc=kd(qs);if(Dc.raw.shiftKey&&m0(Dc.raw.which)){const Rc=l.selection.getRng(),Vu=q.fromDom(Rc.startContainer),Xi=q.fromDom(Rc.endContainer);vt.keyup(Dc,Vu,Rc.startOffset,Xi,Rc.endOffset).each(Wh=>{Wn(Dc,Wh)})}},zo=qs=>{const Dc=kd(qs);m.hide();const Rc=l.selection.getRng(),Vu=q.fromDom(Rc.startContainer),Xi=q.fromDom(Rc.endContainer),Wh=Pm(Q4,LC)(q.fromDom(l.selection.getStart()));vt.keydown(Dc,Vu,Rc.startOffset,Xi,Rc.endOffset,Wh).each(ci=>{Wn(Dc,ci)}),m.show()},Ar=qs=>qs.button===0,gc=qs=>qs.buttons===void 0?!0:(qs.buttons&1)!==0,la=qs=>{Yt.clearstate()},$i=qs=>{Ar(qs)&&zh(qs)&&Yt.mousedown(kd(qs))},Cf=qs=>{gc(qs)&&zh(qs)&&Yt.mouseover(kd(qs))},pb=qs=>{Ar(qs)&&zh(qs)&&Yt.mouseup(kd(qs))},_0=(()=>{const qs=ff(q.fromDom(Ze)),Dc=ff(0);return{touchEnd:Vu=>{const Xi=q.fromDom(Vu.target);if(ps("td")(Xi)||ps("th")(Xi)){const Wh=qs.get(),ci=Dc.get();Rn(Wh,Xi)&&Vu.timeStamp-ci<300&&(Vu.preventDefault(),fn(Xi,Xi))}qs.set(Xi),Dc.set(Vu.timeStamp)}}})();l.on("dragstart",la),l.on("mousedown",$i),l.on("mouseover",Cf),l.on("mouseup",pb),l.on("touchend",_0.touchEnd),l.on("keyup",To),l.on("keydown",zo),l.on("NodeChange",ln)}),l.on("PreInit",()=>{l.serializer.addTempAttr(gd.firstSelected),l.serializer.addTempAttr(gd.lastSelected)}),{getSelectedCells:()=>v0(h.get(),oe([]),ne=>Ie(ne,ye=>ye.dom),ne=>[ne.dom]),clearSelectedCells:ne=>O.clear(q.fromDom(ne))}},Pl=l=>{let m=[];return{bind:O=>{if(O===void 0)throw new Error("Event bind error: undefined handler");m.push(O)},unbind:O=>{m=ze(m,F=>F!==O)},trigger:(...O)=>{const F={};_e(l,(G,ne)=>{F[G]=O[ne]}),_e(m,G=>{G(F)})}}},wg=l=>{const m=zt(l,v=>({bind:v.bind,unbind:v.unbind})),h=zt(l,v=>v.trigger);return{registry:m,trigger:h}},QC=(l,m)=>{let h=null;const v=()=>{Ct(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...O)=>{v(),h=setTimeout(()=>{h=null,l.apply(null,O)},m)}}},Vh=l=>l.slice(0).sort(),db=(l,m)=>{throw new Error("All required keys ("+Vh(l).join(", ")+") were not specified. Specified keys were: "+Vh(m).join(", ")+".")},mb=l=>{throw new Error("Unsupported keys for object: "+Vh(l).join(", "))},Iy=(l,m)=>{if(!Kt(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");_e(m,h=>{if(!Qn(h))throw new Error("The value "+h+" in the "+l+" fields was not a string.")})},pE=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Vh(l).join(", ")+") were not.")},bE=l=>{const m=Vh(l);R(m,(v,S)=>S<m.length-1&&v===m[S+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},vE=(l,m)=>Fl(l,m,{validate:Rt,label:"function"}),Fl=(l,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Iy("required",m),bE(m),v=>{const S=Z(v);We(m,G=>_(S,G))||db(m,S),l(m,S);const F=ze(m,G=>!h.validate(v[G],G));return F.length>0&&pE(F,h.label),v}},Zc=(l,m)=>{const h=ze(m,v=>!_(l,v));h.length>0&&mb(h)},vf=l=>vE(Zc,l),eO=vf(["compare","extract","mutate","sink"]),yE=vf(["element","start","stop","destroy"]),wE=vf(["forceDrop","drop","move","delayDrop"]),os=()=>{let l=Q.none();const m=()=>{l=Q.none()},h=(O,F)=>{const G=l.map(ne=>O.compare(ne,F));return l=Q.some(F),G},v=(O,F)=>{F.extract(O).each(ne=>{h(F,ne).each(Ze=>{S.trigger.move(Ze)})})},S=wg({move:Pl(["info"])});return{onEvent:v,reset:m,events:S.registry}},CE=()=>{const l=wg({move:Pl(["info"])});return{onEvent:qe,reset:qe,events:l.registry}},eS=()=>{const l=CE(),m=os();let h=l;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=l},isOn:()=>h===m,onEvent:(G,ne)=>{h.onEvent(G,ne)},events:m.events}},Ly=(l,m,h)=>{let v=!1;const S=wg({start:Pl([]),stop:Pl([])}),O=eS(),F=()=>{Yt.stop(),O.isOn()&&(O.off(),S.trigger.stop())},G=QC(F,200),ne=fn=>{Yt.start(fn),O.on(),S.trigger.start()},ye=fn=>{G.cancel(),O.onEvent(fn,m)};O.events.move.bind(fn=>{m.mutate(l,fn.info)});const Ze=()=>{v=!0},Mt=()=>{v=!1},ln=fn=>(...St)=>{v&&fn.apply(null,St)},Yt=m.sink(wE({forceDrop:F,drop:ln(F),move:ln(ye),delayDrop:ln(G.throttle)}),h),vt=()=>{Yt.destroy()};return{element:Yt.element,go:ne,on:Ze,off:Mt,destroy:vt,events:S.registry}},tS=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},Td=tS("ephox-dragster").resolve,w0=l=>{const m={layerClass:Td("blocker"),...l},h=q.fromTag("div");return vs(h,"role","presentation"),Os(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),dm(h,Td("blocker")),dm(h,m.layerClass),{element:oe(h),destroy:()=>{Rr(h)}}};var sS=eO({compare:(l,m)=>Al(m.left-l.left,m.top-l.top),extract:l=>Q.some(Al(l.x,l.y)),sink:(l,m)=>{const h=w0(m),v=bf(h.element(),"mousedown",l.forceDrop),S=bf(h.element(),"mouseup",l.drop),O=bf(h.element(),"mousemove",l.move),F=bf(h.element(),"mouseout",l.delayDrop),G=()=>{h.destroy(),S.unbind(),O.unbind(),F.unbind(),v.unbind()},ne=Ze=>{Go(Ze,h.element())},ye=()=>{Rr(h.element())};return yE({element:h.element,start:ne,stop:ye,destroy:G})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const sO=(l,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:sS;return Ly(l,v,m)},yf=tS("ephox-snooker").resolve,Hy=()=>{const l=wg({drag:Pl(["xDelta","yDelta"])});return{mutate:(h,v)=>{l.trigger.drag(h,v)},events:l.registry}},SE=()=>{const l=wg({drag:Pl(["xDelta","yDelta","target"])});let m=Q.none();const h=Hy();return h.events.drag.bind(O=>{m.each(F=>{l.trigger.drag(O.xDelta,O.yDelta,F)})}),{assign:O=>{m=Q.some(O)},get:()=>m,mutate:h.mutate,events:l.registry}},rS=(l,m,h,v,S)=>{const O=q.fromTag("div");return Os(O,{position:"absolute",left:m-v/2+"px",top:h+"px",height:S+"px",width:v+"px"}),as(O,{"data-column":l,role:"presentation"}),O},xo=(l,m,h,v,S)=>{const O=q.fromTag("div");return Os(O,{position:"absolute",left:m+"px",top:h-S/2+"px",height:S+"px",width:v+"px"}),as(O,{"data-row":l,role:"presentation"}),O},Uh=yf("resizer-bar"),aS=yf("resizer-rows"),cS=yf("resizer-cols"),Cg=7,zy=(l,m)=>xe(l.all,(h,v)=>m(h.element)?[v]:[]),xE=(l,m)=>{const h=[];return Ue(l.grid.columns,v=>{Lo.getColumnAt(l,v).map(O=>O.element).forall(m)&&h.push(v)}),ze(h,v=>{const S=Lo.filterItems(l,O=>O.column===v);return We(S,O=>m(O.element))})},C0=l=>{const m=or(l.parent(),"."+Uh);_e(m,Rr)},iS=(l,m,h)=>{const v=l.origin();_e(m,S=>{S.each(O=>{const F=h(v,O);dm(F,Uh),Go(l.parent(),F)})})},Vy=(l,m,h,v)=>{iS(l,m,(S,O)=>{const F=rS(O.col,O.x-S.left,h.top-S.top,Cg,v);return dm(F,cS),F})},lS=(l,m,h,v)=>{iS(l,m,(S,O)=>{const F=xo(O.row,h.left-S.left,O.y-S.top,v,Cg);return dm(F,aS),F})},kE=(l,m,h,v,S)=>{const O=Tu(h),F=m.isResizable,G=v.length>0?Eu.positions(v,h):[],ne=G.length>0?zy(l,F):[],ye=ze(G,(Yt,vt)=>ge(ne,fn=>vt===fn));lS(m,ye,O,qn(h));const Ze=S.length>0?Qc.positions(S,h):[],Mt=Ze.length>0?xE(l,F):[],ln=ze(Ze,(Yt,vt)=>ge(Mt,fn=>vt===fn));Vy(m,ln,O,Qg(h))},S0=(l,m)=>{if(C0(l),l.isResizable(m)){const h=Lo.fromTable(m),v=ku(h),S=lc(h);kE(h,l,m,v,S)}},fb=(l,m)=>{const h=or(l.parent(),"."+Uh);_e(h,m)},Uy=l=>{fb(l,m=>{Jo(m,"display","none")})},x0=l=>{fb(l,m=>{Jo(m,"display","block")})},k0=l=>p0(l,aS),gb=l=>p0(l,cS),Sg=yf("resizer-bar-dragging"),aO=l=>{const m=SE(),h=sO(m,{});let v=Q.none();const S=(vt,fn)=>Q.from(dr(vt,fn));m.events.drag.bind(vt=>{S(vt.target,"data-row").each(fn=>{const St=Gr(vt.target,"top");Jo(vt.target,"top",St+vt.yDelta+"px")}),S(vt.target,"data-column").each(fn=>{const St=Gr(vt.target,"left");Jo(vt.target,"left",St+vt.xDelta+"px")})});const O=(vt,fn)=>{const St=Gr(vt,fn),Wn=Ds(vt,"data-initial-"+fn,0);return St-Wn};h.events.stop.bind(()=>{m.get().each(vt=>{v.each(fn=>{S(vt,"data-row").each(St=>{const Wn=O(vt,"top");Fs(vt,"data-initial-top"),Yt.trigger.adjustHeight(fn,Wn,parseInt(St,10))}),S(vt,"data-column").each(St=>{const Wn=O(vt,"left");Fs(vt,"data-initial-left"),Yt.trigger.adjustWidth(fn,Wn,parseInt(St,10))}),S0(l,fn)})})});const F=(vt,fn)=>{Yt.trigger.startAdjust(),m.assign(vt),vs(vt,"data-initial-"+fn,Gr(vt,fn)),dm(vt,Sg),Jo(vt,"opacity","0.2"),h.go(l.parent())},G=bf(l.parent(),"mousedown",vt=>{k0(vt.target)&&F(vt.target,"top"),gb(vt.target)&&F(vt.target,"left")}),ne=vt=>Rn(vt,l.view()),ye=vt=>fr(vt,"table",ne).filter(ou),Ze=bf(l.view(),"mouseover",vt=>{ye(vt.target).fold(()=>{Mr(vt.target)&&C0(l)},fn=>{v=Q.some(fn),S0(l,fn)})}),Mt=()=>{G.unbind(),Ze.unbind(),h.destroy(),C0(l)},ln=vt=>{S0(l,vt)},Yt=wg({adjustHeight:Pl(["table","delta","row"]),adjustWidth:Pl(["table","delta","column"]),startAdjust:Pl([])});return{destroy:Mt,refresh:ln,on:h.on,off:h.off,hideBars:wt(Uy,l),showBars:wt(x0,l),events:Yt.registry}},TE={create:(l,m,h)=>{const v=Eu,S=Qc,O=aO(l),F=wg({beforeResize:Pl(["table","type"]),afterResize:Pl(["table","type"]),startDrag:Pl([])});return O.events.adjustHeight.bind(G=>{const ne=G.table;F.trigger.beforeResize(ne,"row");const ye=v.delta(G.delta,ne);R1(ne,ye,G.row,v),F.trigger.afterResize(ne,"row")}),O.events.startAdjust.bind(G=>{F.trigger.startDrag()}),O.events.adjustWidth.bind(G=>{const ne=G.table;F.trigger.beforeResize(ne,"col");const ye=S.delta(G.delta,ne),Ze=h(ne);Qd(ne,ye,G.column,m,Ze),F.trigger.afterResize(ne,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:F.registry}}},Yi={only:(l,m)=>{const h=kr(l)?Bt(l):l;return{parent:oe(h),view:oe(l),origin:oe(Al(0,0)),isResizable:m}},detached:(l,m,h)=>{const v=()=>Tu(m);return{parent:oe(m),view:oe(l),origin:v,isResizable:h}},body:(l,m,h)=>({parent:oe(m),view:oe(l),origin:oe(Al(0,0)),isResizable:h})},Zy=()=>{const l=q.fromTag("div");return Os(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Go(Fa(),l),l},hb=(l,m)=>l.inline?Yi.body(q.fromDom(l.getBody()),Zy(),m):Yi.only(q.fromDom(l.getDoc()),m),T0=(l,m)=>{l.inline&&Rr(m.parent())},mm=l=>yt(l)&&l.nodeName==="TABLE",jy="bar-",EE=l=>dr(l,"data-mce-resize")!=="false",_E=l=>{const m=Lo.fromTable(l);Lo.hasColumns(m)||_e(El(l),h=>{const v=Ta(h,"width");Jo(h,"width",v),Fs(h,"width")})},uS=l=>{const m=Bh(),h=Bh(),v=Bh();let S,O;const F=vt=>ag(l,vt),G=()=>Z1(l)?w1():R2(),ne=vt=>mh(vt).columns,ye=(vt,fn,St)=>{const Wn=me(fn,"e");if(O===""&&af(vt),St!==S&&O!==""){Jo(vt,"width",O);const To=G(),zo=F(vt),Ar=Z1(l)||Wn?ne(vt)-1:0;Qd(vt,St-S,Ar,To,zo)}else if(Gk(O)){const To=parseFloat(O.replace("%","")),zo=St*To/S;Jo(vt,"width",zo+"%")}jm(O)&&_E(vt)},Ze=()=>{h.on(vt=>{vt.destroy()}),v.on(vt=>{T0(l,vt)})};return l.on("init",()=>{const vt=hb(l,EE);if(v.set(vt),_T(l)&&AT(l)){const fn=G(),St=TE.create(vt,fn,F);St.on(),St.events.startDrag.bind(Wn=>{m.set(l.selection.getRng())}),St.events.beforeResize.bind(Wn=>{const To=Wn.table.dom;Pu(l,To,vp(To),Vd(To),jy+Wn.type)}),St.events.afterResize.bind(Wn=>{const To=Wn.table,zo=To.dom;Di(To),m.on(Ar=>{l.selection.setRng(Ar),l.focus()}),cC(l,zo,vp(zo),Vd(zo),jy+Wn.type),l.undoManager.add()}),h.set(St)}}),l.on("ObjectResizeStart",vt=>{const fn=vt.target;if(mm(fn)){const St=q.fromDom(fn);_e(l.dom.select(".mce-clonedresizable"),Wn=>{l.dom.addClass(Wn,"mce-"+zp(l)+"-columns")}),!pC(St)&&Eh(l)?_h(St):!hC(St)&&rg(l)&&af(St),cg(St)&&te(vt.origin,jy)&&af(St),S=vt.width,O=Vp(l)?"":Zm(l,fn).getOr("")}}),l.on("ObjectResized",vt=>{const fn=vt.target;if(mm(fn)){const St=q.fromDom(fn),Wn=vt.origin;te(Wn,"corner-")&&ye(St,Wn,vt.width),Di(St),Ki(l,St.dom,Hp)}}),l.on("SwitchMode",()=>{h.on(vt=>{l.mode.isReadOnly()?vt.hideBars():vt.showBars()})}),l.on("remove",()=>{Ze()}),{refresh:vt=>{h.on(fn=>fn.refreshBars(q.fromDom(vt)))},hide:()=>{h.on(vt=>vt.hideBars())},show:()=>{h.on(vt=>vt.showBars())}}},Cs=l=>{ET(l);const m=uS(l),h=Fy(l,m),v=zr(l,m,h);return uy(l,v),WT(l,v),oi(l,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},zu=l=>({table:Cs(l)});var xg=()=>{Fo.add("dom",zu)};xg()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(we,Q,ct)=>{const Pe=Q==="UL"?"InsertUnorderedList":"InsertOrderedList";we.execCommand(Pe,!1,ct===!1?null:{"list-style-type":ct})},mo=we=>{we.addCommand("ApplyUnorderedListStyle",(Q,ct)=>{ko(we,"UL",ct["list-style-type"])}),we.addCommand("ApplyOrderedListStyle",(Q,ct)=>{ko(we,"OL",ct["list-style-type"])})},Jn=we=>Q=>Q.options.get(we),An=we=>{const Q=we.options.register;Q("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Q("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},so=Jn("advlist_number_styles"),Qn=Jn("advlist_bullet_styles"),qt=we=>we==null,Kt=we=>!qt(we);var Ct=tinymce.util.Tools.resolve("tinymce.util.Tools");class Tn{constructor(Q,ct){this.tag=Q,this.value=ct}static some(Q){return new Tn(!0,Q)}static none(){return Tn.singletonNone}fold(Q,ct){return this.tag?ct(this.value):Q()}isSome(){return this.tag}isNone(){return!this.tag}map(Q){return this.tag?Tn.some(Q(this.value)):Tn.none()}bind(Q){return this.tag?Q(this.value):Tn.none()}exists(Q){return this.tag&&Q(this.value)}forall(Q){return!this.tag||Q(this.value)}filter(Q){return!this.tag||Q(this.value)?this:Tn.none()}getOr(Q){return this.tag?this.value:Q}or(Q){return this.tag?this:Q}getOrThunk(Q){return this.tag?this.value:Q()}orThunk(Q){return this.tag?this:Q()}getOrDie(Q){if(this.tag)return this.value;throw new Error(Q!=null?Q:"Called getOrDie on None")}static from(Q){return Kt(Q)?Tn.some(Q):Tn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Q){this.tag&&Q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Tn.singletonNone=new Tn(!1);const ao=(we,Q)=>we.dom.isChildOf(Q,we.getBody()),Zt=we=>Kt(we)&&/^(TH|TD)$/.test(we.nodeName),yt=we=>Q=>Kt(Q)&&/^(OL|UL|DL)$/.test(Q.nodeName)&&ao(we,Q),Rt=we=>{const Q=we.dom.getParent(we.selection.getNode(),"ol,ul"),ct=we.dom.getStyle(Q,"listStyleType");return Tn.from(ct)},an=(we,Q)=>Q!==null&&we.dom.getContentEditableParent(Q)==="false",qe=(we,Q)=>{const ct=we.dom.getParent(Q,"ol,ul,dl");return an(we,ct)},rt=(we,Q)=>{for(let ct=0;ct<we.length;ct++){const Pe=we[ct];if(Q(Pe))return ct}return-1},Oe=we=>we.replace(/\-/g," ").replace(/\b\w/g,Q=>Q.toUpperCase()),oe=we=>qt(we)||we==="default"?"":we,bt=(we,Q,ct)=>{const Pe=rt(Q.parents,Zt),Ne=Pe!==-1?Q.parents.slice(0,Pe):Q.parents,Ot=Ct.grep(Ne,yt(we));return Ot.length>0&&Ot[0].nodeName===ct},Ft=(we,Q)=>ct=>{const Pe=Ne=>{ct.setActive(bt(we,Ne,Q)),ct.setEnabled(!qe(we,Ne.element))};return we.on("NodeChange",Pe),()=>we.off("NodeChange",Pe)},wt=(we,Q,ct,Pe,Ne,Ot)=>{we.ui.registry.addSplitButton(Q,{tooltip:ct,icon:Ne==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:_=>{const ge=Ct.map(Ot,Ue=>{const Ie=Ne==="OL"?"num":"bull",_e=Ue==="disc"||Ue==="decimal"?"default":Ue,jt=oe(Ue),nn=Oe(Ue);return{type:"choiceitem",value:jt,icon:"list-"+Ie+"-"+_e,text:nn}});_(ge)},onAction:()=>we.execCommand(Pe),onItemAction:(_,ge)=>{ko(we,Ne,ge)},select:_=>Rt(we).map(Ue=>_===Ue).getOr(!1),onSetup:Ft(we,Ne)})},Y=(we,Q,ct,Pe,Ne,Ot)=>{we.ui.registry.addToggleButton(Q,{active:!1,tooltip:ct,icon:Ne==="OL"?"ordered-list":"unordered-list",onSetup:Ft(we,Ne),onAction:()=>we.queryCommandState(Pe)||Ot===""?we.execCommand(Pe):ko(we,Ne,Ot)})},At=(we,Q,ct,Pe,Ne,Ot)=>{Ot.length>1?wt(we,Q,ct,Pe,Ne,Ot):Y(we,Q,ct,Pe,Ne,oe(Ot[0]))},On=we=>{At(we,"numlist","Numbered list","InsertOrderedList","OL",so(we)),At(we,"bullist","Bullet list","InsertUnorderedList","UL",Qn(we))};var Nt=()=>{Fo.add("advlist",we=>{we.hasPlugin("lists")?(An(we),On(we),mo(we)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})};Nt()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager"),ko=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),mo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Jn=ct=>Pe=>Pe.options.get(ct),An=ct=>{const Pe=ct.options.register;Pe("allow_html_in_named_anchor",{processor:"boolean",default:!1})},so=Jn("allow_html_in_named_anchor"),Qn="a:not([href])",qt=ct=>!ct,Kt=ct=>ct.getAttribute("id")||ct.getAttribute("name")||"",Ct=ct=>ct.nodeName.toLowerCase()==="a",Tn=ct=>Ct(ct)&&!ct.getAttribute("href")&&Kt(ct)!=="",ao=ct=>Tn(ct)&&!ct.firstChild,Zt=ct=>{const Pe=ct.dom;ko(Pe).walk(ct.selection.getRng(),Ne=>{mo.each(Ne,Ot=>{ao(Ot)&&Pe.remove(Ot,!1)})})},yt=ct=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(ct),Rt=ct=>ct.dom.getParent(ct.selection.getStart(),Qn),an=ct=>{const Pe=Rt(ct);return Pe?Kt(Pe):""},qe=(ct,Pe)=>{ct.undoManager.transact(()=>{so(ct)||ct.selection.collapse(!0),ct.selection.isCollapsed()?ct.insertContent(ct.dom.createHTML("a",{id:Pe})):(Zt(ct),ct.formatter.remove("namedAnchor",void 0,void 0,!0),ct.formatter.apply("namedAnchor",{value:Pe}),ct.addVisual())})},rt=(ct,Pe,Ne)=>{Ne.removeAttribute("name"),Ne.id=Pe,ct.addVisual(),ct.undoManager.add()},Oe=(ct,Pe)=>{const Ne=Rt(ct);Ne?rt(ct,Pe,Ne):qe(ct,Pe),ct.focus()},oe=(ct,Pe)=>yt(Pe)?(Oe(ct,Pe),!0):(ct.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),bt=ct=>{const Pe=an(ct);ct.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:Pe},onSubmit:Ne=>{oe(ct,Ne.getData().id)&&Ne.close()}})},Ft=ct=>{ct.addCommand("mceAnchor",()=>{bt(ct)})},wt=ct=>qt(ct.attr("href"))&&!qt(ct.attr("id")||ct.attr("name")),Y=ct=>wt(ct)&&!ct.firstChild,At=ct=>Pe=>{for(let Ne=0;Ne<Pe.length;Ne++){const Ot=Pe[Ne];Y(Ot)&&Ot.attr("contenteditable",ct)}},On=ct=>{ct.on("PreInit",()=>{ct.parser.addNodeFilter("a",At("false")),ct.serializer.addNodeFilter("a",At(null))})},Nt=ct=>{ct.formatter.register("namedAnchor",{inline:"a",selector:Qn,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(Pe,Ne,Ot)=>Tn(Pe)})},we=ct=>{const Pe=()=>ct.execCommand("mceAnchor");ct.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:Pe,onSetup:Ne=>ct.selection.selectorChangedWithUnbind("a:not([href])",Ne.setActive).unbind}),ct.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:Pe})};var Q=()=>{Fo.add("anchor",ct=>{An(ct),On(ct),Ft(ct),we(ct),ct.on("PreInit",()=>{Nt(ct)})})};Q()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,mo=ze=>It=>It.options.get(ze),Jn=ze=>{const It=ze.options.register;It("autolink_pattern",{processor:"regexp",default:new RegExp("^"+ko().source+"$","i")}),It("link_default_target",{processor:"string"}),It("link_default_protocol",{processor:"string",default:"https"})},An=mo("autolink_pattern"),so=mo("link_default_target"),Qn=mo("link_default_protocol"),qt=mo("allow_unsafe_link_target"),Kt=(ze,It,Et)=>{var Ve;return Et(ze,It.prototype)?!0:((Ve=ze.constructor)===null||Ve===void 0?void 0:Ve.name)===It.name},Ct=ze=>{const It=typeof ze;return ze===null?"null":It==="object"&&Array.isArray(ze)?"array":It==="object"&&Kt(ze,String,(Et,Ve)=>Ve.isPrototypeOf(Et))?"string":It},Tn=ze=>It=>Ct(It)===ze,ao=ze=>It=>ze===It,Zt=Tn("string"),yt=ao(void 0),Rt=ze=>ze==null,an=ze=>!Rt(ze),qe=ze=>It=>!ze(It),rt=Object.hasOwnProperty,Oe=(ze,It)=>rt.call(ze,It),oe=(ze,It,Et)=>It===""||ze.length>=It.length&&ze.substr(Et,Et+It.length)===It,bt=(ze,It,Et=0,Ve)=>{const R=ze.indexOf(It,Et);return R!==-1?yt(Ve)?!0:R+It.length<=Ve:!1},Ft=(ze,It)=>oe(ze,It,0),wt="\uFEFF",Y=ze=>ze===wt,At=ze=>ze.replace(/\uFEFF/g,"");var On=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const Nt=ze=>ze.nodeType===3,we=ze=>ze.nodeType===1,Q=ze=>/^[(\[{ \u00a0]$/.test(ze),ct=ze=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(ze),Pe=ze=>/[?!,.;:]/.test(ze),Ne=(ze,It,Et)=>{for(let Ve=It-1;Ve>=0;Ve--){const R=ze.charAt(Ve);if(!Y(R)&&Et(R))return Ve}return-1},Ot=(ze,It)=>{let Et=ze,Ve=It;for(;we(Et)&&Et.childNodes[Ve];)Et=Et.childNodes[Ve],Ve=Nt(Et)?Et.data.length:Et.childNodes.length;return{container:Et,offset:Ve}},_=(ze,It)=>{var Et;const Ve=ze.schema.getVoidElements(),R=An(ze),{dom:zn,selection:Ee}=ze;if(zn.getParent(Ee.getNode(),"a[href]")!==null)return null;const xe=Ee.getRng(),We=On(zn,Be=>zn.isBlock(Be)||Oe(Ve,Be.nodeName.toLowerCase())||zn.getContentEditable(Be)==="false"),{container:ke,offset:ae}=Ot(xe.endContainer,xe.endOffset),se=(Et=zn.getParent(ke,zn.isBlock))!==null&&Et!==void 0?Et:zn.getRoot(),re=We.backwards(ke,ae+It,(Be,zt)=>{const Jt=Be.data,eo=Ne(Jt,zt,qe(Q));return eo===-1||Pe(Jt[eo])?eo:eo+1},se);if(!re)return null;let z=re.container;const K=We.backwards(re.container,re.offset,(Be,zt)=>{z=Be;const Jt=Ne(Be.data,zt,Q);return Jt===-1?Jt:Jt+1},se),H=zn.createRng();K?H.setStart(K.container,K.offset):H.setStart(z,0),H.setEnd(re.container,re.offset);const $e=At(H.toString()).match(R);if($e){let Be=$e[0];return Ft(Be,"www.")?Be=Qn(ze)+"://"+Be:bt(Be,"@")&&!ct(Be)&&(Be="mailto:"+Be),{rng:H,url:Be}}else return null},ge=(ze,It)=>{const{dom:Et,selection:Ve}=ze,{rng:R,url:zn}=It,Ee=Ve.getBookmark();Ve.setRng(R);const xe="createlink",We={command:xe,ui:!1,value:zn};if(!ze.dispatch("BeforeExecCommand",We).isDefaultPrevented()){ze.getDoc().execCommand(xe,!1,zn),ze.dispatch("ExecCommand",We);const ae=so(ze);if(Zt(ae)){const se=Ve.getNode();Et.setAttrib(se,"target",ae),ae==="_blank"&&!qt(ze)&&Et.setAttrib(se,"rel","noopener")}}Ve.moveToBookmark(Ee),ze.nodeChanged()},Ue=ze=>{const It=_(ze,-1);an(It)&&ge(ze,It)},Ie=Ue,_e=ze=>{const It=_(ze,0);an(It)&&ge(ze,It)},jt=ze=>{ze.on("keydown",It=>{It.keyCode===13&&!It.isDefaultPrevented()&&_e(ze)}),ze.on("keyup",It=>{It.keyCode===32?Ue(ze):(It.keyCode===48&&It.shiftKey||It.keyCode===221)&&Ie(ze)})};var nn=()=>{Fo.add("autolink",ze=>{Jn(ze),jt(ze)})};nn()})();(function(){const Fo=Oe=>{let oe=Oe;return{get:()=>oe,set:wt=>{oe=wt}}};var ko=tinymce.util.Tools.resolve("tinymce.PluginManager"),mo=tinymce.util.Tools.resolve("tinymce.Env");const Jn=Oe=>Oe.dispatch("ResizeEditor"),An=Oe=>oe=>oe.options.get(Oe),so=Oe=>{const oe=Oe.options.register;oe("autoresize_overflow_padding",{processor:"number",default:1}),oe("autoresize_bottom_margin",{processor:"number",default:50})},Qn=An("min_height"),qt=An("max_height"),Kt=An("autoresize_overflow_padding"),Ct=An("autoresize_bottom_margin"),Tn=Oe=>Oe.plugins.fullscreen&&Oe.plugins.fullscreen.isFullscreen(),ao=(Oe,oe)=>{const bt=Oe.getBody();bt&&(bt.style.overflowY=oe?"":"hidden",oe||(bt.scrollTop=0))},Zt=(Oe,oe,bt,Ft)=>{var wt;const Y=parseInt((wt=Oe.getStyle(oe,bt,Ft))!==null&&wt!==void 0?wt:"",10);return isNaN(Y)?0:Y},yt=Oe=>{if((Oe==null?void 0:Oe.type.toLowerCase())==="setcontent"){const oe=Oe;return oe.selection===!0||oe.paste===!0}else return!1},Rt=(Oe,oe,bt)=>{var Ft;const wt=Oe.dom,Y=Oe.getDoc();if(!Y)return;if(Tn(Oe)){ao(Oe,!0);return}const At=Y.documentElement,On=Ct(Oe),Nt=(Ft=Qn(Oe))!==null&&Ft!==void 0?Ft:Oe.getElement().offsetHeight;let we=Nt;const Q=Zt(wt,At,"margin-top",!0),ct=Zt(wt,At,"margin-bottom",!0);let Pe=At.offsetHeight+Q+ct+On;Pe<0&&(Pe=0);const Ne=Oe.getContainer().offsetHeight,Ot=Oe.getContentAreaContainer().offsetHeight,_=Ne-Ot;Pe+_>Nt&&(we=Pe+_);const ge=qt(Oe);if(ge&&we>ge?(we=ge,ao(Oe,!0)):ao(Oe,!1),we!==oe.get()){const Ue=we-oe.get();if(wt.setStyle(Oe.getContainer(),"height",we+"px"),oe.set(we),Jn(Oe),mo.browser.isSafari()&&(mo.os.isMacOS()||mo.os.isiOS())){const Ie=Oe.getWin();Ie.scrollTo(Ie.pageXOffset,Ie.pageYOffset)}Oe.hasFocus()&&yt(bt)&&Oe.selection.scrollIntoView(),(mo.browser.isSafari()||mo.browser.isChromium())&&Ue<0&&Rt(Oe,oe,bt)}},an=(Oe,oe)=>{Oe.on("init",()=>{const bt=Kt(Oe),Ft=Oe.dom;Ft.setStyles(Oe.getDoc().documentElement,{height:"auto"}),Ft.setStyles(Oe.getBody(),{paddingLeft:bt,paddingRight:bt,"min-height":0})}),Oe.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",bt=>{Rt(Oe,oe,bt)})},qe=(Oe,oe)=>{Oe.addCommand("mceAutoResize",()=>{Rt(Oe,oe)})};var rt=()=>{ko.add("autoresize",Oe=>{if(so(Oe),Oe.options.isSet("resize")||Oe.options.set("resize",!1),!Oe.inline){const oe=Fo(0);qe(Oe,oe),an(Oe,oe)}})};rt()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(ge,Ue,Ie)=>{var _e;return Ie(ge,Ue.prototype)?!0:((_e=ge.constructor)===null||_e===void 0?void 0:_e.name)===Ue.name},mo=ge=>{const Ue=typeof ge;return ge===null?"null":Ue==="object"&&Array.isArray(ge)?"array":Ue==="object"&&ko(ge,String,(Ie,_e)=>_e.isPrototypeOf(Ie))?"string":Ue},Jn=ge=>Ue=>mo(Ue)===ge,An=ge=>Ue=>ge===Ue,so=Jn("string"),Qn=An(void 0);var qt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Kt=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Ct=tinymce.util.Tools.resolve("tinymce.util.Tools");const Tn=ge=>ge.dispatch("RestoreDraft"),ao=ge=>ge.dispatch("StoreDraft"),Zt=ge=>ge.dispatch("RemoveDraft"),yt=ge=>{const Ue={s:1e3,m:6e4},Ie=/^(\d+)([ms]?)$/.exec(ge);return(Ie&&Ie[2]?Ue[Ie[2]]:1)*parseInt(ge,10)},Rt=ge=>Ue=>Ue.options.get(ge),an=ge=>{const Ue=ge.options.register,Ie=_e=>{const jt=so(_e);return jt?{value:yt(_e),valid:jt}:{valid:!1,message:"Must be a string."}};Ue("autosave_ask_before_unload",{processor:"boolean",default:!0}),Ue("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),Ue("autosave_restore_when_empty",{processor:"boolean",default:!1}),Ue("autosave_interval",{processor:Ie,default:"30s"}),Ue("autosave_retention",{processor:Ie,default:"20m"})},qe=Rt("autosave_ask_before_unload"),rt=Rt("autosave_restore_when_empty"),Oe=Rt("autosave_interval"),oe=Rt("autosave_retention"),bt=ge=>{const Ue=document.location;return ge.options.get("autosave_prefix").replace(/{path}/g,Ue.pathname).replace(/{query}/g,Ue.search).replace(/{hash}/g,Ue.hash).replace(/{id}/g,ge.id)},Ft=(ge,Ue)=>{if(Qn(Ue))return ge.dom.isEmpty(ge.getBody());{const Ie=Ct.trim(Ue);if(Ie==="")return!0;{const _e=new DOMParser().parseFromString(Ie,"text/html");return ge.dom.isEmpty(_e)}}},wt=ge=>{var Ue;const Ie=parseInt((Ue=Kt.getItem(bt(ge)+"time"))!==null&&Ue!==void 0?Ue:"0",10)||0;return new Date().getTime()-Ie>oe(ge)?(Y(ge,!1),!1):!0},Y=(ge,Ue)=>{const Ie=bt(ge);Kt.removeItem(Ie+"draft"),Kt.removeItem(Ie+"time"),Ue!==!1&&Zt(ge)},At=ge=>{const Ue=bt(ge);!Ft(ge)&&ge.isDirty()&&(Kt.setItem(Ue+"draft",ge.getContent({format:"raw",no_events:!0})),Kt.setItem(Ue+"time",new Date().getTime().toString()),ao(ge))},On=ge=>{var Ue;const Ie=bt(ge);wt(ge)&&(ge.setContent((Ue=Kt.getItem(Ie+"draft"))!==null&&Ue!==void 0?Ue:"",{format:"raw"}),Tn(ge))},Nt=ge=>{const Ue=Oe(ge);qt.setEditorInterval(ge,()=>{At(ge)},Ue)},we=ge=>{ge.undoManager.transact(()=>{On(ge),Y(ge)}),ge.focus()},Q=ge=>({hasDraft:()=>wt(ge),storeDraft:()=>At(ge),restoreDraft:()=>On(ge),removeDraft:Ue=>Y(ge,Ue),isEmpty:Ue=>Ft(ge,Ue)});var ct=tinymce.util.Tools.resolve("tinymce.EditorManager");const Pe=ge=>{ge.editorManager.on("BeforeUnload",Ue=>{let Ie;Ct.each(ct.get(),_e=>{_e.plugins.autosave&&_e.plugins.autosave.storeDraft(),!Ie&&_e.isDirty()&&qe(_e)&&(Ie=_e.translate("You have unsaved changes are you sure you want to navigate away?"))}),Ie&&(Ue.preventDefault(),Ue.returnValue=Ie)})},Ne=ge=>Ue=>{Ue.setEnabled(wt(ge));const Ie=()=>Ue.setEnabled(wt(ge));return ge.on("StoreDraft RestoreDraft RemoveDraft",Ie),()=>ge.off("StoreDraft RestoreDraft RemoveDraft",Ie)},Ot=ge=>{Nt(ge);const Ue=()=>{we(ge)};ge.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:Ue,onSetup:Ne(ge)}),ge.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:Ue,onSetup:Ne(ge)})};var _=()=>{Fo.add("autosave",ge=>(an(ge),Pe(ge),Ot(ge),ge.on("init",()=>{rt(ge)&&ge.dom.isEmpty(ge.getBody())&&On(ge)}),Q(ge)))};_()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(ke,ae)=>ke.dispatch("insertCustomChar",{chr:ae}),mo=(ke,ae)=>{const se=ko(ke,ae).chr;ke.execCommand("mceInsertContent",!1,se)},Jn=(ke,ae,se)=>{var re;return se(ke,ae.prototype)?!0:((re=ke.constructor)===null||re===void 0?void 0:re.name)===ae.name},An=ke=>{const ae=typeof ke;return ke===null?"null":ae==="object"&&Array.isArray(ke)?"array":ae==="object"&&Jn(ke,String,(se,re)=>re.isPrototypeOf(se))?"string":ae},so=ke=>ae=>An(ae)===ke,Qn=ke=>ae=>typeof ae===ke,qt=ke=>ae=>ke===ae,Kt=so("array"),Ct=qt(null),Tn=qt(void 0),ao=ke=>ke==null,Zt=ke=>!ao(ke),yt=Qn("function"),an=(ke=>()=>ke)(!1);class qe{constructor(ae,se){this.tag=ae,this.value=se}static some(ae){return new qe(!0,ae)}static none(){return qe.singletonNone}fold(ae,se){return this.tag?se(this.value):ae()}isSome(){return this.tag}isNone(){return!this.tag}map(ae){return this.tag?qe.some(ae(this.value)):qe.none()}bind(ae){return this.tag?ae(this.value):qe.none()}exists(ae){return this.tag&&ae(this.value)}forall(ae){return!this.tag||ae(this.value)}filter(ae){return!this.tag||ae(this.value)?this:qe.none()}getOr(ae){return this.tag?this.value:ae}or(ae){return this.tag?this:ae}getOrThunk(ae){return this.tag?this.value:ae()}orThunk(ae){return this.tag?this:ae()}getOrDie(ae){if(this.tag)return this.value;throw new Error(ae!=null?ae:"Called getOrDie on None")}static from(ae){return Zt(ae)?qe.some(ae):qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ae){this.tag&&ae(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}qe.singletonNone=new qe(!1);const rt=Array.prototype.push,Oe=(ke,ae)=>{const se=ke.length,re=new Array(se);for(let z=0;z<se;z++){const K=ke[z];re[z]=ae(K,z)}return re},oe=(ke,ae)=>{for(let se=0,re=ke.length;se<re;se++){const z=ke[se];ae(z,se)}},bt=(ke,ae,se)=>{for(let re=0,z=ke.length;re<z;re++){const K=ke[re];if(ae(K,re))return qe.some(K);if(se(K,re))break}return qe.none()},Ft=(ke,ae)=>bt(ke,ae,an),wt=ke=>{const ae=[];for(let se=0,re=ke.length;se<re;++se){if(!Kt(ke[se]))throw new Error("Arr.flatten item "+se+" was not an array, input: "+ke);rt.apply(ae,ke[se])}return ae},Y=(ke,ae)=>wt(Oe(ke,ae));var At=tinymce.util.Tools.resolve("tinymce.util.Tools");const On=ke=>ae=>ae.options.get(ke),Nt=ke=>{const ae=ke.options.register,se=re=>yt(re)||Kt(re);ae("charmap",{processor:se}),ae("charmap_append",{processor:se})},we=On("charmap"),Q=On("charmap_append"),ct=At.isArray,Pe="User Defined",Ne=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],Ot=ke=>At.grep(ke,ae=>ct(ae)&&ae.length===2),_=ke=>ct(ke)?Ot(ke):typeof ke=="function"?ke():[],ge=(ke,ae)=>{const se=we(ke);se&&(ae=[{name:Pe,characters:_(se)}]);const re=Q(ke);if(re){const z=At.grep(ae,K=>K.name===Pe);return z.length?(z[0].characters=[...z[0].characters,..._(re)],ae):ae.concat({name:Pe,characters:_(re)})}return ae},Ue=ke=>{const ae=ge(ke,Ne());return ae.length>1?[{name:"All",characters:Y(ae,se=>se.characters)}].concat(ae):ae},Ie=ke=>({getCharMap:()=>Ue(ke),insertChar:re=>{mo(ke,re)}}),_e=ke=>{let ae=ke;return{get:()=>ae,set:z=>{ae=z}}},jt=(ke,ae)=>{let se=null;const re=()=>{Ct(se)||(clearTimeout(se),se=null)};return{cancel:re,throttle:(...K)=>{re(),se=setTimeout(()=>{se=null,ke.apply(null,K)},ae)}}},nn=(ke,ae,se=0,re)=>{const z=ke.indexOf(ae,se);return z!==-1?Tn(re)?!0:z+ae.length<=re:!1},ze=String.fromCodePoint,It=(ke,ae,se)=>nn(ze(ke).toLowerCase(),se)?!0:nn(ae.toLowerCase(),se)||nn(ae.toLowerCase().replace(/\s+/g,""),se),Et=(ke,ae)=>{const se=[],re=ae.toLowerCase();return oe(ke.characters,z=>{It(z[0],z[1],re)&&se.push(z)}),Oe(se,z=>({text:z[1],value:ze(z[0]),icon:ze(z[0])}))},Ve="pattern",R=(ke,ae)=>{const se=()=>[{label:"Search",type:"input",name:Ve},{type:"collection",name:"results"}],re=()=>Oe(ae,jn=>({title:jn.name,name:jn.name,items:se()})),z=()=>({type:"panel",items:se()}),K=()=>({type:"tabpanel",tabs:re()}),H=ae.length===1?_e(Pe):_e("All"),Z=(jn,pn)=>{Ft(ae,to=>to.name===H.get()).each(to=>{const De=Et(to,pn);jn.setData({results:De})})},Be=jt(jn=>{const pn=jn.getData().pattern;Z(jn,pn)},40),zt=ae.length===1?z():K(),Jt={pattern:"",results:Et(ae[0],"")},eo={title:"Special Character",size:"normal",body:zt,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:Jt,onAction:(jn,pn)=>{pn.name==="results"&&(mo(ke,pn.value),jn.close())},onTabChange:(jn,pn)=>{H.set(pn.newTabName),Be.throttle(jn)},onChange:(jn,pn)=>{pn.name===Ve&&Be.throttle(jn)}};ke.windowManager.open(eo).focus(Ve)},zn=(ke,ae)=>{ke.addCommand("mceShowCharmap",()=>{R(ke,ae)})},Ee=(ke,ae)=>{ke.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(se,re)=>new Promise((z,K)=>{z(Et(ae,se))}),onAction:(se,re,z)=>{ke.selection.setRng(re),ke.insertContent(z),se.hide()}})},xe=ke=>{const ae=()=>ke.execCommand("mceShowCharmap");ke.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:ae}),ke.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:ae})};var We=()=>{Fo.add("charmap",ke=>{Nt(ke);const ae=Ue(ke);return zn(ke,ae),xe(ke),Ee(ke,ae[0]),Ie(ke)})};We()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(qt,Kt)=>{qt.focus(),qt.undoManager.transact(()=>{qt.setContent(Kt)}),qt.selection.setCursorLocation(),qt.nodeChanged()},mo=qt=>qt.getContent({source_view:!0}),Jn=qt=>{const Kt=mo(qt);qt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Kt},onSubmit:Ct=>{ko(qt,Ct.getData().code),Ct.close()}})},An=qt=>{qt.addCommand("mceCodeEditor",()=>{Jn(qt)})},so=qt=>{const Kt=()=>qt.execCommand("mceCodeEditor");qt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Kt}),qt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Kt})};var Qn=()=>{Fo.add("code",qt=>(An(qt),so(qt),{}))};Qn()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=Pe=>Pe==null,mo=Pe=>!ko(Pe),Jn=Pe=>()=>Pe;class An{constructor(Ne,Ot){this.tag=Ne,this.value=Ot}static some(Ne){return new An(!0,Ne)}static none(){return An.singletonNone}fold(Ne,Ot){return this.tag?Ot(this.value):Ne()}isSome(){return this.tag}isNone(){return!this.tag}map(Ne){return this.tag?An.some(Ne(this.value)):An.none()}bind(Ne){return this.tag?Ne(this.value):An.none()}exists(Ne){return this.tag&&Ne(this.value)}forall(Ne){return!this.tag||Ne(this.value)}filter(Ne){return!this.tag||Ne(this.value)?this:An.none()}getOr(Ne){return this.tag?this.value:Ne}or(Ne){return this.tag?this:Ne}getOrThunk(Ne){return this.tag?this.value:Ne()}orThunk(Ne){return this.tag?this:Ne()}getOrDie(Ne){if(this.tag)return this.value;throw new Error(Ne!=null?Ne:"Called getOrDie on None")}static from(Ne){return mo(Ne)?An.some(Ne):An.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ne){this.tag&&Ne(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}An.singletonNone=new An(!1);const so=(Pe,Ne)=>Ne>=0&&Ne<Pe.length?An.some(Pe[Ne]):An.none(),Qn=Pe=>so(Pe,0);var qt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const Kt=typeof window<"u"?window:Function("return this;")(),Ct=function(Pe,Ne,Ot){const _=window.Prism;window.Prism={manual:!0};var ge=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},Ue=function(Ie){var _e=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,jt=0,nn={},ze={manual:Ie.Prism&&Ie.Prism.manual,disableWorkerMessageHandler:Ie.Prism&&Ie.Prism.disableWorkerMessageHandler,util:{encode:function se(re){return re instanceof It?new It(re.type,se(re.content),re.alias):Array.isArray(re)?re.map(se):re.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(se){return Object.prototype.toString.call(se).slice(8,-1)},objId:function(se){return se.__id||Object.defineProperty(se,"__id",{value:++jt}),se.__id},clone:function se(re,z){z=z||{};var K,H;switch(ze.util.type(re)){case"Object":if(H=ze.util.objId(re),z[H])return z[H];K={},z[H]=K;for(var Z in re)re.hasOwnProperty(Z)&&(K[Z]=se(re[Z],z));return K;case"Array":return H=ze.util.objId(re),z[H]?z[H]:(K=[],z[H]=K,re.forEach(function($e,Be){K[Be]=se($e,z)}),K);default:return re}},getLanguage:function(se){for(;se;){var re=_e.exec(se.className);if(re)return re[1].toLowerCase();se=se.parentElement}return"none"},setLanguage:function(se,re){se.className=se.className.replace(RegExp(_e,"gi"),""),se.classList.add("language-"+re)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(K){var se=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(K.stack)||[])[1];if(se){var re=document.getElementsByTagName("script");for(var z in re)if(re[z].src==se)return re[z]}return null}},isActive:function(se,re,z){for(var K="no-"+re;se;){var H=se.classList;if(H.contains(re))return!0;if(H.contains(K))return!1;se=se.parentElement}return!!z}},languages:{plain:nn,plaintext:nn,text:nn,txt:nn,extend:function(se,re){var z=ze.util.clone(ze.languages[se]);for(var K in re)z[K]=re[K];return z},insertBefore:function(se,re,z,K){K=K||ze.languages;var H=K[se],Z={};for(var $e in H)if(H.hasOwnProperty($e)){if($e==re)for(var Be in z)z.hasOwnProperty(Be)&&(Z[Be]=z[Be]);z.hasOwnProperty($e)||(Z[$e]=H[$e])}var zt=K[se];return K[se]=Z,ze.languages.DFS(ze.languages,function(Jt,eo){eo===zt&&Jt!=se&&(this[Jt]=Z)}),Z},DFS:function se(re,z,K,H){H=H||{};var Z=ze.util.objId;for(var $e in re)if(re.hasOwnProperty($e)){z.call(re,$e,re[$e],K||$e);var Be=re[$e],zt=ze.util.type(Be);zt==="Object"&&!H[Z(Be)]?(H[Z(Be)]=!0,se(Be,z,null,H)):zt==="Array"&&!H[Z(Be)]&&(H[Z(Be)]=!0,se(Be,z,$e,H))}}},plugins:{},highlightAll:function(se,re){ze.highlightAllUnder(document,se,re)},highlightAllUnder:function(se,re,z){var K={callback:z,container:se,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};ze.hooks.run("before-highlightall",K),K.elements=Array.prototype.slice.apply(K.container.querySelectorAll(K.selector)),ze.hooks.run("before-all-elements-highlight",K);for(var H=0,Z;Z=K.elements[H++];)ze.highlightElement(Z,re===!0,K.callback)},highlightElement:function(se,re,z){var K=ze.util.getLanguage(se),H=ze.languages[K];ze.util.setLanguage(se,K);var Z=se.parentElement;Z&&Z.nodeName.toLowerCase()==="pre"&&ze.util.setLanguage(Z,K);var $e=se.textContent,Be={element:se,language:K,grammar:H,code:$e};function zt(eo){Be.highlightedCode=eo,ze.hooks.run("before-insert",Be),Be.element.innerHTML=Be.highlightedCode,ze.hooks.run("after-highlight",Be),ze.hooks.run("complete",Be),z&&z.call(Be.element)}if(ze.hooks.run("before-sanity-check",Be),Z=Be.element.parentElement,Z&&Z.nodeName.toLowerCase()==="pre"&&!Z.hasAttribute("tabindex")&&Z.setAttribute("tabindex","0"),!Be.code){ze.hooks.run("complete",Be),z&&z.call(Be.element);return}if(ze.hooks.run("before-highlight",Be),!Be.grammar){zt(ze.util.encode(Be.code));return}if(re&&Ie.Worker){var Jt=new Worker(ze.filename);Jt.onmessage=function(eo){zt(eo.data)},Jt.postMessage(JSON.stringify({language:Be.language,code:Be.code,immediateClose:!0}))}else zt(ze.highlight(Be.code,Be.grammar,Be.language))},highlight:function(se,re,z){var K={code:se,grammar:re,language:z};if(ze.hooks.run("before-tokenize",K),!K.grammar)throw new Error('The language "'+K.language+'" has no grammar.');return K.tokens=ze.tokenize(K.code,K.grammar),ze.hooks.run("after-tokenize",K),It.stringify(ze.util.encode(K.tokens),K.language)},tokenize:function(se,re){var z=re.rest;if(z){for(var K in z)re[K]=z[K];delete re.rest}var H=new R;return zn(H,H.head,se),Ve(se,H,re,H.head,0),xe(H)},hooks:{all:{},add:function(se,re){var z=ze.hooks.all;z[se]=z[se]||[],z[se].push(re)},run:function(se,re){var z=ze.hooks.all[se];if(!(!z||!z.length))for(var K=0,H;H=z[K++];)H(re)}},Token:It};Ie.Prism=ze;function It(se,re,z,K){this.type=se,this.content=re,this.alias=z,this.length=(K||"").length|0}It.stringify=function se(re,z){if(typeof re=="string")return re;if(Array.isArray(re)){var K="";return re.forEach(function(zt){K+=se(zt,z)}),K}var H={type:re.type,content:se(re.content,z),tag:"span",classes:["token",re.type],attributes:{},language:z},Z=re.alias;Z&&(Array.isArray(Z)?Array.prototype.push.apply(H.classes,Z):H.classes.push(Z)),ze.hooks.run("wrap",H);var $e="";for(var Be in H.attributes)$e+=" "+Be+'="'+(H.attributes[Be]||"").replace(/"/g,"&quot;")+'"';return"<"+H.tag+' class="'+H.classes.join(" ")+'"'+$e+">"+H.content+"</"+H.tag+">"};function Et(se,re,z,K){se.lastIndex=re;var H=se.exec(z);if(H&&K&&H[1]){var Z=H[1].length;H.index+=Z,H[0]=H[0].slice(Z)}return H}function Ve(se,re,z,K,H,Z){for(var $e in z)if(!(!z.hasOwnProperty($e)||!z[$e])){var Be=z[$e];Be=Array.isArray(Be)?Be:[Be];for(var zt=0;zt<Be.length;++zt){if(Z&&Z.cause==$e+","+zt)return;var Jt=Be[zt],eo=Jt.inside,co=!!Jt.lookbehind,jn=!!Jt.greedy,pn=Jt.alias;if(jn&&!Jt.pattern.global){var to=Jt.pattern.toString().match(/[imsuy]*$/)[0];Jt.pattern=RegExp(Jt.pattern.source,to+"g")}for(var De=Jt.pattern||Jt,Ye=K.next,Dt=H;Ye!==re.tail&&!(Z&&Dt>=Z.reach);Dt+=Ye.value.length,Ye=Ye.next){var on=Ye.value;if(re.length>se.length)return;if(!(on instanceof It)){var wn=1,bn;if(jn){if(bn=Et(De,Dt,se,co),!bn||bn.index>=se.length)break;var Le=bn.index,Oo=bn.index+bn[0].length,xs=Dt;for(xs+=Ye.value.length;Le>=xs;)Ye=Ye.next,xs+=Ye.value.length;if(xs-=Ye.value.length,Dt=xs,Ye.value instanceof It)continue;for(var Ge=Ye;Ge!==re.tail&&(xs<Oo||typeof Ge.value=="string");Ge=Ge.next)wn++,xs+=Ge.value.length;wn--,on=se.slice(Dt,xs),bn.index-=Dt}else if(bn=Et(De,0,on,co),!bn)continue;var Le=bn.index,tn=bn[0],en=on.slice(0,Le),Ut=on.slice(Le+tn.length),Vn=Dt+on.length;Z&&Vn>Z.reach&&(Z.reach=Vn);var ks=Ye.prev;en&&(ks=zn(re,ks,en),Dt+=en.length),Ee(re,ks,wn);var kr=new It($e,eo?ze.tokenize(tn,eo):tn,pn,tn);if(Ye=zn(re,ks,kr),Ut&&zn(re,Ye,Ut),wn>1){var da={cause:$e+","+zt,reach:Vn};Ve(se,re,z,Ye.prev,Dt,da),Z&&da.reach>Z.reach&&(Z.reach=da.reach)}}}}}}function R(){var se={value:null,prev:null,next:null},re={value:null,prev:se,next:null};se.next=re,this.head=se,this.tail=re,this.length=0}function zn(se,re,z){var K=re.next,H={value:z,prev:re,next:K};return re.next=H,K.prev=H,se.length++,H}function Ee(se,re,z){for(var K=re.next,H=0;H<z&&K!==se.tail;H++)K=K.next;re.next=K,K.prev=re,se.length-=H}function xe(se){for(var re=[],z=se.head.next;z!==se.tail;)re.push(z.value),z=z.next;return re}if(!Ie.document)return Ie.addEventListener&&(ze.disableWorkerMessageHandler||Ie.addEventListener("message",function(se){var re=JSON.parse(se.data),z=re.language,K=re.code,H=re.immediateClose;Ie.postMessage(ze.highlight(K,ze.languages[z],z)),H&&Ie.close()},!1)),ze;var We=ze.util.currentScript();We&&(ze.filename=We.src,We.hasAttribute("data-manual")&&(ze.manual=!0));function ke(){ze.manual||ze.highlightAll()}if(!ze.manual){var ae=document.readyState;ae==="loading"||ae==="interactive"&&We&&We.defer?document.addEventListener("DOMContentLoaded",ke):window.requestAnimationFrame?window.requestAnimationFrame(ke):window.setTimeout(ke,16)}return ze}(ge);return typeof Ne<"u"&&Ne.exports&&(Ne.exports=Ue),typeof Pe<"u"&&(Pe.Prism=Ue),Ue.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(Ie){function _e(jt,nn){return"___"+jt.toUpperCase()+nn+"___"}Object.defineProperties(Ie.languages["markup-templating"]={},{buildPlaceholders:{value:function(jt,nn,ze,It){if(jt.language===nn){var Et=jt.tokenStack=[];jt.code=jt.code.replace(ze,function(Ve){if(typeof It=="function"&&!It(Ve))return Ve;for(var R=Et.length,zn;jt.code.indexOf(zn=_e(nn,R))!==-1;)++R;return Et[R]=Ve,zn}),jt.grammar=Ie.languages.markup}}},tokenizePlaceholders:{value:function(jt,nn){if(jt.language!==nn||!jt.tokenStack)return;jt.grammar=Ie.languages[nn];var ze=0,It=Object.keys(jt.tokenStack);function Et(Ve){for(var R=0;R<Ve.length&&!(ze>=It.length);R++){var zn=Ve[R];if(typeof zn=="string"||zn.content&&typeof zn.content=="string"){var Ee=It[ze],xe=jt.tokenStack[Ee],We=typeof zn=="string"?zn:zn.content,ke=_e(nn,Ee),ae=We.indexOf(ke);if(ae>-1){++ze;var se=We.substring(0,ae),re=new Ie.Token(nn,Ie.tokenize(xe,jt.grammar),"language-"+nn,xe),z=We.substring(ae+ke.length),K=[];se&&K.push.apply(K,Et([se])),K.push(re),z&&K.push.apply(K,Et([z])),typeof zn=="string"?Ve.splice.apply(Ve,[R,1].concat(K)):zn.content=K}}else zn.content&&Et(zn.content)}return Ve}Et(jt.tokens)}}})}(Ue),Ue.languages.c=Ue.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Ue.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Ue.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Ue.languages.c.string],char:Ue.languages.c.char,comment:Ue.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Ue.languages.c}}}}),Ue.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Ue.languages.c.boolean,function(Ie){var _e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,jt=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return _e.source});Ie.languages.cpp=Ie.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return _e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:_e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),Ie.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return jt})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),Ie.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:Ie.languages.cpp}}}}),Ie.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),Ie.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:Ie.languages.extend("cpp",{})}}),Ie.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},Ie.languages.cpp["base-clause"])}(Ue),function(Ie){function _e(bn,Oo){return bn.replace(/<<(\d+)>>/g,function(xs,Ge){return"(?:"+Oo[+Ge]+")"})}function jt(bn,Oo,xs){return RegExp(_e(bn,Oo),xs||"")}function nn(bn,Oo){for(var xs=0;xs<Oo;xs++)bn=bn.replace(/<<self>>/g,function(){return"(?:"+bn+")"});return bn.replace(/<<self>>/g,"[^\\s\\S]")}var ze={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function It(bn){return"\\b(?:"+bn.trim().replace(/ /g,"|")+")\\b"}var Et=It(ze.typeDeclaration),Ve=RegExp(It(ze.type+" "+ze.typeDeclaration+" "+ze.contextual+" "+ze.other)),R=It(ze.typeDeclaration+" "+ze.contextual+" "+ze.other),zn=It(ze.type+" "+ze.typeDeclaration+" "+ze.other),Ee=nn(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),xe=nn(/\((?:[^()]|<<self>>)*\)/.source,2),We=/@?\b[A-Za-z_]\w*\b/.source,ke=_e(/<<0>>(?:\s*<<1>>)?/.source,[We,Ee]),ae=_e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[R,ke]),se=/\[\s*(?:,\s*)*\]/.source,re=_e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[ae,se]),z=_e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[Ee,xe,se]),K=_e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[z]),H=_e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[K,ae,se]),Z={keyword:Ve,punctuation:/[<>()?,.:[\]]/},$e=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,Be=/"(?:\\.|[^\\"\r\n])*"/.source,zt=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;Ie.languages.csharp=Ie.languages.extend("clike",{string:[{pattern:jt(/(^|[^$\\])<<0>>/.source,[zt]),lookbehind:!0,greedy:!0},{pattern:jt(/(^|[^@$\\])<<0>>/.source,[Be]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:jt(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[ae]),lookbehind:!0,inside:Z},{pattern:jt(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[We,H]),lookbehind:!0,inside:Z},{pattern:jt(/(\busing\s+)<<0>>(?=\s*=)/.source,[We]),lookbehind:!0},{pattern:jt(/(\b<<0>>\s+)<<1>>/.source,[Et,ke]),lookbehind:!0,inside:Z},{pattern:jt(/(\bcatch\s*\(\s*)<<0>>/.source,[ae]),lookbehind:!0,inside:Z},{pattern:jt(/(\bwhere\s+)<<0>>/.source,[We]),lookbehind:!0},{pattern:jt(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[re]),lookbehind:!0,inside:Z},{pattern:jt(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[H,zn,We]),inside:Z}],keyword:Ve,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),Ie.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),Ie.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:jt(/([(,]\s*)<<0>>(?=\s*:)/.source,[We]),lookbehind:!0,alias:"punctuation"}}),Ie.languages.insertBefore("csharp","class-name",{namespace:{pattern:jt(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[We]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:jt(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[xe]),lookbehind:!0,alias:"class-name",inside:Z},"return-type":{pattern:jt(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[H,ae]),inside:Z,alias:"class-name"},"constructor-invocation":{pattern:jt(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[H]),lookbehind:!0,inside:Z,alias:"class-name"},"generic-method":{pattern:jt(/<<0>>\s*<<1>>(?=\s*\()/.source,[We,Ee]),inside:{function:jt(/^<<0>>/.source,[We]),generic:{pattern:RegExp(Ee),alias:"class-name",inside:Z}}},"type-list":{pattern:jt(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[Et,ke,We,H,Ve.source,xe,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:jt(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[ke,xe]),lookbehind:!0,greedy:!0,inside:Ie.languages.csharp},keyword:Ve,"class-name":{pattern:RegExp(H),greedy:!0,inside:Z},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var Jt=Be+"|"+$e,eo=_e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[Jt]),co=nn(_e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[eo]),2),jn=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,pn=_e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[ae,co]);Ie.languages.insertBefore("csharp","class-name",{attribute:{pattern:jt(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[jn,pn]),lookbehind:!0,greedy:!0,inside:{target:{pattern:jt(/^<<0>>(?=\s*:)/.source,[jn]),alias:"keyword"},"attribute-arguments":{pattern:jt(/\(<<0>>*\)/.source,[co]),inside:Ie.languages.csharp},"class-name":{pattern:RegExp(ae),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var to=/:[^}\r\n]+/.source,De=nn(_e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[eo]),2),Ye=_e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[De,to]),Dt=nn(_e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[Jt]),2),on=_e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Dt,to]);function wn(bn,Oo){return{interpolation:{pattern:jt(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[bn]),lookbehind:!0,inside:{"format-string":{pattern:jt(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[Oo,to]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:Ie.languages.csharp}}},string:/[\s\S]+/}}Ie.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:jt(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[Ye]),lookbehind:!0,greedy:!0,inside:wn(Ye,De)},{pattern:jt(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[on]),lookbehind:!0,greedy:!0,inside:wn(on,Dt)}],char:{pattern:RegExp($e),greedy:!0}}),Ie.languages.dotnet=Ie.languages.cs=Ie.languages.csharp}(Ue),function(Ie){var _e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;Ie.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+_e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+_e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+_e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:_e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},Ie.languages.css.atrule.inside.rest=Ie.languages.css;var jt=Ie.languages.markup;jt&&(jt.tag.addInlined("style","css"),jt.tag.addAttribute("style","css"))}(Ue),function(Ie){var _e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,jt=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,nn={pattern:RegExp(/(^|[^\w.])/.source+jt+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};Ie.languages.java=Ie.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[nn,{pattern:RegExp(/(^|[^\w.])/.source+jt+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:nn.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+jt+/[A-Z]\w*\b/.source),lookbehind:!0,inside:nn.inside}],keyword:_e,function:[Ie.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),Ie.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),Ie.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":nn,keyword:_e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+jt+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:nn.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+jt+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:nn.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return _e.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Ue),Ue.languages.javascript=Ue.languages.extend("clike",{"class-name":[Ue.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Ue.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Ue.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Ue.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Ue.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Ue.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Ue.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Ue.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Ue.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Ue.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Ue.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Ue.languages.markup&&(Ue.languages.markup.tag.addInlined("script","javascript"),Ue.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Ue.languages.js=Ue.languages.javascript,Ue.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Ue.languages.markup.tag.inside["attr-value"].inside.entity=Ue.languages.markup.entity,Ue.languages.markup.doctype.inside["internal-subset"].inside=Ue.languages.markup,Ue.hooks.add("wrap",function(Ie){Ie.type==="entity"&&(Ie.attributes.title=Ie.content.replace(/&amp;/,"&"))}),Object.defineProperty(Ue.languages.markup.tag,"addInlined",{value:function(_e,jt){var nn={};nn["language-"+jt]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Ue.languages[jt]},nn.cdata=/^<!\[CDATA\[|\]\]>$/i;var ze={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:nn}};ze["language-"+jt]={pattern:/[\s\S]+/,inside:Ue.languages[jt]};var It={};It[_e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return _e}),"i"),lookbehind:!0,greedy:!0,inside:ze},Ue.languages.insertBefore("markup","cdata",It)}}),Object.defineProperty(Ue.languages.markup.tag,"addAttribute",{value:function(Ie,_e){Ue.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+Ie+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[_e,"language-"+_e],inside:Ue.languages[_e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Ue.languages.html=Ue.languages.markup,Ue.languages.mathml=Ue.languages.markup,Ue.languages.svg=Ue.languages.markup,Ue.languages.xml=Ue.languages.extend("markup",{}),Ue.languages.ssml=Ue.languages.xml,Ue.languages.atom=Ue.languages.xml,Ue.languages.rss=Ue.languages.xml,function(Ie){var _e=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,jt=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],nn=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,ze=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,It=/[{}\[\](),:;]/;Ie.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:_e,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:jt,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:nn,operator:ze,punctuation:It};var Et={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:Ie.languages.php},Ve=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:Et}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:Et}}];Ie.languages.insertBefore("php","variable",{string:Ve,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:_e,string:Ve,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:jt,number:nn,operator:ze,punctuation:It}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),Ie.hooks.add("before-tokenize",function(R){if(!!/<\?/.test(R.code)){var zn=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;Ie.languages["markup-templating"].buildPlaceholders(R,"php",zn)}}),Ie.hooks.add("after-tokenize",function(R){Ie.languages["markup-templating"].tokenizePlaceholders(R,"php")})}(Ue),Ue.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Ue.languages.python["string-interpolation"].inside.interpolation.inside.rest=Ue.languages.python,Ue.languages.py=Ue.languages.python,function(Ie){Ie.languages.ruby=Ie.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),Ie.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var _e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:Ie.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete Ie.languages.ruby.function;var jt="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",nn=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;Ie.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+jt+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:_e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:_e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+nn),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+nn+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),Ie.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+jt),greedy:!0,inside:{interpolation:_e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:_e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:_e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+jt),greedy:!0,inside:{interpolation:_e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:_e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete Ie.languages.ruby.string,Ie.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),Ie.languages.rb=Ie.languages.ruby}(Ue),window.Prism=_,Ue}(void 0,void 0),Tn=Pe=>Ne=>Ne.options.get(Pe),ao=Pe=>{const Ne=Pe.options.register;Ne("codesample_languages",{processor:"object[]"}),Ne("codesample_global_prismjs",{processor:"boolean",default:!1})},Zt=Tn("codesample_languages"),yt=Tn("codesample_global_prismjs"),Rt=Pe=>Kt.Prism&&yt(Pe)?Kt.Prism:Ct,an=Pe=>mo(Pe)&&Pe.nodeName==="PRE"&&Pe.className.indexOf("language-")!==-1,qe=Pe=>{const Ne=Pe.selection?Pe.selection.getNode():null;return an(Ne)?An.some(Ne):An.none()},rt=(Pe,Ne,Ot)=>{const _=Pe.dom;Pe.undoManager.transact(()=>{const ge=qe(Pe);return Ot=qt.DOM.encode(Ot),ge.fold(()=>{Pe.insertContent('<pre id="__new" class="language-'+Ne+'">'+Ot+"</pre>");const Ue=_.select("#__new")[0];_.setAttrib(Ue,"id",null),Pe.selection.select(Ue)},Ue=>{_.setAttrib(Ue,"class","language-"+Ne),Ue.innerHTML=Ot,Rt(Pe).highlightElement(Ue),Pe.selection.select(Ue)})})},Oe=Pe=>qe(Pe).bind(Ot=>An.from(Ot.textContent)).getOr(""),oe=Pe=>{const Ne=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],Ot=Zt(Pe);return Ot||Ne},bt=(Pe,Ne)=>qe(Pe).fold(()=>Ne,_=>{const ge=_.className.match(/language-(\w+)/);return ge?ge[1]:Ne}),Ft=Pe=>{const Ne=oe(Pe),Ot=Qn(Ne).fold(Jn(""),Ue=>Ue.value),_=bt(Pe,Ot),ge=Oe(Pe);Pe.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:Ne},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:_,code:ge},onSubmit:Ue=>{const Ie=Ue.getData();rt(Pe,Ie.language,Ie.code),Ue.close()}})},wt=Pe=>{Pe.addCommand("codesample",()=>{const Ne=Pe.selection.getNode();Pe.selection.isCollapsed()||an(Ne)?Ft(Pe):Pe.formatter.toggle("code")})},At=(Pe=>Ne=>Ne.replace(Pe,""))(/^\s+|\s+$/g);var On=tinymce.util.Tools.resolve("tinymce.util.Tools");const Nt=Pe=>{Pe.on("PreProcess",Ne=>{const Ot=Pe.dom,_=Ot.select("pre[contenteditable=false]",Ne.node);On.each(On.grep(_,an),ge=>{const Ue=ge.textContent;Ot.setAttrib(ge,"class",At(Ot.getAttrib(ge,"class"))),Ot.setAttrib(ge,"contentEditable",null),Ot.setAttrib(ge,"data-mce-highlighted",null);let Ie;for(;Ie=ge.firstChild;)ge.removeChild(Ie);const _e=Ot.add(ge,"code");_e.textContent=Ue})}),Pe.on("SetContent",()=>{const Ne=Pe.dom,Ot=On.grep(Ne.select("pre"),_=>an(_)&&Ne.getAttrib(_,"data-mce-highlighted")!=="true");Ot.length&&Pe.undoManager.transact(()=>{On.each(Ot,_=>{var ge;On.each(Ne.select("br",_),Ue=>{Ne.replace(Pe.getDoc().createTextNode(`
`),Ue)}),_.innerHTML=Ne.encode((ge=_.textContent)!==null&&ge!==void 0?ge:""),Rt(Pe).highlightElement(_),Ne.setAttrib(_,"data-mce-highlighted",!0),_.className=At(_.className)})})}),Pe.on("PreInit",()=>{Pe.parser.addNodeFilter("pre",Ne=>{var Ot;for(let _=0,ge=Ne.length;_<ge;_++){const Ue=Ne[_];((Ot=Ue.attr("class"))!==null&&Ot!==void 0?Ot:"").indexOf("language-")!==-1&&(Ue.attr("contenteditable","false"),Ue.attr("data-mce-highlighted","false"))}})})},we=Pe=>{const Ne=Pe.selection.getStart();return Pe.dom.is(Ne,'pre[class*="language-"]')},Q=Pe=>{const Ne=()=>Pe.execCommand("codesample");Pe.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:Ne,onSetup:Ot=>{const _=()=>{Ot.setActive(we(Pe))};return Pe.on("NodeChange",_),()=>Pe.off("NodeChange",_)}}),Pe.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:Ne})};var ct=()=>{Fo.add("codesample",Pe=>{ao(Pe),Nt(Pe),Q(Pe),wt(Pe),Pe.on("dblclick",Ne=>{an(Ne.target)&&Ft(Pe)})})};ct()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(De,Ye,Dt)=>{var on;return Dt(De,Ye.prototype)?!0:((on=De.constructor)===null||on===void 0?void 0:on.name)===Ye.name},mo=De=>{const Ye=typeof De;return De===null?"null":Ye==="object"&&Array.isArray(De)?"array":Ye==="object"&&ko(De,String,(Dt,on)=>on.isPrototypeOf(Dt))?"string":Ye},Jn=De=>Ye=>mo(Ye)===De,An=De=>Ye=>typeof Ye===De,so=Jn("string"),Qn=An("boolean"),qt=De=>De==null,Kt=De=>!qt(De),Ct=An("function"),Tn=An("number"),ao=(De,Ye)=>Dt=>De(Ye(Dt)),yt=(De=>()=>De)(!1);class Rt{constructor(Ye,Dt){this.tag=Ye,this.value=Dt}static some(Ye){return new Rt(!0,Ye)}static none(){return Rt.singletonNone}fold(Ye,Dt){return this.tag?Dt(this.value):Ye()}isSome(){return this.tag}isNone(){return!this.tag}map(Ye){return this.tag?Rt.some(Ye(this.value)):Rt.none()}bind(Ye){return this.tag?Ye(this.value):Rt.none()}exists(Ye){return this.tag&&Ye(this.value)}forall(Ye){return!this.tag||Ye(this.value)}filter(Ye){return!this.tag||Ye(this.value)?this:Rt.none()}getOr(Ye){return this.tag?this.value:Ye}or(Ye){return this.tag?this:Ye}getOrThunk(Ye){return this.tag?this.value:Ye()}orThunk(Ye){return this.tag?this:Ye()}getOrDie(Ye){if(this.tag)return this.value;throw new Error(Ye!=null?Ye:"Called getOrDie on None")}static from(Ye){return Kt(Ye)?Rt.some(Ye):Rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ye){this.tag&&Ye(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Rt.singletonNone=new Rt(!1);const an=(De,Ye)=>{const Dt=De.length,on=new Array(Dt);for(let wn=0;wn<Dt;wn++){const bn=De[wn];on[wn]=Ye(bn,wn)}return on},qe=(De,Ye)=>{for(let Dt=0,on=De.length;Dt<on;Dt++){const wn=De[Dt];Ye(wn,Dt)}},rt=(De,Ye)=>{const Dt=[];for(let on=0,wn=De.length;on<wn;on++){const bn=De[on];Ye(bn,on)&&Dt.push(bn)}return Dt},Oe=9,oe=11,bt=1,Ft=3,wt=(De,Ye)=>{const on=(Ye||document).createElement("div");if(on.innerHTML=De,!on.hasChildNodes()||on.childNodes.length>1){const wn="HTML does not have a single root node";throw console.error(wn,De),new Error(wn)}return On(on.childNodes[0])},Y=(De,Ye)=>{const on=(Ye||document).createElement(De);return On(on)},At=(De,Ye)=>{const on=(Ye||document).createTextNode(De);return On(on)},On=De=>{if(De==null)throw new Error("Node cannot be null or undefined");return{dom:De}},we={fromHtml:wt,fromTag:Y,fromText:At,fromDom:On,fromPoint:(De,Ye,Dt)=>Rt.from(De.dom.elementFromPoint(Ye,Dt)).map(On)},Q=(De,Ye)=>{const Dt=De.dom;if(Dt.nodeType!==bt)return!1;{const on=Dt;if(on.matches!==void 0)return on.matches(Ye);if(on.msMatchesSelector!==void 0)return on.msMatchesSelector(Ye);if(on.webkitMatchesSelector!==void 0)return on.webkitMatchesSelector(Ye);if(on.mozMatchesSelector!==void 0)return on.mozMatchesSelector(Ye);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const ct=De=>De.dom.nodeName.toLowerCase(),Pe=De=>De.dom.nodeType,Ne=De=>Ye=>Pe(Ye)===De,Ot=Ne(bt),_=Ne(Ft),ge=Ne(Oe),Ue=Ne(oe),Ie=De=>Ye=>Ot(Ye)&&ct(Ye)===De,_e=De=>we.fromDom(De.dom.ownerDocument),jt=De=>ge(De)?De:_e(De),nn=De=>Rt.from(De.dom.parentNode).map(we.fromDom),ze=De=>an(De.dom.childNodes,we.fromDom),It=(De,Ye,Dt)=>{if(so(Dt)||Qn(Dt)||Tn(Dt))De.setAttribute(Ye,Dt+"");else throw console.error("Invalid call to Attribute.set. Key ",Ye,":: Value ",Dt,":: Element ",De),new Error("Attribute value was not simple")},Et=(De,Ye,Dt)=>{It(De.dom,Ye,Dt)},Ve=(De,Ye)=>{De.dom.removeAttribute(Ye)},R=De=>Ue(De)&&Kt(De.dom.host),Ee=Ct(Element.prototype.attachShadow)&&Ct(Node.prototype.getRootNode)?De=>we.fromDom(De.dom.getRootNode()):jt,xe=De=>{const Ye=Ee(De);return R(Ye)?Rt.some(Ye):Rt.none()},We=De=>we.fromDom(De.dom.host),ke=De=>{const Ye=_(De)?De.dom.parentNode:De.dom;if(Ye==null||Ye.ownerDocument===null)return!1;const Dt=Ye.ownerDocument;return xe(we.fromDom(Ye)).fold(()=>Dt.body.contains(Ye),ao(ke,We))},ae=(De,Ye,Dt)=>{let on=De.dom;const wn=Ct(Dt)?Dt:yt;for(;on.parentNode;){on=on.parentNode;const bn=we.fromDom(on);if(Ye(bn))return Rt.some(bn);if(wn(bn))break}return Rt.none()},se=(De,Ye,Dt)=>ae(De,on=>Q(on,Ye),Dt),re=De=>De.style!==void 0&&Ct(De.style.getPropertyValue),z=(De,Ye)=>{const Dt=De.dom,wn=window.getComputedStyle(Dt).getPropertyValue(Ye);return wn===""&&!ke(De)?K(Dt,Ye):wn},K=(De,Ye)=>re(De)?De.style.getPropertyValue(Ye):"",H=De=>z(De,"direction")==="rtl"?"rtl":"ltr",Z=(De,Ye)=>rt(ze(De),Ye),$e=(De,Ye)=>Z(De,Dt=>Q(Dt,Ye)),Be=De=>nn(De).filter(Ot),zt=(De,Ye)=>(Ye?se(De,"ol,ul"):Rt.some(De)).getOr(De),Jt=Ie("li"),eo=(De,Ye)=>{const Dt=De.selection.getSelectedBlocks();Dt.length>0&&(qe(Dt,on=>{const wn=we.fromDom(on),bn=Jt(wn),Oo=zt(wn,bn);Be(Oo).each(Ge=>{if(H(Ge)!==Ye?Et(Oo,"dir",Ye):H(Oo)!==Ye&&Ve(Oo,"dir"),bn){const tn=$e(Oo,"li[dir]");qe(tn,en=>Ve(en,"dir"))}})}),De.nodeChanged())},co=De=>{De.addCommand("mceDirectionLTR",()=>{eo(De,"ltr")}),De.addCommand("mceDirectionRTL",()=>{eo(De,"rtl")})},jn=(De,Ye)=>Dt=>{const on=wn=>{const bn=we.fromDom(wn.element);Dt.setActive(H(bn)===Ye)};return De.on("NodeChange",on),()=>De.off("NodeChange",on)},pn=De=>{De.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>De.execCommand("mceDirectionLTR"),onSetup:jn(De,"ltr")}),De.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>De.execCommand("mceDirectionRTL"),onSetup:jn(De,"rtl")})};var to=()=>{Fo.add("directionality",De=>{co(De),pn(De)})};to()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=z=>K=>z===K,mo=ko(null),Jn=ko(void 0),An=z=>z==null,so=z=>!An(z),Qn=()=>{},Kt=(z=>()=>z)(!1);class Ct{constructor(K,H){this.tag=K,this.value=H}static some(K){return new Ct(!0,K)}static none(){return Ct.singletonNone}fold(K,H){return this.tag?H(this.value):K()}isSome(){return this.tag}isNone(){return!this.tag}map(K){return this.tag?Ct.some(K(this.value)):Ct.none()}bind(K){return this.tag?K(this.value):Ct.none()}exists(K){return this.tag&&K(this.value)}forall(K){return!this.tag||K(this.value)}filter(K){return!this.tag||K(this.value)?this:Ct.none()}getOr(K){return this.tag?this.value:K}or(K){return this.tag?this:K}getOrThunk(K){return this.tag?this.value:K()}orThunk(K){return this.tag?this:K()}getOrDie(K){if(this.tag)return this.value;throw new Error(K!=null?K:"Called getOrDie on None")}static from(K){return so(K)?Ct.some(K):Ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(K){this.tag&&K(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ct.singletonNone=new Ct(!1);const Tn=(z,K)=>{for(let H=0,Z=z.length;H<Z;H++){const $e=z[H];if(K($e,H))return!0}return!1},ao=(z,K)=>{const H=z.length,Z=new Array(H);for(let $e=0;$e<H;$e++){const Be=z[$e];Z[$e]=K(Be,$e)}return Z},Zt=(z,K)=>{for(let H=0,Z=z.length;H<Z;H++){const $e=z[H];K($e,H)}},yt=z=>{let K=z;return{get:()=>K,set:$e=>{K=$e}}},Rt=(z,K)=>{let H=null;const Z=()=>{mo(H)||(clearTimeout(H),H=null)};return{cancel:Z,throttle:(...Be)=>{Z(),H=setTimeout(()=>{H=null,z.apply(null,Be)},K)}}},an=(z,K)=>{z.insertContent(K)},qe=Object.keys,rt=Object.hasOwnProperty,Oe=(z,K)=>{const H=qe(z);for(let Z=0,$e=H.length;Z<$e;Z++){const Be=H[Z],zt=z[Be];K(zt,Be)}},oe=(z,K)=>bt(z,(H,Z)=>({k:Z,v:K(H,Z)})),bt=(z,K)=>{const H={};return Oe(z,(Z,$e)=>{const Be=K(Z,$e);H[Be.k]=Be.v}),H},Ft=(z,K)=>rt.call(z,K),At=(z=>(...K)=>{if(K.length===0)throw new Error("Can't merge zero objects");const H={};for(let Z=0;Z<K.length;Z++){const $e=K[Z];for(const Be in $e)Ft($e,Be)&&(H[Be]=z(H[Be],$e[Be]))}return H})((z,K)=>K),On=z=>{const K=yt(Ct.none()),H=()=>K.get().each(z);return{clear:()=>{H(),K.set(Ct.none())},isSet:()=>K.get().isSome(),get:()=>K.get(),set:Jt=>{H(),K.set(Ct.some(Jt))}}},Nt=()=>{const z=On(Qn);return{...z,on:H=>z.get().each(H)}},we=(z,K,H)=>K===""||z.length>=K.length&&z.substr(H,H+K.length)===K,Q=(z,K,H=0,Z)=>{const $e=z.indexOf(K,H);return $e!==-1?Jn(Z)?!0:$e+K.length<=Z:!1},ct=(z,K)=>we(z,K,0);var Pe=tinymce.util.Tools.resolve("tinymce.Resource");const Ne="tinymce.plugins.emoticons",Ot=z=>K=>K.options.get(z),_=(z,K)=>{const H=z.options.register;H("emoticons_database",{processor:"string",default:"emojis"}),H("emoticons_database_url",{processor:"string",default:`${K}/js/${ge(z)}${z.suffix}.js`}),H("emoticons_database_id",{processor:"string",default:Ne}),H("emoticons_append",{processor:"object",default:{}}),H("emoticons_images_url",{processor:"string",default:"https://twemoji.maxcdn.com/v/13.0.1/72x72/"})},ge=Ot("emoticons_database"),Ue=Ot("emoticons_database_url"),Ie=Ot("emoticons_database_id"),_e=Ot("emoticons_append"),jt=Ot("emoticons_images_url"),nn="All",ze={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},It=(z,K)=>Ft(z,K)?z[K]:K,Et=z=>{const K=_e(z);return oe(K,H=>({keywords:[],category:"user",...H}))},Ve=(z,K,H)=>{const Z=Nt(),$e=Nt(),Be=jt(z),zt=De=>ct(De.char,"<img")?De.char.replace(/src="([^"]+)"/,(Ye,Dt)=>`src="${Be}${Dt}"`):De.char,Jt=De=>{const Ye={},Dt=[];Oe(De,(on,wn)=>{const bn={title:wn,keywords:on.keywords,char:zt(on),category:It(ze,on.category)},Oo=Ye[bn.category]!==void 0?Ye[bn.category]:[];Ye[bn.category]=Oo.concat([bn]),Dt.push(bn)}),Z.set(Ye),$e.set(Dt)};z.on("init",()=>{Pe.load(H,K).then(De=>{const Ye=Et(z);Jt(At(De,Ye))},De=>{console.log(`Failed to load emojis: ${De}`),Z.set({}),$e.set([])})});const eo=De=>De===nn?co():Z.get().bind(Ye=>Ct.from(Ye[De])).getOr([]),co=()=>$e.get().getOr([]),jn=()=>[nn].concat(qe(Z.get().getOr({}))),pn=()=>to()?Promise.resolve(!0):new Promise((De,Ye)=>{let Dt=15;const on=setInterval(()=>{to()?(clearInterval(on),De(!0)):(Dt--,Dt<0&&(console.log("Could not load emojis from url: "+K),clearInterval(on),Ye(!1)))},100)}),to=()=>Z.isSet()&&$e.isSet();return{listCategories:jn,hasLoaded:to,waitForLoad:pn,listAll:co,listCategory:eo}},R=(z,K)=>Q(z.title.toLowerCase(),K)||Tn(z.keywords,H=>Q(H.toLowerCase(),K)),zn=(z,K,H)=>{const Z=[],$e=K.toLowerCase(),Be=H.fold(()=>Kt,zt=>Jt=>Jt>=zt);for(let zt=0;zt<z.length&&!((K.length===0||R(z[zt],$e))&&(Z.push({value:z[zt].char,text:z[zt].title,icon:z[zt].char}),Be(Z.length)));zt++);return Z},Ee="pattern",xe=(z,K)=>{const H={pattern:"",results:zn(K.listAll(),"",Ct.some(300))},Z=yt(nn),$e=jn=>{const pn=jn.getData(),to=Z.get(),De=K.listCategory(to),Ye=zn(De,pn[Ee],to===nn?Ct.some(300):Ct.none());jn.setData({results:Ye})},Be=Rt(jn=>{$e(jn)},200),zt={label:"Search",type:"input",name:Ee},Jt={type:"collection",name:"results"},eo=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:ao(K.listCategories(),pn=>({title:pn,name:pn,items:[zt,Jt]}))},initialData:H,onTabChange:(pn,to)=>{Z.set(to.newTabName),Be.throttle(pn)},onChange:Be.throttle,onAction:(pn,to)=>{to.name==="results"&&(an(z,to.value),pn.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),co=z.windowManager.open(eo());co.focus(Ee),K.hasLoaded()||(co.block("Loading emojis..."),K.waitForLoad().then(()=>{co.redial(eo()),Be.throttle(co),co.focus(Ee),co.unblock()}).catch(jn=>{co.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),co.focus(Ee),co.unblock()}))},We=(z,K)=>{z.addCommand("mceEmoticons",()=>xe(z,K))},ke=z=>{z.on("PreInit",()=>{z.parser.addAttributeFilter("data-emoticon",K=>{Zt(K,H=>{H.attr("data-mce-resize","false"),H.attr("data-mce-placeholder","1")})})})},ae=(z,K)=>{z.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(H,Z)=>K.waitForLoad().then(()=>{const $e=K.listAll();return zn($e,H,Ct.some(Z))}),onAction:(H,Z,$e)=>{z.selection.setRng(Z),z.insertContent($e),H.hide()}})},se=z=>{const K=()=>z.execCommand("mceEmoticons");z.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:K}),z.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:K})};var re=()=>{Fo.add("emoticons",(z,K)=>{_(z,K);const H=Ue(z),Z=Ie(z),$e=Ve(z,H,Z);We(z,$e),se(z),ae(z,$e),ke(z)})};re()})();(function(){const Fo=te=>{let me=te;return{get:()=>me,set:Bn=>{me=Bn}}};var ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=te=>({isFullscreen:()=>te.get()!==null}),Jn=(te,me,Qe)=>{var ut;return Qe(te,me.prototype)?!0:((ut=te.constructor)===null||ut===void 0?void 0:ut.name)===me.name},An=te=>{const me=typeof te;return te===null?"null":me==="object"&&Array.isArray(te)?"array":me==="object"&&Jn(te,String,(Qe,ut)=>ut.isPrototypeOf(Qe))?"string":me},so=te=>me=>An(me)===te,Qn=te=>me=>typeof me===te,qt=te=>me=>te===me,Kt=so("string"),Ct=so("array"),Tn=qt(null),ao=Qn("boolean"),Zt=qt(void 0),yt=te=>te==null,Rt=te=>!yt(te),an=Qn("function"),qe=Qn("number"),rt=()=>{},Oe=(te,me)=>(...Qe)=>te(me.apply(null,Qe)),oe=(te,me)=>Qe=>te(me(Qe)),bt=te=>()=>te;function Ft(te,...me){return(...Qe)=>{const ut=me.concat(Qe);return te.apply(null,ut)}}const wt=bt(!1),Y=bt(!0);class At{constructor(me,Qe){this.tag=me,this.value=Qe}static some(me){return new At(!0,me)}static none(){return At.singletonNone}fold(me,Qe){return this.tag?Qe(this.value):me()}isSome(){return this.tag}isNone(){return!this.tag}map(me){return this.tag?At.some(me(this.value)):At.none()}bind(me){return this.tag?me(this.value):At.none()}exists(me){return this.tag&&me(this.value)}forall(me){return!this.tag||me(this.value)}filter(me){return!this.tag||me(this.value)?this:At.none()}getOr(me){return this.tag?this.value:me}or(me){return this.tag?this:me}getOrThunk(me){return this.tag?this.value:me()}orThunk(me){return this.tag?this:me()}getOrDie(me){if(this.tag)return this.value;throw new Error(me!=null?me:"Called getOrDie on None")}static from(me){return Rt(me)?At.some(me):At.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(me){this.tag&&me(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}At.singletonNone=new At(!1);const On=te=>{const me=Fo(At.none()),Qe=()=>me.get().each(te);return{clear:()=>{Qe(),me.set(At.none())},isSet:()=>me.get().isSome(),get:()=>me.get(),set:Ko=>{Qe(),me.set(At.some(Ko))}}},Nt=()=>On(te=>te.unbind()),we=()=>{const te=On(rt);return{...te,on:Qe=>te.get().each(Qe)}},Q=(te,me)=>{let Qe=null;return{cancel:()=>{Tn(Qe)||(clearTimeout(Qe),Qe=null)},throttle:(...Yn)=>{Tn(Qe)&&(Qe=setTimeout(()=>{Qe=null,te.apply(null,Yn)},me))}}},ct=Array.prototype.push,Pe=(te,me)=>{const Qe=te.length,ut=new Array(Qe);for(let Bn=0;Bn<Qe;Bn++){const Yn=te[Bn];ut[Bn]=me(Yn,Bn)}return ut},Ne=(te,me)=>{for(let Qe=0,ut=te.length;Qe<ut;Qe++){const Bn=te[Qe];me(Bn,Qe)}},Ot=(te,me)=>{const Qe=[];for(let ut=0,Bn=te.length;ut<Bn;ut++){const Yn=te[ut];me(Yn,ut)&&Qe.push(Yn)}return Qe},_=(te,me,Qe)=>{for(let ut=0,Bn=te.length;ut<Bn;ut++){const Yn=te[ut];if(me(Yn,ut))return At.some(Yn);if(Qe(Yn,ut))break}return At.none()},ge=(te,me)=>_(te,me,wt),Ue=te=>{const me=[];for(let Qe=0,ut=te.length;Qe<ut;++Qe){if(!Ct(te[Qe]))throw new Error("Arr.flatten item "+Qe+" was not an array, input: "+te);ct.apply(me,te[Qe])}return me},Ie=(te,me)=>Ue(Pe(te,me)),_e=(te,me)=>me>=0&&me<te.length?At.some(te[me]):At.none(),jt=te=>_e(te,0),nn=(te,me)=>{for(let Qe=0;Qe<te.length;Qe++){const ut=me(te[Qe],Qe);if(ut.isSome())return ut}return At.none()},ze=Object.keys,It=(te,me)=>{const Qe=ze(te);for(let ut=0,Bn=Qe.length;ut<Bn;ut++){const Yn=Qe[ut],Gs=te[Yn];me(Gs,Yn)}},Et=(te,me,Qe=0,ut)=>{const Bn=te.indexOf(me,Qe);return Bn!==-1?Zt(ut)?!0:Bn+me.length<=ut:!1},Ve=te=>te.style!==void 0&&an(te.style.getPropertyValue),R=(te,me)=>{const ut=(me||document).createElement("div");if(ut.innerHTML=te,!ut.hasChildNodes()||ut.childNodes.length>1){const Bn="HTML does not have a single root node";throw console.error(Bn,te),new Error(Bn)}return xe(ut.childNodes[0])},zn=(te,me)=>{const ut=(me||document).createElement(te);return xe(ut)},Ee=(te,me)=>{const ut=(me||document).createTextNode(te);return xe(ut)},xe=te=>{if(te==null)throw new Error("Node cannot be null or undefined");return{dom:te}},ke={fromHtml:R,fromTag:zn,fromText:Ee,fromDom:xe,fromPoint:(te,me,Qe)=>At.from(te.dom.elementFromPoint(me,Qe)).map(xe)};typeof window<"u"||Function("return this;")();const ae=9,se=11,re=1,z=3,K=te=>te.dom.nodeType,H=te=>me=>K(me)===te,Z=H(re),$e=H(z),Be=H(ae),zt=H(se),Jt=(te,me)=>{const Qe=te.dom;if(Qe.nodeType!==re)return!1;{const ut=Qe;if(ut.matches!==void 0)return ut.matches(me);if(ut.msMatchesSelector!==void 0)return ut.msMatchesSelector(me);if(ut.webkitMatchesSelector!==void 0)return ut.webkitMatchesSelector(me);if(ut.mozMatchesSelector!==void 0)return ut.mozMatchesSelector(me);throw new Error("Browser lacks native selectors")}},eo=te=>te.nodeType!==re&&te.nodeType!==ae&&te.nodeType!==se||te.childElementCount===0,co=(te,me)=>{const Qe=me===void 0?document:me.dom;return eo(Qe)?[]:Pe(Qe.querySelectorAll(te),ke.fromDom)},jn=(te,me)=>te.dom===me.dom,pn=te=>ke.fromDom(te.dom.ownerDocument),to=te=>Be(te)?te:pn(te),De=te=>At.from(te.dom.parentNode).map(ke.fromDom),Ye=(te,me)=>{const Qe=an(me)?me:wt;let ut=te.dom;const Bn=[];for(;ut.parentNode!==null&&ut.parentNode!==void 0;){const Yn=ut.parentNode,Gs=ke.fromDom(Yn);if(Bn.push(Gs),Qe(Gs)===!0)break;ut=Yn}return Bn},Dt=te=>{const me=Qe=>Ot(Qe,ut=>!jn(te,ut));return De(te).map(on).map(me).getOr([])},on=te=>Pe(te.dom.childNodes,ke.fromDom),wn=te=>zt(te)&&Rt(te.dom.host),bn=an(Element.prototype.attachShadow)&&an(Node.prototype.getRootNode),Oo=bt(bn),xs=bn?te=>ke.fromDom(te.dom.getRootNode()):to,Ge=te=>{const me=xs(te);return wn(me)?At.some(me):At.none()},Le=te=>ke.fromDom(te.dom.host),tn=te=>{if(Oo()&&Rt(te.target)){const me=ke.fromDom(te.target);if(Z(me)&&en(me)&&te.composed&&te.composedPath){const Qe=te.composedPath();if(Qe)return jt(Qe)}}return At.from(te.target)},en=te=>Rt(te.dom.shadowRoot),Ut=te=>{const me=$e(te)?te.dom.parentNode:te.dom;if(me==null||me.ownerDocument===null)return!1;const Qe=me.ownerDocument;return Ge(ke.fromDom(me)).fold(()=>Qe.body.contains(me),oe(Ut,Le))},Vn=te=>{const me=te.dom.body;if(me==null)throw new Error("Body is not available yet");return ke.fromDom(me)},ks=(te,me,Qe)=>{if(Kt(Qe)||ao(Qe)||qe(Qe))te.setAttribute(me,Qe+"");else throw console.error("Invalid call to Attribute.set. Key ",me,":: Value ",Qe,":: Element ",te),new Error("Attribute value was not simple")},kr=(te,me,Qe)=>{ks(te.dom,me,Qe)},da=(te,me)=>{const Qe=te.dom.getAttribute(me);return Qe===null?void 0:Qe},ps=(te,me)=>{te.dom.removeAttribute(me)},bc=(te,me,Qe)=>{if(!Kt(Qe))throw console.error("Invalid call to CSS.set. Property ",me,":: Value ",Qe,":: Element ",te),new Error("CSS value must be a string: "+Qe);Ve(te)&&te.style.setProperty(me,Qe)},vs=(te,me)=>{const Qe=te.dom;It(me,(ut,Bn)=>{bc(Qe,Bn,ut)})},as=(te,me)=>{const Qe=te.dom,Bn=window.getComputedStyle(Qe).getPropertyValue(me);return Bn===""&&!Ut(te)?uo(Qe,me):Bn},uo=(te,me)=>Ve(te)?te.style.getPropertyValue(me):"",dr=(te,me,Qe,ut,Bn,Yn,Gs)=>({target:te,x:me,y:Qe,stop:ut,prevent:Bn,kill:Yn,raw:Gs}),Wr=te=>{const me=ke.fromDom(tn(te).getOr(te.target)),Qe=()=>te.stopPropagation(),ut=()=>te.preventDefault(),Bn=Oe(ut,Qe);return dr(me,te.clientX,te.clientY,Qe,ut,Bn,te)},Fs=(te,me)=>Qe=>{te(Qe)&&me(Wr(Qe))},ma=(te,me,Qe,ut,Bn)=>{const Yn=Fs(Qe,ut);return te.dom.addEventListener(me,Yn,Bn),{unbind:Ft(sc,te,me,Yn,Bn)}},Zr=(te,me,Qe,ut)=>ma(te,me,Qe,ut,!1),sc=(te,me,Qe,ut)=>{te.dom.removeEventListener(me,Qe,ut)},Ys=Y,ka=(te,me,Qe)=>Zr(te,me,Ys,Qe),ve=te=>{let me=!1,Qe;return(...ut)=>(me||(me=!0,Qe=te.apply(null,ut)),Qe)},q=(te,me,Qe,ut)=>{const Bn=te.isiOS()&&/ipad/i.test(Qe)===!0,Yn=te.isiOS()&&!Bn,Gs=te.isiOS()||te.isAndroid(),Ko=Gs||ut("(pointer:coarse)"),Hi=Bn||!Yn&&Gs&&ut("(min-device-width:768px)"),Jo=Yn||Gs&&!Hi,Os=me.isSafari()&&te.isiOS()&&/safari/i.test(Qe)===!1,Ta=!Jo&&!Hi&&!Os;return{isiPad:bt(Bn),isiPhone:bt(Yn),isTablet:bt(Hi),isPhone:bt(Jo),isTouch:bt(Ko),isAndroid:te.isAndroid,isiOS:te.isiOS,isWebView:bt(Os),isDesktop:bt(Ta)}},st=(te,me)=>{for(let Qe=0;Qe<te.length;Qe++){const ut=te[Qe];if(ut.test(me))return ut}},ht=(te,me)=>{const Qe=st(te,me);if(!Qe)return{major:0,minor:0};const ut=Bn=>Number(me.replace(Qe,"$"+Bn));return Rn(ut(1),ut(2))},In=(te,me)=>{const Qe=String(me).toLowerCase();return te.length===0?Gn():ht(te,Qe)},Gn=()=>Rn(0,0),Rn=(te,me)=>({major:te,minor:me}),cs={nu:Rn,detect:In,unknown:Gn},es=(te,me)=>nn(me.brands,Qe=>{const ut=Qe.brand.toLowerCase();return ge(te,Bn=>{var Yn;return ut===((Yn=Bn.brand)===null||Yn===void 0?void 0:Yn.toLowerCase())}).map(Bn=>({current:Bn.name,version:cs.nu(parseInt(Qe.version,10),0)}))}),Co=(te,me)=>{const Qe=String(me).toLowerCase();return ge(te,ut=>ut.search(Qe))},rr=(te,me)=>Co(te,me).map(Qe=>{const ut=cs.detect(Qe.versionRegexes,me);return{current:Qe.name,version:ut}}),Bt=(te,me)=>Co(te,me).map(Qe=>{const ut=cs.detect(Qe.versionRegexes,me);return{current:Qe.name,version:ut}}),fe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pe=te=>me=>Et(me,te),kt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:te=>Et(te,"edge/")&&Et(te,"chrome")&&Et(te,"safari")&&Et(te,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fe],search:te=>Et(te,"chrome")&&!Et(te,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:te=>Et(te,"msie")||Et(te,"trident")},{name:"Opera",versionRegexes:[fe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pe("firefox")},{name:"Safari",versionRegexes:[fe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:te=>(Et(te,"safari")||Et(te,"mobile/"))&&Et(te,"applewebkit")}],Qt=[{name:"Windows",search:pe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:te=>Et(te,"iphone")||Et(te,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pe("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pe("linux"),versionRegexes:[]},{name:"Solaris",search:pe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pe("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pe("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rn={browsers:bt(kt),oses:bt(Qt)},_n="Edge",dn="Chromium",Mn="IE",Kn="Opera",vo="Firefox",As="Safari",mr=()=>Go({current:void 0,version:cs.unknown()}),Go=te=>{const me=te.current,Qe=te.version,ut=Bn=>()=>me===Bn;return{current:me,version:Qe,isEdge:ut(_n),isChromium:ut(dn),isIE:ut(Mn),isOpera:ut(Kn),isFirefox:ut(vo),isSafari:ut(As)}},qc={unknown:mr,nu:Go,edge:bt(_n),chromium:bt(dn),ie:bt(Mn),opera:bt(Kn),firefox:bt(vo),safari:bt(As)},is="Windows",ws="iOS",Ss="Android",Pr="Linux",Rr="macOS",$c="Solaris",Pa="FreeBSD",Kc="ChromeOS",ki=()=>Yc({current:void 0,version:cs.unknown()}),Yc=te=>{const me=te.current,Qe=te.version,ut=Bn=>()=>me===Bn;return{current:me,version:Qe,isWindows:ut(is),isiOS:ut(ws),isAndroid:ut(Ss),isMacOS:ut(Rr),isLinux:ut(Pr),isSolaris:ut($c),isFreeBSD:ut(Pa),isChromeOS:ut(Kc)}},Ii={unknown:ki,nu:Yc,windows:bt(is),ios:bt(ws),android:bt(Ss),linux:bt(Pr),macos:bt(Rr),solaris:bt($c),freebsd:bt(Pa),chromeos:bt(Kc)},di={detect:(te,me,Qe)=>{const ut=rn.browsers(),Bn=rn.oses(),Yn=me.bind(Hi=>es(ut,Hi)).orThunk(()=>rr(ut,te)).fold(qc.unknown,qc.nu),Gs=Bt(Bn,te).fold(Ii.unknown,Ii.nu),Ko=q(Gs,Yn,te,Qe);return{browser:Yn,os:Gs,deviceType:Ko}}},fa=te=>window.matchMedia(te).matches;let rc=ve(()=>di.detect(navigator.userAgent,At.from(navigator.userAgentData),fa));const mi=()=>rc(),Bc=(te,me)=>({left:te,top:me,translate:(ut,Bn)=>Bc(te+ut,me+Bn)}),oa=Bc,Ti=te=>{const me=te!==void 0?te.dom:document,Qe=me.body.scrollLeft||me.documentElement.scrollLeft,ut=me.body.scrollTop||me.documentElement.scrollTop;return oa(Qe,ut)},vc=te=>{const me=te===void 0?window:te;return mi().browser.isFirefox()?At.none():At.from(me.visualViewport)},Li=(te,me,Qe,ut)=>({x:te,y:me,width:Qe,height:ut,right:te+Qe,bottom:me+ut}),Xs=te=>{const me=te===void 0?window:te,Qe=me.document,ut=Ti(ke.fromDom(Qe));return vc(me).fold(()=>{const Bn=me.document.documentElement,Yn=Bn.clientWidth,Gs=Bn.clientHeight;return Li(ut.left,ut.top,Yn,Gs)},Bn=>Li(Math.max(Bn.pageLeft,ut.left),Math.max(Bn.pageTop,ut.top),Bn.width,Bn.height))},ga=(te,me,Qe)=>vc(Qe).map(ut=>{const Bn=Yn=>me(Wr(Yn));return ut.addEventListener(te,Bn),{unbind:()=>ut.removeEventListener(te,Bn)}}).getOrThunk(()=>({unbind:rt}));var X=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ce=tinymce.util.Tools.resolve("tinymce.Env");const Fe=(te,me)=>{te.dispatch("FullscreenStateChanged",{state:me}),te.dispatch("ResizeEditor")},pt=te=>me=>me.options.get(te),Vt=te=>{const me=te.options.register;me("fullscreen_native",{processor:"boolean",default:!1})},io=pt("fullscreen_native"),qo=te=>{const me=ke.fromDom(te.getElement());return Ge(me).map(Le).getOrThunk(()=>Vn(pn(me)))},Tr=te=>te.fullscreenElement!==void 0?te.fullscreenElement:te.msFullscreenElement!==void 0?te.msFullscreenElement:te.webkitFullscreenElement!==void 0?te.webkitFullscreenElement:null,Is=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Nr=te=>{const me=te.dom;me.requestFullscreen?me.requestFullscreen():me.msRequestFullscreen?me.msRequestFullscreen():me.webkitRequestFullScreen&&me.webkitRequestFullScreen()},Er=te=>{const me=te.dom;me.exitFullscreen?me.exitFullscreen():me.msExitFullscreen?me.msExitFullscreen():me.webkitCancelFullScreen&&me.webkitCancelFullScreen()},Mr=te=>te.dom===Tr(pn(te).dom),Fa=(te,me,Qe)=>Ot(Ye(te,Qe),me),jr=(te,me)=>Ot(Dt(te),me),Jr=te=>co(te),Xc=(te,me,Qe)=>Fa(te,ut=>Jt(ut,me),Qe),Jc=(te,me)=>jr(te,Qe=>Jt(Qe,me)),So="data-ephox-mobile-fullscreen-style",ls="display:none!important;",or="position:absolute!important;",B="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",J="background-color:rgb(255,255,255)!important;",de=Ce.os.isAndroid(),Xe=te=>{const me=as(te,"background-color");return me!==void 0&&me!==""?"background-color:"+me+"!important":J},kn=(te,me,Qe)=>{const ut=Jo=>Jc(Jo,"*:not(.tox-silver-sink)"),Bn=Jo=>Os=>{const Ta=da(Os,"style"),ac=Ta===void 0?"no-styles":Ta.trim();ac!==Jo&&(kr(Os,So,ac),vs(Os,te.parseStyle(Jo)))},Yn=Xc(me,"*"),Gs=Ie(Yn,ut),Ko=Xe(Qe);Ne(Gs,Bn(ls)),Ne(Yn,Bn(or+B+Ko)),Bn((de===!0?"":or)+B+Ko)(me)},Do=te=>{const me=Jr("["+So+"]");Ne(me,Qe=>{const ut=da(Qe,So);ut&&ut!=="no-styles"?vs(Qe,te.parseStyle(ut)):ps(Qe,"style"),ps(Qe,So)})},$n=X.DOM,Fr=()=>Xs(window),fr=te=>window.scrollTo(te.x,te.y),_t=vc().fold(()=>({bind:rt,unbind:rt}),te=>{const me=we(),Qe=Nt(),ut=Nt(),Bn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Yn=()=>{window.requestAnimationFrame(()=>{me.on(Jo=>vs(Jo,{top:te.offsetTop+"px",left:te.offsetLeft+"px",height:te.height+"px",width:te.width+"px"}))})},Gs=Q(()=>{Bn(),Yn()},50);return{bind:Jo=>{me.set(Jo),Gs.throttle(),Qe.set(ga("resize",Gs.throttle)),ut.set(ga("scroll",Gs.throttle))},unbind:()=>{me.on(()=>{Qe.clear(),ut.clear()}),me.clear()}}}),sa=(te,me)=>{const Qe=document.body,ut=document.documentElement,Bn=te.getContainer(),Yn=ke.fromDom(Bn),Gs=qo(te),Ko=me.get(),Hi=ke.fromDom(te.getBody()),Jo=Ce.deviceType.isTouch(),Os=Bn.style,Ta=te.iframeElement,ac=Ta==null?void 0:Ta.style,zi=nr=>{nr(Qe,"tox-fullscreen"),nr(ut,"tox-fullscreen"),nr(Bn,"tox-fullscreen"),Ge(Yn).map(Ds=>Le(Ds).dom).each(Ds=>{nr(Ds,"tox-fullscreen"),nr(Ds,"tox-shadowhost")})},gr=()=>{Jo&&Do(te.dom),zi($n.removeClass),_t.unbind(),At.from(me.get()).each(nr=>nr.fullscreenChangeHandler.unbind())};if(Ko)Ko.fullscreenChangeHandler.unbind(),io(te)&&Mr(Gs)&&Er(pn(Gs)),ac.width=Ko.iframeWidth,ac.height=Ko.iframeHeight,Os.width=Ko.containerWidth,Os.height=Ko.containerHeight,Os.top=Ko.containerTop,Os.left=Ko.containerLeft,gr(),fr(Ko.scrollPos),me.set(null),Fe(te,!1),te.off("remove",gr);else{const nr=ka(pn(Gs),Is(),Ir=>{io(te)&&!Mr(Gs)&&me.get()!==null&&sa(te,me)}),Ds={scrollPos:Fr(),containerWidth:Os.width,containerHeight:Os.height,containerTop:Os.top,containerLeft:Os.left,iframeWidth:ac.width,iframeHeight:ac.height,fullscreenChangeHandler:nr};Jo&&kn(te.dom,Yn,Hi),ac.width=ac.height="100%",Os.width=Os.height="",zi($n.addClass),_t.bind(Yn),te.on("remove",gr),me.set(Ds),io(te)&&Nr(Gs),Fe(te,!0)}},Js=(te,me)=>{te.addCommand("mceFullScreen",()=>{sa(te,me)})},Vr=(te,me)=>Qe=>{Qe.setActive(me.get()!==null);const ut=Bn=>Qe.setActive(Bn.state);return te.on("FullscreenStateChanged",ut),()=>te.off("FullscreenStateChanged",ut)},tl=(te,me)=>{const Qe=()=>te.execCommand("mceFullScreen");te.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Qe,onSetup:Vr(te,me)}),te.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Qe,onSetup:Vr(te,me)})};var $o=()=>{ko.add("fullscreen",te=>{const me=Fo(null);return te.inline||(Vt(te),Js(te,me),tl(te,me),te.addShortcut("Meta+Shift+F","","mceFullScreen")),mo(me)})};$o()})();(function(){const Fo=K=>{let H=K;return{get:()=>H,set:Be=>{H=Be}}};var ko=tinymce.util.Tools.resolve("tinymce.PluginManager");let mo=0;const Jn=K=>{const Z=new Date().getTime(),$e=Math.floor(Math.random()*1e9);return mo++,K+"_"+$e+mo+String(Z)},An=K=>({addTab:Z=>{var $e;const Be=($e=Z.name)!==null&&$e!==void 0?$e:Jn("tab-name"),zt=K.get();zt[Be]=Z,K.set(zt)}}),so=(K,H)=>{K.addCommand("mceHelp",H)},Qn=K=>H=>H.options.get(K),qt=K=>{const H=K.options.register;H("help_tabs",{processor:"array"})},Kt=Qn("help_tabs"),Ct=Qn("forced_plugins"),Tn=(K,H)=>{K.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:H}),K.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:H})},ao=(K,H,Z)=>{var $e;return Z(K,H.prototype)?!0:(($e=K.constructor)===null||$e===void 0?void 0:$e.name)===H.name},Zt=K=>{const H=typeof K;return K===null?"null":H==="object"&&Array.isArray(K)?"array":H==="object"&&ao(K,String,(Z,$e)=>$e.isPrototypeOf(Z))?"string":H},yt=K=>H=>Zt(H)===K,Rt=K=>H=>typeof H===K,an=K=>H=>K===H,qe=yt("string"),rt=an(void 0),Oe=K=>K==null,oe=K=>!Oe(K),bt=Rt("function"),wt=(K=>()=>K)(!1);class Y{constructor(H,Z){this.tag=H,this.value=Z}static some(H){return new Y(!0,H)}static none(){return Y.singletonNone}fold(H,Z){return this.tag?Z(this.value):H()}isSome(){return this.tag}isNone(){return!this.tag}map(H){return this.tag?Y.some(H(this.value)):Y.none()}bind(H){return this.tag?H(this.value):Y.none()}exists(H){return this.tag&&H(this.value)}forall(H){return!this.tag||H(this.value)}filter(H){return!this.tag||H(this.value)?this:Y.none()}getOr(H){return this.tag?this.value:H}or(H){return this.tag?this:H}getOrThunk(H){return this.tag?this.value:H()}orThunk(H){return this.tag?this:H()}getOrDie(H){if(this.tag)return this.value;throw new Error(H!=null?H:"Called getOrDie on None")}static from(H){return oe(H)?Y.some(H):Y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(H){this.tag&&H(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Y.singletonNone=new Y(!1);const At=Array.prototype.slice,On=Array.prototype.indexOf,Nt=(K,H)=>On.call(K,H),we=(K,H)=>Nt(K,H)>-1,Q=(K,H)=>{const Z=K.length,$e=new Array(Z);for(let Be=0;Be<Z;Be++){const zt=K[Be];$e[Be]=H(zt,Be)}return $e},ct=(K,H)=>{const Z=[];for(let $e=0,Be=K.length;$e<Be;$e++){const zt=K[$e];H(zt,$e)&&Z.push(zt)}return Z},Pe=(K,H,Z)=>{for(let $e=0,Be=K.length;$e<Be;$e++){const zt=K[$e];if(H(zt,$e))return Y.some(zt);if(Z(zt,$e))break}return Y.none()},Ne=(K,H)=>Pe(K,H,wt),Ot=(K,H)=>{const Z=At.call(K,0);return Z.sort(H),Z},_=Object.keys,ge=Object.hasOwnProperty,Ue=(K,H)=>Ie(K,H)?Y.from(K[H]):Y.none(),Ie=(K,H)=>ge.call(K,H),_e=K=>{const H=[],Z=$e=>{H.push($e)};for(let $e=0;$e<K.length;$e++)K[$e].each(Z);return H},jt=`<h1>Editor UI keyboard navigation</h1>

<h2>Activating keyboard navigation</h2>

<p>The sections of the outer UI of the editor - the menubar, toolbar, sidebar and footer - are all keyboard navigable. As such, there are multiple ways to activate keyboard navigation:</p>
<ul>
  <li>Focus the menubar: Alt + F9 (Windows) or &#x2325;F9 (MacOS)</li>
  <li>Focus the toolbar: Alt + F10 (Windows) or &#x2325;F10 (MacOS)</li>
  <li>Focus the footer: Alt + F11 (Windows) or &#x2325;F11 (MacOS)</li>
</ul>

<p>Focusing the menubar or toolbar will start keyboard navigation at the first item in the menubar or toolbar, which will be highlighted with a gray background. Focusing the footer will start keyboard navigation at the first item in the element path, which will be highlighted with an underline. </p>

<h2>Moving between UI sections</h2>

<p>When keyboard navigation is active, pressing tab will move the focus to the next major section of the UI, where applicable. These sections are:</p>
<ul>
  <li>the menubar</li>
  <li>each group of the toolbar </li>
  <li>the sidebar</li>
  <li>the element path in the footer </li>
  <li>the wordcount toggle button in the footer </li>
  <li>the branding link in the footer </li>
  <li>the editor resize handle in the footer</li>
</ul>

<p>Pressing shift + tab will move backwards through the same sections, except when moving from the footer to the toolbar. Focusing the element path then pressing shift + tab will move focus to the first toolbar group, not the last.</p>

<h2>Moving within UI sections</h2>

<p>Keyboard navigation within UI sections can usually be achieved using the left and right arrow keys. This includes:</p>
<ul>
  <li>moving between menus in the menubar</li>
  <li>moving between buttons in a toolbar group</li>
  <li>moving between items in the element path</li>
</ul>

<p>In all these UI sections, keyboard navigation will cycle within the section. For example, focusing the last button in a toolbar group then pressing right arrow will move focus to the first item in the same toolbar group. </p>

<h1>Executing buttons</h1>

<p>To execute a button, navigate the selection to the desired button and hit space or enter.</p>

<h1>Opening, navigating and closing menus</h1>

<p>When focusing a menubar button or a toolbar button with a menu, pressing space, enter or down arrow will open the menu. When the menu opens the first item will be selected. To move up or down the menu, press the up or down arrow key respectively. This is the same for submenus, which can also be opened and closed using the left and right arrow keys.</p>

<p>To close any active menu, hit the escape key. When a menu is closed the selection will be restored to its previous selection. This also works for closing submenus.</p>

<h1>Context toolbars and menus</h1>

<p>To focus an open context toolbar such as the table context toolbar, press Ctrl + F9 (Windows) or &#x2303;F9 (MacOS).</p>

<p>Context toolbar navigation is the same as toolbar navigation, and context menu navigation is the same as standard menu navigation.</p>

<h1>Dialog navigation</h1>

<p>There are two types of dialog UIs in TinyMCE: tabbed dialogs and non-tabbed dialogs.</p>

<p>When a non-tabbed dialog is opened, the first interactive component in the dialog will be focused. Users can navigate between interactive components by pressing tab. This includes any footer buttons. Navigation will cycle back to the first dialog component if tab is pressed while focusing the last component in the dialog. Pressing shift + tab will navigate backwards.</p>

<p>When a tabbed dialog is opened, the first button in the tab menu is focused. Pressing tab will navigate to the first interactive component in that tab, and will cycle through the tab\u2019s components, the footer buttons, then back to the tab button. To switch to another tab, focus the tab button for the current tab, then use the arrow keys to cycle through the tab buttons.</p>`,nn=()=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:jt}]});var ze=tinymce.util.Tools.resolve("tinymce.Env");const It=K=>{const H=ze.os.isMacOS()||ze.os.isiOS(),Be=H?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},zt=K.split("+"),Jt=Q(zt,eo=>{const co=eo.toLowerCase().trim();return Ie(Be,co)?Be[co]:eo});return H?Jt.join("").replace(/\s/,""):Jt.join("+")},Et=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],Ve=()=>{const K=Q(Et,Z=>{const $e=Q(Z.shortcuts,It).join(" or ");return[Z.action,$e]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:K}]}};var R=tinymce.util.Tools.resolve("tinymce.util.I18n");const zn=Q([{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"advcode",name:"Advanced Code Editor",type:"premium"},{key:"advtable",name:"Advanced Tables",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"editimage",name:"Enhanced Image Editing",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"export",name:"Export",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"rtc",name:"Real-Time Collaboration",type:"premium",slug:"rtc-introduction"},{key:"tinymcespellchecker",name:"Spell Checker Pro",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],K=>({...K,type:K.type||"opensource",slug:K.slug||K.key})),Ee=K=>{const H=()=>{const jn=ct(zn,({type:De})=>De==="premium"),pn=Ot(Q(jn,De=>De.name),(De,Ye)=>De.localeCompare(Ye)),to=Q(pn,De=>`<li>${De}</li>`).join("");return'<div data-mce-tabstop="1" tabindex="-1"><p><b>'+R.translate("Premium plugins:")+"</b></p><ul>"+to+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">'+R.translate("Learn more...")+"</a></li></ul></div>"},Z=jn=>`<a href="${jn.url}" target="_blank" rel="noopener">${jn.name}</a>`,$e=(jn,pn)=>{const to=jn.plugins[pn].getMetadata;if(bt(to)){const De=to();return{name:De.name,html:Z(De)}}else return{name:pn,html:pn}},Be=(jn,pn)=>Ne(zn,to=>to.key===pn).fold(()=>$e(jn,pn),to=>{const De=to.type==="premium"?`${to.name}*`:to.name,Ye=Z({name:De,url:`https://www.tiny.cloud/docs/tinymce/6/${to.slug}/`});return{name:De,html:Ye}}),zt=jn=>{const pn=_(jn.plugins),to=Ct(jn);return rt(to)?pn:ct(pn,De=>!we(to,De))},Jt=jn=>{const pn=zt(jn),to=Ot(Q(pn,wn=>Be(jn,wn)),(wn,bn)=>wn.name.localeCompare(bn.name)),De=Q(to,wn=>"<li>"+wn.html+"</li>"),Ye=De.length,Dt=De.join("");return"<p><b>"+R.translate(["Plugins installed ({0}):",Ye])+"</b></p><ul>"+Dt+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(jn=>jn==null?"":'<div data-mce-tabstop="1" tabindex="-1">'+Jt(jn)+"</div>")(K),H()].join("")}]}};var xe=tinymce.util.Tools.resolve("tinymce.EditorManager");const We=()=>{const Z='<a href="https://www.tiny.cloud/docs/tinymce/6/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">TinyMCE '+((Be,zt)=>Be.indexOf("@")===0?"X.X.X":Be+"."+zt)(xe.majorVersion,xe.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+R.translate(["You are using {0}",Z])+"</p>",presets:"document"}]}},ke=(K,H)=>{const Z={},$e=Q(K,Be=>{var zt;if(qe(Be))return Ie(H,Be)&&(Z[Be]=H[Be]),Be;{const Jt=(zt=Be.name)!==null&&zt!==void 0?zt:Jn("tab-name");return Z[Jt]=Be,Jt}});return{tabs:Z,names:$e}},ae=K=>{const H=_(K),Z=H.indexOf("versions");return Z!==-1&&(H.splice(Z,1),H.push("versions")),{tabs:K,names:H}},se=(K,H)=>{const Z=Ve(),$e=nn(),Be=Ee(K),zt=We(),Jt={[Z.name]:Z,[$e.name]:$e,[Be.name]:Be,[zt.name]:zt,...H.get()};return Y.from(Kt(K)).fold(()=>ae(Jt),eo=>ke(eo,Jt))},re=(K,H)=>()=>{const{tabs:Z,names:$e}=se(K,H),Be=Q($e,eo=>Ue(Z,eo)),Jt={type:"tabpanel",tabs:_e(Be)};K.windowManager.open({title:"Help",size:"medium",body:Jt,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})};var z=()=>{ko.add("help",K=>{const H=Fo({}),Z=An(H);qt(K);const $e=re(K,H);return Tn(K,$e),so(K,$e),K.shortcuts.add("Alt+0","Open help dialog","mceHelp"),Z})};z()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=Object.getPrototypeOf,mo=(B,J,de)=>{var Xe;return de(B,J.prototype)?!0:((Xe=B.constructor)===null||Xe===void 0?void 0:Xe.name)===J.name},Jn=B=>{const J=typeof B;return B===null?"null":J==="object"&&Array.isArray(B)?"array":J==="object"&&mo(B,String,(de,Xe)=>Xe.isPrototypeOf(de))?"string":J},An=B=>J=>Jn(J)===B,so=B=>J=>typeof J===B,Qn=B=>J=>B===J,qt=(B,J)=>Ct(B)&&mo(B,J,(de,Xe)=>ko(de)===Xe),Kt=An("string"),Ct=An("object"),Tn=B=>qt(B,Object),ao=An("array"),Zt=Qn(null),yt=so("boolean"),Rt=B=>B==null,an=B=>!Rt(B),qe=so("function"),rt=so("number"),Oe=(B,J)=>{if(ao(B)){for(let de=0,Xe=B.length;de<Xe;++de)if(!J(B[de]))return!1;return!0}return!1},oe=()=>{};class bt{constructor(J,de){this.tag=J,this.value=de}static some(J){return new bt(!0,J)}static none(){return bt.singletonNone}fold(J,de){return this.tag?de(this.value):J()}isSome(){return this.tag}isNone(){return!this.tag}map(J){return this.tag?bt.some(J(this.value)):bt.none()}bind(J){return this.tag?J(this.value):bt.none()}exists(J){return this.tag&&J(this.value)}forall(J){return!this.tag||J(this.value)}filter(J){return!this.tag||J(this.value)?this:bt.none()}getOr(J){return this.tag?this.value:J}or(J){return this.tag?this:J}getOrThunk(J){return this.tag?this.value:J()}orThunk(J){return this.tag?this:J()}getOrDie(J){if(this.tag)return this.value;throw new Error(J!=null?J:"Called getOrDie on None")}static from(J){return an(J)?bt.some(J):bt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(J){this.tag&&J(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}bt.singletonNone=new bt(!1);const Ft=Object.keys,wt=Object.hasOwnProperty,Y=(B,J)=>{const de=Ft(B);for(let Xe=0,kn=de.length;Xe<kn;Xe++){const Do=de[Xe],$n=B[Do];J($n,Do)}},At=B=>(J,de)=>{B[de]=J},On=(B,J,de,Xe)=>{Y(B,(kn,Do)=>{(J(kn,Do)?de:Xe)(kn,Do)})},Nt=(B,J)=>{const de={};return On(B,J,At(de),oe),de},we=(B,J)=>wt.call(B,J),Q=(B,J)=>we(B,J)&&B[J]!==void 0&&B[J]!==null,ct=Array.prototype.push,Pe=B=>{const J=[];for(let de=0,Xe=B.length;de<Xe;++de){if(!ao(B[de]))throw new Error("Arr.flatten item "+de+" was not an array, input: "+B);ct.apply(J,B[de])}return J},Ne=(B,J)=>J>=0&&J<B.length?bt.some(B[J]):bt.none(),Ot=B=>Ne(B,0),_=(B,J)=>{for(let de=0;de<B.length;de++){const Xe=J(B[de],de);if(Xe.isSome())return Xe}return bt.none()};typeof window<"u"||Function("return this;")();const ge=(B,J,de)=>{if(Kt(de)||yt(de)||rt(de))B.setAttribute(J,de+"");else throw console.error("Invalid call to Attribute.set. Key ",J,":: Value ",de,":: Element ",B),new Error("Attribute value was not simple")},Ue=(B,J,de)=>{ge(B.dom,J,de)},Ie=(B,J)=>{B.dom.removeAttribute(J)},_e=(B,J)=>{const Xe=(J||document).createElement("div");if(Xe.innerHTML=B,!Xe.hasChildNodes()||Xe.childNodes.length>1){const kn="HTML does not have a single root node";throw console.error(kn,B),new Error(kn)}return ze(Xe.childNodes[0])},jt=(B,J)=>{const Xe=(J||document).createElement(B);return ze(Xe)},nn=(B,J)=>{const Xe=(J||document).createTextNode(B);return ze(Xe)},ze=B=>{if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},Et={fromHtml:_e,fromTag:jt,fromText:nn,fromDom:ze,fromPoint:(B,J,de)=>bt.from(B.dom.elementFromPoint(J,de)).map(ze)};var Ve=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),R=tinymce.util.Tools.resolve("tinymce.util.URI");const zn=B=>B.length>0,Ee=B=>J=>J.options.get(B),xe=B=>{const J=B.options.register;J("image_dimensions",{processor:"boolean",default:!0}),J("image_advtab",{processor:"boolean",default:!1}),J("image_uploadtab",{processor:"boolean",default:!0}),J("image_prepend_url",{processor:"string",default:""}),J("image_class_list",{processor:"object[]"}),J("image_description",{processor:"boolean",default:!0}),J("image_title",{processor:"boolean",default:!1}),J("image_caption",{processor:"boolean",default:!1}),J("image_list",{processor:de=>{const Xe=de===!1||Kt(de)||Oe(de,Ct)||qe(de);return Xe?{value:de,valid:Xe}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},We=Ee("image_dimensions"),ke=Ee("image_advtab"),ae=Ee("image_uploadtab"),se=Ee("image_prepend_url"),re=Ee("image_class_list"),z=Ee("image_description"),K=Ee("image_title"),H=Ee("image_caption"),Z=Ee("image_list"),$e=Ee("a11y_advanced_options"),Be=Ee("automatic_uploads"),zt=B=>zn(B.options.get("images_upload_url")),Jt=B=>an(B.options.get("images_upload_handler")),eo=(B,J)=>Math.max(parseInt(B,10),parseInt(J,10)),co=B=>new Promise(J=>{const de=document.createElement("img"),Xe=Do=>{de.onload=de.onerror=null,de.parentNode&&de.parentNode.removeChild(de),J(Do)};de.onload=()=>{const Do=eo(de.width,de.clientWidth),$n=eo(de.height,de.clientHeight),Fr={width:Do,height:$n};Xe(Promise.resolve(Fr))},de.onerror=()=>{Xe(Promise.reject(`Failed to get image dimensions for: ${B}`))};const kn=de.style;kn.visibility="hidden",kn.position="fixed",kn.bottom=kn.left="0px",kn.width=kn.height="auto",document.body.appendChild(de),de.src=B}),jn=B=>(B&&(B=B.replace(/px$/,"")),B),pn=B=>(B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B),to=B=>{if(B.margin){const J=String(B.margin).split(" ");switch(J.length){case 1:B["margin-top"]=B["margin-top"]||J[0],B["margin-right"]=B["margin-right"]||J[0],B["margin-bottom"]=B["margin-bottom"]||J[0],B["margin-left"]=B["margin-left"]||J[0];break;case 2:B["margin-top"]=B["margin-top"]||J[0],B["margin-right"]=B["margin-right"]||J[1],B["margin-bottom"]=B["margin-bottom"]||J[0],B["margin-left"]=B["margin-left"]||J[1];break;case 3:B["margin-top"]=B["margin-top"]||J[0],B["margin-right"]=B["margin-right"]||J[1],B["margin-bottom"]=B["margin-bottom"]||J[2],B["margin-left"]=B["margin-left"]||J[1];break;case 4:B["margin-top"]=B["margin-top"]||J[0],B["margin-right"]=B["margin-right"]||J[1],B["margin-bottom"]=B["margin-bottom"]||J[2],B["margin-left"]=B["margin-left"]||J[3]}delete B.margin}return B},De=(B,J)=>{const de=Z(B);Kt(de)?fetch(de).then(Xe=>{Xe.ok&&Xe.json().then(J)}):qe(de)?de(J):J(de)},Ye=(B,J,de)=>{const Xe=()=>{de.onload=de.onerror=null,B.selection&&(B.selection.select(de),B.nodeChanged())};de.onload=()=>{!J.width&&!J.height&&We(B)&&B.dom.setAttribs(de,{width:String(de.clientWidth),height:String(de.clientHeight)}),Xe()},de.onerror=Xe},Dt=B=>new Promise((J,de)=>{const Xe=new FileReader;Xe.onload=()=>{J(Xe.result)},Xe.onerror=()=>{var kn;de((kn=Xe.error)===null||kn===void 0?void 0:kn.message)},Xe.readAsDataURL(B)}),on=B=>B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder")),wn=(B,J)=>{const de=B.options.get;return R.isDomSafe(J,"img",{allow_html_data_urls:de("allow_html_data_urls"),allow_script_urls:de("allow_script_urls"),allow_svg_data_urls:de("allow_svg_data_urls")})},bn=Ve.DOM,Oo=B=>B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?jn(B.style.marginLeft):"",xs=B=>B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?jn(B.style.marginTop):"",Ge=B=>B.style.borderWidth?jn(B.style.borderWidth):"",Le=(B,J)=>{var de;return B.hasAttribute(J)&&(de=B.getAttribute(J))!==null&&de!==void 0?de:""},tn=B=>B.parentNode!==null&&B.parentNode.nodeName==="FIGURE",en=(B,J,de)=>{de===""||de===null?B.removeAttribute(J):B.setAttribute(J,de)},Ut=B=>{const J=bn.create("figure",{class:"image"});bn.insertAfter(J,B),J.appendChild(B),J.appendChild(bn.create("figcaption",{contentEditable:"true"},"Caption")),J.contentEditable="false"},Vn=B=>{const J=B.parentNode;an(J)&&(bn.insertAfter(B,J),bn.remove(J))},ks=B=>{tn(B)?Vn(B):Ut(B)},kr=(B,J)=>{const de=B.getAttribute("style"),Xe=J(de!==null?de:"");Xe.length>0?(B.setAttribute("style",Xe),B.setAttribute("data-mce-style",Xe)):B.removeAttribute("style")},da=(B,J)=>(de,Xe,kn)=>{const Do=de.style;Do[Xe]?(Do[Xe]=pn(kn),kr(de,J)):en(de,Xe,kn)},ps=(B,J)=>B.style[J]?jn(B.style[J]):Le(B,J),bc=(B,J)=>{const de=pn(J);B.style.marginLeft=de,B.style.marginRight=de},vs=(B,J)=>{const de=pn(J);B.style.marginTop=de,B.style.marginBottom=de},as=(B,J)=>{const de=pn(J);B.style.borderWidth=de},uo=(B,J)=>{B.style.borderStyle=J},dr=B=>{var J;return(J=B.style.borderStyle)!==null&&J!==void 0?J:""},Wr=B=>an(B)&&B.nodeName==="FIGURE",Fs=B=>B.nodeName==="IMG",ma=B=>bn.getAttrib(B,"alt").length===0&&bn.getAttrib(B,"role")==="presentation",Zr=B=>ma(B)?"":Le(B,"alt"),sc=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ys=(B,J)=>{var de;const Xe=document.createElement("img");return en(Xe,"style",J.style),(Oo(Xe)||J.hspace!=="")&&bc(Xe,J.hspace),(xs(Xe)||J.vspace!=="")&&vs(Xe,J.vspace),(Ge(Xe)||J.border!=="")&&as(Xe,J.border),(dr(Xe)||J.borderStyle!=="")&&uo(Xe,J.borderStyle),B((de=Xe.getAttribute("style"))!==null&&de!==void 0?de:"")},ka=(B,J)=>{const de=document.createElement("img");if(Gn(B,{...J,caption:!1},de),st(de,J.alt,J.isDecorative),J.caption){const Xe=bn.create("figure",{class:"image"});return Xe.appendChild(de),Xe.appendChild(bn.create("figcaption",{contentEditable:"true"},"Caption")),Xe.contentEditable="false",Xe}else return de},ve=(B,J)=>({src:Le(J,"src"),alt:Zr(J),title:Le(J,"title"),width:ps(J,"width"),height:ps(J,"height"),class:Le(J,"class"),style:B(Le(J,"style")),caption:tn(J),hspace:Oo(J),vspace:xs(J),border:Ge(J),borderStyle:dr(J),isDecorative:ma(J)}),q=(B,J,de,Xe,kn)=>{de[Xe]!==J[Xe]&&kn(B,Xe,String(de[Xe]))},st=(B,J,de)=>{if(de){bn.setAttrib(B,"role","presentation");const Xe=Et.fromDom(B);Ue(Xe,"alt","")}else{if(Zt(J)){const Xe=Et.fromDom(B);Ie(Xe,"alt")}else{const Xe=Et.fromDom(B);Ue(Xe,"alt",J)}bn.getAttrib(B,"role")==="presentation"&&bn.setAttrib(B,"role","")}},ht=(B,J,de)=>{(de.alt!==J.alt||de.isDecorative!==J.isDecorative)&&st(B,de.alt,de.isDecorative)},In=(B,J)=>(de,Xe,kn)=>{B(de,kn),kr(de,J)},Gn=(B,J,de)=>{const Xe=ve(B,de);q(de,Xe,J,"caption",(kn,Do,$n)=>ks(kn)),q(de,Xe,J,"src",en),q(de,Xe,J,"title",en),q(de,Xe,J,"width",da("width",B)),q(de,Xe,J,"height",da("height",B)),q(de,Xe,J,"class",en),q(de,Xe,J,"style",In((kn,Do)=>en(kn,"style",Do),B)),q(de,Xe,J,"hspace",In(bc,B)),q(de,Xe,J,"vspace",In(vs,B)),q(de,Xe,J,"border",In(as,B)),q(de,Xe,J,"borderStyle",In(uo,B)),ht(de,Xe,J)},Rn=(B,J)=>{const de=B.dom.styles.parse(J),Xe=to(de),kn=B.dom.styles.parse(B.dom.styles.serialize(Xe));return B.dom.styles.serialize(kn)},cs=B=>{const J=B.selection.getNode(),de=B.dom.getParent(J,"figure.image");return de?B.dom.select("img",de)[0]:J&&(J.nodeName!=="IMG"||on(J))?null:J},es=(B,J)=>{var de;const Xe=B.dom,kn=Nt(B.schema.getTextBlockElements(),($n,Fr)=>!B.schema.isValidChild(Fr,"figure")),Do=Xe.getParent(J.parentNode,$n=>Q(kn,$n.nodeName),B.getBody());return Do&&(de=Xe.split(Do,J))!==null&&de!==void 0?de:J},Co=B=>{const J=cs(B);return J?ve(de=>Rn(B,de),J):sc()},rr=(B,J)=>{const de=ka(kn=>Rn(B,kn),J);B.dom.setAttrib(de,"data-mce-id","__mcenew"),B.focus(),B.selection.setContent(de.outerHTML);const Xe=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(Xe,"data-mce-id",null),Wr(Xe)){const kn=es(B,Xe);B.selection.select(kn)}else B.selection.select(Xe)},Bt=(B,J)=>{B.dom.setAttrib(J,"src",J.getAttribute("src"))},fe=(B,J)=>{if(J){const de=B.dom.is(J.parentNode,"figure.image")?J.parentNode:J;B.dom.remove(de),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},pe=(B,J)=>{const de=cs(B);if(de)if(Gn(Xe=>Rn(B,Xe),J,de),Bt(B,de),Wr(de.parentNode)){const Xe=de.parentNode;es(B,Xe),B.selection.select(de.parentNode)}else B.selection.select(de),Ye(B,J,de)},kt=(B,J)=>{const de=J.src;return{...J,src:wn(B,de)?de:""}},Qt=(B,J)=>{const de=cs(B);if(de){const kn={...ve($n=>Rn(B,$n),de),...J},Do=kt(B,kn);kn.src?pe(B,Do):fe(B,de)}else J.src&&rr(B,{...sc(),...J})},dn=(B=>(...J)=>{if(J.length===0)throw new Error("Can't merge zero objects");const de={};for(let Xe=0;Xe<J.length;Xe++){const kn=J[Xe];for(const Do in kn)we(kn,Do)&&(de[Do]=B(de[Do],kn[Do]))}return de})((B,J)=>Tn(B)&&Tn(J)?dn(B,J):J);var Mn=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Kn=tinymce.util.Tools.resolve("tinymce.util.Tools");const vo=B=>Kt(B.value)?B.value:"",As=B=>Kt(B.text)?B.text:Kt(B.title)?B.title:"",mr=(B,J)=>{const de=[];return Kn.each(B,Xe=>{const kn=As(Xe);if(Xe.menu!==void 0){const Do=mr(Xe.menu,J);de.push({text:kn,items:Do})}else{const Do=J(Xe);de.push({text:kn,value:Do})}}),de},Go=(B=vo)=>J=>J?bt.from(J).map(de=>mr(de,B)):bt.none(),qc=B=>Go(vo)(B),is=B=>we(B,"items"),ws=(B,J)=>_(B,de=>is(de)?ws(de.items,J):de.value===J?bt.some(de):bt.none()),Pr={sanitizer:Go,sanitize:qc,findEntry:(B,J)=>B.bind(de=>ws(de,J))},$c={makeTab:B=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Pa=B=>{const J=Pr.sanitizer(me=>B.convertURL(me.value||me.url||"","src")),de=new Promise(me=>{De(B,Qe=>{me(J(Qe).map(ut=>Pe([[{text:"None",value:""}],ut])))})}),Xe=Pr.sanitize(re(B)),kn=ke(B),Do=ae(B),$n=zt(B),Fr=Jt(B),fr=Co(B),_t=z(B),sa=K(B),Js=We(B),Vr=H(B),tl=$e(B),$o=Be(B),te=bt.some(se(B)).filter(me=>Kt(me)&&me.length>0);return de.then(me=>({image:fr,imageList:me,classList:Xe,hasAdvTab:kn,hasUploadTab:Do,hasUploadUrl:$n,hasUploadHandler:Fr,hasDescription:_t,hasImageTitle:sa,hasDimensions:Js,hasImageCaption:Vr,prependURL:te,hasAccessibilityOptions:tl,automaticUploads:$o}))},Kc=B=>{const J={name:"src",type:"urlinput",filetype:"image",label:"Source"},de=B.imageList.map(sa=>({name:"images",type:"listbox",label:"Image list",items:sa})),Xe={name:"alt",type:"input",label:"Alternative description",enabled:!(B.hasAccessibilityOptions&&B.image.isDecorative)},kn={name:"title",type:"input",label:"Image title"},Do={name:"dimensions",type:"sizeinput"},$n={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Fr=B.classList.map(sa=>({name:"classes",type:"listbox",label:"Class",items:sa})),fr={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},_t=sa=>sa?{type:"grid",columns:2}:{type:"panel"};return Pe([[J],de.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[$n]:[],B.hasDescription?[Xe]:[],B.hasImageTitle?[kn]:[],B.hasDimensions?[Do]:[],[{..._t(B.classList.isSome()&&B.hasImageCaption),items:Pe([Fr.toArray(),B.hasImageCaption?[fr]:[]])}]])},Yc={makeTab:B=>({title:"General",name:"general",items:Kc(B)}),makeItems:Kc},Hs={makeTab:B=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},di=B=>({prevImage:Pr.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}),fa=B=>({src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}),rc=(B,J)=>({src:B.src.value,alt:(B.alt===null||B.alt.length===0)&&J?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}),mi=(B,J)=>/^(?:[a-zA-Z]+:)?\/\//.test(J)?bt.none():B.prependURL.bind(de=>J.substring(0,de.length)!==de?bt.some(de+J):bt.none()),Bc=(B,J)=>{const de=J.getData();mi(B,de.src.value).each(Xe=>{J.setData({src:{value:Xe,meta:de.src.meta}})})},oa=(B,J,de)=>{B.hasDescription&&Kt(de.alt)&&(J.alt=de.alt),B.hasAccessibilityOptions&&(J.isDecorative=de.isDecorative||J.isDecorative||!1),B.hasImageTitle&&Kt(de.title)&&(J.title=de.title),B.hasDimensions&&(Kt(de.width)&&(J.dimensions.width=de.width),Kt(de.height)&&(J.dimensions.height=de.height)),Kt(de.class)&&Pr.findEntry(B.classList,de.class).each(Xe=>{J.classes=Xe.value}),B.hasImageCaption&&yt(de.caption)&&(J.caption=de.caption),B.hasAdvTab&&(Kt(de.style)&&(J.style=de.style),Kt(de.vspace)&&(J.vspace=de.vspace),Kt(de.border)&&(J.border=de.border),Kt(de.hspace)&&(J.hspace=de.hspace),Kt(de.borderstyle)&&(J.borderstyle=de.borderstyle))},Ti=(B,J)=>{const de=J.getData(),Xe=de.src.meta;if(Xe!==void 0){const kn=dn({},de);oa(B,kn,Xe),J.setData(kn)}},vc=(B,J,de,Xe)=>{const kn=Xe.getData(),Do=kn.src.value,$n=kn.src.meta||{};!$n.width&&!$n.height&&J.hasDimensions&&(zn(Do)?B.imageSize(Do).then(Fr=>{de.open&&Xe.setData({dimensions:Fr})}).catch(Fr=>console.error(Fr)):Xe.setData({dimensions:{width:"",height:""}}))},Li=(B,J,de)=>{const Xe=de.getData(),kn=Pr.findEntry(B.imageList,Xe.src.value);J.prevImage=kn,de.setData({images:kn.map(Do=>Do.value).getOr("")})},Xs=(B,J,de,Xe)=>{Bc(J,Xe),Ti(J,Xe),vc(B,J,de,Xe),Li(J,de,Xe)},ga=(B,J,de,Xe)=>{const kn=Xe.getData(),Do=Pr.findEntry(J.imageList,kn.images);Do.each($n=>{kn.alt===""||de.prevImage.map(fr=>fr.text===kn.alt).getOr(!1)?$n.value===""?Xe.setData({src:$n,alt:de.prevAlt}):Xe.setData({src:$n,alt:$n.text}):Xe.setData({src:$n})}),de.prevImage=Do,Xs(B,J,de,Xe)},X=(B,J,de,Xe)=>{const kn=Xe.getData();Xe.block("Uploading image"),Ot(kn.fileinput).fold(()=>{Xe.unblock()},Do=>{const $n=URL.createObjectURL(Do),Fr=()=>{Xe.unblock(),URL.revokeObjectURL($n)},fr=_t=>{Xe.setData({src:{value:_t,meta:{}}}),Xe.showTab("general"),Xs(B,J,de,Xe)};Dt(Do).then(_t=>{const sa=B.createBlobCache(Do,$n,_t);J.automaticUploads?B.uploadImage(sa).then(Js=>{fr(Js.url),Fr()}).catch(Js=>{Fr(),B.alertErr(Js)}):(B.addToBlobCache(sa),fr(sa.blobUri()),Xe.unblock())})})},Ce=(B,J,de)=>(Xe,kn)=>{kn.name==="src"?Xs(B,J,de,Xe):kn.name==="images"?ga(B,J,de,Xe):kn.name==="alt"?de.prevAlt=Xe.getData().alt:kn.name==="fileinput"?X(B,J,de,Xe):kn.name==="isDecorative"&&Xe.setEnabled("alt",!Xe.getData().isDecorative)},Fe=B=>()=>{B.open=!1},pt=B=>B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler?{type:"tabpanel",tabs:Pe([[Yc.makeTab(B)],B.hasAdvTab?[$c.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[Hs.makeTab(B)]:[]])}:{type:"panel",items:Yc.makeItems(B)},Vt=(B,J,de)=>Xe=>{const kn=dn(fa(J.image),Xe.getData()),Do={...kn,style:Ys(de.normalizeCss,rc(kn,!1))};B.execCommand("mceUpdateImage",!1,rc(Do,J.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),Xe.close()},io=B=>J=>wn(B,J)?co(B.documentBaseURI.toAbsolute(J)).then(de=>({width:String(de.width),height:String(de.height)})):Promise.resolve({width:"",height:""}),qo=B=>(J,de,Xe)=>{var kn;return B.editorUpload.blobCache.create({blob:J,blobUri:de,name:(kn=J.name)===null||kn===void 0?void 0:kn.replace(/\.[^\.]+$/,""),filename:J.name,base64:Xe.split(",")[1]})},Tr=B=>J=>{B.editorUpload.blobCache.add(J)},Is=B=>J=>{B.windowManager.alert(J)},Nr=B=>J=>Rn(B,J),Er=B=>J=>B.dom.parseStyle(J),Mr=B=>(J,de)=>B.dom.serializeStyle(J,de),Fa=B=>J=>Mn(B).upload([J],!1).then(de=>{var Xe;return de.length===0?Promise.reject("Failed to upload image"):de[0].status===!1?Promise.reject((Xe=de[0].error)===null||Xe===void 0?void 0:Xe.message):de[0]}),jr=B=>{const J={imageSize:io(B),addToBlobCache:Tr(B),createBlobCache:qo(B),alertErr:Is(B),normalizeCss:Nr(B),parseStyle:Er(B),serializeStyle:Mr(B),uploadImage:Fa(B)};return{open:()=>{Pa(B).then(Xe=>{const kn=di(Xe);return{title:"Insert/Edit Image",size:"normal",body:pt(Xe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:fa(Xe.image),onSubmit:Vt(B,Xe,J),onChange:Ce(J,Xe,kn),onClose:Fe(kn)}}).then(B.windowManager.open)}}},Jr=B=>{B.addCommand("mceImage",jr(B).open),B.addCommand("mceUpdateImage",(J,de)=>{B.undoManager.transact(()=>Qt(B,de))})},Xc=B=>{const J=B.attr("class");return an(J)&&/\bimage\b/.test(J)},Jc=B=>J=>{let de=J.length;const Xe=kn=>{kn.attr("contenteditable",B?"true":null)};for(;de--;){const kn=J[de];Xc(kn)&&(kn.attr("contenteditable",B?"false":null),Kn.each(kn.getAll("figcaption"),Xe))}},So=B=>{B.on("PreInit",()=>{B.parser.addNodeFilter("figure",Jc(!0)),B.serializer.addNodeFilter("figure",Jc(!1))})},ls=B=>{B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:jr(B).open,onSetup:J=>(J.setActive(an(cs(B))),B.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",J.setActive).unbind)}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:jr(B).open}),B.ui.registry.addContextMenu("image",{update:J=>Wr(J)||Fs(J)&&!on(J)?["image"]:[]})};var or=()=>{Fo.add("image",B=>{xe(B),So(B),ls(B),Jr(B)})};or()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(Ee,xe,We)=>{var ke;return We(Ee,xe.prototype)?!0:((ke=Ee.constructor)===null||ke===void 0?void 0:ke.name)===xe.name},mo=Ee=>{const xe=typeof Ee;return Ee===null?"null":xe==="object"&&Array.isArray(Ee)?"array":xe==="object"&&ko(Ee,String,(We,ke)=>ke.isPrototypeOf(We))?"string":xe},Jn=Ee=>xe=>mo(xe)===Ee,An=Ee=>xe=>typeof xe===Ee,so=Jn("string"),Qn=Jn("object"),qt=Jn("array"),Kt=An("function");var Ct=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Tn=tinymce.util.Tools.resolve("tinymce.EditorManager"),ao=tinymce.util.Tools.resolve("tinymce.Env"),Zt=tinymce.util.Tools.resolve("tinymce.util.Tools");const yt=Ee=>xe=>xe.options.get(Ee),Rt=Ee=>{const xe=Ee.options.register,We=ke=>so(ke)||Kt(ke)||Qn(ke);xe("importcss_merge_classes",{processor:"boolean",default:!0}),xe("importcss_exclusive",{processor:"boolean",default:!0}),xe("importcss_selector_converter",{processor:"function"}),xe("importcss_selector_filter",{processor:We}),xe("importcss_file_filter",{processor:We}),xe("importcss_groups",{processor:"object[]"}),xe("importcss_append",{processor:"boolean",default:!1})},an=yt("importcss_merge_classes"),qe=yt("importcss_exclusive"),rt=yt("importcss_selector_converter"),Oe=yt("importcss_selector_filter"),oe=yt("importcss_groups"),bt=yt("importcss_append"),Ft=yt("importcss_file_filter"),wt=yt("skin"),Y=yt("skin_url"),At=Array.prototype.push,On=(Ee,xe)=>{const We=Ee.length,ke=new Array(We);for(let ae=0;ae<We;ae++){const se=Ee[ae];ke[ae]=xe(se,ae)}return ke},Nt=Ee=>{const xe=[];for(let We=0,ke=Ee.length;We<ke;++We){if(!qt(Ee[We]))throw new Error("Arr.flatten item "+We+" was not an array, input: "+Ee);At.apply(xe,Ee[We])}return xe},we=(Ee,xe)=>Nt(On(Ee,xe)),Q=()=>{const Ee=[],xe=[],We={};return{addItemToGroup:(re,z)=>{We[re]?We[re].push(z):(xe.push(re),We[re]=[z])},addItem:re=>{Ee.push(re)},toFormats:()=>we(xe,z=>{const K=We[z];return K.length===0?[]:[{title:z,items:K}]}).concat(Ee)}},ct=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,Pe=Ee=>{const xe=ao.cacheSuffix;return so(Ee)&&(Ee=Ee.replace("?"+xe,"").replace("&"+xe,"")),Ee},Ne=(Ee,xe)=>{const We=wt(Ee);if(We){const ke=Y(Ee),ae=ke?Ee.documentBaseURI.toAbsolute(ke):Tn.baseURL+"/skins/ui/"+We,se=Tn.baseURL+"/skins/content/";return xe===ae+"/content"+(Ee.inline?".inline":"")+".min.css"||xe.indexOf(se)!==-1}return!1},Ot=Ee=>so(Ee)?xe=>xe.indexOf(Ee)!==-1:Ee instanceof RegExp?xe=>Ee.test(xe):Ee,_=Ee=>Ee.styleSheet,ge=Ee=>Ee.selectorText,Ue=(Ee,xe,We)=>{const ke=[],ae={},se=(re,z)=>{let K=re.href,H;if(K=Pe(K),!(!K||We&&!We(K,z)||Ne(Ee,K))){Zt.each(re.imports,Z=>{se(Z,!0)});try{H=re.cssRules||re.rules}catch{}Zt.each(H,Z=>{_(Z)?se(Z.styleSheet,!0):ge(Z)&&Zt.each(Z.selectorText.split(","),$e=>{ke.push(Zt.trim($e))})})}};Zt.each(Ee.contentCSS,re=>{ae[re]=!0}),We||(We=(re,z)=>z||ae[re]);try{Zt.each(xe.styleSheets,re=>{se(re)})}catch{}return ke},Ie=(Ee,xe)=>{let We={};const ke=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(xe);if(!ke)return;const ae=ke[1],se=ke[2].substr(1).split(".").join(" "),re=Zt.makeMap("a,img");return ke[1]?(We={title:xe},Ee.schema.getTextBlockElements()[ae]?We.block=ae:Ee.schema.getBlockElements()[ae]||re[ae.toLowerCase()]?We.selector=ae:We.inline=ae):ke[2]&&(We={inline:"span",title:xe.substr(1),classes:se}),an(Ee)?We.classes=se:We.attributes={class:se},We},_e=(Ee,xe)=>Zt.grep(Ee,We=>!We.filter||We.filter(xe)),jt=Ee=>Zt.map(Ee,xe=>Zt.extend({},xe,{original:xe,selectors:{},filter:Ot(xe.filter)})),nn=(Ee,xe)=>xe===null||qe(Ee),ze=(Ee,xe,We,ke)=>!(nn(Ee,We)?xe in ke:xe in We.selectors),It=(Ee,xe,We,ke)=>{nn(Ee,We)?ke[xe]=!0:We.selectors[xe]=!0},Et=(Ee,xe,We,ke)=>{let ae;const se=rt(Ee);return ke&&ke.selector_converter?ae=ke.selector_converter:se?ae=se:ae=()=>Ie(Ee,We),ae.call(xe,We,ke)},Ve=Ee=>{Ee.on("init",()=>{const xe=Q(),We={},ke=Ot(Oe(Ee)),ae=jt(oe(Ee)),se=(z,K)=>{if(ze(Ee,z,K,We)){It(Ee,z,K,We);const H=Et(Ee,Ee.plugins.importcss,z,K);if(H){const Z=H.name||Ct.DOM.uniqueId();return Ee.formatter.register(Z,H),{title:H.title,format:Z}}}return null};Zt.each(Ue(Ee,Ee.getDoc(),Ot(Ft(Ee))),z=>{if(!ct.test(z)&&(!ke||ke(z))){const K=_e(ae,z);if(K.length>0)Zt.each(K,H=>{const Z=se(z,H);Z&&xe.addItemToGroup(H.title,Z)});else{const H=se(z,null);H&&xe.addItem(H)}}});const re=xe.toFormats();Ee.dispatch("addStyleModifications",{items:re,replace:!bt(Ee)})})},R=Ee=>({convertSelectorToFormat:We=>Ie(Ee,We)});var zn=()=>{Fo.add("importcss",Ee=>(Rt(Ee),Ve(Ee),R(Ee)))};zn()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=Ft=>wt=>wt.options.get(Ft),mo=Ft=>{const wt=Ft.options.register;wt("insertdatetime_dateformat",{processor:"string",default:Ft.translate("%Y-%m-%d")}),wt("insertdatetime_timeformat",{processor:"string",default:Ft.translate("%H:%M:%S")}),wt("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),wt("insertdatetime_element",{processor:"boolean",default:!1})},Jn=ko("insertdatetime_dateformat"),An=ko("insertdatetime_timeformat"),so=ko("insertdatetime_formats"),Qn=ko("insertdatetime_element"),qt=Ft=>{const wt=so(Ft);return wt.length>0?wt[0]:An(Ft)},Kt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Ct="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Tn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ao="January February March April May June July August September October November December".split(" "),Zt=(Ft,wt)=>{if(Ft=""+Ft,Ft.length<wt)for(let Y=0;Y<wt-Ft.length;Y++)Ft="0"+Ft;return Ft},yt=(Ft,wt,Y=new Date)=>(wt=wt.replace("%D","%m/%d/%Y"),wt=wt.replace("%r","%I:%M:%S %p"),wt=wt.replace("%Y",""+Y.getFullYear()),wt=wt.replace("%y",""+Y.getYear()),wt=wt.replace("%m",Zt(Y.getMonth()+1,2)),wt=wt.replace("%d",Zt(Y.getDate(),2)),wt=wt.replace("%H",""+Zt(Y.getHours(),2)),wt=wt.replace("%M",""+Zt(Y.getMinutes(),2)),wt=wt.replace("%S",""+Zt(Y.getSeconds(),2)),wt=wt.replace("%I",""+((Y.getHours()+11)%12+1)),wt=wt.replace("%p",Y.getHours()<12?"AM":"PM"),wt=wt.replace("%B",""+Ft.translate(ao[Y.getMonth()])),wt=wt.replace("%b",""+Ft.translate(Tn[Y.getMonth()])),wt=wt.replace("%A",""+Ft.translate(Ct[Y.getDay()])),wt=wt.replace("%a",""+Ft.translate(Kt[Y.getDay()])),wt=wt.replace("%%","%"),wt),Rt=(Ft,wt,Y,At)=>{const On=Ft.dom.create("time",{datetime:Y},At);Ft.dom.replace(On,wt),Ft.selection.select(On,!0),Ft.selection.collapse(!1)},an=(Ft,wt)=>{if(Qn(Ft)){const Y=yt(Ft,wt);let At;/%[HMSIp]/.test(wt)?At=yt(Ft,"%Y-%m-%dT%H:%M"):At=yt(Ft,"%Y-%m-%d");const On=Ft.dom.getParent(Ft.selection.getStart(),"time");On?Rt(Ft,On,At,Y):Ft.insertContent('<time datetime="'+At+'">'+Y+"</time>")}else Ft.insertContent(yt(Ft,wt))},qe=Ft=>{Ft.addCommand("mceInsertDate",(wt,Y)=>{an(Ft,Y!=null?Y:Jn(Ft))}),Ft.addCommand("mceInsertTime",(wt,Y)=>{an(Ft,Y!=null?Y:An(Ft))})},rt=Ft=>{let wt=Ft;return{get:()=>wt,set:On=>{wt=On}}};var Oe=tinymce.util.Tools.resolve("tinymce.util.Tools");const oe=Ft=>{const wt=so(Ft),Y=rt(qt(Ft)),At=Nt=>Ft.execCommand("mceInsertDate",!1,Nt);Ft.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:Nt=>Nt===Y.get(),fetch:Nt=>{Nt(Oe.map(wt,we=>({type:"choiceitem",text:yt(Ft,we),value:we})))},onAction:Nt=>{At(Y.get())},onItemAction:(Nt,we)=>{Y.set(we),At(we)}});const On=Nt=>()=>{Y.set(Nt),At(Nt)};Ft.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Oe.map(wt,Nt=>({type:"menuitem",text:yt(Ft,Nt),onAction:On(Nt)}))})};var bt=()=>{Fo.add("insertdatetime",Ft=>{mo(Ft),qe(Ft),oe(Ft)})};bt()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(X,Ce,Fe)=>{var pt;return Fe(X,Ce.prototype)?!0:((pt=X.constructor)===null||pt===void 0?void 0:pt.name)===Ce.name},mo=X=>{const Ce=typeof X;return X===null?"null":Ce==="object"&&Array.isArray(X)?"array":Ce==="object"&&ko(X,String,(Fe,pt)=>pt.isPrototypeOf(Fe))?"string":Ce},Jn=X=>Ce=>mo(Ce)===X,An=X=>Ce=>typeof Ce===X,so=X=>Ce=>X===Ce,Qn=Jn("string"),qt=Jn("object"),Kt=Jn("array"),Ct=so(null),Tn=An("boolean"),ao=X=>X==null,Zt=X=>!ao(X),yt=An("function"),Rt=(X,Ce)=>{if(Kt(X)){for(let Fe=0,pt=X.length;Fe<pt;++Fe)if(!Ce(X[Fe]))return!1;return!0}return!1},an=()=>{},qe=X=>()=>X,rt=(X,Ce)=>X===Ce;class Oe{constructor(Ce,Fe){this.tag=Ce,this.value=Fe}static some(Ce){return new Oe(!0,Ce)}static none(){return Oe.singletonNone}fold(Ce,Fe){return this.tag?Fe(this.value):Ce()}isSome(){return this.tag}isNone(){return!this.tag}map(Ce){return this.tag?Oe.some(Ce(this.value)):Oe.none()}bind(Ce){return this.tag?Ce(this.value):Oe.none()}exists(Ce){return this.tag&&Ce(this.value)}forall(Ce){return!this.tag||Ce(this.value)}filter(Ce){return!this.tag||Ce(this.value)?this:Oe.none()}getOr(Ce){return this.tag?this.value:Ce}or(Ce){return this.tag?this:Ce}getOrThunk(Ce){return this.tag?this.value:Ce()}orThunk(Ce){return this.tag?this:Ce()}getOrDie(Ce){if(this.tag)return this.value;throw new Error(Ce!=null?Ce:"Called getOrDie on None")}static from(Ce){return Zt(Ce)?Oe.some(Ce):Oe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ce){this.tag&&Ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Oe.singletonNone=new Oe(!1);const oe=Array.prototype.indexOf,bt=Array.prototype.push,Ft=(X,Ce)=>oe.call(X,Ce),wt=(X,Ce)=>Ft(X,Ce)>-1,Y=(X,Ce)=>{const Fe=X.length,pt=new Array(Fe);for(let Vt=0;Vt<Fe;Vt++){const io=X[Vt];pt[Vt]=Ce(io,Vt)}return pt},At=(X,Ce)=>{for(let Fe=0,pt=X.length;Fe<pt;Fe++){const Vt=X[Fe];Ce(Vt,Fe)}},On=(X,Ce,Fe)=>(At(X,(pt,Vt)=>{Fe=Ce(Fe,pt,Vt)}),Fe),Nt=X=>{const Ce=[];for(let Fe=0,pt=X.length;Fe<pt;++Fe){if(!Kt(X[Fe]))throw new Error("Arr.flatten item "+Fe+" was not an array, input: "+X);bt.apply(Ce,X[Fe])}return Ce},we=(X,Ce)=>Nt(Y(X,Ce)),Q=(X,Ce)=>{for(let Fe=0;Fe<X.length;Fe++){const pt=Ce(X[Fe],Fe);if(pt.isSome())return pt}return Oe.none()},ct=(X,Ce,Fe=rt)=>X.exists(pt=>Fe(pt,Ce)),Pe=X=>{const Ce=[],Fe=pt=>{Ce.push(pt)};for(let pt=0;pt<X.length;pt++)X[pt].each(Fe);return Ce},Ne=(X,Ce)=>X?Oe.some(Ce):Oe.none(),Ot=X=>Ce=>Ce.options.get(X),_=X=>{const Ce=X.options.register;Ce("link_assume_external_targets",{processor:Fe=>{const pt=Qn(Fe)||Tn(Fe);return pt?Fe===!0?{value:1,valid:pt}:Fe==="http"||Fe==="https"?{value:Fe,valid:pt}:{value:0,valid:pt}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Ce("link_context_toolbar",{processor:"boolean",default:!1}),Ce("link_list",{processor:Fe=>Qn(Fe)||yt(Fe)||Rt(Fe,qt)}),Ce("link_default_target",{processor:"string"}),Ce("link_default_protocol",{processor:"string",default:"https"}),Ce("link_target_list",{processor:Fe=>Tn(Fe)||Rt(Fe,qt),default:!0}),Ce("link_rel_list",{processor:"object[]",default:[]}),Ce("link_class_list",{processor:"object[]",default:[]}),Ce("link_title",{processor:"boolean",default:!0}),Ce("allow_unsafe_link_target",{processor:"boolean",default:!1}),Ce("link_quicklink",{processor:"boolean",default:!1})},ge=Ot("link_assume_external_targets"),Ue=Ot("link_context_toolbar"),Ie=Ot("link_list"),_e=Ot("link_default_target"),jt=Ot("link_default_protocol"),nn=Ot("link_target_list"),ze=Ot("link_rel_list"),It=Ot("link_class_list"),Et=Ot("link_title"),Ve=Ot("allow_unsafe_link_target"),R=Ot("link_quicklink");var zn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ee=X=>Qn(X.value)?X.value:"",xe=X=>Qn(X.text)?X.text:Qn(X.title)?X.title:"",We=(X,Ce)=>{const Fe=[];return zn.each(X,pt=>{const Vt=xe(pt);if(pt.menu!==void 0){const io=We(pt.menu,Ce);Fe.push({text:Vt,items:io})}else{const io=Ce(pt);Fe.push({text:Vt,value:io})}}),Fe},ke=(X=Ee)=>Ce=>Oe.from(Ce).map(Fe=>We(Fe,X)),re={sanitize:X=>ke(Ee)(X),sanitizeWith:ke,createUi:(X,Ce)=>Fe=>({name:X,type:"listbox",label:Ce,items:Fe}),getValue:Ee},z=Object.keys,K=Object.hasOwnProperty,H=(X,Ce)=>{const Fe=z(X);for(let pt=0,Vt=Fe.length;pt<Vt;pt++){const io=Fe[pt],qo=X[io];Ce(qo,io)}},Z=X=>(Ce,Fe)=>{X[Fe]=Ce},$e=(X,Ce,Fe,pt)=>{H(X,(Vt,io)=>{(Ce(Vt,io)?Fe:pt)(Vt,io)})},Be=(X,Ce)=>{const Fe={};return $e(X,Ce,Z(Fe),an),Fe},zt=(X,Ce)=>K.call(X,Ce),Jt=(X,Ce)=>zt(X,Ce)&&X[Ce]!==void 0&&X[Ce]!==null;var eo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),co=tinymce.util.Tools.resolve("tinymce.util.URI");const jn=X=>Zt(X)&&X.nodeName.toLowerCase()==="a",pn=X=>jn(X)&&!!Ye(X),to=(X,Ce)=>{if(X.collapsed)return[];{const Fe=X.cloneContents(),pt=Fe.firstChild,Vt=new eo(pt,Fe),io=[];let qo=pt;do Ce(qo)&&io.push(qo);while(qo=Vt.next());return io}},De=X=>/^\w+:/i.test(X),Ye=X=>{var Ce,Fe;return(Fe=(Ce=X.getAttribute("data-mce-href"))!==null&&Ce!==void 0?Ce:X.getAttribute("href"))!==null&&Fe!==void 0?Fe:""},Dt=(X,Ce)=>{const Fe=["noopener"],pt=X?X.split(/\s+/):[],Vt=Is=>zn.trim(Is.sort().join(" ")),io=Is=>(Is=qo(Is),Is.length>0?Is.concat(Fe):Fe),qo=Is=>Is.filter(Nr=>zn.inArray(Fe,Nr)===-1),Tr=Ce?io(pt):qo(pt);return Tr.length>0?Vt(Tr):""},on=X=>X.replace(/\uFEFF/g,""),wn=(X,Ce)=>(Ce=Ce||X.selection.getNode(),tn(Ce)?Oe.from(X.dom.select("a[href]",Ce)[0]):Oe.from(X.dom.getParent(Ce,"a[href]"))),bn=(X,Ce)=>wn(X,Ce).isSome(),Oo=(X,Ce)=>{const Fe=Ce.fold(()=>X.getContent({format:"text"}),pt=>pt.innerText||pt.textContent||"");return on(Fe)},xs=X=>zn.grep(X,pn).length>0,Ge=X=>to(X,pn).length>0,Le=X=>{const Ce=X.schema.getTextInlineElements(),Fe=io=>io.nodeType===1&&!jn(io)&&!zt(Ce,io.nodeName.toLowerCase());if(wn(X).exists(io=>io.hasAttribute("data-mce-block")))return!1;const Vt=X.selection.getRng();return Vt.collapsed?!0:to(Vt,Fe).length===0},tn=X=>Zt(X)&&X.nodeName==="FIGURE"&&/\bimage\b/i.test(X.className),en=X=>On(["title","rel","class","target"],(Fe,pt)=>(X[pt].each(Vt=>{Fe[pt]=Vt.length>0?Vt:null}),Fe),{href:X.href}),Ut=(X,Ce)=>(Ce==="http"||Ce==="https")&&!De(X)?Ce+"://"+X:X,Vn=(X,Ce)=>{const Fe={...Ce};if(ze(X).length===0&&!Ve(X)){const pt=Dt(Fe.rel,Fe.target==="_blank");Fe.rel=pt||null}return Oe.from(Fe.target).isNone()&&nn(X)===!1&&(Fe.target=_e(X)),Fe.href=Ut(Fe.href,ge(X)),Fe},ks=(X,Ce,Fe,pt)=>{Fe.each(Vt=>{zt(Ce,"innerText")?Ce.innerText=Vt:Ce.textContent=Vt}),X.dom.setAttribs(Ce,pt),X.selection.select(Ce)},kr=(X,Ce,Fe,pt)=>{const Vt=X.dom;tn(Ce)?Fs(Vt,Ce,pt):Fe.fold(()=>{X.execCommand("mceInsertLink",!1,pt)},io=>{X.insertContent(Vt.createHTML("a",pt,Vt.encode(io)))})},da=(X,Ce,Fe)=>{const pt=X.selection.getNode(),Vt=wn(X,pt),io=Vn(X,en(Fe));X.undoManager.transact(()=>{Fe.href===Ce.href&&Ce.attach(),Vt.fold(()=>{kr(X,pt,Fe.text,io)},qo=>{X.focus(),ks(X,qo,Fe.text,io)})})},ps=X=>{const Ce=X.dom,Fe=X.selection,pt=Fe.getBookmark(),Vt=Fe.getRng().cloneRange(),io=Ce.getParent(Vt.startContainer,"a[href]",X.getBody()),qo=Ce.getParent(Vt.endContainer,"a[href]",X.getBody());io&&Vt.setStartBefore(io),qo&&Vt.setEndAfter(qo),Fe.setRng(Vt),X.execCommand("unlink"),Fe.moveToBookmark(pt)},bc=X=>{X.undoManager.transact(()=>{const Ce=X.selection.getNode();tn(Ce)?Wr(X,Ce):ps(X),X.focus()})},vs=X=>{const{class:Ce,href:Fe,rel:pt,target:Vt,text:io,title:qo}=X;return Be({class:Ce.getOrNull(),href:Fe,rel:pt.getOrNull(),target:Vt.getOrNull(),text:io.getOrNull(),title:qo.getOrNull()},(Tr,Is)=>Ct(Tr)===!1)},as=(X,Ce)=>{const Fe=X.options.get,pt={allow_html_data_urls:Fe("allow_html_data_urls"),allow_script_urls:Fe("allow_script_urls"),allow_svg_data_urls:Fe("allow_svg_data_urls")},Vt=Ce.href;return{...Ce,href:co.isDomSafe(Vt,"a",pt)?Vt:""}},uo=(X,Ce,Fe)=>{const pt=as(X,Fe);X.hasPlugin("rtc",!0)?X.execCommand("createlink",!1,vs(pt)):da(X,Ce,pt)},dr=X=>{X.hasPlugin("rtc",!0)?X.execCommand("unlink"):bc(X)},Wr=(X,Ce)=>{var Fe;const pt=X.dom.select("img",Ce)[0];if(pt){const Vt=X.dom.getParents(pt,"a[href]",Ce)[0];Vt&&((Fe=Vt.parentNode)===null||Fe===void 0||Fe.insertBefore(pt,Vt),X.dom.remove(Vt))}},Fs=(X,Ce,Fe)=>{var pt;const Vt=X.select("img",Ce)[0];if(Vt){const io=X.create("a",Fe);(pt=Vt.parentNode)===null||pt===void 0||pt.insertBefore(io,Vt),io.appendChild(Vt)}},ma=X=>Jt(X,"items"),Zr=(X,Ce)=>Q(Ce,Fe=>ma(Fe)?Zr(X,Fe.items):Ne(Fe.value===X,Fe)),sc=(X,Ce,Fe,pt)=>{const Vt=pt[Ce],io=X.length>0;return Vt!==void 0?Zr(Vt,Fe).map(qo=>({url:{value:qo.value,meta:{text:io?X:qo.text,attach:an}},text:io?X:qo.text})):Oe.none()},Ys=(X,Ce)=>Ce==="link"?X.link:Ce==="anchor"?X.anchor:Oe.none(),ve={init:(X,Ce)=>{const Fe={text:X.text,title:X.title},pt=Is=>{var Nr;return Ne(Fe.title.length<=0,Oe.from((Nr=Is.meta)===null||Nr===void 0?void 0:Nr.title).getOr(""))},Vt=Is=>{var Nr;return Ne(Fe.text.length<=0,Oe.from((Nr=Is.meta)===null||Nr===void 0?void 0:Nr.text).getOr(Is.value))},io=Is=>{const Nr=Vt(Is.url),Er=pt(Is.url);return Nr.isSome()||Er.isSome()?Oe.some({...Nr.map(Mr=>({text:Mr})).getOr({}),...Er.map(Mr=>({title:Mr})).getOr({})}):Oe.none()},qo=(Is,Nr)=>{const Er=Ys(Ce,Nr).getOr([]);return sc(Fe.text,Nr,Er,Is)};return{onChange:(Is,Nr)=>{const Er=Nr.name;return Er==="url"?io(Is()):wt(["anchor","link"],Er)?qo(Is(),Er):((Er==="text"||Er==="title")&&(Fe[Er]=Is()[Er]),Oe.none())}}},getDelta:sc};var q=tinymce.util.Tools.resolve("tinymce.util.Delay");const st=(X,Ce,Fe)=>{const pt=X.selection.getRng();q.setEditorTimeout(X,()=>{X.windowManager.confirm(Ce,Vt=>{X.selection.setRng(pt),Fe(Vt)})})},ht=X=>{const Ce=X.href;return Ce.indexOf("@")>0&&Ce.indexOf("/")===-1&&Ce.indexOf("mailto:")===-1?Oe.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:pt=>({...pt,href:"mailto:"+Ce})}):Oe.none()},In=(X,Ce)=>Fe=>{const pt=Fe.href;return X===1&&!De(pt)||X===0&&/^\s*www(\.|\d\.)/i.test(pt)?Oe.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Ce}:// prefix?`,preprocess:io=>({...io,href:Ce+"://"+pt})}):Oe.none()},Rn={preprocess:(X,Ce)=>Q([ht,In(ge(X),jt(X))],Fe=>Fe(Ce)).fold(()=>Promise.resolve(Ce),Fe=>new Promise(pt=>{st(X,Fe.message,Vt=>{pt(Vt?Fe.preprocess(Ce):Ce)})}))},es={getAnchors:X=>{const Ce=X.dom.select("a:not([href])"),Fe=we(Ce,pt=>{const Vt=pt.name||pt.id;return Vt?[{text:Vt,value:"#"+Vt}]:[]});return Fe.length>0?Oe.some([{text:"None",value:""}].concat(Fe)):Oe.none()}},rr={getClasses:X=>{const Ce=It(X);return Ce.length>0?re.sanitize(Ce):Oe.none()}},Bt=X=>{try{return Oe.some(JSON.parse(X))}catch{return Oe.none()}},pe={getLinks:X=>{const Ce=pt=>X.convertURL(pt.value||pt.url||"","href"),Fe=Ie(X);return new Promise(pt=>{Qn(Fe)?fetch(Fe).then(Vt=>Vt.ok?Vt.text().then(Bt):Promise.reject()).then(pt,()=>pt(Oe.none())):yt(Fe)?Fe(Vt=>pt(Oe.some(Vt))):pt(Oe.from(Fe))}).then(pt=>pt.bind(re.sanitizeWith(Ce)).map(Vt=>Vt.length>0?[{text:"None",value:""}].concat(Vt):Vt))}},Qt={getRels:(X,Ce)=>{const Fe=ze(X);if(Fe.length>0){const pt=ct(Ce,"_blank"),Vt=Ve(X)===!1,io=Tr=>Dt(re.getValue(Tr),pt);return(Vt?re.sanitizeWith(io):re.sanitize)(Fe)}return Oe.none()}},rn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],dn={getTargets:X=>{const Ce=nn(X);return Kt(Ce)?re.sanitize(Ce).orThunk(()=>Oe.some(rn)):Ce===!1?Oe.none():Oe.some(rn)}},Mn=(X,Ce,Fe)=>{const pt=X.getAttrib(Ce,Fe);return pt!==null&&pt.length>0?Oe.some(pt):Oe.none()},Kn=(X,Ce)=>{const Fe=X.dom,Vt=Le(X)?Oe.some(Oo(X.selection,Ce)):Oe.none(),io=Ce.bind(Er=>Oe.from(Fe.getAttrib(Er,"href"))),qo=Ce.bind(Er=>Oe.from(Fe.getAttrib(Er,"target"))),Tr=Ce.bind(Er=>Mn(Fe,Er,"rel")),Is=Ce.bind(Er=>Mn(Fe,Er,"class")),Nr=Ce.bind(Er=>Mn(Fe,Er,"title"));return{url:io,text:Vt,title:Nr,target:qo,rel:Tr,linkClass:Is}},As={collect:(X,Ce)=>pe.getLinks(X).then(Fe=>{const pt=Kn(X,Ce);return{anchor:pt,catalogs:{targets:dn.getTargets(X),rels:Qt.getRels(X,pt.target),classes:rr.getClasses(X),anchor:es.getAnchors(X),link:Fe},optNode:Ce,flags:{titleEnabled:Et(X)}}})},mr=(X,Ce)=>Fe=>{const pt=Fe.getData();if(!pt.url.value){dr(X),Fe.close();return}const Vt=Tr=>Oe.from(pt[Tr]).filter(Is=>!ct(Ce.anchor[Tr],Is)),io={href:pt.url.value,text:Vt("text"),target:Vt("target"),rel:Vt("rel"),class:Vt("linkClass"),title:Vt("title")},qo={href:pt.url.value,attach:pt.url.meta!==void 0&&pt.url.meta.attach?pt.url.meta.attach:an};Rn.preprocess(X,io).then(Tr=>{uo(X,qo,Tr)}),Fe.close()},Go=X=>{const Ce=wn(X);return As.collect(X,Ce)},qc=(X,Ce)=>{const Fe=X.anchor,pt=Fe.url.getOr("");return{url:{value:pt,meta:{original:{value:pt}}},text:Fe.text.getOr(""),title:Fe.title.getOr(""),anchor:pt,link:pt,rel:Fe.rel.getOr(""),target:Fe.target.or(Ce).getOr(""),linkClass:Fe.linkClass.getOr("")}},is=(X,Ce,Fe)=>{const pt=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Vt=X.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),io=X.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],qo=Oe.from(_e(Fe)),Tr=qc(X,qo),Is=X.catalogs,Nr=ve.init(Tr,Is);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Nt([pt,Vt,io,Pe([Is.anchor.map(re.createUi("anchor","Anchors")),Is.rels.map(re.createUi("rel","Rel")),Is.targets.map(re.createUi("target","Open link in...")),Is.link.map(re.createUi("link","Link list")),Is.classes.map(re.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Tr,onChange:(Mr,{name:Fa})=>{Nr.onChange(Mr.getData,{name:Fa}).each(jr=>{Mr.setData(jr)})},onSubmit:Ce}},ws=X=>{Go(X).then(Fe=>{const pt=mr(X,Fe);return is(Fe,pt,X)}).then(Fe=>{X.windowManager.open(Fe)})},Ss=X=>{X.addCommand("mceLink",(Ce,Fe)=>{(Fe==null?void 0:Fe.dialog)===!0||!R(X)?ws(X):X.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var Pr=tinymce.util.Tools.resolve("tinymce.util.VK");const Rr=(X,Ce)=>{document.body.appendChild(X),X.dispatchEvent(Ce),document.body.removeChild(X)},$c=X=>{const Ce=document.createElement("a");Ce.target="_blank",Ce.href=X,Ce.rel="noreferrer noopener";const Fe=document.createEvent("MouseEvents");Fe.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Rr(Ce,Fe)},Pa=(X,Ce)=>X.dom.getParent(Ce,"a[href]"),Kc=X=>Pa(X,X.selection.getStart()),ki=X=>X.altKey===!0&&X.shiftKey===!1&&X.ctrlKey===!1&&X.metaKey===!1,Yc=(X,Ce)=>{if(Ce){const Fe=Ye(Ce);if(/^#/.test(Fe)){const pt=X.dom.select(Fe);pt.length&&X.selection.scrollIntoView(pt[0],!0)}else $c(Ce.href)}},Ii=X=>()=>{X.execCommand("mceLink",!1,{dialog:!0})},Hs=X=>()=>{Yc(X,Kc(X))},di=X=>{X.on("click",Ce=>{const Fe=Pa(X,Ce.target);Fe&&Pr.metaKeyPressed(Ce)&&(Ce.preventDefault(),Yc(X,Fe))}),X.on("keydown",Ce=>{if(!Ce.isDefaultPrevented()&&Ce.keyCode===13&&ki(Ce)){const Fe=Kc(X);Fe&&(Ce.preventDefault(),Yc(X,Fe))}})},fa=(X,Ce)=>(X.on("NodeChange",Ce),()=>X.off("NodeChange",Ce)),rc=X=>Ce=>{const Fe=()=>Ce.setActive(!X.mode.isReadOnly()&&bn(X,X.selection.getNode()));return Fe(),fa(X,Fe)},mi=X=>Ce=>{const Fe=()=>Ce.setEnabled(bn(X,X.selection.getNode()));return Fe(),fa(X,Fe)},Bc=X=>Ce=>{const Fe=Vt=>xs(Vt)||Ge(X.selection.getRng()),pt=X.dom.getParents(X.selection.getStart());return Ce.setEnabled(Fe(pt)),fa(X,Vt=>Ce.setEnabled(Fe(Vt.parents)))},oa=X=>{X.addShortcut("Meta+K","",()=>{X.execCommand("mceLink")})},Ti=X=>{X.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ii(X),onSetup:rc(X)}),X.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Hs(X),onSetup:mi(X)}),X.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>dr(X),onSetup:Bc(X)})},vc=X=>{X.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Hs(X),onSetup:mi(X)}),X.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Ii(X)}),X.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>dr(X),onSetup:Bc(X)})},Li=X=>{const Ce="link unlink openlink",Fe="link";X.ui.registry.addContextMenu("link",{update:pt=>xs(X.dom.getParents(pt,"a"))?Ce:Fe})},Xs=X=>{const Ce=Vt=>{Vt.selection.collapse(!1)},Fe=Vt=>{const io=X.selection.getNode();return Vt.setEnabled(bn(X,io)),an},pt=Vt=>{const io=wn(X),qo=Le(X);if(io.isNone()&&qo){const Tr=Oo(X.selection,io);return Oe.some(Tr.length>0?Tr:Vt)}else return Oe.none()};X.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:rc(X)},label:"Link",predicate:Vt=>Ue(X)&&bn(X,Vt),initValue:()=>wn(X).fold(qe(""),Ye),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Vt=>{const io=X.selection.getNode();return Vt.setActive(bn(X,io)),rc(X)(Vt)},onAction:Vt=>{const io=Vt.getValue(),qo=pt(io);uo(X,{href:io,attach:an},{href:io,text:qo,title:Oe.none(),rel:Oe.none(),target:Oe.none(),class:Oe.none()}),Ce(X),Vt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Fe,onAction:Vt=>{dr(X),Vt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Fe,onAction:Vt=>{Hs(X)(),Vt.hide()}}]})};var ga=()=>{Fo.add("link",X=>{_(X),Ti(X),vc(X),Li(X),Xs(X),di(X),Ss(X),oa(X)})};ga()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(E,$,j)=>{var Se;return j(E,$.prototype)?!0:((Se=E.constructor)===null||Se===void 0?void 0:Se.name)===$.name},mo=E=>{const $=typeof E;return E===null?"null":$==="object"&&Array.isArray(E)?"array":$==="object"&&ko(E,String,(j,Se)=>Se.isPrototypeOf(j))?"string":$},Jn=E=>$=>mo($)===E,An=E=>$=>typeof $===E,so=Jn("string"),Qn=Jn("object"),qt=Jn("array"),Kt=An("boolean"),Ct=E=>E==null,Tn=E=>!Ct(E),ao=An("function"),Zt=An("number"),yt=()=>{},Rt=E=>()=>E,an=(E,$)=>E===$,qe=E=>$=>!E($),rt=Rt(!1);class Oe{constructor($,j){this.tag=$,this.value=j}static some($){return new Oe(!0,$)}static none(){return Oe.singletonNone}fold($,j){return this.tag?j(this.value):$()}isSome(){return this.tag}isNone(){return!this.tag}map($){return this.tag?Oe.some($(this.value)):Oe.none()}bind($){return this.tag?$(this.value):Oe.none()}exists($){return this.tag&&$(this.value)}forall($){return!this.tag||$(this.value)}filter($){return!this.tag||$(this.value)?this:Oe.none()}getOr($){return this.tag?this.value:$}or($){return this.tag?this:$}getOrThunk($){return this.tag?this.value:$()}orThunk($){return this.tag?this:$()}getOrDie($){if(this.tag)return this.value;throw new Error($!=null?$:"Called getOrDie on None")}static from($){return Tn($)?Oe.some($):Oe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each($){this.tag&&$(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Oe.singletonNone=new Oe(!1);const oe=Array.prototype.slice,bt=Array.prototype.indexOf,Ft=Array.prototype.push,wt=(E,$)=>bt.call(E,$),Y=(E,$)=>wt(E,$)>-1,At=(E,$)=>{for(let j=0,Se=E.length;j<Se;j++){const He=E[j];if($(He,j))return!0}return!1},On=(E,$)=>{const j=E.length,Se=new Array(j);for(let He=0;He<j;He++){const mn=E[He];Se[He]=$(mn,He)}return Se},Nt=(E,$)=>{for(let j=0,Se=E.length;j<Se;j++){const He=E[j];$(He,j)}},we=(E,$)=>{const j=[];for(let Se=0,He=E.length;Se<He;Se++){const mn=E[Se];$(mn,Se)&&j.push(mn)}return j},Q=(E,$)=>{if(E.length===0)return[];{let j=$(E[0]);const Se=[];let He=[];for(let mn=0,yo=E.length;mn<yo;mn++){const ts=E[mn],Zo=$(ts);Zo!==j&&(Se.push(He),He=[]),j=Zo,He.push(ts)}return He.length!==0&&Se.push(He),Se}},ct=(E,$,j)=>(Nt(E,(Se,He)=>{j=$(j,Se,He)}),j),Pe=(E,$,j)=>{for(let Se=0,He=E.length;Se<He;Se++){const mn=E[Se];if($(mn,Se))return Oe.some(mn);if(j(mn,Se))break}return Oe.none()},Ne=(E,$)=>Pe(E,$,rt),Ot=E=>{const $=[];for(let j=0,Se=E.length;j<Se;++j){if(!qt(E[j]))throw new Error("Arr.flatten item "+j+" was not an array, input: "+E);Ft.apply($,E[j])}return $},_=(E,$)=>Ot(On(E,$)),ge=E=>{const $=oe.call(E,0);return $.reverse(),$},Ue=(E,$)=>$>=0&&$<E.length?Oe.some(E[$]):Oe.none(),Ie=E=>Ue(E,0),_e=E=>Ue(E,E.length-1),jt=(E,$)=>{const j=[],Se=ao($)?He=>At(j,mn=>$(mn,He)):He=>Y(j,He);for(let He=0,mn=E.length;He<mn;He++){const yo=E[He];Se(yo)||j.push(yo)}return j},nn=(E,$,j=an)=>E.exists(Se=>j(Se,$)),ze=(E,$,j=an)=>It(E,$,j).getOr(E.isNone()&&$.isNone()),It=(E,$,j)=>E.isSome()&&$.isSome()?Oe.some(j(E.getOrDie(),$.getOrDie())):Oe.none(),Et=1,Ve=(E,$)=>{const Se=($||document).createElement("div");if(Se.innerHTML=E,!Se.hasChildNodes()||Se.childNodes.length>1){const He="HTML does not have a single root node";throw console.error(He,E),new Error(He)}return Ee(Se.childNodes[0])},R=(E,$)=>{const Se=($||document).createElement(E);return Ee(Se)},zn=(E,$)=>{const Se=($||document).createTextNode(E);return Ee(Se)},Ee=E=>{if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},We={fromHtml:Ve,fromTag:R,fromText:zn,fromDom:Ee,fromPoint:(E,$,j)=>Oe.from(E.dom.elementFromPoint($,j)).map(Ee)},ke=(E,$)=>{const j=E.dom;if(j.nodeType!==Et)return!1;{const Se=j;if(Se.matches!==void 0)return Se.matches($);if(Se.msMatchesSelector!==void 0)return Se.msMatchesSelector($);if(Se.webkitMatchesSelector!==void 0)return Se.webkitMatchesSelector($);if(Se.mozMatchesSelector!==void 0)return Se.mozMatchesSelector($);throw new Error("Browser lacks native selectors")}},ae=(E,$)=>E.dom===$.dom,se=(E,$)=>{const j=E.dom,Se=$.dom;return j===Se?!1:j.contains(Se)},re=ke;var z=(E,$,j,Se,He)=>E(j,Se)?Oe.some(j):ao(He)&&He(j)?Oe.none():$(j,Se,He);typeof window<"u"||Function("return this;")();const K=E=>E.dom.nodeName.toLowerCase(),H=E=>E.dom.nodeType,$e=(E=>$=>H($)===E)(Et),Be=E=>$=>$e($)&&K($)===E,zt=E=>Oe.from(E.dom.parentNode).map(We.fromDom),Jt=E=>Oe.from(E.dom.parentElement).map(We.fromDom),eo=E=>Oe.from(E.dom.nextSibling).map(We.fromDom),co=E=>On(E.dom.childNodes,We.fromDom),jn=(E,$)=>{const j=E.dom.childNodes;return Oe.from(j[$]).map(We.fromDom)},pn=E=>jn(E,0),to=E=>jn(E,E.dom.childNodes.length-1),De=(E,$,j)=>{let Se=E.dom;const He=ao(j)?j:rt;for(;Se.parentNode;){Se=Se.parentNode;const mn=We.fromDom(Se);if($(mn))return Oe.some(mn);if(He(mn))break}return Oe.none()},Ye=(E,$,j)=>z((He,mn)=>mn(He),De,E,$,j),Dt=(E,$)=>{zt(E).each(Se=>{Se.dom.insertBefore($.dom,E.dom)})},on=(E,$)=>{eo(E).fold(()=>{zt(E).each(He=>{wn(He,$)})},Se=>{Dt(Se,$)})},wn=(E,$)=>{E.dom.appendChild($.dom)},bn=(E,$)=>{Nt($,j=>{Dt(E,j)})},Oo=(E,$)=>{Nt($,j=>{wn(E,j)})},xs=E=>{E.dom.textContent="",Nt(co(E),$=>{Ge($)})},Ge=E=>{const $=E.dom;$.parentNode!==null&&$.parentNode.removeChild($)};var Le=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),tn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),en=tinymce.util.Tools.resolve("tinymce.util.VK");const Ut=E=>On(E,We.fromDom),Vn=Object.keys,ks=(E,$)=>{const j=Vn(E);for(let Se=0,He=j.length;Se<He;Se++){const mn=j[Se],yo=E[mn];$(yo,mn)}},kr=E=>($,j)=>{E[j]=$},da=(E,$,j,Se)=>{ks(E,(He,mn)=>{($(He,mn)?j:Se)(He,mn)})},ps=(E,$)=>{const j={};return da(E,$,kr(j),yt),j},bc=(E,$,j)=>{if(so(j)||Kt(j)||Zt(j))E.setAttribute($,j+"");else throw console.error("Invalid call to Attribute.set. Key ",$,":: Value ",j,":: Element ",E),new Error("Attribute value was not simple")},vs=(E,$)=>{const j=E.dom;ks($,(Se,He)=>{bc(j,He,Se)})},as=E=>ct(E.dom.attributes,($,j)=>($[j.name]=j.value,$),{}),uo=(E,$)=>We.fromDom(E.dom.cloneNode($)),dr=E=>uo(E,!0),Wr=(E,$)=>{const j=We.fromTag($),Se=as(E);return vs(j,Se),j},Fs=(E,$)=>{const j=Wr(E,$);on(E,j);const Se=co(E);return Oo(j,Se),Ge(E),j};var ma=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Zr=tinymce.util.Tools.resolve("tinymce.util.Tools");const sc=E=>$=>Tn($)&&$.nodeName.toLowerCase()===E,Ys=E=>$=>Tn($)&&E.test($.nodeName),ka=E=>Tn(E)&&E.nodeType===3,ve=E=>Tn(E)&&E.nodeType===1,q=Ys(/^(OL|UL|DL)$/),st=Ys(/^(OL|UL)$/),ht=sc("ol"),In=Ys(/^(LI|DT|DD)$/),Gn=Ys(/^(DT|DD)$/),Rn=Ys(/^(TH|TD)$/),cs=sc("br"),es=E=>{var $;return(($=E.parentNode)===null||$===void 0?void 0:$.firstChild)===E},Co=(E,$)=>Tn($)&&$.nodeName in E.schema.getTextBlockElements(),rr=(E,$)=>Tn(E)&&E.nodeName in $,Bt=(E,$)=>cs($)?E.isBlock($.nextSibling)&&!cs($.previousSibling):!1,fe=(E,$,j)=>{const Se=E.isEmpty($);return j&&E.select("span[data-mce-type=bookmark]",$).length>0?!1:Se},pe=(E,$)=>E.isChildOf($,E.getRoot()),kt=E=>$=>$.options.get(E),Qt=E=>{const $=E.options.register;$("lists_indent_on_tab",{processor:"boolean",default:!0})},rn=kt("lists_indent_on_tab"),_n=kt("forced_root_block"),dn=kt("forced_root_block_attrs"),Mn=(E,$)=>{const j=E.dom,Se=E.schema.getBlockElements(),He=j.createFragment(),mn=_n(E),yo=dn(E);let ts,Zo,qn=!1;for(Zo=j.create(mn,yo),rr($.firstChild,Se)||He.appendChild(Zo);ts=$.firstChild;){const ns=ts.nodeName;!qn&&(ns!=="SPAN"||ts.getAttribute("data-mce-type")!=="bookmark")&&(qn=!0),rr(ts,Se)?(He.appendChild(ts),Zo=null):(Zo||(Zo=j.create(mn,yo),He.appendChild(Zo)),Zo.appendChild(ts))}return!qn&&Zo&&Zo.appendChild(j.create("br",{"data-mce-bogus":"1"})),He},Kn=ma.DOM,vo=(E,$,j)=>{const Se=qn=>{const ns=qn.parentNode;ns&&Zr.each(He,_r=>{ns.insertBefore(_r,j.parentNode)}),Kn.remove(qn)},He=Kn.select('span[data-mce-type="bookmark"]',$),mn=Mn(E,j),yo=Kn.createRng();yo.setStartAfter(j),yo.setEndAfter($);const ts=yo.extractContents();for(let qn=ts.firstChild;qn;qn=qn.firstChild)if(qn.nodeName==="LI"&&E.dom.isEmpty(qn)){Kn.remove(qn);break}E.dom.isEmpty(ts)||Kn.insertAfter(ts,$),Kn.insertAfter(mn,$);const Zo=j.parentElement;Zo&&fe(E.dom,Zo)&&Se(Zo),Kn.remove(j),fe(E.dom,$)&&Kn.remove($)},As=Be("dd"),mr=Be("dt"),Go=(E,$)=>{As($)?Fs($,"dt"):mr($)&&Jt($).each(j=>vo(E,j.dom,$.dom))},qc=E=>{mr(E)&&Fs(E,"dd")},is=(E,$,j)=>{$==="Indent"?Nt(j,qc):Nt(j,Se=>Go(E,Se))},ws=(E,$)=>{if(ka(E))return{container:E,offset:$};const j=Le.getNode(E,$);return ka(j)?{container:j,offset:$>=E.childNodes.length?j.data.length:0}:j.previousSibling&&ka(j.previousSibling)?{container:j.previousSibling,offset:j.previousSibling.data.length}:j.nextSibling&&ka(j.nextSibling)?{container:j.nextSibling,offset:0}:{container:E,offset:$}},Ss=E=>{const $=E.cloneRange(),j=ws(E.startContainer,E.startOffset);$.setStart(j.container,j.offset);const Se=ws(E.endContainer,E.endOffset);return $.setEnd(Se.container,Se.offset),$},Pr=["OL","UL","DL"],Rr=Pr.join(","),$c=(E,$)=>{const j=$||E.selection.getStart(!0);return E.dom.getParent(j,Rr,rc(E,j))},Pa=(E,$)=>Tn(E)&&$.length===1&&$[0]===E,Kc=E=>we(E.querySelectorAll(Rr),q),ki=E=>{const $=$c(E),j=E.selection.getSelectedBlocks();return Pa($,j)?Kc($):we(j,Se=>q(Se)&&$!==Se)},Yc=(E,$)=>{const j=Zr.map($,Se=>{const He=E.dom.getParent(Se,"li,dd,dt",rc(E,Se));return He||Se});return jt(j)},Ii=E=>{const $=E.selection.getSelectedBlocks();return we(Yc(E,$),In)},Hs=E=>we(Ii(E),Gn),di=(E,$)=>{const j=E.dom.getParents($,"TD,TH");return j.length>0?j[0]:E.getBody()},fa=(E,$)=>!q($)&&!In($)&&At(Pr,j=>E.isValidChild($.nodeName,j)),rc=(E,$)=>{const j=E.dom.getParents($,E.dom.isBlock);return Ne(j,He=>fa(E.schema,He)).getOr(E.getBody())},mi=(E,$)=>{const j=E.dom.getParents($,"ol,ul",rc(E,$));return _e(j)},Bc=E=>{const $=mi(E,E.selection.getStart()),j=we(E.selection.getSelectedBlocks(),st);return $.toArray().concat(j)},oa=E=>{const $=Bc(E);return Ti(E,$)},Ti=(E,$)=>{const j=On($,Se=>mi(E,Se).getOr(Se));return jt(j)},vc=E=>/\btox\-/.test(E.className),Li=(E,$)=>Pe(E,q,Rn).exists(j=>j.nodeName===$&&!vc(j)),Xs=(E,$)=>$!==null&&E.dom.getContentEditableParent($)==="false",ga=E=>{const $=$c(E);return Xs(E,$)},X=(E,$)=>{const j=E.dom.getParent($,"ol,ul,dl");return Xs(E,j)},Ce=(E,$)=>{const j=E.selection.getNode();return $({parents:E.dom.getParents(j),element:j}),E.on("NodeChange",$),()=>E.off("NodeChange",$)},Fe=(E,$)=>{const Se=($||document).createDocumentFragment();return Nt(E,He=>{Se.appendChild(He.dom)}),We.fromDom(Se)},pt=(E,$,j)=>E.dispatch("ListMutation",{action:$,element:j}),io=(E=>$=>$.replace(E,""))(/^\s+|\s+$/g),qo=E=>E.length>0,Tr=E=>!qo(E),Is=E=>E.style!==void 0&&ao(E.style.getPropertyValue),Nr=(E,$,j)=>{if(!so(j))throw console.error("Invalid call to CSS.set. Property ",$,":: Value ",j,":: Element ",E),new Error("CSS value must be a string: "+j);Is(E)&&E.style.setProperty($,j)},Er=(E,$,j)=>{const Se=E.dom;Nr(Se,$,j)},Mr=(E,$)=>{wn(E.item,$.list)},Fa=E=>{for(let $=1;$<E.length;$++)Mr(E[$-1],E[$])},jr=(E,$)=>{It(_e(E),Ie($),Mr)},Jr=(E,$)=>{const j={list:We.fromTag($,E),item:We.fromTag("li",E)};return wn(j.list,j.item),j},Xc=(E,$,j)=>{const Se=[];for(let He=0;He<j;He++)Se.push(Jr(E,$.listType));return Se},Jc=(E,$)=>{for(let j=0;j<E.length-1;j++)Er(E[j].item,"list-style-type","none");_e(E).each(j=>{vs(j.list,$.listAttributes),vs(j.item,$.itemAttributes),Oo(j.item,$.content)})},So=(E,$)=>{K(E.list)!==$.listType&&(E.list=Fs(E.list,$.listType)),vs(E.list,$.listAttributes)},ls=(E,$,j)=>{const Se=We.fromTag("li",E);return vs(Se,$),Oo(Se,j),Se},or=(E,$)=>{wn(E.list,$),E.item=$},B=(E,$,j)=>{const Se=$.slice(0,j.depth);return _e(Se).each(He=>{const mn=ls(E,j.itemAttributes,j.content);or(He,mn),So(He,j)}),Se},J=(E,$,j)=>{const Se=Xc(E,j,j.depth-$.length);return Fa(Se),Jc(Se,j),jr($,Se),$.concat(Se)},de=(E,$)=>{const j=ct($,(Se,He)=>He.depth>Se.length?J(E,Se,He):B(E,Se,He),[]);return Ie(j).map(Se=>Se.list)},Xe=E=>re(E,"OL,UL"),kn=E=>pn(E).exists(Xe),Do=E=>to(E).exists(Xe),$n=E=>E.depth>0,Fr=E=>E.isSelected,fr=E=>{const $=co(E),j=Do(E)?$.slice(0,-1):$;return On(j,dr)},_t=(E,$,j)=>zt(E).filter($e).map(Se=>({depth:$,dirty:!1,isSelected:j,content:fr(E),itemAttributes:as(E),listAttributes:as(Se),listType:K(Se)})),sa=(E,$)=>{switch(E){case"Indent":$.depth++;break;case"Outdent":$.depth--;break;case"Flatten":$.depth=0}$.dirty=!0},Js=(E,$)=>{E.listType=$.listType,E.listAttributes={...$.listAttributes}},Vr=E=>{E.listAttributes=ps(E.listAttributes,($,j)=>j!=="start")},tl=(E,$)=>{const j=E[$].depth,Se=mn=>mn.depth===j&&!mn.dirty,He=mn=>mn.depth<j;return Pe(ge(E.slice(0,$)),Se,He).orThunk(()=>Pe(E.slice($+1),Se,He))},$o=E=>(Nt(E,($,j)=>{tl(E,j).fold(()=>{$.dirty&&Vr($)},Se=>Js($,Se))}),E),te=E=>{let $=E;return{get:()=>$,set:He=>{$=He}}},me=(E,$,j,Se)=>pn(Se).filter(Xe).fold(()=>{$.each(yo=>{ae(yo.start,Se)&&j.set(!0)});const He=_t(Se,E,j.get());$.each(yo=>{ae(yo.end,Se)&&j.set(!1)});const mn=to(Se).filter(Xe).map(yo=>Qe(E,$,j,yo)).getOr([]);return He.toArray().concat(mn)},He=>Qe(E,$,j,He)),Qe=(E,$,j,Se)=>_(co(Se),He=>{const mn=Xe(He)?Qe:me,yo=E+1;return mn(yo,$,j,He)}),ut=(E,$)=>{const j=te(!1),Se=0;return On(E,He=>({sourceList:He,entries:Qe(Se,$,j,He)}))},Bn=(E,$)=>{const j=$o($);return On(j,Se=>{const He=Fe(Se.content);return We.fromDom(Mn(E,He.dom))})},Yn=(E,$)=>{const j=$o($);return de(E.contentDocument,j).toArray()},Gs=(E,$)=>_(Q($,$n),j=>Ie(j).exists($n)?Yn(E,j):Bn(E,j)),Ko=(E,$)=>{Nt(we(E,Fr),j=>sa($,j))},Hi=E=>{const $=On(Ii(E),We.fromDom);return It(Ne($,qe(kn)),Ne(ge($),qe(kn)),(j,Se)=>({start:j,end:Se}))},Jo=(E,$,j)=>{const Se=ut($,Hi(E));Nt(Se,He=>{Ko(He.entries,j);const mn=Gs(E,He.entries);Nt(mn,yo=>{pt(E,j==="Indent"?"IndentList":"OutdentList",yo.dom)}),bn(He.sourceList,mn),Ge(He.sourceList)})},Os=(E,$)=>{const j=Ut(oa(E)),Se=Ut(Hs(E));let He=!1;if(j.length||Se.length){const mn=E.selection.getBookmark();Jo(E,j,$),is(E,$,Se),E.selection.moveToBookmark(mn),E.selection.setRng(Ss(E.selection.getRng())),E.nodeChanged(),He=!0}return He},Ta=(E,$)=>!ga(E)&&Os(E,$),ac=E=>Ta(E,"Indent"),zi=E=>Ta(E,"Outdent"),gr=E=>Ta(E,"Flatten");var nr=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Ds=ma.DOM,Ir=E=>{const $={},j=Se=>{let He=E[Se?"startContainer":"endContainer"],mn=E[Se?"startOffset":"endOffset"];if(ve(He)){const yo=Ds.create("span",{"data-mce-type":"bookmark"});He.hasChildNodes()?(mn=Math.min(mn,He.childNodes.length-1),Se?He.insertBefore(yo,He.childNodes[mn]):Ds.insertAfter(yo,He.childNodes[mn])):He.appendChild(yo),He=yo,mn=0}$[Se?"startContainer":"endContainer"]=He,$[Se?"startOffset":"endOffset"]=mn};return j(!0),E.collapsed||j(),$},yc=E=>{const $=Se=>{const He=ts=>{var Zo;let qn=(Zo=ts.parentNode)===null||Zo===void 0?void 0:Zo.firstChild,ns=0;for(;qn;){if(qn===ts)return ns;(!ve(qn)||qn.getAttribute("data-mce-type")!=="bookmark")&&ns++,qn=qn.nextSibling}return-1};let mn=E[Se?"startContainer":"endContainer"],yo=E[Se?"startOffset":"endOffset"];if(!!mn){if(ve(mn)&&mn.parentNode){const ts=mn;yo=He(mn),mn=mn.parentNode,Ds.remove(ts),!mn.hasChildNodes()&&Ds.isBlock(mn)&&mn.appendChild(Ds.create("br"))}E[Se?"startContainer":"endContainer"]=mn,E[Se?"startOffset":"endOffset"]=yo}};$(!0),$();const j=Ds.createRng();return j.setStart(E.startContainer,E.startOffset),E.endContainer&&j.setEnd(E.endContainer,E.endOffset),Ss(j)},Tl=E=>{switch(E){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Gr=(E,$,j)=>{const Se=j["list-style-type"]?j["list-style-type"]:null;E.setStyle($,"list-style-type",Se)},jl=(E,$)=>{Zr.each($,(j,Se)=>{E.setAttribute(Se,j)})},vu=(E,$,j)=>{jl($,j["list-attributes"]),Zr.each(E.select("li",$),Se=>{jl(Se,j["list-item-attributes"])})},cc=(E,$,j)=>{Gr(E,$,j),vu(E,$,j)},yu=(E,$,j)=>{Zr.each(j,Se=>E.setStyle($,Se,""))},Vg=(E,$,j,Se)=>{let He=$[j?"startContainer":"endContainer"];const mn=$[j?"startOffset":"endOffset"];for(ve(He)&&(He=He.childNodes[Math.min(mn,He.childNodes.length-1)]||He),!j&&cs(He.nextSibling)&&(He=He.nextSibling);He.parentNode!==Se;){const yo=He.parentNode;if(Co(E,He)||/^(TD|TH)$/.test(yo.nodeName))return He;He=yo}return He},Pc=(E,$,j)=>{const Se=[],He=E.dom,mn=Vg(E,$,!0,j),yo=Vg(E,$,!1,j);let ts;const Zo=[];for(let qn=mn;qn&&(Zo.push(qn),qn!==yo);qn=qn.nextSibling);return Zr.each(Zo,qn=>{var ns;if(Co(E,qn)){Se.push(qn),ts=null;return}if(He.isBlock(qn)||cs(qn)){cs(qn)&&He.remove(qn),ts=null;return}const _r=qn.nextSibling;if(nr.isBookmarkNode(qn)&&(q(_r)||Co(E,_r)||!_r&&qn.parentNode===j)){ts=null;return}ts||(ts=He.create("p"),(ns=qn.parentNode)===null||ns===void 0||ns.insertBefore(ts,qn),Se.push(ts)),ts.appendChild(qn)}),Se},El=(E,$,j)=>{const Se=E.getStyle($,"list-style-type");let He=j?j["list-style-type"]:"";return He=He===null?"":He,Se===He},od=(E,$,j)=>{const Se=E.selection.getRng();let He="LI";const mn=rc(E,E.selection.getStart(!0)),yo=E.dom;if(yo.getContentEditable(E.selection.getNode())==="false")return;$=$.toUpperCase(),$==="DL"&&(He="DT");const ts=Ir(Se),Zo=Pc(E,Se,mn);Zr.each(Zo,qn=>{let ns;const _r=qn.previousSibling,qa=qn.parentNode;In(qa)||(_r&&q(_r)&&_r.nodeName===$&&El(yo,_r,j)?(ns=_r,qn=yo.rename(qn,He),_r.appendChild(qn)):(ns=yo.create($),qa.insertBefore(ns,qn),ns.appendChild(qn),qn=yo.rename(qn,He)),yu(yo,qn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),cc(yo,ns,j),Gl(E.dom,ns))}),E.selection.setRng(yc(ts))},Ia=(E,$)=>q(E)&&E.nodeName===($==null?void 0:$.nodeName),nl=(E,$,j)=>{const Se=E.getStyle($,"list-style-type",!0),He=E.getStyle(j,"list-style-type",!0);return Se===He},wu=(E,$)=>E.className===$.className,Pd=(E,$,j)=>Ia($,j)&&nl(E,$,j)&&wu($,j),Gl=(E,$)=>{let j,Se=$.nextSibling;if(Pd(E,$,Se)){const He=Se;for(;j=He.firstChild;)$.appendChild(j);E.remove(He)}if(Se=$.previousSibling,Pd(E,$,Se)){const He=Se;for(;j=He.lastChild;)$.insertBefore(j,$.firstChild);E.remove(He)}},_m=(E,$,j,Se)=>{if($.nodeName!==j){const He=E.dom.rename($,j);cc(E.dom,He,Se),pt(E,Tl(j),He)}else cc(E.dom,$,Se),pt(E,Tl(j),$)},Fd=(E,$,j,Se,He)=>{const mn=q($);if(mn&&$.nodeName===Se&&!Ei(He))gr(E);else{od(E,Se,He);const yo=Ir(E.selection.getRng()),ts=mn?[$,...j]:j;Zr.each(ts,Zo=>{_m(E,Zo,Se,He)}),E.selection.setRng(yc(yo))}},Ei=E=>"list-style-type"in E,Ug=(E,$,j,Se)=>{if($!==E.getBody())if($)if($.nodeName===j&&!Ei(Se)&&!vc($))gr(E);else{const He=Ir(E.selection.getRng());cc(E.dom,$,Se);const mn=E.dom.rename($,j);Gl(E.dom,mn),E.selection.setRng(yc(He)),od(E,j,Se),pt(E,Tl(j),mn)}else od(E,j,Se),pt(E,Tl(j),$)},Am=(E,$,j)=>{const Se=$c(E);if(X(E,Se))return;const He=ki(E),mn=Qn(j)?j:{};He.length>0?Fd(E,Se,He,$,mn):Ug(E,Se,$,mn)},Cu=ma.DOM,Id=(E,$)=>{const j=$.parentElement;if(j&&j.nodeName==="LI"&&j.firstChild===$){const Se=j.previousSibling;Se&&Se.nodeName==="LI"?(Se.appendChild($),fe(E,j)&&Cu.remove(j)):Cu.setStyle(j,"listStyleType","none")}if(q(j)){const Se=j.previousSibling;Se&&Se.nodeName==="LI"&&Se.appendChild($)}},_i=(E,$)=>{const j=Zr.grep(E.select("ol,ul",$));Zr.each(j,Se=>{Id(E,Se)})},be=(E,$,j,Se)=>{let He=$.startContainer;const mn=$.startOffset;if(ka(He)&&(j?mn<He.data.length:mn>0))return He;const yo=E.schema.getNonEmptyElements();ve(He)&&(He=Le.getNode(He,mn));const ts=new tn(He,Se);j&&Bt(E.dom,He)&&ts.next();const Zo=j?ts.next.bind(ts):ts.prev2.bind(ts);for(;He=Zo();)if(He.nodeName==="LI"&&!He.hasChildNodes()||yo[He.nodeName]||ka(He)&&He.data.length>0)return He;return null},ql=(E,$)=>{const j=$.childNodes;return j.length===1&&!q(j[0])&&E.isBlock(j[0])},Ai=(E,$)=>{ql(E,$)&&E.remove($.firstChild,!0)},Om=(E,$,j)=>{let Se;const He=ql(E,j)?j.firstChild:j;if(Ai(E,$),!fe(E,$,!0))for(;Se=$.firstChild;)He.appendChild(Se)},Dm=(E,$,j)=>{let Se;const He=$.parentNode;if(!pe(E,$)||!pe(E,j))return;q(j.lastChild)&&(Se=j.lastChild),He===j.lastChild&&cs(He.previousSibling)&&E.remove(He.previousSibling);const mn=j.lastChild;mn&&cs(mn)&&$.hasChildNodes()&&E.remove(mn),fe(E,j,!0)&&xs(We.fromDom(j)),Om(E,$,j),Se&&j.appendChild(Se);const ts=se(We.fromDom(j),We.fromDom($))?E.getParents($,q,j):[];E.remove($),Nt(ts,Zo=>{fe(E,Zo)&&Zo!==E.getRoot()&&E.remove(Zo)})},Wg=(E,$,j)=>{xs(We.fromDom(j)),Dm(E.dom,$,j),E.selection.setCursorLocation(j,0)},$s=(E,$,j,Se)=>{const He=E.dom;if(He.isEmpty(Se))Wg(E,j,Se);else{const mn=Ir($);Dm(He,j,Se),E.selection.setRng(yc(mn))}},Ga=(E,$,j,Se)=>{const He=Ir($);Dm(E.dom,j,Se);const mn=yc(He);E.selection.setRng(mn)},Nf=(E,$)=>{const j=E.dom,Se=E.selection,He=Se.getStart(),mn=di(E,He),yo=j.getParent(Se.getStart(),"LI",mn);if(yo){const ts=yo.parentElement;if(ts===E.getBody()&&fe(j,ts))return!0;const Zo=Ss(Se.getRng()),qn=j.getParent(be(E,Zo,$,mn),"LI",mn);if(qn&&qn!==yo)return E.undoManager.transact(()=>{$?$s(E,Zo,qn,yo):es(yo)?zi(E):Ga(E,Zo,yo,qn)}),!0;if(!qn&&!$&&Zo.startOffset===0&&Zo.endOffset===0)return E.undoManager.transact(()=>{gr(E)}),!0}return!1},Vi=(E,$,j)=>{const Se=E.getParent($.parentNode,E.isBlock,j);E.remove($),Se&&E.isEmpty(Se)&&E.remove(Se)},Rm=(E,$)=>{const j=E.dom,Se=E.selection.getStart(),He=di(E,Se),mn=j.getParent(Se,j.isBlock,He);if(mn&&j.isEmpty(mn)){const yo=Ss(E.selection.getRng()),ts=j.getParent(be(E,yo,$,He),"LI",He);if(ts){const Zo=qa=>Y(["td","th","caption"],K(qa)),qn=qa=>qa.dom===He,ns=Ye(We.fromDom(ts),Zo,qn),_r=Ye(We.fromDom(yo.startContainer),Zo,qn);return ze(ns,_r,ae)?(E.undoManager.transact(()=>{Vi(j,mn,He),Gl(j,ts.parentNode),E.selection.select(ts,!0),E.selection.collapse($)}),!0):!1}}return!1},Su=(E,$)=>Nf(E,$)||Rm(E,$),wc=E=>{const $=E.selection.getStart(),j=di(E,$);return E.dom.getParent($,"LI,DT,DD",j)||Ii(E).length>0},Mf=E=>wc(E)?(E.undoManager.transact(()=>{E.execCommand("Delete"),_i(E.dom,E.getBody())}),!0):!1,sd=(E,$)=>{const j=E.selection;return!X(E,j.getNode())&&(j.isCollapsed()?Su(E,$):Mf(E))},Zg=E=>{E.on("ExecCommand",$=>{const j=$.command.toLowerCase();(j==="delete"||j==="forwarddelete")&&wc(E)&&_i(E.dom,E.getBody())}),E.on("keydown",$=>{$.keyCode===en.BACKSPACE?sd(E,!1)&&$.preventDefault():$.keyCode===en.DELETE&&sd(E,!0)&&$.preventDefault()})},Fc=E=>({backspaceDelete:$=>{sd(E,$)}}),Ld=(E,$)=>{const j=$c(E);j===null||X(E,j)||E.undoManager.transact(()=>{Qn($.styles)&&E.dom.setStyles(j,$.styles),Qn($.attrs)&&ks($.attrs,(Se,He)=>E.dom.setAttrib(j,He,Se))})},Nm=E=>{const $=ge(io(E).split("")),j=On($,(Se,He)=>{const mn=Se.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,He)*mn});return ct(j,(Se,He)=>Se+He,0)},rd=E=>{if(E--,E<0)return"";{const $=E%26,j=Math.floor(E/26),Se=rd(j),He=String.fromCharCode("A".charCodeAt(0)+$);return Se+He}},ha=E=>/^[A-Z]+$/.test(E),Hd=E=>/^[a-z]+$/.test(E),$f=E=>/^[0-9]+$/.test(E),Mm=E=>$f(E)?2:ha(E)?0:Hd(E)?1:Tr(E)?3:4,xu=E=>{switch(Mm(E)){case 2:return Oe.some({listStyleType:Oe.none(),start:E});case 0:return Oe.some({listStyleType:Oe.some("upper-alpha"),start:Nm(E).toString()});case 1:return Oe.some({listStyleType:Oe.some("lower-alpha"),start:Nm(E).toString()});case 3:return Oe.some({listStyleType:Oe.none(),start:""});case 4:return Oe.none()}},jg=E=>{const $=parseInt(E.start,10);return nn(E.listStyleType,"upper-alpha")?rd($):nn(E.listStyleType,"lower-alpha")?rd($).toLowerCase():E.start},$m=E=>{const $=$c(E);!ht($)||X(E,$)||E.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:jg({start:E.dom.getAttrib($,"start","1"),listStyleType:Oe.from(E.dom.getStyle($,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:j=>{const Se=j.getData();xu(Se.start).each(He=>{E.execCommand("mceListUpdate",!1,{attrs:{start:He.start==="1"?"":He.start},styles:{"list-style-type":He.listStyleType.getOr("")}})}),j.close()}})},Cc=(E,$)=>()=>{const j=$c(E);return Tn(j)&&j.nodeName===$},Gg=E=>{E.addCommand("mceListProps",()=>{$m(E)})},ol=E=>{E.on("BeforeExecCommand",$=>{const j=$.command.toLowerCase();j==="indent"?ac(E):j==="outdent"&&zi(E)}),E.addCommand("InsertUnorderedList",($,j)=>{Am(E,"UL",j)}),E.addCommand("InsertOrderedList",($,j)=>{Am(E,"OL",j)}),E.addCommand("InsertDefinitionList",($,j)=>{Am(E,"DL",j)}),E.addCommand("RemoveList",()=>{gr(E)}),Gg(E),E.addCommand("mceListUpdate",($,j)=>{Qn(j)&&Ld(E,j)}),E.addQueryStateHandler("InsertUnorderedList",Cc(E,"UL")),E.addQueryStateHandler("InsertOrderedList",Cc(E,"OL")),E.addQueryStateHandler("InsertDefinitionList",Cc(E,"DL"))},ad=E=>{E.on("keydown",$=>{$.keyCode!==en.TAB||en.metaKeyPressed($)||E.undoManager.transact(()=>{($.shiftKey?zi(E):ac(E))&&$.preventDefault()})})},Kl=E=>{rn(E)&&ad(E),Zg(E)},Ui=(E,$)=>j=>Ce(E,He=>{j.setActive(Li(He.parents,$)),j.setEnabled(!X(E,He.element))}),qg=E=>{const $=j=>()=>E.execCommand(j);E.hasPlugin("advlist")||(E.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:$("InsertOrderedList"),onSetup:Ui(E,"OL")}),E.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:$("InsertUnorderedList"),onSetup:Ui(E,"UL")}))},Kg=(E,$)=>j=>Ce(E,He=>j.setEnabled(Li(He.parents,$)&&!X(E,He.element))),Bf=E=>{const $={text:"List properties...",icon:"ordered-list",onAction:()=>E.execCommand("mceListProps"),onSetup:Kg(E,"OL")};E.ui.registry.addMenuItem("listprops",$),E.ui.registry.addContextMenu("lists",{update:j=>{const Se=$c(E,j);return ht(Se)?["listprops"]:[]}})};var sl=()=>{Fo.add("lists",E=>(Qt(E),E.hasPlugin("rtc",!0)?Gg(E):(Kl(E),ol(E)),qg(E),Bf(E),Fc(E)))};sl()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(ve,q,st)=>{var ht;return st(ve,q.prototype)?!0:((ht=ve.constructor)===null||ht===void 0?void 0:ht.name)===q.name},mo=ve=>{const q=typeof ve;return ve===null?"null":q==="object"&&Array.isArray(ve)?"array":q==="object"&&ko(ve,String,(st,ht)=>ht.isPrototypeOf(st))?"string":q},Jn=ve=>q=>mo(q)===ve,An=Jn("string"),so=Jn("object"),Qn=Jn("array"),qt=ve=>ve==null,Kt=ve=>!qt(ve);class Ct{constructor(q,st){this.tag=q,this.value=st}static some(q){return new Ct(!0,q)}static none(){return Ct.singletonNone}fold(q,st){return this.tag?st(this.value):q()}isSome(){return this.tag}isNone(){return!this.tag}map(q){return this.tag?Ct.some(q(this.value)):Ct.none()}bind(q){return this.tag?q(this.value):Ct.none()}exists(q){return this.tag&&q(this.value)}forall(q){return!this.tag||q(this.value)}filter(q){return!this.tag||q(this.value)?this:Ct.none()}getOr(q){return this.tag?this.value:q}or(q){return this.tag?this:q}getOrThunk(q){return this.tag?this.value:q()}orThunk(q){return this.tag?this:q()}getOrDie(q){if(this.tag)return this.value;throw new Error(q!=null?q:"Called getOrDie on None")}static from(q){return Kt(q)?Ct.some(q):Ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(q){this.tag&&q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ct.singletonNone=new Ct(!1);const Tn=Array.prototype.push,ao=(ve,q)=>{for(let st=0,ht=ve.length;st<ht;st++){const In=ve[st];q(In,st)}},Zt=ve=>{const q=[];for(let st=0,ht=ve.length;st<ht;++st){if(!Qn(ve[st]))throw new Error("Arr.flatten item "+st+" was not an array, input: "+ve);Tn.apply(q,ve[st])}return q},yt=ve=>{let q=ve;return{get:()=>q,set:In=>{q=In}}},Rt=Object.keys,an=Object.hasOwnProperty,qe=(ve,q)=>{const st=Rt(ve);for(let ht=0,In=st.length;ht<In;ht++){const Gn=st[ht],Rn=ve[Gn];q(Rn,Gn)}},rt=(ve,q)=>Oe(ve,q)?Ct.from(ve[q]):Ct.none(),Oe=(ve,q)=>an.call(ve,q),oe=ve=>q=>q.options.get(ve),bt=ve=>{const q=ve.options.register;q("audio_template_callback",{processor:"function"}),q("video_template_callback",{processor:"function"}),q("iframe_template_callback",{processor:"function"}),q("media_live_embeds",{processor:"boolean",default:!0}),q("media_filter_html",{processor:"boolean",default:!0}),q("media_url_resolver",{processor:"function"}),q("media_alt_source",{processor:"boolean",default:!0}),q("media_poster",{processor:"boolean",default:!0}),q("media_dimensions",{processor:"boolean",default:!0})},Ft=oe("audio_template_callback"),wt=oe("video_template_callback"),Y=oe("iframe_template_callback"),At=oe("media_live_embeds"),On=oe("media_filter_html"),Nt=oe("media_url_resolver"),we=oe("media_alt_source"),Q=oe("media_poster"),ct=oe("media_dimensions");var Pe=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ne=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ot=tinymce.util.Tools.resolve("tinymce.html.DomParser");const _=Ne.DOM,ge=ve=>ve.replace(/px$/,""),Ue=ve=>{const q=ve.attr("style"),st=q?_.parseStyle(q):{};return{type:"ephox-embed-iri",source:ve.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:rt(st,"max-width").map(ge).getOr(""),height:rt(st,"max-height").map(ge).getOr("")}},Ie=(ve,q)=>{let st={};const In=Ot({validate:!1,forced_root_block:!1},q).parse(ve);for(let Gn=In;Gn;Gn=Gn.walk())if(Gn.type===1){const Rn=Gn.name;if(Gn.attr("data-ephox-embed-iri")){st=Ue(Gn);break}else!st.source&&Rn==="param"&&(st.source=Gn.attr("movie")),(Rn==="iframe"||Rn==="object"||Rn==="embed"||Rn==="video"||Rn==="audio")&&(st.type||(st.type=Rn),st=Pe.extend(Gn.attributes.map,st)),Rn==="script"&&(st={type:"script",source:Gn.attr("src")}),Rn==="source"&&(st.source?st.altsource||(st.altsource=Gn.attr("src")):st.source=Gn.attr("src")),Rn==="img"&&!st.poster&&(st.poster=Gn.attr("src"))}return st.source=st.source||st.src||"",st.altsource=st.altsource||"",st.poster=st.poster||"",st},_e=ve=>{var q;const st={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},ht=(q=ve.toLowerCase().split(".").pop())!==null&&q!==void 0?q:"";return rt(st,ht).getOr("")};var jt=tinymce.util.Tools.resolve("tinymce.html.Node"),nn=tinymce.util.Tools.resolve("tinymce.html.Serializer");const ze=(ve,q={})=>Ot({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...q},ve),It=Ne.DOM,Et=ve=>/^[0-9.]+$/.test(ve)?ve+"px":ve,Ve=(ve,q)=>{const st=q.attr("style"),ht=st?It.parseStyle(st):{};Kt(ve.width)&&(ht["max-width"]=Et(ve.width)),Kt(ve.height)&&(ht["max-height"]=Et(ve.height)),q.attr("style",It.serializeStyle(ht))},R=["source","altsource"],zn=(ve,q,st,ht)=>{let In=0,Gn=0;const Rn=ze(ht);Rn.addNodeFilter("source",es=>In=es.length);const cs=Rn.parse(ve);for(let es=cs;es;es=es.walk())if(es.type===1){const Co=es.name;if(es.attr("data-ephox-embed-iri")){Ve(q,es);break}else{switch(Co){case"video":case"object":case"embed":case"img":case"iframe":q.height!==void 0&&q.width!==void 0&&(es.attr("width",q.width),es.attr("height",q.height));break}if(st)switch(Co){case"video":es.attr("poster",q.poster),es.attr("src",null);for(let Bt=In;Bt<2;Bt++)if(q[R[Bt]]){const fe=new jt("source",1);fe.attr("src",q[R[Bt]]),fe.attr("type",q[R[Bt]+"mime"]||null),es.append(fe)}break;case"iframe":es.attr("src",q.source);break;case"object":const rr=es.getAll("img").length>0;if(q.poster&&!rr){es.attr("src",q.poster);const Bt=new jt("img",1);Bt.attr("src",q.poster),Bt.attr("width",q.width),Bt.attr("height",q.height),es.append(Bt)}break;case"source":if(Gn<2&&(es.attr("src",q[R[Gn]]),es.attr("type",q[R[Gn]+"mime"]||null),!q[R[Gn]])){es.remove();continue}Gn++;break;case"img":q.poster||es.remove();break}}}return nn({},ht).serialize(cs)},Ee=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],xe=ve=>{const q=ve.match(/^(https?:\/\/|www\.)(.+)$/i);return q&&q.length>1?q[1]==="www."?"https://":q[1]:"https://"},We=(ve,q)=>{const st=xe(q),ht=ve.regex.exec(q);let In=st+ve.url;if(Kt(ht))for(let Gn=0;Gn<ht.length;Gn++)In=In.replace("$"+Gn,()=>ht[Gn]?ht[Gn]:"");return In.replace(/\?$/,"")},ke=ve=>{const q=Ee.filter(st=>st.regex.test(ve));return q.length>0?Pe.extend({},q[0],{url:We(q[0],ve)}):null},ae=(ve,q)=>{if(q)return q(ve);{const st=ve.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ve.source+'" width="'+ve.width+'" height="'+ve.height+'"'+st+"></iframe>"}},se=ve=>{let q='<object data="'+ve.source+'" width="'+ve.width+'" height="'+ve.height+'" type="application/x-shockwave-flash">';return ve.poster&&(q+='<img src="'+ve.poster+'" width="'+ve.width+'" height="'+ve.height+'" />'),q+="</object>",q},re=(ve,q)=>q?q(ve):'<audio controls="controls" src="'+ve.source+'">'+(ve.altsource?`
<source src="`+ve.altsource+'"'+(ve.altsourcemime?' type="'+ve.altsourcemime+'"':"")+` />
`:"")+"</audio>",z=(ve,q)=>q?q(ve):'<video width="'+ve.width+'" height="'+ve.height+'"'+(ve.poster?' poster="'+ve.poster+'"':"")+` controls="controls">
<source src="`+ve.source+'"'+(ve.sourcemime?' type="'+ve.sourcemime+'"':"")+` />
`+(ve.altsource?'<source src="'+ve.altsource+'"'+(ve.altsourcemime?' type="'+ve.altsourcemime+'"':"")+` />
`:"")+"</video>",K=ve=>'<script src="'+ve.source+'"><\/script>',H=(ve,q)=>{var st;const ht=Pe.extend({},q);if(!ht.source&&(Pe.extend(ht,Ie((st=ht.embed)!==null&&st!==void 0?st:"",ve.schema)),!ht.source))return"";ht.altsource||(ht.altsource=""),ht.poster||(ht.poster=""),ht.source=ve.convertURL(ht.source,"source"),ht.altsource=ve.convertURL(ht.altsource,"source"),ht.sourcemime=_e(ht.source),ht.altsourcemime=_e(ht.altsource),ht.poster=ve.convertURL(ht.poster,"poster");const In=ke(ht.source);if(In&&(ht.source=In.url,ht.type=In.type,ht.allowfullscreen=In.allowFullscreen,ht.width=ht.width||String(In.w),ht.height=ht.height||String(In.h)),ht.embed)return zn(ht.embed,ht,!0,ve.schema);{const Gn=Ft(ve),Rn=wt(ve),cs=Y(ve);return ht.width=ht.width||"300",ht.height=ht.height||"150",Pe.each(ht,(es,Co)=>{ht[Co]=ve.dom.encode(""+es)}),ht.type==="iframe"?ae(ht,cs):ht.sourcemime==="application/x-shockwave-flash"?se(ht):ht.sourcemime.indexOf("audio")!==-1?re(ht,Gn):ht.type==="script"?K(ht):z(ht,Rn)}},Z=ve=>ve.hasAttribute("data-mce-object")||ve.hasAttribute("data-ephox-embed-iri"),$e=ve=>{ve.on("click keyup touchend",()=>{const q=ve.selection.getNode();q&&ve.dom.hasClass(q,"mce-preview-object")&&ve.dom.getAttrib(q,"data-mce-selected")&&q.setAttribute("data-mce-selected","2")}),ve.on("ObjectSelected",q=>{q.target.getAttribute("data-mce-object")==="script"&&q.preventDefault()}),ve.on("ObjectResized",q=>{const st=q.target;if(st.getAttribute("data-mce-object")){let ht=st.getAttribute("data-mce-html");ht&&(ht=unescape(ht),st.setAttribute("data-mce-html",escape(zn(ht,{width:String(q.width),height:String(q.height)},!1,ve.schema))))}})},Be={},zt=(ve,q,st)=>new Promise((ht,In)=>{const Gn=Rn=>(Rn.html&&(Be[ve.source]=Rn),ht({url:ve.source,html:Rn.html?Rn.html:q(ve)}));Be[ve.source]?Gn(Be[ve.source]):st({url:ve.source},Gn,In)}),Jt=(ve,q)=>Promise.resolve({html:q(ve),url:ve.source}),eo=ve=>q=>H(ve,q),co=(ve,q)=>{const st=Nt(ve);return st?zt(q,eo(ve),st):Jt(q,eo(ve))},jn=ve=>Oe(Be,ve),pn=(ve,q)=>rt(q,ve).bind(st=>rt(st,"meta")),to=(ve,q,st)=>ht=>{const In=()=>rt(ve,ht),Gn=()=>rt(q,ht),Rn=Co=>rt(Co,"value").bind(rr=>rr.length>0?Ct.some(rr):Ct.none()),cs=()=>In().bind(Co=>so(Co)?Rn(Co).orThunk(Gn):Gn().orThunk(()=>Ct.from(Co))),es=()=>Gn().orThunk(()=>In().bind(Co=>so(Co)?Rn(Co):Ct.from(Co)));return{[ht]:(ht===st?cs():es()).getOr("")}},De=(ve,q)=>{const st={};return rt(ve,"dimensions").each(ht=>{ao(["width","height"],In=>{rt(q,In).orThunk(()=>rt(ht,In)).each(Gn=>st[In]=Gn)})}),st},Ye=(ve,q)=>{const st=q&&q!=="dimensions"?pn(q,ve).getOr({}):{},ht=to(ve,st,q);return{...ht("source"),...ht("altsource"),...ht("poster"),...ht("embed"),...De(ve,st)}},Dt=ve=>{const q={...ve,source:{value:rt(ve,"source").getOr("")},altsource:{value:rt(ve,"altsource").getOr("")},poster:{value:rt(ve,"poster").getOr("")}};return ao(["width","height"],st=>{rt(ve,st).each(ht=>{const In=q.dimensions||{};In[st]=ht,q.dimensions=In})}),q},on=ve=>q=>{const st=q&&q.msg?"Media embed handler error: "+q.msg:"Media embed handler threw unknown error.";ve.notificationManager.open({type:"error",text:st})},wn=ve=>{const q=ve.selection.getNode(),st=Z(q)?ve.serializer.serialize(q,{selection:!0}):"";return{embed:st,...Ie(st,ve.schema)}},bn=(ve,q)=>st=>{if(An(st.url)&&st.url.trim().length>0){const ht=st.html,Gn={...Ie(ht,q.schema),source:st.url,embed:ht};ve.setData(Dt(Gn))}},Oo=(ve,q)=>{const st=ve.dom.select("*[data-mce-object]");for(let ht=0;ht<q.length;ht++)for(let In=st.length-1;In>=0;In--)q[ht]===st[In]&&st.splice(In,1);ve.selection.select(st[0])},xs=(ve,q)=>{const st=ve.dom.select("*[data-mce-object]");ve.insertContent(q),Oo(ve,st),ve.nodeChanged()},Ge=(ve,q,st)=>{var ht;q.embed=zn((ht=q.embed)!==null&&ht!==void 0?ht:"",q,!1,st.schema),q.embed&&(ve.source===q.source||jn(q.source))?xs(st,q.embed):co(st,q).then(In=>{xs(st,In.html)}).catch(on(st))},Le=ve=>{const q=wn(ve),st=yt(q),ht=Dt(q),In=(_n,dn)=>{const Mn=Ye(dn.getData(),"source");_n.source!==Mn.source&&(bn(rn,ve)({url:Mn.source,html:""}),co(ve,Mn).then(bn(rn,ve)).catch(on(ve)))},Gn=_n=>{var dn;const Mn=Ye(_n.getData()),Kn=Ie((dn=Mn.embed)!==null&&dn!==void 0?dn:"",ve.schema);_n.setData(Dt(Kn))},Rn=(_n,dn)=>{const Mn=Ye(_n.getData(),dn),Kn=H(ve,Mn);_n.setData(Dt({...Mn,embed:Kn}))},cs=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],es=ct(ve)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Co={title:"General",name:"general",items:Zt([cs,es])},Bt={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},fe=[];we(ve)&&fe.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Q(ve)&&fe.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const pe={title:"Advanced",name:"advanced",items:fe},kt=[Co,Bt];fe.length>0&&kt.push(pe);const Qt={type:"tabpanel",tabs:kt},rn=ve.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Qt,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:_n=>{const dn=Ye(_n.getData());Ge(st.get(),dn,ve),_n.close()},onChange:(_n,dn)=>{switch(dn.name){case"source":In(st.get(),_n);break;case"embed":Gn(_n);break;case"dimensions":case"altsource":case"poster":Rn(_n,dn.name);break}st.set(Ye(_n.getData()))},initialData:ht})},tn=ve=>({showDialog:()=>{Le(ve)}}),en=ve=>{const q=()=>{Le(ve)};ve.addCommand("mceMedia",q)},Ut=(ve,q,st)=>q===""||ve.length>=q.length&&ve.substr(st,st+q.length)===q,Vn=(ve,q)=>Ut(ve,q,0);var ks=tinymce.util.Tools.resolve("tinymce.Env");const kr=ve=>{const q=ve.name;return q==="iframe"||q==="video"||q==="audio"},da=(ve,q,st,ht=null)=>{const In=ve.attr(st);return Kt(In)?In:Oe(q,st)?null:ht},ps=(ve,q,st)=>{const ht=q.name==="img"||ve.name==="video",In=ht?"300":null,Gn=ve.name==="audio"?"30":"150",Rn=ht?Gn:null;q.attr({width:da(ve,st,"width",In),height:da(ve,st,"height",Rn)})},bc=(ve,q,st,ht)=>{const In=ze(ve.schema).parse(ht,{context:q});for(;In.firstChild;)st.append(In.firstChild)},vs=(ve,q)=>{const st=q.name,ht=new jt("img",1);return uo(ve,q,ht),ps(q,ht,{}),ht.attr({style:q.attr("style"),src:ks.transparentSrc,"data-mce-object":st,class:"mce-object mce-object-"+st}),ht},as=(ve,q)=>{var st;const ht=q.name,In=new jt("span",1);In.attr({contentEditable:"false",style:q.attr("style"),"data-mce-object":ht,class:"mce-preview-object mce-object-"+ht}),uo(ve,q,In);const Gn=ve.dom.parseStyle((st=q.attr("style"))!==null&&st!==void 0?st:""),Rn=new jt(ht,1);if(ps(q,Rn,Gn),Rn.attr({src:q.attr("src"),style:q.attr("style"),class:q.attr("class")}),ht==="iframe")Rn.attr({allowfullscreen:q.attr("allowfullscreen"),frameborder:"0"});else{ao(["controls","crossorigin","currentTime","loop","muted","poster","preload"],rr=>{Rn.attr(rr,q.attr(rr))});const Co=In.attr("data-mce-html");Kt(Co)&&bc(ve,ht,Rn,unescape(Co))}const cs=new jt("span",1);return cs.attr("class","mce-shim"),In.append(Rn),In.append(cs),In},uo=(ve,q,st)=>{var ht;const In=(ht=q.attributes)!==null&&ht!==void 0?ht:[];let Gn=In.length;for(;Gn--;){const Co=In[Gn].name;let rr=In[Gn].value;Co!=="width"&&Co!=="height"&&Co!=="style"&&!Vn(Co,"data-mce-")&&((Co==="data"||Co==="src")&&(rr=ve.convertURL(rr,Co)),st.attr("data-mce-p-"+Co,rr))}const Rn=nn({inner:!0},ve.schema),cs=new jt("div",1);ao(q.children(),Co=>cs.append(Co));const es=Rn.serialize(cs);es&&(st.attr("data-mce-html",escape(es)),st.empty())},dr=ve=>{const q=ve.attr("class");return An(q)&&/\btiny-pageembed\b/.test(q)},Wr=ve=>{let q=ve;for(;q=q.parent;)if(q.attr("data-ephox-embed-iri")||dr(q))return!0;return!1},Fs=ve=>q=>{let st=q.length,ht;for(;st--;)ht=q[st],ht.parent&&(ht.parent.attr("data-mce-object")||(kr(ht)&&At(ve)?Wr(ht)||ht.replace(as(ve,ht)):Wr(ht)||ht.replace(vs(ve,ht))))},ma=(ve,q,st)=>{const ht=On(ve);return ze(ve.schema,{validate:ht}).parse(st,{context:q})},Zr=ve=>{ve.on("PreInit",()=>{const{schema:q,serializer:st,parser:ht}=ve,In=q.getBoolAttrs();ao("webkitallowfullscreen mozallowfullscreen".split(" "),Gn=>{In[Gn]={}}),qe({embed:["wmode"]},(Gn,Rn)=>{const cs=q.getElementRule(Rn);cs&&ao(Gn,es=>{cs.attributes[es]={},cs.attributesOrder.push(es)})}),ht.addNodeFilter("iframe,video,audio,object,embed,script",Fs(ve)),st.addAttributeFilter("data-mce-object",(Gn,Rn)=>{var cs;let es=Gn.length;for(;es--;){const Co=Gn[es];if(!Co.parent)continue;const rr=Co.attr(Rn),Bt=new jt(rr,1);if(rr!=="audio"&&rr!=="script"){const Qt=Co.attr("class");Qt&&Qt.indexOf("mce-preview-object")!==-1&&Co.firstChild?Bt.attr({width:Co.firstChild.attr("width"),height:Co.firstChild.attr("height")}):Bt.attr({width:Co.attr("width"),height:Co.attr("height")})}Bt.attr({style:Co.attr("style")});const fe=(cs=Co.attributes)!==null&&cs!==void 0?cs:[];let pe=fe.length;for(;pe--;){const Qt=fe[pe].name;Qt.indexOf("data-mce-p-")===0&&Bt.attr(Qt.substr(11),fe[pe].value)}rr==="script"&&Bt.attr("type","text/javascript");const kt=Co.attr("data-mce-html");if(kt){const Qt=ma(ve,rr,unescape(kt));ao(Qt.children(),rn=>Bt.append(rn))}Co.replace(Bt)}})}),ve.on("SetContent",()=>{const q=ve.dom;ao(q.select("span.mce-preview-object"),st=>{q.select("span.mce-shim",st).length===0&&q.add(st,"span",{class:"mce-shim"})})})},sc=ve=>{ve.on("ResolveName",q=>{let st;q.target.nodeType===1&&(st=q.target.getAttribute("data-mce-object"))&&(q.name=st)})},Ys=ve=>{const q=()=>ve.execCommand("mceMedia");ve.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:q,onSetup:st=>{const ht=ve.selection;return st.setActive(Z(ht.getNode())),ht.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",st.setActive).unbind}}),ve.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:q})};var ka=()=>{Fo.add("media",ve=>(bt(ve),en(ve),Ys(ve),sc(ve),Zr(ve),$e(ve),tn(ve)))};ka()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=qe=>rt=>typeof rt===qe,mo=ko("boolean"),Jn=ko("number"),An=qe=>rt=>rt.options.get(qe),so=qe=>{const rt=qe.options.register;rt("nonbreaking_force_tab",{processor:Oe=>mo(Oe)?{value:Oe?3:0,valid:!0}:Jn(Oe)?{value:Oe,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),rt("nonbreaking_wrap",{processor:"boolean",default:!0})},Qn=An("nonbreaking_force_tab"),qt=An("nonbreaking_wrap"),Kt=(qe,rt)=>{let Oe="";for(let oe=0;oe<rt;oe++)Oe+=qe;return Oe},Ct=qe=>qe.plugins.visualchars?qe.plugins.visualchars.isEnabled():!1,Tn=(qe,rt)=>{const Oe=()=>Ct(qe)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",oe=()=>`<span class="${Oe()}" contenteditable="false">${Kt("&nbsp;",rt)}</span>`,Ft=qt(qe)||qe.plugins.visualchars?oe():Kt("&nbsp;",rt);qe.undoManager.transact(()=>qe.insertContent(Ft))},ao=qe=>{qe.addCommand("mceNonBreaking",()=>{Tn(qe,1)})};var Zt=tinymce.util.Tools.resolve("tinymce.util.VK");const yt=qe=>{const rt=Qn(qe);rt>0&&qe.on("keydown",Oe=>{if(Oe.keyCode===Zt.TAB&&!Oe.isDefaultPrevented()){if(Oe.shiftKey)return;Oe.preventDefault(),Oe.stopImmediatePropagation(),Tn(qe,rt)}})},Rt=qe=>{const rt=()=>qe.execCommand("mceNonBreaking");qe.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:rt}),qe.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:rt})};var an=()=>{Fo.add("nonbreaking",qe=>{so(qe),ao(qe),Rt(qe),yt(qe)})};an()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager"),ko=tinymce.util.Tools.resolve("tinymce.Env");const mo=yt=>Rt=>Rt.options.get(yt),Jn=yt=>{const Rt=yt.options.register;Rt("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),Rt("pagebreak_split_block",{processor:"boolean",default:!1})},An=mo("pagebreak_separator"),so=mo("pagebreak_split_block"),Qn="mce-pagebreak",qt=yt=>{const Rt=`<img src="${ko.transparentSrc}" class="${Qn}" data-mce-resize="false" data-mce-placeholder />`;return yt?`<p>${Rt}</p>`:Rt},Kt=yt=>{const Rt=An(yt),an=()=>so(yt),qe=new RegExp(Rt.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,rt=>"\\"+rt),"gi");yt.on("BeforeSetContent",rt=>{rt.content=rt.content.replace(qe,qt(an()))}),yt.on("PreInit",()=>{yt.serializer.addNodeFilter("img",rt=>{let Oe=rt.length,oe,bt;for(;Oe--;)if(oe=rt[Oe],bt=oe.attr("class"),bt&&bt.indexOf(Qn)!==-1){const Ft=oe.parent;if(Ft&&yt.schema.getBlockElements()[Ft.name]&&an()){Ft.type=3,Ft.value=Rt,Ft.raw=!0,oe.remove();continue}oe.type=3,oe.value=Rt,oe.raw=!0}})})},Ct=yt=>{yt.addCommand("mcePageBreak",()=>{yt.insertContent(qt(so(yt)))})},Tn=yt=>{yt.on("ResolveName",Rt=>{Rt.target.nodeName==="IMG"&&yt.dom.hasClass(Rt.target,Qn)&&(Rt.name="pagebreak")})},ao=yt=>{const Rt=()=>yt.execCommand("mcePageBreak");yt.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Rt}),yt.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Rt})};var Zt=()=>{Fo.add("pagebreak",yt=>{Jn(yt),Ct(yt),ao(yt),Kt(yt),Tn(yt)})};Zt()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager"),ko=tinymce.util.Tools.resolve("tinymce.Env"),mo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Jn=yt=>Rt=>Rt.options.get(yt),An=Jn("content_style"),so=Jn("content_css_cors"),Qn=Jn("body_class"),qt=Jn("body_id"),Kt=yt=>{var Rt;let an="";const qe=yt.dom.encode,rt=(Rt=An(yt))!==null&&Rt!==void 0?Rt:"";an+='<base href="'+qe(yt.documentBaseURI.getURI())+'">';const Oe=so(yt)?' crossorigin="anonymous"':"";mo.each(yt.contentCSS,Nt=>{an+='<link type="text/css" rel="stylesheet" href="'+qe(yt.documentBaseURI.toAbsolute(Nt))+'"'+Oe+">"}),rt&&(an+='<style type="text/css">'+rt+"</style>");const oe=qt(yt),bt=Qn(yt),wt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(ko.os.isMacOS()||ko.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",Y=yt.getBody().dir,At=Y?' dir="'+qe(Y)+'"':"";return"<!DOCTYPE html><html><head>"+an+'</head><body id="'+qe(oe)+'" class="mce-content-body '+qe(bt)+'"'+At+">"+yt.getContent()+wt+"</body></html>"},Ct=yt=>{const Rt=Kt(yt);yt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Rt}}).focus("close")},Tn=yt=>{yt.addCommand("mcePreview",()=>{Ct(yt)})},ao=yt=>{const Rt=()=>yt.execCommand("mcePreview");yt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Rt}),yt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Rt})};var Zt=()=>{Fo.add("preview",yt=>{Tn(yt),ao(yt)})};Zt()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(Ee,xe,We)=>{var ke;return We(Ee,xe.prototype)?!0:((ke=Ee.constructor)===null||ke===void 0?void 0:ke.name)===xe.name},mo=Ee=>{const xe=typeof Ee;return Ee===null?"null":xe==="object"&&Array.isArray(Ee)?"array":xe==="object"&&ko(Ee,String,(We,ke)=>ke.isPrototypeOf(We))?"string":xe},Jn=Ee=>xe=>mo(xe)===Ee,An=Ee=>xe=>typeof xe===Ee,so=Jn("string"),Qn=An("boolean"),qt=Ee=>Ee==null,Kt=Ee=>!qt(Ee),Ct=An("function"),Tn=Ee=>xe=>xe.options.get(Ee),ao=Ee=>{const xe=Ee.options.register,We=re=>z=>{const K=Qn(z)||so(z);return K?Qn(z)?{value:z?re:"",valid:K}:{value:z.trim(),valid:K}:{valid:!1,message:"Must be a boolean or string."}},ke="bold italic | quicklink h2 h3 blockquote";xe("quickbars_selection_toolbar",{processor:We(ke),default:ke});const ae="quickimage quicktable";xe("quickbars_insert_toolbar",{processor:We(ae),default:ae});const se="alignleft aligncenter alignright";xe("quickbars_image_toolbar",{processor:We(se),default:se})},Zt=Tn("quickbars_selection_toolbar"),yt=Tn("quickbars_insert_toolbar"),Rt=Tn("quickbars_image_toolbar");let an=0;const qe=Ee=>{const We=new Date().getTime(),ke=Math.floor(Math.random()*1e9);return an++,Ee+"_"+ke+an+String(We)},rt=(Ee,xe,We)=>{Ee.execCommand("mceInsertTable",!1,{rows:We,columns:xe})},Oe=(Ee,xe,We)=>{const ke=Ee.editorUpload.blobCache,ae=ke.create(qe("mceu"),We,xe);ke.add(ae),Ee.insertContent(Ee.dom.createHTML("img",{src:ae.blobUri()}))},oe=Ee=>new Promise(xe=>{const We=new FileReader;We.onloadend=()=>{xe(We.result.split(",")[1])},We.readAsDataURL(Ee)});var bt=tinymce.util.Tools.resolve("tinymce.Env"),Ft=tinymce.util.Tools.resolve("tinymce.util.Delay");const wt=Ee=>new Promise(xe=>{const We=document.createElement("input");We.type="file",We.accept="image/*",We.style.position="fixed",We.style.left="0",We.style.top="0",We.style.opacity="0.001",document.body.appendChild(We);const ke=se=>{xe(Array.prototype.slice.call(se.target.files))};We.addEventListener("change",ke);const ae=se=>{const re=()=>{var z;xe([]),(z=We.parentNode)===null||z===void 0||z.removeChild(We)};bt.os.isAndroid()&&se.type!=="remove"?Ft.setEditorTimeout(Ee,re,0):re(),Ee.off("focusin remove",ae)};Ee.on("focusin remove",ae),We.click()}),Y=Ee=>{Ee.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{wt(Ee).then(xe=>{if(xe.length>0){const We=xe[0];oe(We).then(ke=>{Oe(Ee,ke,We)})}})}}),Ee.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{rt(Ee,2,2)}})},On=(Ee=>()=>Ee)(!1);class Nt{constructor(xe,We){this.tag=xe,this.value=We}static some(xe){return new Nt(!0,xe)}static none(){return Nt.singletonNone}fold(xe,We){return this.tag?We(this.value):xe()}isSome(){return this.tag}isNone(){return!this.tag}map(xe){return this.tag?Nt.some(xe(this.value)):Nt.none()}bind(xe){return this.tag?xe(this.value):Nt.none()}exists(xe){return this.tag&&xe(this.value)}forall(xe){return!this.tag||xe(this.value)}filter(xe){return!this.tag||xe(this.value)?this:Nt.none()}getOr(xe){return this.tag?this.value:xe}or(xe){return this.tag?this:xe}getOrThunk(xe){return this.tag?this.value:xe()}orThunk(xe){return this.tag?this:xe()}getOrDie(xe){if(this.tag)return this.value;throw new Error(xe!=null?xe:"Called getOrDie on None")}static from(xe){return Kt(xe)?Nt.some(xe):Nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(xe){this.tag&&xe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Nt.singletonNone=new Nt(!1),typeof window<"u"||Function("return this;")();const we=1,Q=Ee=>Ee.dom.nodeName.toLowerCase(),ct=(Ee,xe)=>{const We=Ee.dom;return We&&We.hasAttribute?We.hasAttribute(xe):!1};var Pe=(Ee,xe,We,ke,ae)=>Ee(We,ke)?Nt.some(We):Ct(ae)&&ae(We)?Nt.none():xe(We,ke,ae);const Ne=(Ee,xe)=>{const ke=(xe||document).createElement("div");if(ke.innerHTML=Ee,!ke.hasChildNodes()||ke.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,Ee),new Error(ae)}return ge(ke.childNodes[0])},Ot=(Ee,xe)=>{const ke=(xe||document).createElement(Ee);return ge(ke)},_=(Ee,xe)=>{const ke=(xe||document).createTextNode(Ee);return ge(ke)},ge=Ee=>{if(Ee==null)throw new Error("Node cannot be null or undefined");return{dom:Ee}},Ie={fromHtml:Ne,fromTag:Ot,fromText:_,fromDom:ge,fromPoint:(Ee,xe,We)=>Nt.from(Ee.dom.elementFromPoint(xe,We)).map(ge)},_e=(Ee,xe)=>{const We=Ee.dom;if(We.nodeType!==we)return!1;{const ke=We;if(ke.matches!==void 0)return ke.matches(xe);if(ke.msMatchesSelector!==void 0)return ke.msMatchesSelector(xe);if(ke.webkitMatchesSelector!==void 0)return ke.webkitMatchesSelector(xe);if(ke.mozMatchesSelector!==void 0)return ke.mozMatchesSelector(xe);throw new Error("Browser lacks native selectors")}},jt=(Ee,xe,We)=>{let ke=Ee.dom;const ae=Ct(We)?We:On;for(;ke.parentNode;){ke=ke.parentNode;const se=Ie.fromDom(ke);if(xe(se))return Nt.some(se);if(ae(se))break}return Nt.none()},nn=(Ee,xe,We)=>Pe((ae,se)=>se(ae),jt,Ee,xe,We),ze=(Ee,xe,We)=>nn(Ee,xe,We).isSome(),It=(Ee,xe,We)=>jt(Ee,ke=>_e(ke,xe),We),Et=(Ee,xe,We)=>Pe((ae,se)=>_e(ae,se),It,Ee,xe,We),Ve=Ee=>{const xe=yt(Ee);xe.length>0&&Ee.ui.registry.addContextToolbar("quickblock",{predicate:We=>{const ke=Ie.fromDom(We),ae=Ee.schema.getTextBlockElements(),se=re=>re.dom===Ee.getBody();return!ct(ke,"data-mce-bogus")&&Et(ke,'table,[data-mce-bogus="all"]',se).fold(()=>ze(ke,re=>Q(re)in ae&&Ee.dom.isEmpty(re.dom),se),On)},items:xe,position:"line",scope:"editor"})},R=Ee=>{const xe=se=>Ee.dom.getContentEditableParent(se)!=="false",We=se=>se.nodeName==="IMG"||se.nodeName==="FIGURE"&&/image/i.test(se.className),ke=Rt(Ee);ke.length>0&&Ee.ui.registry.addContextToolbar("imageselection",{predicate:We,items:ke,position:"node"});const ae=Zt(Ee);ae.length>0&&Ee.ui.registry.addContextToolbar("textselection",{predicate:se=>!We(se)&&!Ee.selection.isCollapsed()&&xe(se),items:ae,position:"selection",scope:"editor"})};var zn=()=>{Fo.add("quickbars",Ee=>{ao(Ee),Y(Ee),Ve(Ee),R(Ee)})};zn()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=(rt=>Oe=>typeof Oe===rt)("function");var Jn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),An=tinymce.util.Tools.resolve("tinymce.util.Tools");const so=rt=>Oe=>Oe.options.get(rt),Qn=rt=>{const Oe=rt.options.register;Oe("save_enablewhendirty",{processor:"boolean",default:!0}),Oe("save_onsavecallback",{processor:"function"}),Oe("save_oncancelcallback",{processor:"function"})},qt=so("save_enablewhendirty"),Kt=so("save_onsavecallback"),Ct=so("save_oncancelcallback"),Tn=(rt,Oe)=>{rt.notificationManager.open({text:Oe,type:"error"})},ao=rt=>{const Oe=Jn.DOM.getParent(rt.id,"form");if(qt(rt)&&!rt.isDirty())return;rt.save();const oe=Kt(rt);if(mo(oe)){oe.call(rt,rt),rt.nodeChanged();return}Oe?(rt.setDirty(!1),(!Oe.onsubmit||Oe.onsubmit())&&(typeof Oe.submit=="function"?Oe.submit():Tn(rt,"Error: Form submit field collision.")),rt.nodeChanged()):Tn(rt,"Error: No form element found.")},Zt=rt=>{const Oe=An.trim(rt.startContent),oe=Ct(rt);if(mo(oe)){oe.call(rt,rt);return}rt.resetContent(Oe)},yt=rt=>{rt.addCommand("mceSave",()=>{ao(rt)}),rt.addCommand("mceCancel",()=>{Zt(rt)})},Rt=rt=>Oe=>{const oe=()=>{Oe.setEnabled(!qt(rt)||rt.isDirty())};return oe(),rt.on("NodeChange dirty",oe),()=>rt.off("NodeChange dirty",oe)},an=rt=>{rt.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>rt.execCommand("mceSave"),onSetup:Rt(rt)}),rt.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>rt.execCommand("mceCancel"),onSetup:Rt(rt)}),rt.addShortcut("Meta+S","","mceSave")};var qe=()=>{Fo.add("save",rt=>{Qn(rt),an(rt),yt(rt)})};qe()})();(function(){const Fo=fe=>{let pe=fe;return{get:()=>pe,set:rn=>{pe=rn}}};var ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=(fe,pe,kt)=>{var Qt;return kt(fe,pe.prototype)?!0:((Qt=fe.constructor)===null||Qt===void 0?void 0:Qt.name)===pe.name},Jn=fe=>{const pe=typeof fe;return fe===null?"null":pe==="object"&&Array.isArray(fe)?"array":pe==="object"&&mo(fe,String,(kt,Qt)=>Qt.isPrototypeOf(kt))?"string":pe},An=fe=>pe=>Jn(pe)===fe,so=fe=>pe=>typeof pe===fe,Qn=An("string"),qt=An("array"),Kt=so("boolean"),Ct=fe=>fe==null,Tn=fe=>!Ct(fe),ao=so("number"),Zt=()=>{},yt=fe=>()=>fe,Rt=yt(!0),qe=yt("[!-#%-*,-\\/:;?@\\[-\\]_{}\xA1\xAB\xB7\xBB\xBF;\xB7\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1361-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u3008\u3009\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30\u2E31\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]");class rt{constructor(pe,kt){this.tag=pe,this.value=kt}static some(pe){return new rt(!0,pe)}static none(){return rt.singletonNone}fold(pe,kt){return this.tag?kt(this.value):pe()}isSome(){return this.tag}isNone(){return!this.tag}map(pe){return this.tag?rt.some(pe(this.value)):rt.none()}bind(pe){return this.tag?pe(this.value):rt.none()}exists(pe){return this.tag&&pe(this.value)}forall(pe){return!this.tag||pe(this.value)}filter(pe){return!this.tag||pe(this.value)?this:rt.none()}getOr(pe){return this.tag?this.value:pe}or(pe){return this.tag?this:pe}getOrThunk(pe){return this.tag?this.value:pe()}orThunk(pe){return this.tag?this:pe()}getOrDie(pe){if(this.tag)return this.value;throw new Error(pe!=null?pe:"Called getOrDie on None")}static from(pe){return Tn(pe)?rt.some(pe):rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(pe){this.tag&&pe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}rt.singletonNone=new rt(!1);const Oe=qe;var oe=tinymce.util.Tools.resolve("tinymce.Env"),bt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ft=Array.prototype.slice,wt=Array.prototype.push,Y=(fe,pe)=>{const kt=fe.length,Qt=new Array(kt);for(let rn=0;rn<kt;rn++){const _n=fe[rn];Qt[rn]=pe(_n,rn)}return Qt},At=(fe,pe)=>{for(let kt=0,Qt=fe.length;kt<Qt;kt++){const rn=fe[kt];pe(rn,kt)}},On=(fe,pe)=>{for(let kt=fe.length-1;kt>=0;kt--){const Qt=fe[kt];pe(Qt,kt)}},Nt=(fe,pe)=>{if(fe.length===0)return[];{let kt=pe(fe[0]);const Qt=[];let rn=[];for(let _n=0,dn=fe.length;_n<dn;_n++){const Mn=fe[_n],Kn=pe(Mn);Kn!==kt&&(Qt.push(rn),rn=[]),kt=Kn,rn.push(Mn)}return rn.length!==0&&Qt.push(rn),Qt}},we=(fe,pe,kt)=>(At(fe,(Qt,rn)=>{kt=pe(kt,Qt,rn)}),kt),Q=fe=>{const pe=[];for(let kt=0,Qt=fe.length;kt<Qt;++kt){if(!qt(fe[kt]))throw new Error("Arr.flatten item "+kt+" was not an array, input: "+fe);wt.apply(pe,fe[kt])}return pe},ct=(fe,pe)=>Q(Y(fe,pe)),Pe=(fe,pe)=>{const kt=Ft.call(fe,0);return kt.sort(pe),kt},Ne=Object.hasOwnProperty,Ot=(fe,pe)=>Ne.call(fe,pe);typeof window<"u"||Function("return this;")();const _=9,ge=11,Ue=1,Ie=3,_e=fe=>fe.dom.nodeType,nn=(fe=>pe=>_e(pe)===fe)(Ie),ze=(fe,pe,kt)=>{if(Qn(kt)||Kt(kt)||ao(kt))fe.setAttribute(pe,kt+"");else throw console.error("Invalid call to Attribute.set. Key ",pe,":: Value ",kt,":: Element ",fe),new Error("Attribute value was not simple")},It=(fe,pe,kt)=>{ze(fe.dom,pe,kt)},Et=(fe,pe)=>{const Qt=(pe||document).createElement("div");if(Qt.innerHTML=fe,!Qt.hasChildNodes()||Qt.childNodes.length>1){const rn="HTML does not have a single root node";throw console.error(rn,fe),new Error(rn)}return zn(Qt.childNodes[0])},Ve=(fe,pe)=>{const Qt=(pe||document).createElement(fe);return zn(Qt)},R=(fe,pe)=>{const Qt=(pe||document).createTextNode(fe);return zn(Qt)},zn=fe=>{if(fe==null)throw new Error("Node cannot be null or undefined");return{dom:fe}},xe={fromHtml:Et,fromTag:Ve,fromText:R,fromDom:zn,fromPoint:(fe,pe,kt)=>rt.from(fe.dom.elementFromPoint(pe,kt)).map(zn)},We=fe=>fe.nodeType!==Ue&&fe.nodeType!==_&&fe.nodeType!==ge||fe.childElementCount===0,ke=(fe,pe)=>{const kt=pe===void 0?document:pe.dom;return We(kt)?[]:Y(kt.querySelectorAll(fe),xe.fromDom)},ae=fe=>rt.from(fe.dom.parentNode).map(xe.fromDom),se=fe=>Y(fe.dom.childNodes,xe.fromDom),re=(fe,pe)=>({element:fe,offset:pe}),z=(fe,pe)=>{const kt=se(fe);return kt.length>0&&pe<kt.length?re(kt[pe],0):re(fe,pe)},K=(fe,pe)=>{ae(fe).each(Qt=>{Qt.dom.insertBefore(pe.dom,fe.dom)})},H=(fe,pe)=>{fe.dom.appendChild(pe.dom)},Z=(fe,pe)=>{K(fe,pe),H(pe,fe)},Be=((fe,pe)=>{const kt=_n=>{if(!fe(_n))throw new Error("Can only get "+pe+" value of a "+pe+" node");return Qt(_n).getOr("")},Qt=_n=>fe(_n)?rt.from(_n.dom.nodeValue):rt.none();return{get:kt,getOption:Qt,set:(_n,dn)=>{if(!fe(_n))throw new Error("Can only set raw "+pe+" value of a "+pe+" node");_n.dom.nodeValue=dn}}})(nn,"text"),zt=fe=>Be.get(fe),Jt=(fe,pe,kt)=>(fe.compareDocumentPosition(pe)&kt)!==0,eo=(fe,pe)=>Jt(fe,pe,Node.DOCUMENT_POSITION_PRECEDING),co=(fe,pe)=>ke(pe,fe);var jn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const pn=(fe,pe)=>fe.isBlock(pe)||Ot(fe.schema.getVoidElements(),pe.nodeName),to=(fe,pe)=>fe.getContentEditable(pe)==="false",De=(fe,pe)=>fe.getContentEditable(pe)==="true"&&pe.parentNode&&fe.getContentEditableParent(pe.parentNode)==="false",Ye=(fe,pe)=>!fe.isBlock(pe)&&Ot(fe.schema.getWhitespaceElements(),pe.nodeName),Dt=(fe,pe)=>pn(fe,pe)||to(fe,pe)||Ye(fe,pe)||De(fe,pe),on=fe=>fe.nodeType===3,wn=()=>({sOffset:0,fOffset:0,elements:[]}),bn=(fe,pe)=>z(xe.fromDom(fe),pe),Oo=(fe,pe,kt,Qt,rn,_n=!0)=>{let dn=_n?pe(!1):kt;for(;dn;){const Mn=to(fe,dn);if(Mn||Ye(fe,dn)){if(Mn?Qt.cef(dn):Qt.boundary(dn))break;dn=pe(!0);continue}else if(pn(fe,dn)){if(Qt.boundary(dn))break}else on(dn)&&Qt.text(dn);if(dn===rn)break;dn=pe(!1)}},xs=(fe,pe,kt,Qt,rn)=>{var _n;if(Dt(fe,kt))return;const dn=(_n=fe.getParent(Qt,fe.isBlock))!==null&&_n!==void 0?_n:fe.getRoot(),Mn=new jn(kt,dn),Kn=rn?Mn.next.bind(Mn):Mn.prev.bind(Mn);Oo(fe,Kn,kt,{boundary:Rt,cef:Rt,text:vo=>{rn?pe.fOffset+=vo.length:pe.sOffset+=vo.length,pe.elements.push(xe.fromDom(vo))}})},Ge=(fe,pe,kt,Qt,rn,_n=!0)=>{const dn=new jn(kt,pe),Mn=[];let Kn=wn();xs(fe,Kn,kt,pe,!1);const vo=()=>(Kn.elements.length>0&&(Mn.push(Kn),Kn=wn()),!1);return Oo(fe,dn.next.bind(dn),kt,{boundary:vo,cef:As=>(vo(),rn&&Mn.push(...rn.cef(As)),!1),text:As=>{Kn.elements.push(xe.fromDom(As)),rn&&rn.text(As,Kn)}},Qt,_n),Qt&&xs(fe,Kn,Qt,pe,!0),vo(),Mn},Le=(fe,pe)=>{const kt=bn(pe.startContainer,pe.startOffset),Qt=kt.element.dom,rn=bn(pe.endContainer,pe.endOffset),_n=rn.element.dom;return Ge(fe,pe.commonAncestorContainer,Qt,_n,{text:(dn,Mn)=>{dn===_n?Mn.fOffset+=dn.length-rn.offset:dn===Qt&&(Mn.sOffset+=kt.offset)},cef:dn=>{const Mn=ct(co(xe.fromDom(dn),"*[contenteditable=true]"),Kn=>{const vo=Kn.dom;return Ge(fe,vo,vo)});return Pe(Mn,(Kn,vo)=>eo(Kn.elements[0].dom,vo.elements[0].dom)?1:-1)}},!1)},tn=(fe,pe)=>pe.collapsed?[]:Le(fe,pe),en=(fe,pe)=>{const kt=fe.createRng();return kt.selectNode(pe),tn(fe,kt)},Ut=(fe,pe)=>ct(pe,kt=>en(fe,kt)),Vn=(fe,pe,kt=0,Qt=fe.length)=>{const rn=pe.regex;rn.lastIndex=kt;const _n=[];let dn;for(;dn=rn.exec(fe);){const Mn=dn[pe.matchIndex],Kn=dn.index+dn[0].indexOf(Mn),vo=Kn+Mn.length;if(vo>Qt)break;_n.push({start:Kn,finish:vo}),rn.lastIndex=vo}return _n},ks=(fe,pe)=>{const kt=we(fe,(Qt,rn)=>{const _n=zt(rn),dn=Qt.last,Mn=dn+_n.length,Kn=ct(pe,(vo,As)=>vo.start<Mn&&vo.finish>dn?[{element:rn,start:Math.max(dn,vo.start)-dn,finish:Math.min(Mn,vo.finish)-dn,matchId:As}]:[]);return{results:Qt.results.concat(Kn),last:Mn}},{results:[],last:0}).results;return Nt(kt,Qt=>Qt.matchId)},kr=(fe,pe)=>ct(pe,kt=>{const Qt=kt.elements,rn=Y(Qt,zt).join(""),_n=Vn(rn,fe,kt.sOffset,rn.length-kt.fOffset);return ks(Qt,_n)}),da=(fe,pe)=>{On(fe,(kt,Qt)=>{On(kt,rn=>{const _n=xe.fromDom(pe.cloneNode(!1));It(_n,"data-mce-index",Qt);const dn=rn.element.dom;if(dn.length===rn.finish&&rn.start===0)Z(rn.element,_n);else{dn.length!==rn.finish&&dn.splitText(rn.finish);const Mn=dn.splitText(rn.start);Z(xe.fromDom(Mn),_n)}})})},ps=(fe,pe,kt,Qt)=>{const rn=en(fe,kt),_n=kr(pe,rn);return da(_n,Qt),_n.length},bc=(fe,pe,kt,Qt)=>{const rn=kt.getBookmark(),_n=fe.select("td[data-mce-selected],th[data-mce-selected]"),dn=_n.length>0?Ut(fe,_n):tn(fe,kt.getRng()),Mn=kr(pe,dn);return da(Mn,Qt),kt.moveToBookmark(rn),Mn.length},vs=fe=>fe.getAttribute("data-mce-index"),as=(fe,pe,kt,Qt)=>{const rn=fe.dom.create("span",{"data-mce-bogus":1});rn.className="mce-match-marker";const _n=fe.getBody();return q(fe,pe,!1),Qt?bc(fe.dom,kt,fe.selection,rn):ps(fe.dom,kt,_n,rn)},uo=fe=>{var pe;const kt=fe.parentNode;fe.firstChild&&kt.insertBefore(fe.firstChild,fe),(pe=fe.parentNode)===null||pe===void 0||pe.removeChild(fe)},dr=(fe,pe)=>{const kt=[],Qt=bt.toArray(fe.getBody().getElementsByTagName("span"));if(Qt.length)for(let rn=0;rn<Qt.length;rn++){const _n=vs(Qt[rn]);_n===null||!_n.length||_n===pe.toString()&&kt.push(Qt[rn])}return kt},Wr=(fe,pe,kt)=>{const Qt=pe.get();let rn=Qt.index;const _n=fe.dom;kt?rn+1===Qt.count?rn=0:rn++:rn-1===-1?rn=Qt.count-1:rn--,_n.removeClass(dr(fe,Qt.index),"mce-match-marker-selected");const dn=dr(fe,rn);return dn.length?(_n.addClass(dr(fe,rn),"mce-match-marker-selected"),fe.selection.scrollIntoView(dn[0]),rn):-1},Fs=(fe,pe)=>{const kt=pe.parentNode;fe.remove(pe),kt&&fe.isEmpty(kt)&&fe.remove(kt)},ma=(fe,pe)=>{const Qt="("+fe.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return pe?`(?:^|\\s|${Oe()})`+Qt+`(?=$|\\s|${Oe()})`:Qt},Zr=(fe,pe,kt,Qt,rn,_n)=>{const dn=fe.selection,Mn=ma(kt,rn),Kn=dn.isForward(),vo={regex:new RegExp(Mn,Qt?"g":"gi"),matchIndex:1},As=as(fe,pe,vo,_n);if(oe.browser.isSafari()&&dn.setRng(dn.getRng(),Kn),As){const mr=Wr(fe,pe,!0);pe.set({index:mr,count:As,text:kt,matchCase:Qt,wholeWord:rn,inSelection:_n})}return As},sc=(fe,pe)=>{const kt=Wr(fe,pe,!0);pe.set({...pe.get(),index:kt})},Ys=(fe,pe)=>{const kt=Wr(fe,pe,!1);pe.set({...pe.get(),index:kt})},ka=fe=>{const pe=vs(fe);return pe!==null&&pe.length>0},ve=(fe,pe,kt,Qt,rn)=>{const _n=pe.get(),dn=_n.index;let Mn,Kn=dn;Qt=Qt!==!1;const vo=fe.getBody(),As=bt.grep(bt.toArray(vo.getElementsByTagName("span")),ka);for(let mr=0;mr<As.length;mr++){const Go=vs(As[mr]);let qc=Mn=parseInt(Go,10);if(rn||qc===_n.index){for(kt.length?(As[mr].innerText=kt,uo(As[mr])):Fs(fe.dom,As[mr]);As[++mr];)if(qc=parseInt(vs(As[mr]),10),qc===Mn)Fs(fe.dom,As[mr]);else{mr--;break}Qt&&Kn--}else Mn>dn&&As[mr].setAttribute("data-mce-index",String(Mn-1))}return pe.set({..._n,count:rn?0:_n.count-1,index:Kn}),Qt?sc(fe,pe):Ys(fe,pe),!rn&&pe.get().count>0},q=(fe,pe,kt)=>{let Qt,rn;const _n=pe.get(),dn=bt.toArray(fe.getBody().getElementsByTagName("span"));for(let Mn=0;Mn<dn.length;Mn++){const Kn=vs(dn[Mn]);Kn!==null&&Kn.length&&(Kn===_n.index.toString()&&(Qt||(Qt=dn[Mn].firstChild),rn=dn[Mn].firstChild),uo(dn[Mn]))}if(pe.set({..._n,index:-1,count:0,text:""}),Qt&&rn){const Mn=fe.dom.createRng();return Mn.setStart(Qt,0),Mn.setEnd(rn,rn.data.length),kt!==!1&&fe.selection.setRng(Mn),Mn}else return},st=(fe,pe)=>pe.get().count>1,ht=(fe,pe)=>pe.get().count>1,In=(fe,pe)=>({done:Mn=>q(fe,pe,Mn),find:(Mn,Kn,vo,As=!1)=>Zr(fe,pe,Mn,Kn,vo,As),next:()=>sc(fe,pe),prev:()=>Ys(fe,pe),replace:(Mn,Kn,vo)=>ve(fe,pe,Mn,Kn,vo)}),Gn=fe=>{const pe=Fo(rt.none()),kt=()=>pe.get().each(fe);return{clear:()=>{kt(),pe.set(rt.none())},isSet:()=>pe.get().isSome(),get:()=>pe.get(),set:Mn=>{kt(),pe.set(rt.some(Mn))}}},Rn=()=>{const fe=Gn(Zt);return{...fe,on:kt=>fe.get().each(kt)}},cs=(fe,pe)=>{const kt=Rn();fe.undoManager.add();const Qt=bt.trim(fe.selection.getContent({format:"text"})),rn=is=>{is.setEnabled("next",st(fe,pe)),is.setEnabled("prev",ht(fe,pe))},_n=is=>{const ws=is.getData(),Ss=pe.get();pe.set({...Ss,matchCase:ws.matchcase,wholeWord:ws.wholewords,inSelection:ws.inselection})},dn=(is,ws)=>{At(["replace","replaceall","prev","next"],Rr=>is.setEnabled(Rr,!ws))},Mn=is=>{fe.windowManager.alert("Could not find the specified string.",()=>{is.focus("findtext")})},Kn=(is,ws)=>{oe.browser.isSafari()&&oe.deviceType.isTouch()&&(ws==="find"||ws==="replace"||ws==="replaceall")&&is.focus(ws)},vo=is=>{q(fe,pe,!1),dn(is,!0),rn(is)},As=is=>{const ws=is.getData(),Ss=pe.get();if(!ws.findtext.length){vo(is);return}if(Ss.text===ws.findtext&&Ss.matchCase===ws.matchcase&&Ss.wholeWord===ws.wholewords)sc(fe,pe);else{const Pr=Zr(fe,pe,ws.findtext,ws.matchcase,ws.wholewords,ws.inselection);Pr<=0&&Mn(is),dn(is,Pr===0)}rn(is)},mr=pe.get(),Go={findtext:Qt,replacetext:"",wholewords:mr.wholeWord,matchcase:mr.matchCase,inselection:mr.inSelection},qc={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:Go,onChange:(is,ws)=>{ws.name==="findtext"&&pe.get().count>0&&vo(is)},onAction:(is,ws)=>{const Ss=is.getData();switch(ws.name){case"find":As(is);break;case"replace":ve(fe,pe,Ss.replacetext)?rn(is):vo(is);break;case"replaceall":ve(fe,pe,Ss.replacetext,!0,!0),vo(is);break;case"prev":Ys(fe,pe),rn(is);break;case"next":sc(fe,pe),rn(is);break;case"matchcase":case"wholewords":case"inselection":_n(is),vo(is);break}Kn(is,ws.name)},onSubmit:is=>{As(is),Kn(is,"find")},onClose:()=>{fe.focus(),q(fe,pe),fe.undoManager.add()}};kt.set(fe.windowManager.open(qc,{inline:"toolbar"}))},es=(fe,pe)=>{fe.addCommand("SearchReplace",()=>{cs(fe,pe)})},Co=(fe,pe)=>()=>{cs(fe,pe)},rr=(fe,pe)=>{fe.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Co(fe,pe),icon:"search"}),fe.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Co(fe,pe),icon:"search"}),fe.shortcuts.add("Meta+F","",Co(fe,pe))};var Bt=()=>{ko.add("searchreplace",fe=>{const pe=Fo({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return es(fe,pe),rr(fe,pe),In(fe,pe)})};Bt()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(C,k,I)=>{var V;return I(C,k.prototype)?!0:((V=C.constructor)===null||V===void 0?void 0:V.name)===k.name},mo=C=>{const k=typeof C;return C===null?"null":k==="object"&&Array.isArray(C)?"array":k==="object"&&ko(C,String,(I,V)=>V.isPrototypeOf(I))?"string":k},Jn=C=>k=>mo(k)===C,An=C=>k=>typeof k===C,so=C=>k=>C===k,Qn=Jn("string"),qt=Jn("array"),Kt=An("boolean"),Ct=so(void 0),Tn=C=>C==null,ao=C=>!Tn(C),Zt=An("function"),yt=An("number"),Rt=()=>{},an=(C,k)=>I=>C(k(I)),qe=C=>()=>C,rt=C=>C,Oe=(C,k)=>C===k;function oe(C,...k){return(...I)=>{const V=k.concat(I);return C.apply(null,V)}}const bt=C=>{C()},Ft=qe(!1),wt=qe(!0);class Y{constructor(k,I){this.tag=k,this.value=I}static some(k){return new Y(!0,k)}static none(){return Y.singletonNone}fold(k,I){return this.tag?I(this.value):k()}isSome(){return this.tag}isNone(){return!this.tag}map(k){return this.tag?Y.some(k(this.value)):Y.none()}bind(k){return this.tag?k(this.value):Y.none()}exists(k){return this.tag&&k(this.value)}forall(k){return!this.tag||k(this.value)}filter(k){return!this.tag||k(this.value)?this:Y.none()}getOr(k){return this.tag?this.value:k}or(k){return this.tag?this:k}getOrThunk(k){return this.tag?this.value:k()}orThunk(k){return this.tag?this:k()}getOrDie(k){if(this.tag)return this.value;throw new Error(k!=null?k:"Called getOrDie on None")}static from(k){return ao(k)?Y.some(k):Y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(k){this.tag&&k(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Y.singletonNone=new Y(!1);const At=Object.keys,On=Object.hasOwnProperty,Nt=(C,k)=>{const I=At(C);for(let V=0,Te=I.length;V<Te;V++){const dt=I[V],Ht=C[dt];k(Ht,dt)}},we=C=>(k,I)=>{C[I]=k},Q=(C,k,I,V)=>{Nt(C,(Te,dt)=>{(k(Te,dt)?I:V)(Te,dt)})},ct=(C,k)=>{const I={};return Q(C,k,we(I),Rt),I},Pe=(C,k)=>{const I=[];return Nt(C,(V,Te)=>{I.push(k(V,Te))}),I},Ne=C=>Pe(C,rt),Ot=C=>At(C).length,_=(C,k)=>ge(C,k)?Y.from(C[k]):Y.none(),ge=(C,k)=>On.call(C,k),Ue=(C,k)=>ge(C,k)&&C[k]!==void 0&&C[k]!==null,Ie=Array.prototype.indexOf,_e=Array.prototype.push,jt=(C,k)=>Ie.call(C,k),nn=(C,k)=>jt(C,k)>-1,ze=(C,k)=>{for(let I=0,V=C.length;I<V;I++){const Te=C[I];if(k(Te,I))return!0}return!1},It=(C,k)=>{const I=[];for(let V=0;V<C;V++)I.push(k(V));return I},Et=(C,k)=>{const I=C.length,V=new Array(I);for(let Te=0;Te<I;Te++){const dt=C[Te];V[Te]=k(dt,Te)}return V},Ve=(C,k)=>{for(let I=0,V=C.length;I<V;I++){const Te=C[I];k(Te,I)}},R=(C,k)=>{for(let I=C.length-1;I>=0;I--){const V=C[I];k(V,I)}},zn=(C,k)=>{const I=[],V=[];for(let Te=0,dt=C.length;Te<dt;Te++){const Ht=C[Te];(k(Ht,Te)?I:V).push(Ht)}return{pass:I,fail:V}},Ee=(C,k)=>{const I=[];for(let V=0,Te=C.length;V<Te;V++){const dt=C[V];k(dt,V)&&I.push(dt)}return I},xe=(C,k,I)=>(R(C,(V,Te)=>{I=k(I,V,Te)}),I),We=(C,k,I)=>(Ve(C,(V,Te)=>{I=k(I,V,Te)}),I),ke=(C,k,I)=>{for(let V=0,Te=C.length;V<Te;V++){const dt=C[V];if(k(dt,V))return Y.some(dt);if(I(dt,V))break}return Y.none()},ae=(C,k)=>ke(C,k,Ft),se=C=>{const k=[];for(let I=0,V=C.length;I<V;++I){if(!qt(C[I]))throw new Error("Arr.flatten item "+I+" was not an array, input: "+C);_e.apply(k,C[I])}return k},re=(C,k)=>se(Et(C,k)),z=(C,k)=>{for(let I=0,V=C.length;I<V;++I){const Te=C[I];if(k(Te,I)!==!0)return!1}return!0},K=(C,k)=>{const I={};for(let V=0,Te=C.length;V<Te;V++){const dt=C[V];I[String(dt)]=k(dt,V)}return I},H=(C,k)=>k>=0&&k<C.length?Y.some(C[k]):Y.none(),Z=C=>H(C,0),$e=C=>H(C,C.length-1),Be=(C,k)=>{for(let I=0;I<C.length;I++){const V=k(C[I],I);if(V.isSome())return V}return Y.none()},zt=(C,k)=>{const V=(k||document).createElement("div");if(V.innerHTML=C,!V.hasChildNodes()||V.childNodes.length>1){const Te="HTML does not have a single root node";throw console.error(Te,C),new Error(Te)}return co(V.childNodes[0])},Jt=(C,k)=>{const V=(k||document).createElement(C);return co(V)},eo=(C,k)=>{const V=(k||document).createTextNode(C);return co(V)},co=C=>{if(C==null)throw new Error("Node cannot be null or undefined");return{dom:C}},pn={fromHtml:zt,fromTag:Jt,fromText:eo,fromDom:co,fromPoint:(C,k,I)=>Y.from(C.dom.elementFromPoint(k,I)).map(co)};typeof window<"u"||Function("return this;")();const to=8,De=9,Ye=11,Dt=1,on=3,wn=C=>C.dom.nodeName.toLowerCase(),bn=C=>C.dom.nodeType,Oo=C=>k=>bn(k)===C,xs=C=>bn(C)===to||wn(C)==="#comment",Ge=Oo(Dt),Le=Oo(on),tn=Oo(De),en=Oo(Ye),Ut=C=>k=>Ge(k)&&wn(k)===C,Vn=(C,k)=>{const I=C.dom;if(I.nodeType!==Dt)return!1;{const V=I;if(V.matches!==void 0)return V.matches(k);if(V.msMatchesSelector!==void 0)return V.msMatchesSelector(k);if(V.webkitMatchesSelector!==void 0)return V.webkitMatchesSelector(k);if(V.mozMatchesSelector!==void 0)return V.mozMatchesSelector(k);throw new Error("Browser lacks native selectors")}},ks=C=>C.nodeType!==Dt&&C.nodeType!==De&&C.nodeType!==Ye||C.childElementCount===0,kr=(C,k)=>{const I=k===void 0?document:k.dom;return ks(I)?[]:Et(I.querySelectorAll(C),pn.fromDom)},da=(C,k)=>{const I=k===void 0?document:k.dom;return ks(I)?Y.none():Y.from(I.querySelector(C)).map(pn.fromDom)},ps=(C,k)=>C.dom===k.dom,bc=Vn,vs=C=>pn.fromDom(C.dom.ownerDocument),as=C=>tn(C)?C:vs(C),uo=C=>Y.from(C.dom.parentNode).map(pn.fromDom),dr=(C,k)=>{const I=Zt(k)?k:Ft;let V=C.dom;const Te=[];for(;V.parentNode!==null&&V.parentNode!==void 0;){const dt=V.parentNode,Ht=pn.fromDom(dt);if(Te.push(Ht),I(Ht)===!0)break;V=dt}return Te},Wr=C=>Y.from(C.dom.previousSibling).map(pn.fromDom),Fs=C=>Y.from(C.dom.nextSibling).map(pn.fromDom),ma=C=>Et(C.dom.childNodes,pn.fromDom),Zr=(C,k)=>{const I=C.dom.childNodes;return Y.from(I[k]).map(pn.fromDom)},sc=C=>Zr(C,0),Ys=C=>en(C)&&ao(C.dom.host),ve=Zt(Element.prototype.attachShadow)&&Zt(Node.prototype.getRootNode)?C=>pn.fromDom(C.dom.getRootNode()):as,q=C=>{const k=ve(C);return Ys(k)?Y.some(k):Y.none()},st=C=>pn.fromDom(C.dom.host),ht=C=>{const k=Le(C)?C.dom.parentNode:C.dom;if(k==null||k.ownerDocument===null)return!1;const I=k.ownerDocument;return q(pn.fromDom(k)).fold(()=>I.body.contains(k),an(ht,st))},In=(C,k)=>Ee(ma(C),k),Gn=(C,k)=>{let I=[];return Ve(ma(C),V=>{k(V)&&(I=I.concat([V])),I=I.concat(Gn(V,k))}),I},Rn=(C,k)=>In(C,I=>Vn(I,k)),cs=(C,k)=>kr(k,C);var es=(C,k,I,V,Te)=>C(I,V)?Y.some(I):Zt(Te)&&Te(I)?Y.none():k(I,V,Te);const Co=(C,k,I)=>{let V=C.dom;const Te=Zt(I)?I:Ft;for(;V.parentNode;){V=V.parentNode;const dt=pn.fromDom(V);if(k(dt))return Y.some(dt);if(Te(dt))break}return Y.none()},rr=(C,k)=>{const I=Te=>k(pn.fromDom(Te));return ae(C.dom.childNodes,I).map(pn.fromDom)},Bt=(C,k,I)=>Co(C,V=>Vn(V,k),I),fe=(C,k)=>rr(C,I=>Vn(I,k)),pe=(C,k)=>da(k,C),kt=(C,k,I)=>es((Te,dt)=>Vn(Te,dt),Bt,C,k,I),Qt=(C,k,I)=>{if(Qn(I)||Kt(I)||yt(I))C.setAttribute(k,I+"");else throw console.error("Invalid call to Attribute.set. Key ",k,":: Value ",I,":: Element ",C),new Error("Attribute value was not simple")},rn=(C,k,I)=>{Qt(C.dom,k,I)},_n=(C,k)=>{const I=C.dom;Nt(k,(V,Te)=>{Qt(I,Te,V)})},dn=(C,k)=>{const I=C.dom.getAttribute(k);return I===null?void 0:I},Mn=(C,k)=>Y.from(dn(C,k)),Kn=(C,k)=>{C.dom.removeAttribute(k)},vo=C=>We(C.dom.attributes,(k,I)=>(k[I.name]=I.value,k),{}),As=(C,k,I=Oe)=>C.exists(V=>I(V,k)),mr=C=>{const k=[],I=V=>{k.push(V)};for(let V=0;V<C.length;V++)C[V].each(I);return k},Go=(C,k,I)=>C.isSome()&&k.isSome()?Y.some(I(C.getOrDie(),k.getOrDie())):Y.none(),qc=C=>C.bind(rt),is=(C,k)=>C?Y.some(k):Y.none(),ws=(C,k)=>C.substring(k),Ss=(C,k,I)=>k===""||C.length>=k.length&&C.substr(I,I+k.length)===k,Pr=(C,k)=>Rr(C,k)?ws(C,k.length):C,Rr=(C,k)=>Ss(C,k,0),Pa=(C=>k=>k.replace(C,""))(/^\s+|\s+$/g),Kc=C=>C.length>0,ki=C=>!Kc(C),Yc=(C,k=10)=>{const I=parseInt(C,k);return isNaN(I)?Y.none():Y.some(I)},Ii=C=>{const k=parseFloat(C);return isNaN(k)?Y.none():Y.some(k)},Hs=C=>C.style!==void 0&&Zt(C.style.getPropertyValue),di=(C,k,I)=>{if(!Qn(I))throw console.error("Invalid call to CSS.set. Property ",k,":: Value ",I,":: Element ",C),new Error("CSS value must be a string: "+I);Hs(C)&&C.style.setProperty(k,I)},fa=(C,k)=>{Hs(C)&&C.style.removeProperty(k)},rc=(C,k,I)=>{const V=C.dom;di(V,k,I)},mi=(C,k)=>{const I=C.dom,Te=window.getComputedStyle(I).getPropertyValue(k);return Te===""&&!ht(C)?Bc(I,k):Te},Bc=(C,k)=>Hs(C)?C.style.getPropertyValue(k):"",oa=(C,k)=>{const I=C.dom,V=Bc(I,k);return Y.from(V).filter(Te=>Te.length>0)},Ti=(C,k)=>{const I=C.dom;fa(I,k),As(Mn(C,"style").map(Pa),"")&&Kn(C,"style")},vc=(C,k,I=0)=>Mn(C,k).map(V=>parseInt(V,10)).getOr(I),Li=(C,k)=>Xs(C,k,wt),Xs=(C,k,I)=>re(ma(C),V=>Vn(V,k)?I(V)?[V]:[]:Xs(V,k,I)),ga=["tfoot","thead","tbody","colgroup"],X=C=>nn(ga,C),Ce=(C,k)=>({rows:C,columns:k}),Fe=(C,k,I)=>({element:C,rowspan:k,colspan:I}),pt=(C,k,I,V,Te,dt)=>({element:C,rowspan:k,colspan:I,row:V,column:Te,isLocked:dt}),Vt=(C,k,I)=>({element:C,cells:k,section:I}),io=(C,k,I,V)=>({startRow:C,startCol:k,finishRow:I,finishCol:V}),qo=(C,k,I)=>({element:C,colspan:k,column:I}),Tr=(C,k)=>({element:C,columns:k}),Is=(C,k,I=Ft)=>{if(I(k))return Y.none();if(nn(C,wn(k)))return Y.some(k);const V=Te=>Vn(Te,"table")||I(Te);return Bt(k,C.join(","),V)},Nr=(C,k)=>Is(["td","th"],C,k),Er=C=>Li(C,"th,td"),Mr=C=>Vn(C,"colgroup")?Rn(C,"col"):re(Jr(C),k=>Rn(k,"col")),Fa=(C,k)=>kt(C,"table",k),jr=C=>Li(C,"tr"),Jr=C=>Fa(C).fold(qe([]),k=>Rn(k,"colgroup")),Xc=(C,k)=>Et(C,I=>{if(wn(I)==="colgroup"){const V=Et(Mr(I),Te=>{const dt=vc(Te,"span",1);return Fe(Te,1,dt)});return Vt(I,V,"colgroup")}else{const V=Et(Er(I),Te=>{const dt=vc(Te,"rowspan",1),Ht=vc(Te,"colspan",1);return Fe(Te,dt,Ht)});return Vt(I,V,k(I))}}),Jc=C=>uo(C).map(k=>{const I=wn(k);return X(I)?I:"tbody"}).getOr("tbody"),So=C=>{const k=jr(C),V=[...Jr(C),...k];return Xc(V,Jc)},ls="data-snooker-locked-cols",or=C=>Mn(C,ls).bind(k=>Y.from(k.match(/\d+/g))).map(k=>K(k,wt)),B=(C,k)=>C+","+k,J=(C,k,I)=>Y.from(C.access[B(k,I)]),de=(C,k,I)=>{const V=Xe(C,Te=>I(k,Te.element));return V.length>0?Y.some(V[0]):Y.none()},Xe=(C,k)=>{const I=re(C.all,V=>V.cells);return Ee(I,k)},kn=C=>{const k={};let I=0;return Ve(C.cells,V=>{const Te=V.colspan;It(Te,dt=>{const Ht=I+dt;k[Ht]=qo(V.element,Te,Ht)}),I+=Te}),k},Do=C=>{const k={},I=[],Te=Z(C).map(ni=>ni.element).bind(Fa).bind(or).getOr({});let dt=0,Ht=0,xn=0;const{pass:Io,fail:jo}=zn(C,ni=>ni.section==="colgroup");Ve(jo,ni=>{const ll=[];Ve(ni.cells,Au=>{let dd=0;for(;k[B(xn,dd)]!==void 0;)dd++;const rh=Ue(Te,dd.toString()),md=pt(Au.element,Au.rowspan,Au.colspan,xn,dd,rh);for(let Ou=0;Ou<Au.colspan;Ou++)for(let Wm=0;Wm<Au.rowspan;Wm++){const Du=xn+Wm,pi=dd+Ou,ah=B(Du,pi);k[ah]=md,Ht=Math.max(Ht,pi+1)}ll.push(md)}),dt++,I.push(Vt(ni.element,ll,ni.section)),xn++});const{columns:cr,colgroups:Us}=$e(Io).map(ni=>{const ll=kn(ni);return{colgroups:[Tr(ni.element,Ne(ll))],columns:ll}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Ce(dt,Ht),access:k,all:I,columns:cr,colgroups:Us}},Js={fromTable:C=>{const k=So(C);return Do(k)},generate:Do,getAt:J,findItem:de,filterItems:Xe,justCells:C=>re(C.all,k=>k.cells),justColumns:C=>Ne(C.columns),hasColumns:C=>At(C.columns).length>0,getColumnAt:(C,k)=>Y.from(C.columns[k])};var Vr=tinymce.util.Tools.resolve("tinymce.util.Tools");const tl=(C,k,I)=>{const V=C.select("td,th",k);let Te;for(let dt=0;dt<V.length;dt++){const Ht=C.getStyle(V[dt],I);if(Ct(Te)&&(Te=Ht),Te!==Ht)return""}return Te},$o=(C,k,I)=>{Vr.each("left center right".split(" "),V=>{V!==I&&C.formatter.remove("align"+V,{},k)}),I&&C.formatter.apply("align"+I,{},k)},te=(C,k,I)=>{Vr.each("top middle bottom".split(" "),V=>{V!==I&&C.formatter.remove("valign"+V,{},k)}),I&&C.formatter.apply("valign"+I,{},k)},me=(C,k,I)=>{C.dispatch("TableModified",{...I,table:k})},Qe=(C,k)=>Ii(C).getOr(k),ut=(C,k,I)=>Qe(mi(C,k),I),Bn=(C,k,I,V)=>{const Te=ut(C,`padding-${I}`,0),dt=ut(C,`padding-${V}`,0),Ht=ut(C,`border-${I}-width`,0),xn=ut(C,`border-${V}-width`,0);return k-Te-dt-Ht-xn},Yn=(C,k)=>{const I=C.dom,V=I.getBoundingClientRect().width||I.offsetWidth;return k==="border-box"?V:Bn(C,V,"left","right")},Ko=C=>Yn(C,"content-box");var Hi=tinymce.util.Tools.resolve("tinymce.Env");const Jo="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Os=It(5,C=>{const k=`${C+1}px`;return{title:k,value:k}}),Ta=Et(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],C=>({title:C,value:C.toLowerCase()})),ac="100%",zi=C=>{var k;const I=C.dom,V=(k=I.getParent(C.selection.getStart(),I.isBlock))!==null&&k!==void 0?k:C.getBody();return Ko(pn.fromDom(V))+"px"},gr=(C,k)=>_m(C)||!Pc(C)?k:Gl(C)?{...k,width:zi(C)}:{...k,width:ac},nr=(C,k)=>_m(C)||Pc(C)?k:Gl(C)?{...k,width:zi(C)}:{...k,width:ac},Ds=C=>k=>k.options.get(C),Ir=C=>{const k=C.options.register;k("table_border_widths",{processor:"object[]",default:Os}),k("table_border_styles",{processor:"object[]",default:Ta}),k("table_cell_advtab",{processor:"boolean",default:!0}),k("table_row_advtab",{processor:"boolean",default:!0}),k("table_advtab",{processor:"boolean",default:!0}),k("table_appearance_options",{processor:"boolean",default:!0}),k("table_grid",{processor:"boolean",default:!Hi.deviceType.isTouch()}),k("table_cell_class_list",{processor:"object[]",default:[]}),k("table_row_class_list",{processor:"object[]",default:[]}),k("table_class_list",{processor:"object[]",default:[]}),k("table_toolbar",{processor:"string",default:Jo}),k("table_background_color_map",{processor:"object[]",default:[]}),k("table_border_color_map",{processor:"object[]",default:[]})},yc=Ds("table_sizing_mode"),Tl=Ds("table_border_widths"),Gr=Ds("table_border_styles"),jl=Ds("table_cell_advtab"),vu=Ds("table_row_advtab"),cc=Ds("table_advtab"),yu=Ds("table_appearance_options"),Vg=Ds("table_grid"),Pc=Ds("table_style_by_css"),El=Ds("table_cell_class_list"),od=Ds("table_row_class_list"),Ia=Ds("table_class_list"),nl=Ds("table_toolbar"),wu=Ds("table_background_color_map"),Pd=Ds("table_border_color_map"),Gl=C=>yc(C)==="fixed",_m=C=>yc(C)==="responsive",Fd=C=>{const k=C.options,I=k.get("table_default_styles");return k.isSet("table_default_styles")?I:gr(C,I)},Ei=C=>{const k=C.options,I=k.get("table_default_attributes");return k.isSet("table_default_attributes")?I:nr(C,I)},Ug=C=>C.nodeName.toLowerCase(),Am=C=>pn.fromDom(C.getBody()),Cu=C=>k=>ps(k,Am(C)),Id=C=>C?C.replace(/px$/,""):"",_i=C=>/^\d+(\.\d+)?$/.test(C)?C+"px":C,be=C=>pn.fromDom(C.selection.getStart()),ql=C=>pn.fromDom(C.selection.getEnd()),Ai=(C,k)=>k.column>=C.startCol&&k.column+k.colspan-1<=C.finishCol&&k.row>=C.startRow&&k.row+k.rowspan-1<=C.finishRow,Om=(C,k)=>{let I=!0;const V=oe(Ai,k);for(let Te=k.startRow;Te<=k.finishRow;Te++)for(let dt=k.startCol;dt<=k.finishCol;dt++)I=I&&Js.getAt(C,Te,dt).exists(V);return I?Y.some(k):Y.none()},Dm=(C,k)=>io(Math.min(C.row,k.row),Math.min(C.column,k.column),Math.max(C.row+C.rowspan-1,k.row+k.rowspan-1),Math.max(C.column+C.colspan-1,k.column+k.colspan-1)),Wg=(C,k,I)=>{const V=Js.findItem(C,k,ps),Te=Js.findItem(C,I,ps);return V.bind(dt=>Te.map(Ht=>Dm(dt,Ht)))},$s=(C,k,I)=>Wg(C,k,I).bind(V=>Om(C,V)),Ga=(C,k,I)=>{const V=Nf(C);return $s(V,k,I)},Nf=Js.fromTable,Vi=(C,k)=>{uo(C).each(V=>{V.dom.insertBefore(k.dom,C.dom)})},Rm=(C,k)=>{Fs(C).fold(()=>{uo(C).each(Te=>{wc(Te,k)})},V=>{Vi(V,k)})},Su=(C,k)=>{sc(C).fold(()=>{wc(C,k)},V=>{C.dom.insertBefore(k.dom,V.dom)})},wc=(C,k)=>{C.dom.appendChild(k.dom)},Mf=(C,k)=>{Vi(C,k),wc(k,C)},sd=(C,k)=>{Ve(k,(I,V)=>{const Te=V===0?C:k[V-1];Rm(Te,I)})},Zg=(C,k)=>{Ve(k,I=>{wc(C,I)})},Fc=C=>{const k=C.dom;k.parentNode!==null&&k.parentNode.removeChild(k)},Ld=C=>{const k=ma(C);k.length>0&&sd(C,k),Fc(C)},rd=((C,k)=>{const I=dt=>{if(!C(dt))throw new Error("Can only get "+k+" value of a "+k+" node");return V(dt).getOr("")},V=dt=>C(dt)?Y.from(dt.dom.nodeValue):Y.none();return{get:I,getOption:V,set:(dt,Ht)=>{if(!C(dt))throw new Error("Can only set raw "+k+" value of a "+k+" node");dt.dom.nodeValue=Ht}}})(Le,"text"),ha=C=>rd.get(C),Hd=(C,k)=>rd.set(C,k);var $f=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Mm=()=>{const C=jo=>pn.fromDom(jo.dom.cloneNode(!1)),k=jo=>as(jo).dom,I=jo=>Ge(jo)?wn(jo)==="body"?!0:nn($f,wn(jo)):!1,V=jo=>Ge(jo)?nn(["br","img","hr","input"],wn(jo)):!1,Te=jo=>Ge(jo)&&dn(jo,"contenteditable")==="false",dt=(jo,cr)=>jo.dom.compareDocumentPosition(cr.dom),Ht=(jo,cr)=>{const Us=vo(jo);_n(cr,Us)},xn=jo=>{const cr=wn(jo);return nn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],cr)},Io=jo=>Ge(jo)?Mn(jo,"lang"):Y.none();return{up:qe({selector:Bt,closest:kt,predicate:Co,all:dr}),down:qe({selector:cs,predicate:Gn}),styles:qe({get:mi,getRaw:oa,set:rc,remove:Ti}),attrs:qe({get:dn,set:rn,remove:Kn,copyTo:Ht}),insert:qe({before:Vi,after:Rm,afterAll:sd,append:wc,appendAll:Zg,prepend:Su,wrap:Mf}),remove:qe({unwrap:Ld,remove:Fc}),create:qe({nu:pn.fromTag,clone:C,text:pn.fromText}),query:qe({comparePosition:dt,prevSibling:Wr,nextSibling:Fs}),property:qe({children:ma,name:wn,parent:uo,document:k,isText:Le,isComment:xs,isElement:Ge,isSpecial:xn,getLanguage:Io,getText:ha,setText:Hd,isBoundary:I,isEmptyTag:V,isNonEditable:Te}),eq:ps,is:bc}};const xu=(C,k,I,V)=>{const Te=I[0],dt=I.slice(1);return V(C,k,Te,dt)},jg=(C,k,I)=>I.length>0?xu(C,k,I,$m):Y.none(),$m=(C,k,I,V)=>{const Te=k(C,I);return xe(V,(dt,Ht)=>{const xn=k(C,Ht);return Cc(C,dt,xn)},Te)},Cc=(C,k,I)=>k.bind(V=>I.filter(oe(C.eq,V))),Gg=jg,ol=Mm(),ad=(C,k)=>Gg(ol,(I,V)=>C(V),k),Kl=C=>Bt(C,"table"),Ui=(C,k)=>{const I=cs(C,k);return I.length>0?Y.some(I):Y.none()},qg=(C,k,I)=>pe(C,k).bind(V=>pe(C,I).bind(Te=>ad(Kl,[V,Te]).map(dt=>({first:V,last:Te,table:dt})))),Kg=(C,k)=>Ui(C,k),Bf=(C,k,I)=>qg(C,k,I).bind(V=>{const Te=Io=>ps(C,Io),dt="thead,tfoot,tbody,table",Ht=Bt(V.first,dt,Te),xn=Bt(V.last,dt,Te);return Ht.bind(Io=>xn.bind(jo=>ps(Io,jo)?Ga(V.table,V.first,V.last):Y.none()))}),sl=C=>Et(C,pn.fromDom),E="data-mce-selected",$="td["+E+"],th["+E+"]",j="data-mce-first-selected",Se="td["+j+"],th["+j+"]",He="data-mce-last-selected",mn="td["+He+"],th["+He+"]",yo={selected:E,selectedSelector:$,firstSelected:j,firstSelectedSelector:Se,lastSelected:He,lastSelectedSelector:mn},ts=C=>Fa(C).bind(k=>Kg(k,yo.firstSelectedSelector)).fold(qe(C),k=>k[0]),Zo=C=>(k,I)=>{const V=wn(k),Te=V==="col"||V==="colgroup"?ts(k):k;return kt(Te,C,I)},qn=Zo("th,td,caption"),ns=Zo("th,td"),_r=C=>sl(C.model.table.getSelectedCells()),qa=(C,k)=>{const I=ns(C),V=I.bind(Te=>Fa(Te)).map(Te=>jr(Te));return Go(I,V,(Te,dt)=>Ee(dt,Ht=>ze(sl(Ht.dom.cells),xn=>dn(xn,k)==="1"||ps(xn,Te)))).getOr([])},Qr=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Bm=C=>({value:C}),Cv=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Bo=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Lr=C=>Cv.test(C)||Bo.test(C),Bs=C=>Pr(C,"#").toUpperCase(),ic=C=>Lr(C)?Y.some({value:Bs(C)}):Y.none(),La=C=>{const k=C.toString(16);return(k.length===1?"0"+k:k).toUpperCase()},Pf=C=>{const k=La(C.red)+La(C.green)+La(C.blue);return Bm(k)},Ff=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Yg=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Yl=(C,k,I,V)=>({red:C,green:k,blue:I,alpha:V}),If=(C,k,I,V)=>{const Te=parseInt(C,10),dt=parseInt(k,10),Ht=parseInt(I,10),xn=parseFloat(V);return Yl(Te,dt,Ht,xn)},Sv=C=>{if(C==="transparent")return Y.some(Yl(0,0,0,0));const k=Ff.exec(C);if(k!==null)return Y.some(If(k[1],k[2],k[3],"1"));const I=Yg.exec(C);return I!==null?Y.some(If(I[1],I[2],I[3],I[4])):Y.none()},y2=C=>ic(C).orThunk(()=>Sv(C).map(Pf)).getOrThunk(()=>{const k=document.createElement("canvas");k.height=1,k.width=1;const I=k.getContext("2d");I.clearRect(0,0,k.width,k.height),I.fillStyle="#FFFFFF",I.fillStyle=C,I.fillRect(0,0,1,1);const V=I.getImageData(0,0,1,1).data,Te=V[0],dt=V[1],Ht=V[2],xn=V[3];return Pf(Yl(Te,dt,Ht,xn))}),qr=C=>Sv(C).map(Pf).map(k=>"#"+k.value).getOr(C),Xg=C=>{let k=C;return{get:()=>k,set:Te=>{k=Te}}},n1=C=>{const k=Xg(Y.none()),I=()=>k.get().each(C);return{clear:()=>{I(),k.set(Y.none())},isSet:()=>k.get().isSome(),get:()=>k.get(),set:xn=>{I(),k.set(Y.some(xn))}}},gp=()=>n1(C=>C.unbind()),Lf=(C,k,I)=>V=>{const Te=gp(),dt=ki(I),Ht=()=>{const xn=_r(C),Io=jo=>C.formatter.match(k,{value:I},jo.dom,dt);dt?(V.setActive(!ze(xn,Io)),Te.set(C.formatter.formatChanged(k,jo=>V.setActive(!jo),!0))):(V.setActive(z(xn,Io)),Te.set(C.formatter.formatChanged(k,V.setActive,!1,{value:I})))};return C.initialized?Ht():C.on("init",Ht),Te.clear},o1=C=>Ue(C,"menu"),cd=C=>Et(C,k=>{const I=k.text||k.title||"";return o1(k)?{text:I,items:cd(k.menu)}:{text:I,value:k.value}}),hr=(C,k,I,V)=>Et(k,Te=>{const dt=Te.text||Te.title;return o1(Te)?{type:"nestedmenuitem",text:dt,getSubmenuItems:()=>hr(C,Te.menu,I,V)}:{text:dt,type:"togglemenuitem",onAction:()=>V(Te.value),onSetup:Lf(C,I,Te.value)}}),Lo=(C,k)=>I=>{C.execCommand("mceTableApplyCellStyle",!1,{[k]:I})},lc=C=>re(C,k=>o1(k)?[{...k,menu:lc(k.menu)}]:Kc(k.value)?[k]:[]),Xl=(C,k,I,V)=>Te=>Te(hr(C,k,I,V)),ku=(C,k,I)=>{const V=Et(k,Te=>({text:Te.title,value:"#"+y2(Te.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:V.length>0?V:void 0,allowCustomColors:!1},onAction:Te=>{const dt=Te.value==="remove"?"":Te.value;C.execCommand("mceTableApplyCellStyle",!1,{[I]:dt})}}]},Jg=C=>()=>{const I=C.queryCommandValue("mceTableRowType")==="header"?"body":"header";C.execCommand("mceTableRowType",!1,{type:I})},Pm=C=>()=>{const I=C.queryCommandValue("mceTableColType")==="th"?"td":"th";C.execCommand("mceTableColType",!1,{type:I})},s1=C=>{const k=cd(El(C));return k.length>0?Y.some({name:"class",type:"listbox",label:"Class",items:k}):Y.none()},r1=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Qr}],Fm=C=>r1.concat(s1(C).toArray()),Qg=(C,k)=>{const V=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(cd(Gr(C)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:k==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(V):V}},_l={normal:(C,k)=>{const I=C.dom;return{setAttrib:(Ht,xn)=>{I.setAttrib(k,Ht,xn)},setStyle:(Ht,xn)=>{I.setStyle(k,Ht,xn)},setFormat:(Ht,xn)=>{xn===""?C.formatter.remove(Ht,{value:null},k,!0):C.formatter.apply(Ht,{value:xn},k)}}}},Al=Ut("th"),xv=(C,k)=>C&&k?"sectionCells":C?"section":"cells",id=C=>{const k=C.section==="thead",I=As(Tu(C.cells),"th");return C.section==="tfoot"?{type:"footer"}:k||I?{type:"header",subType:xv(k,I)}:{type:"body"}},Tu=C=>{const k=Ee(C,I=>Al(I.element));return k.length===0?Y.some("td"):k.length===C.length?Y.some("th"):Y.none()},Hf=C=>{const k=Et(C,Te=>id(Te).type),I=nn(k,"header"),V=nn(k,"footer");if(!I&&!V)return Y.some("body");{const Te=nn(k,"body");return I&&!Te&&!V?Y.some("header"):!I&&!Te&&V?Y.some("footer"):Y.none()}},ld=C=>{let k=!1,I;return(...V)=>(k||(k=!0,I=C.apply(null,V)),I)},eh=(C,k)=>Be(C.all,I=>ae(I.cells,V=>ps(k,V.element))),pa=(C,k,I)=>{const V=Et(k.selection,dt=>Nr(dt).bind(Ht=>eh(C,Ht)).filter(I)),Te=mr(V);return is(Te.length>0,Te)},Wi=(C,k)=>k.mergable,Lm=(C,k)=>k.unmergable,En=(C,k)=>pa(C,k,wt),Hm=(C,k)=>eh(C,k).exists(I=>!I.isLocked),rl=(C,k)=>z(k,I=>Hm(C,I)),th=(C,k)=>Wi(C,k).filter(I=>rl(C,I.cells)),nh=(C,k)=>Lm(C,k).filter(I=>rl(C,I));({...{generate:C=>{if(!qt(C))throw new Error("cases must be an array");if(C.length===0)throw new Error("there must be at least one case");const k=[],I={};return Ve(C,(V,Te)=>{const dt=At(V);if(dt.length!==1)throw new Error("one and only one name per case");const Ht=dt[0],xn=V[Ht];if(I[Ht]!==void 0)throw new Error("duplicate key detected:"+Ht);if(Ht==="cata")throw new Error("cannot have a case named cata (sorry)");if(!qt(xn))throw new Error("case arguments must be an array");k.push(Ht),I[Ht]=(...Io)=>{const jo=Io.length;if(jo!==xn.length)throw new Error("Wrong number of arguments to case "+Ht+". Expected "+xn.length+" ("+xn+"), got "+jo);return{fold:(...Us)=>{if(Us.length!==C.length)throw new Error("Wrong number of arguments to fold. Expected "+C.length+", got "+Us.length);return Us[Te].apply(null,Io)},match:Us=>{const Qs=At(Us);if(k.length!==Qs.length)throw new Error("Wrong number of arguments to match. Expected: "+k.join(",")+`
Actual: `+Qs.join(","));if(!z(k,ll=>nn(Qs,ll)))throw new Error("Not all branches were specified when using match. Specified: "+Qs.join(", ")+`
Required: `+k.join(", "));return Us[Ht].apply(null,Io)},log:Us=>{console.log(Us,{constructors:k,constructor:Ht,params:Io})}}}}),I}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const ro=(C,k)=>{const I=Js.fromTable(C);return En(I,k).bind(Te=>{const dt=Te[Te.length-1],Ht=Te[0].row,xn=dt.row+dt.rowspan,Io=I.all.slice(Ht,xn);return Hf(Io)}).getOr("")},Qc=C=>Rr(C,"rgb")?qr(C):C,Lt=C=>{const k=pn.fromDom(C);return{borderwidth:oa(k,"border-width").getOr(""),borderstyle:oa(k,"border-style").getOr(""),bordercolor:oa(k,"border-color").map(Qc).getOr(""),backgroundcolor:oa(k,"background-color").map(Qc).getOr("")}},a1=C=>{const k=C[0],I=C.slice(1);return Ve(I,V=>{Ve(At(k),Te=>{Nt(V,(dt,Ht)=>{const xn=k[Te];xn!==""&&Te===Ht&&xn!==dt&&(k[Te]="")})})}),k},c1=(C,k,I,V)=>ae(C,Te=>!Ct(I.formatter.matchNode(V,k+Te))).getOr(""),al=oe(c1,["left","center","right"],"align"),ei=oe(c1,["top","middle","bottom"],"valign"),zm=(C,k)=>{const I=Fd(C),V=Ei(C),Te=()=>({borderstyle:_(I,"border-style").getOr(""),bordercolor:Qc(_(I,"border-color").getOr("")),backgroundcolor:Qc(_(I,"background-color").getOr(""))}),dt={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},Ht=()=>{const cr=I["border-width"];return Pc(C)&&cr?{border:cr}:_(V,"border").fold(()=>({}),Us=>({border:Us}))},xn=k?Te():{},Io=()=>{const cr=_(I,"border-spacing").or(_(V,"cellspacing")).fold(()=>({}),Qs=>({cellspacing:Qs})),Us=_(I,"border-padding").or(_(V,"cellpadding")).fold(()=>({}),Qs=>({cellpadding:Qs}));return{...cr,...Us}};return{...dt,...I,...V,...xn,...Ht(),...Io()}},Ur=C=>Fa(pn.fromDom(C)).map(k=>{const I={selection:sl(C.cells)};return ro(k,I)}).getOr(""),Ea=(C,k,I)=>{const V=(xn,Io)=>{const jo=oa(pn.fromDom(Io),"border-width");return Pc(C)&&jo.isSome()?jo.getOr(""):xn.getAttrib(Io,"border")||tl(C.dom,Io,"border-width")||tl(C.dom,Io,"border")||""},Te=C.dom,dt=Pc(C)?Te.getStyle(k,"border-spacing")||Te.getAttrib(k,"cellspacing"):Te.getAttrib(k,"cellspacing")||Te.getStyle(k,"border-spacing"),Ht=Pc(C)?tl(Te,k,"padding")||Te.getAttrib(k,"cellpadding"):Te.getAttrib(k,"cellpadding")||tl(Te,k,"padding");return{width:Te.getStyle(k,"width")||Te.getAttrib(k,"width"),height:Te.getStyle(k,"height")||Te.getAttrib(k,"height"),cellspacing:dt!=null?dt:"",cellpadding:Ht!=null?Ht:"",border:V(Te,k),caption:!!Te.select("caption",k)[0],class:Te.getAttrib(k,"class",""),align:al(C,k),...I?Lt(k):{}}},ti=(C,k,I)=>{const V=C.dom;return{height:V.getStyle(k,"height")||V.getAttrib(k,"height"),class:V.getAttrib(k,"class",""),type:Ur(k),align:al(C,k),...I?Lt(k):{}}},ar=(C,k,I,V)=>{const Te=C.dom,dt=V.getOr(k),Ht=(xn,Io)=>Te.getStyle(xn,Io)||Te.getAttrib(xn,Io);return{width:Ht(dt,"width"),height:Ht(k,"height"),scope:Te.getAttrib(k,"scope"),celltype:Ug(k),class:Te.getAttrib(k,"class",""),halign:al(C,k),valign:ei(C,k),...I?Lt(k):{}}},_u=(C,k)=>{const I=Js.fromTable(C),V=Js.justCells(I),Te=Ee(V,dt=>ze(k,Ht=>ps(dt.element,Ht)));return Et(Te,dt=>({element:dt.element.dom,column:Js.getColumnAt(I,dt.column).map(Ht=>Ht.element.dom)}))},i1=(C,k,I,V)=>{V("scope")&&C.setAttrib("scope",I.scope),V("class")&&C.setAttrib("class",I.class),V("height")&&C.setStyle("height",_i(I.height)),V("width")&&k.setStyle("width",_i(I.width))},Jl=(C,k,I)=>{I("backgroundcolor")&&C.setFormat("tablecellbackgroundcolor",k.backgroundcolor),I("bordercolor")&&C.setFormat("tablecellbordercolor",k.bordercolor),I("borderstyle")&&C.setFormat("tablecellborderstyle",k.borderstyle),I("borderwidth")&&C.setFormat("tablecellborderwidth",_i(k.borderwidth))},oh=(C,k,I,V)=>{const Te=k.length===1;Ve(k,dt=>{const Ht=dt.element,xn=Te?wt:V,Io=_l.normal(C,Ht),jo=dt.column.map(cr=>_l.normal(C,cr)).getOr(Io);i1(Io,jo,I,xn),jl(C)&&Jl(Io,I,xn),V("halign")&&$o(C,Ht,I.halign),V("valign")&&te(C,Ht,I.valign)})},Vm=(C,k)=>{C.execCommand("mceTableCellType",!1,{type:k.celltype,no_events:!0})},ra=(C,k,I,V)=>{const Te=ct(V,(dt,Ht)=>I[Ht]!==dt);Ot(Te)>0&&k.length>=1&&Fa(k[0]).each(dt=>{const Ht=_u(dt,k),xn=Ot(ct(Te,(jo,cr)=>cr!=="scope"&&cr!=="celltype"))>0,Io=ge(Te,"celltype");(xn||ge(Te,"scope"))&&oh(C,Ht,V,oe(ge,Te)),Io&&Vm(C,V),me(C,dt.dom,{structure:Io,style:xn})})},sh=(C,k,I,V)=>{const Te=V.getData();V.close(),C.undoManager.transact(()=>{ra(C,k,I,Te),C.focus()})},Um=(C,k)=>{const I=Fa(k[0]).map(V=>Et(_u(V,k),Te=>ar(C,Te.element,jl(C),Te.column)));return a1(I.getOrDie())},Rs=C=>{const k=_r(C);if(k.length===0)return;const I=Um(C,k),V={type:"tabpanel",tabs:[{title:"General",name:"general",items:Fm(C)},Qg(C,"cell")]},Te={type:"panel",items:[{type:"grid",columns:2,items:Fm(C)}]};C.windowManager.open({title:"Cell Properties",size:"normal",body:jl(C)?V:Te,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:I,onSubmit:oe(sh,C,k,I)})},Ql=C=>{const k=cd(od(C));return k.length>0?Y.some({name:"class",type:"listbox",label:"Class",items:k}):Y.none()},Sc=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],eu=C=>Sc.concat(Ql(C).toArray()),fi=(C,k,I)=>{I("class")&&C.setAttrib("class",k.class),I("height")&&C.setStyle("height",_i(k.height))},l1=(C,k,I)=>{I("backgroundcolor")&&C.setStyle("background-color",k.backgroundcolor),I("bordercolor")&&C.setStyle("border-color",k.bordercolor),I("borderstyle")&&C.setStyle("border-style",k.borderstyle)},Ya=(C,k,I,V)=>{const dt=k.length===1?wt:V;Ve(k,Ht=>{const xn=_l.normal(C,Ht);fi(xn,I,dt),vu(C)&&l1(xn,I,dt),V("align")&&$o(C,Ht,I.align)})},xc=(C,k)=>{C.execCommand("mceTableRowType",!1,{type:k.type,no_events:!0})},hp=(C,k,I,V)=>{const Te=ct(V,(dt,Ht)=>I[Ht]!==dt);if(Ot(Te)>0){const dt=ge(Te,"type"),Ht=dt?Ot(Te)>1:!0;Ht&&Ya(C,k,V,oe(ge,Te)),dt&&xc(C,V),Fa(pn.fromDom(k[0])).each(xn=>me(C,xn.dom,{structure:dt,style:Ht}))}},Tt=(C,k,I,V)=>{const Te=V.getData();V.close(),C.undoManager.transact(()=>{hp(C,k,I,Te),C.focus()})},Oi=C=>{const k=qa(be(C),yo.selected);if(k.length===0)return;const I=Et(k,Ht=>ti(C,Ht.dom,vu(C))),V=a1(I),Te={type:"tabpanel",tabs:[{title:"General",name:"general",items:eu(C)},Qg(C,"row")]},dt={type:"panel",items:[{type:"grid",columns:2,items:eu(C)}]};C.windowManager.open({title:"Row Properties",size:"normal",body:vu(C)?Te:dt,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:V,onSubmit:oe(Tt,C,Et(k,Ht=>Ht.dom),V)})},kv=(C,k,I)=>{const V=I?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Te=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],dt=yu(C)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Ht=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],xn=k.length>0?[{type:"listbox",name:"class",label:"Class",items:k}]:[];return V.concat(Te).concat(dt).concat(Ht).concat(xn)},aa=(C,k,I,V)=>{if(k.tagName==="TD"||k.tagName==="TH")Qn(I)&&ao(V)?C.setStyle(k,I,V):C.setStyles(k,I);else if(k.children)for(let Te=0;Te<k.children.length;Te++)aa(C,k.children[Te],I,V)},zf=(C,k,I)=>{const V=C.dom,Te={},dt={};if(Ct(I.class)||(Te.class=I.class),dt.height=_i(I.height),Pc(C)?dt.width=_i(I.width):V.getAttrib(k,"width")&&(Te.width=Id(I.width)),Pc(C)?(dt["border-width"]=_i(I.border),dt["border-spacing"]=_i(I.cellspacing)):(Te.border=I.border,Te.cellpadding=I.cellpadding,Te.cellspacing=I.cellspacing),Pc(C)&&k.children)for(let Ht=0;Ht<k.children.length;Ht++)aa(V,k.children[Ht],{"border-width":_i(I.border),padding:_i(I.cellpadding)}),cc(C)&&aa(V,k.children[Ht],{"border-color":I.bordercolor});if(cc(C)){const Ht=I;dt["background-color"]=Ht.backgroundcolor,dt["border-color"]=Ht.bordercolor,dt["border-style"]=Ht.borderstyle}Te.style=V.serializeStyle({...Fd(C),...dt}),V.setAttribs(k,{...Ei(C),...Te})},ud=(C,k,I,V)=>{const Te=C.dom,dt=V.getData(),Ht=ct(dt,(xn,Io)=>I[Io]!==xn);V.close(),dt.class===""&&delete dt.class,C.undoManager.transact(()=>{if(!k){const xn=Yc(dt.cols).getOr(1),Io=Yc(dt.rows).getOr(1);C.execCommand("mceInsertTable",!1,{rows:Io,columns:xn}),k=ns(be(C),Cu(C)).bind(jo=>Fa(jo,Cu(C))).map(jo=>jo.dom).getOrDie()}if(Ot(Ht)>0){zf(C,k,dt);const xn=Te.select("caption",k)[0];(xn&&!dt.caption||!xn&&dt.caption)&&C.execCommand("mceTableToggleCaption"),$o(C,k,dt.align)}if(C.focus(),C.addVisual(),Ot(Ht)>0){const xn=ge(Ht,"caption"),Io=xn?Ot(Ht)>1:!0;me(C,k,{structure:xn,style:Io})}})},ba=(C,k)=>{const I=C.dom;let V,Te=zm(C,cc(C));k?(Te.cols="1",Te.rows="1",cc(C)&&(Te.borderstyle="",Te.bordercolor="",Te.backgroundcolor="")):(V=I.getParent(C.selection.getStart(),"table",C.getBody()),V?Te=Ea(C,V,cc(C)):cc(C)&&(Te.borderstyle="",Te.bordercolor="",Te.backgroundcolor=""));const dt=cd(Ia(C));dt.length>0&&Te.class&&(Te.class=Te.class.replace(/\s*mce\-item\-table\s*/g,""));const Ht={type:"grid",columns:2,items:kv(C,dt,k)},xn=()=>({type:"panel",items:[Ht]}),Io=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[Ht]},Qg(C,"table")]}),jo=cc(C)?Io():xn();C.windowManager.open({title:"Table Properties",size:"normal",body:jo,onSubmit:oe(ud,C,V,Te),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Te})},Tv=C=>{Nt({mceTableProps:oe(ba,C,!1),mceTableRowProps:oe(Oi,C),mceTableCellProps:oe(Rs,C)},(k,I)=>C.addCommand(I,()=>k())),C.addCommand("mceInsertTableDialog",k=>{ba(C,!0)})},cl=(C,k)=>fe(C,k).isSome(),tu=rt,gi=C=>{const k=(V,Te)=>Mn(V,Te).exists(dt=>parseInt(dt,10)>1),I=V=>k(V,"rowspan")||k(V,"colspan");return C.length>0&&z(C,I)?Y.some(C):Y.none()},Ns=(C,k,I)=>k.length<=1?Y.none():Bf(C,I.firstSelectedSelector,I.lastSelectedSelector).map(V=>({bounds:V,cells:k})),Zi=C=>({element:C,mergable:Y.none(),unmergable:Y.none(),selection:[C]}),zd=(C,k,I)=>({element:I,mergable:Ns(k,C,yo),unmergable:gi(C),selection:tu(C)}),Xa=C=>{const k=Xg(Y.none()),I=Xg([]);let V=Y.none();const Te=Ut("caption"),dt=Eo=>V.forall(er=>!er[Eo]),Ht=()=>qn(be(C),Cu(C)),xn=()=>qn(ql(C),Cu(C)),Io=()=>Ht().bind(Eo=>qc(Go(Fa(Eo),xn().bind(Fa),(er,Ha)=>ps(er,Ha)?Te(Eo)?Y.some(Zi(Eo)):Y.some(zd(_r(C),er,Eo)):Y.none()))),jo=Eo=>Fa(Eo.element).map(Ha=>{const Ic=Js.fromTable(Ha),Ol=En(Ic,Eo).getOr([]),Lc=We(Ol,(Di,Ru)=>(Ru.isLocked&&(Di.onAny=!0,Ru.column===0?Di.onFirst=!0:Ru.column+Ru.colspan>=Ic.grid.columns&&(Di.onLast=!0)),Di),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:th(Ic,Eo).isSome(),unmergeable:nh(Ic,Eo).isSome(),locked:Lc}}),cr=()=>{k.set(ld(Io)()),V=k.get().bind(jo),Ve(I.get(),bt)},Us=Eo=>(Eo(),I.set(I.get().concat([Eo])),()=>{I.set(Ee(I.get(),er=>er!==Eo))}),Qs=(Eo,er)=>Us(()=>k.get().fold(()=>{Eo.setEnabled(!1)},Ha=>{Eo.setEnabled(!er(Ha))})),ni=(Eo,er,Ha)=>Us(()=>k.get().fold(()=>{Eo.setEnabled(!1),Eo.setActive(!1)},Ic=>{Eo.setEnabled(!er(Ic)),Eo.setActive(Ha(Ic))})),ll=Eo=>V.exists(er=>er.locked[Eo]),Au=Eo=>Qs(Eo,er=>!1),dd=Eo=>Qs(Eo,er=>Te(er.element)),rh=Eo=>er=>Qs(er,Ha=>Te(Ha.element)||ll(Eo)),md=Eo=>er=>Qs(er,Ha=>Te(Ha.element)||Eo().isNone()),Ou=(Eo,er)=>Ha=>Qs(Ha,Ic=>Te(Ic.element)||Eo().isNone()||ll(er)),Wm=Eo=>Qs(Eo,er=>dt("mergeable")),Du=Eo=>Qs(Eo,er=>dt("unmergeable")),pi=Eo=>ni(Eo,Ft,er=>Fa(er.element,Cu(C)).exists(Ic=>cl(Ic,"caption"))),ah=(Eo,er)=>Ha=>ni(Ha,Ic=>Te(Ic.element),()=>C.queryCommandValue(Eo)===er),bp=ah("mceTableRowType","header"),Ev=ah("mceTableColType","th");return C.on("NodeChange ExecCommand TableSelectorChange",cr),{onSetupTable:Au,onSetupCellOrRow:dd,onSetupColumn:rh,onSetupPasteable:md,onSetupPasteableColumn:Ou,onSetupMergeable:Wm,onSetupUnmergeable:Du,resetTargets:cr,onSetupTableWithCaption:pi,onSetupTableRowHeaders:bp,onSetupTableColumnHeaders:Ev,targets:k.get}};var Vf=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Uf="x-tinymce/dom-table-",Wf=Uf+"rows",hi=Uf+"columns",pp=C=>{var k;const I=(k=Vf.read())!==null&&k!==void 0?k:[];return Be(I,V=>Y.from(V.getType(C)))},Ke=()=>pp(Wf),_a=()=>pp(hi),u1=(C,k)=>{C.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:xn=>xn("inserttable | cell row column | advtablesort | tableprops deletetable")});const I=xn=>()=>C.execCommand(xn),V=(xn,Io)=>{C.queryCommandSupported(Io.command)&&C.ui.registry.addButton(xn,{...Io,onAction:Zt(Io.onAction)?Io.onAction:I(Io.command)})},Te=(xn,Io)=>{C.queryCommandSupported(Io.command)&&C.ui.registry.addToggleButton(xn,{...Io,onAction:Zt(Io.onAction)?Io.onAction:I(Io.command)})};V("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:k.onSetupTable}),V("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:k.onSetupTable}),V("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:k.onSetupCellOrRow}),V("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:k.onSetupMergeable}),V("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:k.onSetupUnmergeable}),V("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:k.onSetupCellOrRow}),V("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:k.onSetupCellOrRow}),V("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:k.onSetupCellOrRow}),V("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:k.onSetupCellOrRow}),V("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:k.onSetupColumn("onFirst")}),V("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:k.onSetupColumn("onLast")}),V("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:k.onSetupColumn("onAny")}),V("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:k.onSetupCellOrRow}),V("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:k.onSetupCellOrRow}),V("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:k.onSetupPasteable(Ke)}),V("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:k.onSetupPasteable(Ke)}),V("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:k.onSetupColumn("onAny")}),V("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:k.onSetupColumn("onAny")}),V("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:k.onSetupPasteableColumn(_a,"onFirst")}),V("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:k.onSetupPasteableColumn(_a,"onLast")}),V("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const dt=lc(Ia(C));dt.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Xl(C,dt,"tableclass",xn=>C.execCommand("mceTableToggleClass",!1,xn)),onSetup:k.onSetupTable});const Ht=lc(El(C));Ht.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Xl(C,Ht,"tablecellclass",xn=>C.execCommand("mceTableCellToggleClass",!1,xn)),onSetup:k.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Xl(C,Qr,"tablecellverticalalign",Lo(C,"vertical-align")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Xl(C,Tl(C),"tablecellborderwidth",Lo(C,"border-width")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Xl(C,Gr(C),"tablecellborderstyle",Lo(C,"border-style")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:xn=>xn(ku(C,wu(C),"background-color")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:xn=>xn(ku(C,Pd(C),"border-color")),onSetup:k.onSetupCellOrRow})),Te("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),Te("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Jg(C),onSetup:k.onSetupTableRowHeaders}),Te("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Pm(C),onSetup:k.onSetupTableColumnHeaders})},yr=C=>{const k=V=>C.dom.is(V,"table")&&C.getBody().contains(V),I=nl(C);I.length>0&&C.ui.registry.addContextToolbar("table",{predicate:k,items:I,scope:"node",position:"node"})},il=(C,k)=>{const I=Us=>()=>C.execCommand(Us),V=(Us,Qs)=>C.queryCommandSupported(Qs.command)?(C.ui.registry.addMenuItem(Us,{...Qs,onAction:Zt(Qs.onAction)?Qs.onAction:I(Qs.command)}),!0):!1,Te=(Us,Qs)=>{C.queryCommandSupported(Qs.command)&&C.ui.registry.addToggleMenuItem(Us,{...Qs,onAction:Zt(Qs.onAction)?Qs.onAction:I(Qs.command)})},dt=Us=>{C.execCommand("mceInsertTable",!1,{rows:Us.numRows,columns:Us.numColumns})},Ht=[V("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:k.onSetupCellOrRow}),V("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:k.onSetupCellOrRow}),V("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:k.onSetupCellOrRow}),V("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:k.onSetupCellOrRow}),V("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:k.onSetupCellOrRow}),V("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:k.onSetupCellOrRow}),V("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:k.onSetupPasteable(Ke)}),V("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:k.onSetupPasteable(Ke)})],xn=[V("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:k.onSetupColumn("onFirst")}),V("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:k.onSetupColumn("onLast")}),V("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:k.onSetupColumn("onAny")}),V("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:k.onSetupColumn("onAny")}),V("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:k.onSetupColumn("onAny")}),V("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:k.onSetupPasteableColumn(_a,"onFirst")}),V("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:k.onSetupPasteableColumn(_a,"onLast")})],Io=[V("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:k.onSetupCellOrRow}),V("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:k.onSetupMergeable}),V("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:k.onSetupUnmergeable})];Vg(C)?C.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:dt}]}):C.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:I("mceInsertTableDialog")}),C.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:I("mceInsertTableDialog")}),V("tableprops",{text:"Table properties",onSetup:k.onSetupTable,command:"mceTableProps"}),V("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:k.onSetupTable,command:"mceTableDelete"}),nn(Ht,!0)&&C.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:qe("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),nn(xn,!0)&&C.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:qe("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),nn(Io,!0)&&C.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:qe("tablecellprops tablemergecells tablesplitcells")}),C.ui.registry.addContextMenu("table",{update:()=>(k.resetTargets(),k.targets().fold(qe(""),Us=>wn(Us.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const jo=lc(Ia(C));jo.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>hr(C,jo,"tableclass",Us=>C.execCommand("mceTableToggleClass",!1,Us)),onSetup:k.onSetupTable});const cr=lc(El(C));cr.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>hr(C,cr,"tablecellclass",Us=>C.execCommand("mceTableCellToggleClass",!1,Us)),onSetup:k.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>hr(C,Qr,"tablecellverticalalign",Lo(C,"vertical-align")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>hr(C,Tl(C),"tablecellborderwidth",Lo(C,"border-width")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>hr(C,Gr(C),"tablecellborderstyle",Lo(C,"border-style")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>ku(C,wu(C),"background-color"),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>ku(C,Pd(C),"border-color"),onSetup:k.onSetupCellOrRow})),Te("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),Te("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Jg(C),onSetup:k.onSetupTableRowHeaders}),Te("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Pm(C),onSetup:k.onSetupTableRowHeaders})},Aa=C=>{const k=Xa(C);Ir(C),Tv(C),il(C,k),u1(C,k),yr(C)};var Oa=()=>{Fo.add("table",Aa)};Oa()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const ko=(H,Z,$e)=>{var Be;return $e(H,Z.prototype)?!0:((Be=H.constructor)===null||Be===void 0?void 0:Be.name)===Z.name},mo=H=>{const Z=typeof H;return H===null?"null":Z==="object"&&Array.isArray(H)?"array":Z==="object"&&ko(H,String,($e,Be)=>Be.isPrototypeOf($e))?"string":Z},Jn=H=>Z=>mo(Z)===H,An=H=>Z=>typeof Z===H,so=Jn("string"),Qn=Jn("object"),qt=Jn("array"),Kt=H=>H==null,Ct=H=>!Kt(H),Tn=An("function"),ao=(H,Z)=>{if(qt(H)){for(let $e=0,Be=H.length;$e<Be;++$e)if(!Z(H[$e]))return!1;return!0}return!1},Zt=H=>()=>H;function yt(H,...Z){return(...$e)=>{const Be=Z.concat($e);return H.apply(null,Be)}}const Rt=Zt(!1),an=H=>H.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var qe=tinymce.util.Tools.resolve("tinymce.util.Tools");const rt=H=>Z=>Z.options.get(H),Oe=H=>{const Z=H.options.register;Z("template_cdate_classes",{processor:"string",default:"cdate"}),Z("template_mdate_classes",{processor:"string",default:"mdate"}),Z("template_selected_content_classes",{processor:"string",default:"selcontent"}),Z("template_preview_replace_values",{processor:"object"}),Z("template_replace_values",{processor:"object"}),Z("templates",{processor:$e=>so($e)||ao($e,Qn)||Tn($e),default:[]}),Z("template_cdate_format",{processor:"string",default:H.translate("%Y-%m-%d")}),Z("template_mdate_format",{processor:"string",default:H.translate("%Y-%m-%d")})},oe=rt("template_cdate_classes"),bt=rt("template_mdate_classes"),Ft=rt("template_selected_content_classes"),wt=rt("template_preview_replace_values"),Y=rt("template_replace_values"),At=rt("templates"),On=rt("template_cdate_format"),Nt=rt("template_mdate_format"),we=rt("content_style"),Q=rt("content_css_cors"),ct=rt("body_class"),Pe=(H,Z)=>{if(H=""+H,H.length<Z)for(let $e=0;$e<Z-H.length;$e++)H="0"+H;return H},Ne=(H,Z,$e=new Date)=>{const Be="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),zt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Jt="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),eo="January February March April May June July August September October November December".split(" ");return Z=Z.replace("%D","%m/%d/%Y"),Z=Z.replace("%r","%I:%M:%S %p"),Z=Z.replace("%Y",""+$e.getFullYear()),Z=Z.replace("%y",""+$e.getYear()),Z=Z.replace("%m",Pe($e.getMonth()+1,2)),Z=Z.replace("%d",Pe($e.getDate(),2)),Z=Z.replace("%H",""+Pe($e.getHours(),2)),Z=Z.replace("%M",""+Pe($e.getMinutes(),2)),Z=Z.replace("%S",""+Pe($e.getSeconds(),2)),Z=Z.replace("%I",""+(($e.getHours()+11)%12+1)),Z=Z.replace("%p",$e.getHours()<12?"AM":"PM"),Z=Z.replace("%B",""+H.translate(eo[$e.getMonth()])),Z=Z.replace("%b",""+H.translate(Jt[$e.getMonth()])),Z=Z.replace("%A",""+H.translate(zt[$e.getDay()])),Z=Z.replace("%a",""+H.translate(Be[$e.getDay()])),Z=Z.replace("%%","%"),Z};class Ot{constructor(Z,$e){this.tag=Z,this.value=$e}static some(Z){return new Ot(!0,Z)}static none(){return Ot.singletonNone}fold(Z,$e){return this.tag?$e(this.value):Z()}isSome(){return this.tag}isNone(){return!this.tag}map(Z){return this.tag?Ot.some(Z(this.value)):Ot.none()}bind(Z){return this.tag?Z(this.value):Ot.none()}exists(Z){return this.tag&&Z(this.value)}forall(Z){return!this.tag||Z(this.value)}filter(Z){return!this.tag||Z(this.value)?this:Ot.none()}getOr(Z){return this.tag?this.value:Z}or(Z){return this.tag?this:Z}getOrThunk(Z){return this.tag?this.value:Z()}orThunk(Z){return this.tag?this:Z()}getOrDie(Z){if(this.tag)return this.value;throw new Error(Z!=null?Z:"Called getOrDie on None")}static from(Z){return Ct(Z)?Ot.some(Z):Ot.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Z){this.tag&&Z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ot.singletonNone=new Ot(!1);const _=(H,Z)=>{for(let $e=0,Be=H.length;$e<Be;$e++){const zt=H[$e];if(Z(zt,$e))return!0}return!1},ge=(H,Z)=>{const $e=H.length,Be=new Array($e);for(let zt=0;zt<$e;zt++){const Jt=H[zt];Be[zt]=Z(Jt,zt)}return Be},Ue=(H,Z,$e)=>{for(let Be=0,zt=H.length;Be<zt;Be++){const Jt=H[Be];if(Z(Jt,Be))return Ot.some(Jt);if($e(Jt,Be))break}return Ot.none()},Ie=(H,Z)=>Ue(H,Z,Rt),_e=Object.hasOwnProperty,jt=(H,Z)=>nn(H,Z)?Ot.from(H[Z]):Ot.none(),nn=(H,Z)=>_e.call(H,Z),ze={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},It=H=>H.replace(/["'<>&]/g,Z=>jt(ze,Z).getOr(Z)),Et=(H,Z,$e)=>_($e.split(/\s+/),Be=>H.hasClass(Z,Be)),Ve=(H,Z)=>()=>{const $e=At(H);Tn($e)?$e(Z):so($e)?fetch($e).then(Be=>{Be.ok&&Be.json().then(Z)}):Z($e)},R=(H,Z)=>(qe.each(Z,($e,Be)=>{Tn($e)&&($e=$e(Be)),H=H.replace(new RegExp("\\{\\$"+an(Be)+"\\}","g"),$e)}),H),zn=(H,Z)=>{const $e=H.dom,Be=Y(H);qe.each($e.select("*",Z),zt=>{qe.each(Be,(Jt,eo)=>{$e.hasClass(zt,eo)&&Tn(Jt)&&Jt(zt)})})},Ee=(H,Z,$e)=>{const Be=H.dom,zt=H.selection.getContent();$e=R($e,Y(H));let Jt=Be.create("div",{},$e);const eo=Be.select(".mceTmpl",Jt);eo&&eo.length>0&&(Jt=Be.create("div"),Jt.appendChild(eo[0].cloneNode(!0))),qe.each(Be.select("*",Jt),co=>{Et(Be,co,oe(H))&&(co.innerHTML=Ne(H,On(H))),Et(Be,co,bt(H))&&(co.innerHTML=Ne(H,Nt(H))),Et(Be,co,Ft(H))&&(co.innerHTML=zt)}),zn(H,Jt),H.execCommand("mceInsertContent",!1,Jt.innerHTML),H.addVisual()};var xe=tinymce.util.Tools.resolve("tinymce.Env");const We=(H,Z)=>{var $e;if(Z.indexOf("<html>")===-1){let Be="";const zt=($e=we(H))!==null&&$e!==void 0?$e:"",Jt=Q(H)?' crossorigin="anonymous"':"";qe.each(H.contentCSS,Ye=>{Be+='<link type="text/css" rel="stylesheet" href="'+H.documentBaseURI.toAbsolute(Ye)+'"'+Jt+">"}),zt&&(Be+='<style type="text/css">'+zt+"</style>");const eo=ct(H),co=H.dom.encode,pn='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(xe.os.isMacOS()||xe.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",to=H.getBody().dir,De=to?' dir="'+co(to)+'"':"";Z='<!DOCTYPE html><html><head><base href="'+co(H.documentBaseURI.getURI())+'">'+Be+pn+'</head><body class="'+co(eo)+'"'+De+">"+Z+"</body></html>"}return R(Z,wt(H))},ke=(H,Z)=>{const $e=()=>{if(!Z||Z.length===0){const De=H.translate("No templates defined.");return H.notificationManager.open({text:De,type:"info"}),Ot.none()}return Ot.from(qe.map(Z,(De,Ye)=>{const Dt=on=>on.url!==void 0;return{selected:Ye===0,text:De.title,value:{url:Dt(De)?Ot.from(De.url):Ot.none(),content:Dt(De)?Ot.none():Ot.from(De.content),description:De.description}}}))},Be=De=>ge(De,Ye=>({text:Ye.text,value:Ye.text})),zt=(De,Ye)=>Ie(De,Dt=>Dt.text===Ye),Jt=De=>{H.windowManager.alert("Could not load the specified template.",()=>De.focus("template"))},eo=De=>De.value.url.fold(()=>Promise.resolve(De.value.content.getOr("")),Ye=>fetch(Ye).then(Dt=>Dt.ok?Dt.text():Promise.reject())),co=(De,Ye)=>(Dt,on)=>{if(on.name==="template"){const wn=Dt.getData().template;zt(De,wn).each(bn=>{Dt.block("Loading..."),eo(bn).then(Oo=>{Ye(Dt,bn,Oo)}).catch(()=>{Ye(Dt,bn,""),Dt.setEnabled("save",!1),Jt(Dt)})})}},jn=De=>Ye=>{const Dt=Ye.getData();zt(De,Dt.template).each(on=>{eo(on).then(wn=>{H.execCommand("mceInsertTemplate",!1,wn),Ye.close()}).catch(()=>{Ye.setEnabled("save",!1),Jt(Ye)})})},pn=De=>{const Ye=Be(De),Dt=(bn,Oo)=>({title:"Insert Template",size:"large",body:{type:"panel",items:bn},initialData:Oo,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:jn(De),onChange:co(De,on)}),on=(bn,Oo,xs)=>{const Ge=We(H,xs),Le=[{type:"selectbox",name:"template",label:"Templates",items:Ye},{type:"htmlpanel",html:`<p aria-live="polite">${It(Oo.value.description)}</p>`},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1,transparent:!1}],tn={template:Oo.text,preview:Ge};bn.unblock(),bn.redial(Dt(Le,tn)),bn.focus("template")},wn=H.windowManager.open(Dt([],{template:"",preview:""}));wn.block("Loading..."),eo(De[0]).then(bn=>{on(wn,De[0],bn)}).catch(()=>{on(wn,De[0],""),wn.setEnabled("save",!1),Jt(wn)})};$e().each(pn)},ae=H=>Z=>{ke(H,Z)},se=H=>{H.addCommand("mceInsertTemplate",yt(Ee,H)),H.addCommand("mceTemplate",Ve(H,ae(H)))},re=H=>{H.on("PreProcess",Z=>{const $e=H.dom,Be=Nt(H);qe.each($e.select("div",Z.node),zt=>{$e.hasClass(zt,"mceTmpl")&&(qe.each($e.select("*",zt),Jt=>{Et($e,Jt,bt(H))&&(Jt.innerHTML=Ne(H,Be))}),zn(H,zt))})})},z=H=>{const Z=()=>H.execCommand("mceTemplate");H.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:Z}),H.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:Z})};var K=()=>{Fo.add("template",H=>{Oe(H),z(H),se(H),re(H)})};K()})();(function(){const Fo=Zt=>{let yt=Zt;return{get:()=>yt,set:qe=>{yt=qe}}};var ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=(Zt,yt)=>{Zt.dispatch("VisualBlocks",{state:yt})},Jn=(Zt,yt,Rt)=>{Zt.dom.toggleClass(Zt.getBody(),"mce-visualblocks"),Rt.set(!Rt.get()),mo(Zt,Rt.get())},An=(Zt,yt,Rt)=>{Zt.addCommand("mceVisualBlocks",()=>{Jn(Zt,yt,Rt)})},so=Zt=>yt=>yt.options.get(Zt),Qn=Zt=>{const yt=Zt.options.register;yt("visualblocks_default_state",{processor:"boolean",default:!1})},qt=so("visualblocks_default_state"),Kt=(Zt,yt,Rt)=>{Zt.on("PreviewFormats AfterPreviewFormats",an=>{Rt.get()&&Zt.dom.toggleClass(Zt.getBody(),"mce-visualblocks",an.type==="afterpreviewformats")}),Zt.on("init",()=>{qt(Zt)&&Jn(Zt,yt,Rt)})},Ct=(Zt,yt)=>Rt=>{Rt.setActive(yt.get());const an=qe=>Rt.setActive(qe.state);return Zt.on("VisualBlocks",an),()=>Zt.off("VisualBlocks",an)},Tn=(Zt,yt)=>{const Rt=()=>Zt.execCommand("mceVisualBlocks");Zt.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:Rt,onSetup:Ct(Zt,yt)}),Zt.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:Rt,onSetup:Ct(Zt,yt)})};var ao=()=>{ko.add("visualblocks",(Zt,yt)=>{Qn(Zt);const Rt=Fo(!1);An(Zt,yt,Rt),Tn(Zt,Rt),Kt(Zt,yt,Rt)})};ao()})();(function(){const Fo=Ge=>{let Le=Ge;return{get:()=>Le,set:Ut=>{Le=Ut}}};var ko=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=Ge=>({isEnabled:()=>Ge.get()}),Jn=(Ge,Le)=>Ge.dispatch("VisualChars",{state:Le}),An=(Ge,Le,tn)=>{var en;return tn(Ge,Le.prototype)?!0:((en=Ge.constructor)===null||en===void 0?void 0:en.name)===Le.name},so=Ge=>{const Le=typeof Ge;return Ge===null?"null":Le==="object"&&Array.isArray(Ge)?"array":Le==="object"&&An(Ge,String,(tn,en)=>en.isPrototypeOf(tn))?"string":Le},Qn=Ge=>Le=>so(Le)===Ge,qt=Ge=>Le=>typeof Le===Ge,Kt=Ge=>Le=>Ge===Le,Ct=Qn("string"),Tn=Kt(null),ao=qt("boolean"),Zt=Ge=>Ge==null,yt=Ge=>!Zt(Ge),Rt=qt("number");class an{constructor(Le,tn){this.tag=Le,this.value=tn}static some(Le){return new an(!0,Le)}static none(){return an.singletonNone}fold(Le,tn){return this.tag?tn(this.value):Le()}isSome(){return this.tag}isNone(){return!this.tag}map(Le){return this.tag?an.some(Le(this.value)):an.none()}bind(Le){return this.tag?Le(this.value):an.none()}exists(Le){return this.tag&&Le(this.value)}forall(Le){return!this.tag||Le(this.value)}filter(Le){return!this.tag||Le(this.value)?this:an.none()}getOr(Le){return this.tag?this.value:Le}or(Le){return this.tag?this:Le}getOrThunk(Le){return this.tag?this.value:Le()}orThunk(Le){return this.tag?this:Le()}getOrDie(Le){if(this.tag)return this.value;throw new Error(Le!=null?Le:"Called getOrDie on None")}static from(Le){return yt(Le)?an.some(Le):an.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Le){this.tag&&Le(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}an.singletonNone=new an(!1);const qe=(Ge,Le)=>{const tn=Ge.length,en=new Array(tn);for(let Ut=0;Ut<tn;Ut++){const Vn=Ge[Ut];en[Ut]=Le(Vn,Ut)}return en},rt=(Ge,Le)=>{for(let tn=0,en=Ge.length;tn<en;tn++){const Ut=Ge[tn];Le(Ut,tn)}},Oe=(Ge,Le)=>{const tn=[];for(let en=0,Ut=Ge.length;en<Ut;en++){const Vn=Ge[en];Le(Vn,en)&&tn.push(Vn)}return tn},oe=Object.keys,bt=(Ge,Le)=>{const tn=oe(Ge);for(let en=0,Ut=tn.length;en<Ut;en++){const Vn=tn[en],ks=Ge[Vn];Le(ks,Vn)}};typeof window<"u"||Function("return this;")();const Ft=3,wt=Ge=>Ge.dom.nodeType,Y=Ge=>Ge.dom.nodeValue,On=(Ge=>Le=>wt(Le)===Ge)(Ft),Nt=(Ge,Le,tn)=>{if(Ct(tn)||ao(tn)||Rt(tn))Ge.setAttribute(Le,tn+"");else throw console.error("Invalid call to Attribute.set. Key ",Le,":: Value ",tn,":: Element ",Ge),new Error("Attribute value was not simple")},we=(Ge,Le,tn)=>{Nt(Ge.dom,Le,tn)},Q=(Ge,Le)=>{const tn=Ge.dom.getAttribute(Le);return tn===null?void 0:tn},ct=(Ge,Le)=>{Ge.dom.removeAttribute(Le)},Pe=(Ge,Le)=>{const tn=Q(Ge,Le);return tn===void 0||tn===""?[]:tn.split(" ")},Ne=(Ge,Le,tn)=>{const Ut=Pe(Ge,Le).concat([tn]);return we(Ge,Le,Ut.join(" ")),!0},Ot=(Ge,Le,tn)=>{const en=Oe(Pe(Ge,Le),Ut=>Ut!==tn);return en.length>0?we(Ge,Le,en.join(" ")):ct(Ge,Le),!1},_=Ge=>Ge.dom.classList!==void 0,ge=Ge=>Pe(Ge,"class"),Ue=(Ge,Le)=>Ne(Ge,"class",Le),Ie=(Ge,Le)=>Ot(Ge,"class",Le),_e=(Ge,Le)=>{_(Ge)?Ge.dom.classList.add(Le):Ue(Ge,Le)},jt=Ge=>{(_(Ge)?Ge.dom.classList:ge(Ge)).length===0&&ct(Ge,"class")},nn=(Ge,Le)=>{_(Ge)?Ge.dom.classList.remove(Le):Ie(Ge,Le),jt(Ge)},ze=(Ge,Le)=>{const en=(Le||document).createElement("div");if(en.innerHTML=Ge,!en.hasChildNodes()||en.childNodes.length>1){const Ut="HTML does not have a single root node";throw console.error(Ut,Ge),new Error(Ut)}return Ve(en.childNodes[0])},It=(Ge,Le)=>{const en=(Le||document).createElement(Ge);return Ve(en)},Et=(Ge,Le)=>{const en=(Le||document).createTextNode(Ge);return Ve(en)},Ve=Ge=>{if(Ge==null)throw new Error("Node cannot be null or undefined");return{dom:Ge}},zn={fromHtml:ze,fromTag:It,fromText:Et,fromDom:Ve,fromPoint:(Ge,Le,tn)=>an.from(Ge.dom.elementFromPoint(Le,tn)).map(Ve)},Ee={"\xA0":"nbsp","\xAD":"shy"},xe=(Ge,Le)=>{let tn="";return bt(Ge,(en,Ut)=>{tn+=Ut}),new RegExp("["+tn+"]",Le?"g":"")},We=Ge=>{let Le="";return bt(Ge,tn=>{Le&&(Le+=","),Le+="span.mce-"+tn}),Le},ke=xe(Ee),ae=xe(Ee,!0),se=We(Ee),re="mce-nbsp",z=Ge=>'<span data-mce-bogus="1" class="mce-'+Ee[Ge]+'">'+Ge+"</span>",K=Ge=>{const Le=Y(Ge);return On(Ge)&&Ct(Le)&&ke.test(Le)},H=(Ge,Le)=>{let tn=[];const en=Ge.dom,Ut=qe(en.childNodes,zn.fromDom);return rt(Ut,Vn=>{Le(Vn)&&(tn=tn.concat([Vn])),tn=tn.concat(H(Vn,Le))}),tn},Z=(Ge,Le)=>{for(;Ge.parentNode;){if(Ge.parentNode===Le)return Le;Ge=Ge.parentNode}},$e=Ge=>Ge.replace(ae,z),Be=Ge=>Ge.nodeName.toLowerCase()==="span"&&Ge.classList.contains("mce-nbsp-wrap"),zt=(Ge,Le)=>{const tn=Ge.dom,en=H(zn.fromDom(Le),K);rt(en,Ut=>{var Vn;const ks=Ut.dom.parentNode;if(Be(ks))_e(zn.fromDom(ks),re);else{const kr=$e(tn.encode((Vn=Y(Ut))!==null&&Vn!==void 0?Vn:"")),da=tn.create("div",{},kr);let ps;for(;ps=da.lastChild;)tn.insertAfter(ps,Ut.dom);Ge.dom.remove(Ut.dom)}})},Jt=(Ge,Le)=>{const tn=Ge.dom.select(se,Le);rt(tn,en=>{Be(en)?nn(zn.fromDom(en),re):Ge.dom.remove(en,!0)})},eo=Ge=>{const Le=Ge.getBody(),tn=Ge.selection.getBookmark();let en=Z(Ge.selection.getNode(),Le);en=en!==void 0?en:Le,Jt(Ge,en),zt(Ge,en),Ge.selection.moveToBookmark(tn)},co=(Ge,Le)=>{Jn(Ge,Le.get());const tn=Ge.getBody();Le.get()===!0?zt(Ge,tn):Jt(Ge,tn)},jn=(Ge,Le)=>{Le.set(!Le.get());const tn=Ge.selection.getBookmark();co(Ge,Le),Ge.selection.moveToBookmark(tn)},pn=(Ge,Le)=>{Ge.addCommand("mceVisualChars",()=>{jn(Ge,Le)})},to=Ge=>Le=>Le.options.get(Ge),De=Ge=>{const Le=Ge.options.register;Le("visualchars_default_state",{processor:"boolean",default:!1})},Ye=to("visualchars_default_state"),Dt=(Ge,Le)=>{Ge.on("init",()=>{co(Ge,Le)})},on=(Ge,Le)=>{let tn=null;return{cancel:()=>{Tn(tn)||(clearTimeout(tn),tn=null)},throttle:(...Vn)=>{Tn(tn)&&(tn=setTimeout(()=>{tn=null,Ge.apply(null,Vn)},Le))}}},wn=(Ge,Le)=>{const tn=on(()=>{eo(Ge)},300);Ge.on("keydown",en=>{Le.get()===!0&&(en.keyCode===13?eo(Ge):tn.throttle())}),Ge.on("remove",tn.cancel)},bn=(Ge,Le)=>tn=>{tn.setActive(Le.get());const en=Ut=>tn.setActive(Ut.state);return Ge.on("VisualChars",en),()=>Ge.off("VisualChars",en)},Oo=(Ge,Le)=>{const tn=()=>Ge.execCommand("mceVisualChars");Ge.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:tn,onSetup:bn(Ge,Le)}),Ge.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:tn,onSetup:bn(Ge,Le)})};var xs=()=>{ko.add("visualchars",Ge=>{De(Ge);const Le=Fo(Ye(Ge));return pn(Ge,Le),Oo(Ge,Le),wn(Ge,Le),Dt(Ge,Le),mo(Le)})};xs()})();(function(){var Fo=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=(ae=>se=>ae===se)(null),Jn=ae=>ae,An="\uFEFF",so=ae=>ae.replace(/\uFEFF/g,""),Qn=(ae,se)=>{const re=ae.length,z=new Array(re);for(let K=0;K<re;K++){const H=ae[K];z[K]=se(H,K)}return z},Kt={aletter:"[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F3\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1A00-\u1A16\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BC0-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u24B6-\u24E9\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u303B\u303C\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790\uA791\uA7A0-\uA7A9\uA7FA-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]",midnumlet:"[-'\\.\u2018\u2019\u2024\uFE52\uFF07\uFF0E]",midletter:"[:\xB7\xB7\u05F4\u2027\uFE13\uFE55\uFF1A]",midnum:"[\xB1+*/,;;\u0589\u060C\u060D\u066C\u07F8\u2044\uFE10\uFE14\uFE50\uFE54\uFF0C\uFF1B]",numeric:"[0-9\u0660-\u0669\u066B\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9]",cr:"\\r",lf:"\\n",newline:"[\v\f\x85\u2028\u2029]",extend:"[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0900-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D02\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B6-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAA\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2\u1DC0-\u1DE6\u1DFC-\u1DFF\u200C\u200D\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA67C\uA67D\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE26\uFF9E\uFF9F]",format:"[\xAD\u0600-\u0603\u06DD\u070F\u17B4\u17B5\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\uFEFF\uFFF9-\uFFFB]",katakana:"[\u3031-\u3035\u309B\u309C\u30A0-\u30FA\u30FC-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\uFF66-\uFF9D]",extendnumlet:"[=_\u203F\u2040\u2054\uFE33\uFE34\uFE4D-\uFE4F\uFF3F\u2200-\u22FF<>]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}\xA1\xAB\xB7\xBB\xBF;\xB7\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1361-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u3008\u3009\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30\u2E31\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]"},Ct={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},Tn=[new RegExp(Kt.aletter),new RegExp(Kt.midnumlet),new RegExp(Kt.midletter),new RegExp(Kt.midnum),new RegExp(Kt.numeric),new RegExp(Kt.cr),new RegExp(Kt.lf),new RegExp(Kt.newline),new RegExp(Kt.extend),new RegExp(Kt.format),new RegExp(Kt.katakana),new RegExp(Kt.extendnumlet),new RegExp("@")],ao="",Zt=new RegExp("^"+Kt.punctuation+"$"),yt=/^\s+$/,Rt=Tn,an=Ct.OTHER,qe=ae=>{let se=an;const re=Rt.length;for(let z=0;z<re;++z){const K=Rt[z];if(K&&K.test(ae)){se=z;break}}return se},rt=ae=>{const se={};return re=>{if(se[re])return se[re];{const z=ae(re);return se[re]=z,z}}},Oe=ae=>{const se=rt(qe);return Qn(ae,se)},oe=(ae,se)=>{const re=ae[se],z=ae[se+1];if(se<0||se>ae.length-1&&se!==0||re===Ct.ALETTER&&z===Ct.ALETTER)return!1;const K=ae[se+2];if(re===Ct.ALETTER&&(z===Ct.MIDLETTER||z===Ct.MIDNUMLET||z===Ct.AT)&&K===Ct.ALETTER)return!1;const H=ae[se-1];return(re===Ct.MIDLETTER||re===Ct.MIDNUMLET||z===Ct.AT)&&z===Ct.ALETTER&&H===Ct.ALETTER||(re===Ct.NUMERIC||re===Ct.ALETTER)&&(z===Ct.NUMERIC||z===Ct.ALETTER)||(re===Ct.MIDNUM||re===Ct.MIDNUMLET)&&z===Ct.NUMERIC&&H===Ct.NUMERIC||re===Ct.NUMERIC&&(z===Ct.MIDNUM||z===Ct.MIDNUMLET)&&K===Ct.NUMERIC||re===Ct.EXTEND||re===Ct.FORMAT||H===Ct.EXTEND||H===Ct.FORMAT||z===Ct.EXTEND||z===Ct.FORMAT||re===Ct.CR&&z===Ct.LF?!1:re===Ct.NEWLINE||re===Ct.CR||re===Ct.LF||z===Ct.NEWLINE||z===Ct.CR||z===Ct.LF?!0:!(re===Ct.KATAKANA&&z===Ct.KATAKANA||z===Ct.EXTENDNUMLET&&(re===Ct.ALETTER||re===Ct.NUMERIC||re===Ct.KATAKANA||re===Ct.EXTENDNUMLET)||re===Ct.EXTENDNUMLET&&(z===Ct.ALETTER||z===Ct.NUMERIC||z===Ct.KATAKANA)||re===Ct.AT)},bt=ao,Ft=yt,wt=Zt,Y=ae=>ae==="http"||ae==="https",At=(ae,se)=>{let re;for(re=se;re<ae.length&&!Ft.test(ae[re]);re++);return re},On=(ae,se)=>{const re=At(ae,se+1);return ae.slice(se+1,re).join(bt).substr(0,3)==="://"?re:se},Nt=(ae,se,re,z)=>{const K=[];let H=[];for(let Z=0;Z<re.length;++Z)if(H.push(ae[Z]),oe(re,Z)){const $e=se[Z];if((z.includeWhitespace||!Ft.test($e))&&(z.includePunctuation||!wt.test($e))){const Be=Z-H.length+1,zt=Z+1,Jt=se.slice(Be,zt).join(bt);if(Y(Jt)){const eo=On(se,Z),co=ae.slice(zt,eo);Array.prototype.push.apply(H,co),Z=eo}K.push(H)}H=[]}return K},we=()=>({includeWhitespace:!1,includePunctuation:!1}),ct=(ae,se,re)=>{re={...we(),...re};const z=[],K=[];for(let Z=0;Z<ae.length;Z++){const $e=se(ae[Z]);$e!==An&&(z.push(ae[Z]),K.push($e))}const H=Oe(K);return Nt(z,K,H,re)};var Pe=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Ne=(ae,se)=>{const re=se.getBlockElements(),z=se.getVoidElements(),K=zt=>re[zt.nodeName]||z[zt.nodeName],H=[];let Z="";const $e=new Pe(ae,ae);let Be;for(;Be=$e.next();)Be.nodeType===3?Z+=so(Be.data):K(Be)&&Z.length&&(H.push(Z),Z="");return Z.length&&H.push(Z),H},Ot=ae=>ae.replace(/\u200B/g,""),_=ae=>ae.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,ge=(ae,se)=>{const re=Ot(Ne(ae,se).join(`
`));return ct(re.split(""),Jn).length},Ue=(ae,se)=>{const re=Ne(ae,se).join("");return _(re)},Ie=(ae,se)=>{const re=Ne(ae,se).join("").replace(/\s/g,"");return _(re)},_e=(ae,se)=>()=>se(ae.getBody(),ae.schema),jt=(ae,se)=>()=>se(ae.selection.getRng().cloneContents(),ae.schema),nn=ae=>_e(ae,ge),ze=ae=>({body:{getWordCount:nn(ae),getCharacterCount:_e(ae,Ue),getCharacterCountWithoutSpaces:_e(ae,Ie)},selection:{getWordCount:jt(ae,ge),getCharacterCount:jt(ae,Ue),getCharacterCountWithoutSpaces:jt(ae,Ie)},getCount:nn(ae)}),It=(ae,se)=>{ae.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(se.body.getWordCount()),String(se.selection.getWordCount())],["Characters (no spaces)",String(se.body.getCharacterCountWithoutSpaces()),String(se.selection.getCharacterCountWithoutSpaces())],["Characters",String(se.body.getCharacterCount()),String(se.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Et=(ae,se)=>{ae.addCommand("mceWordCount",()=>It(ae,se))},Ve=(ae,se)=>{let re=null;return{cancel:()=>{mo(re)||(clearTimeout(re),re=null)},throttle:(...H)=>{mo(re)&&(re=setTimeout(()=>{re=null,ae.apply(null,H)},se))}}};var R=tinymce.util.Tools.resolve("tinymce.util.Delay");const zn=(ae,se)=>{ae.dispatch("wordCountUpdate",{wordCount:{words:se.body.getWordCount(),characters:se.body.getCharacterCount(),charactersWithoutSpaces:se.body.getCharacterCountWithoutSpaces()}})},Ee=(ae,se)=>{zn(ae,se)},xe=(ae,se,re)=>{const z=Ve(()=>Ee(ae,se),re);ae.on("init",()=>{Ee(ae,se),R.setEditorTimeout(ae,()=>{ae.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",z.throttle)},0),ae.on("remove",z.cancel)})},We=ae=>{const se=()=>ae.execCommand("mceWordCount");ae.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:se}),ae.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:se})};var ke=(ae=300)=>{Fo.add("wordcount",se=>{const re=ze(se);return Et(se,re),We(se),xe(se,re,ae),re})};ke()})();export{TZ as t};
